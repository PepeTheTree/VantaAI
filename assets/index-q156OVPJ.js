const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-I4_eSXJt.js","assets/webworkerAll-DS0FPETp.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Ol(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v0={exports:{}},Rh={};var hR;function ZH(){if(hR)return Rh;hR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Rh.Fragment=e,Rh.jsx=t,Rh.jsxs=t,Rh}var dR;function QH(){return dR||(dR=1,v0.exports=ZH()),v0.exports}var B=QH();const JH="modulepreload",ej=function(n){return"/"+n},fR={},zs=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(t.map(h=>{if(h=ej(h),h in fR)return;fR[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":JH,d||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((y,_)=>{g.addEventListener("load",y),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var q=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(q||{});const dv=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},id=(n,e)=>dv(n).priority??e,ze={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(dv).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(dv).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,i=this._queue;r[t]?r[t]?.(e):(i[t]=i[t]||[],i[t]?.push(e))})}),this},handle(n,e,t){const r=this._addHandlers,i=this._removeHandlers;if(r[n]||i[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,i[n]=t;const s=this._queue;return s[n]&&(s[n]?.forEach(a=>e(a)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,r=>{e.findIndex(s=>s.name===r.name)>=0||(e.push({name:r.name,value:r.ref}),e.sort((s,a)=>id(a.value,t)-id(s.value,t)))},r=>{const i=e.findIndex(s=>s.name===r.name);i!==-1&&e.splice(i,1)})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>id(s,t)-id(i,t)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},CO={extension:{type:q.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await zs(()=>import("./browserAll-I4_eSXJt.js"),__vite__mapDeps([0,1]))}},TO={extension:{type:q.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await zs(()=>import("./webworkerAll-DS0FPETp.js"),[])}};class gn{constructor(e,t,r){this._x=t||0,this._y=r||0,this._observer=e}clone(e){return new gn(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var S0={exports:{}},pR;function tj(){return pR||(pR=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,h,d){this.fn=c,this.context=h,this.once=d||!1}function s(c,h,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,p||c,g),_=t?t+h:h;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],y]:c._events[_].push(y):(c._events[_]=y,c._eventsCount++),c}function a(c,h){--c._eventsCount===0?c._events=new r:delete c._events[h]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],d,p;if(this._eventsCount===0)return h;for(p in d=this._events)e.call(d,p)&&h.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},l.prototype.listeners=function(h){var d=t?t+h:h,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,_=new Array(y);g<y;g++)_[g]=p[g].fn;return _},l.prototype.listenerCount=function(h){var d=t?t+h:h,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(h,d,p,g,y,_){var S=t?t+h:h;if(!this._events[S])return!1;var x=this._events[S],E=arguments.length,w,C;if(x.fn){switch(x.once&&this.removeListener(h,x.fn,void 0,!0),E){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,p),!0;case 4:return x.fn.call(x.context,d,p,g),!0;case 5:return x.fn.call(x.context,d,p,g,y),!0;case 6:return x.fn.call(x.context,d,p,g,y,_),!0}for(C=1,w=new Array(E-1);C<E;C++)w[C-1]=arguments[C];x.fn.apply(x.context,w)}else{var A=x.length,P;for(C=0;C<A;C++)switch(x[C].once&&this.removeListener(h,x[C].fn,void 0,!0),E){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,d);break;case 3:x[C].fn.call(x[C].context,d,p);break;case 4:x[C].fn.call(x[C].context,d,p,g);break;default:if(!w)for(P=1,w=new Array(E-1);P<E;P++)w[P-1]=arguments[P];x[C].fn.apply(x[C].context,w)}}return!0},l.prototype.on=function(h,d,p){return s(this,h,d,p,!1)},l.prototype.once=function(h,d,p){return s(this,h,d,p,!0)},l.prototype.removeListener=function(h,d,p,g){var y=t?t+h:h;if(!this._events[y])return this;if(!d)return a(this,y),this;var _=this._events[y];if(_.fn)_.fn===d&&(!g||_.once)&&(!p||_.context===p)&&a(this,y);else{for(var S=0,x=[],E=_.length;S<E;S++)(_[S].fn!==d||g&&!_[S].once||p&&_[S].context!==p)&&x.push(_[S]);x.length?this._events[y]=x.length===1?x[0]:x:a(this,y)}return this},l.prototype.removeAllListeners=function(h){var d;return h?(d=t?t+h:h,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(S0)),S0.exports}var nj=tj();const hr=Ol(nj),AO=Math.PI*2,MO=180/Math.PI,RO=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return E0.x=0,E0.y=0,E0}}const E0=new Bt;class Ce{constructor(e=1,t=0,r=0,i=1,s=0,a=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,i,s,a){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new Bt;const r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t}applyInverse(e,t){t=t||new Bt;const r=this.a,i=this.b,s=this.c,a=this.d,l=this.tx,c=this.ty,h=1/(r*a+s*-i),d=e.x,p=e.y;return t.x=a*h*d+-s*h*p+(c*s-l*a)*h,t.y=r*h*p+-i*h*d+(-c*r+l*i)*h,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=s*t-this.d*r,this.d=s*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this}append(e){const t=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}appendFrom(e,t){const r=e.a,i=e.b,s=e.c,a=e.d,l=e.tx,c=e.ty,h=t.a,d=t.b,p=t.c,g=t.d;return this.a=r*h+i*p,this.b=r*d+i*g,this.c=s*h+a*p,this.d=s*d+a*g,this.tx=l*h+c*p+t.tx,this.ty=l*d+c*g+t.ty,this}setTransform(e,t,r,i,s,a,l,c,h){return this.a=Math.cos(l+h)*s,this.b=Math.sin(l+h)*s,this.c=-Math.sin(l-c)*a,this.d=Math.cos(l-c)*a,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,i=this.c,s=this.d,a=e.pivot,l=-Math.atan2(-i,s),c=Math.atan2(r,t),h=Math.abs(l+c);return h<1e-5||Math.abs(AO-h)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=c),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(a.x*t+a.y*i),e.position.y=this.ty+(a.x*r+a.y*s),e}invert(){const e=this.a,t=this.b,r=this.c,i=this.d,s=this.tx,a=e*i-t*r;return this.a=i/a,this.b=-t/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-i*s)/a,this.ty=-(e*this.ty-t*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ce;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return ij.identity()}static get shared(){return rj.identity()}}const rj=new Ce,ij=new Ce,ol=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ll=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ul=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],cl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],fv=[],PO=[],Fp=Math.sign;function sj(){for(let n=0;n<16;n++){const e=[];fv.push(e);for(let t=0;t<16;t++){const r=Fp(ol[n]*ol[t]+ul[n]*ll[t]),i=Fp(ll[n]*ol[t]+cl[n]*ll[t]),s=Fp(ol[n]*ul[t]+ul[n]*cl[t]),a=Fp(ll[n]*ul[t]+cl[n]*cl[t]);for(let l=0;l<16;l++)if(ol[l]===r&&ll[l]===i&&ul[l]===s&&cl[l]===a){e.push(l);break}}}for(let n=0;n<16;n++){const e=new Ce;e.set(ol[n],ll[n],ul[n],cl[n],0,0),PO.push(e)}}sj();const Xe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>ol[n],uY:n=>ll[n],vX:n=>ul[n],vY:n=>cl[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>fv[n][e],sub:(n,e)=>fv[n][Xe.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Xe.S:Xe.N:Math.abs(e)*2<=Math.abs(n)?n>0?Xe.E:Xe.W:e>0?n>0?Xe.SE:Xe.SW:n>0?Xe.NE:Xe.NW,matrixAppendRotationInv:(n,e,t=0,r=0,i=0,s=0)=>{const a=PO[Xe.inv(e)],l=a.a,c=a.b,h=a.c,d=a.d,p=t-Math.min(0,l*i,h*s,l*i+h*s),g=r-Math.min(0,c*i,d*s,c*i+d*s),y=n.a,_=n.b,S=n.c,x=n.d;n.a=l*y+c*S,n.b=l*_+c*x,n.c=h*y+d*S,n.d=h*_+d*x,n.tx=p*y+g*S+n.tx,n.ty=p*_+g*x+n.ty},transformRectCoords:(n,e,t,r)=>{const{x:i,y:s,width:a,height:l}=n,{x:c,y:h,width:d,height:p}=e;return t===Xe.E?(r.set(i+c,s+h,a,l),r):t===Xe.S?r.set(d-s-l+c,i+h,l,a):t===Xe.W?r.set(d-i-a+c,p-s-l+h,a,l):t===Xe.N?r.set(s+c,p-i-a+h,l,a):r.set(i+c,s+h,a,l)}},Up=[new Bt,new Bt,new Bt,new Bt];class Rt{constructor(e=0,t=0,r=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Rt(0,0,0,0)}clone(){return new Rt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,r,i=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const l=this.x,c=this.y,h=r*(1-i),d=r-h,p=l-h,g=l+s+h,y=c-h,_=c+a+h,S=l+d,x=l+s-d,E=c+d,w=c+a-d;return e>=p&&e<=g&&t>=y&&t<=_&&!(e>S&&e<x&&t>E&&t<w)}intersects(e,t){if(!t){const V=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=V)return!1;const D=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>D}const r=this.left,i=this.right,s=this.top,a=this.bottom;if(i<=r||a<=s)return!1;const l=Up[0].set(e.left,e.top),c=Up[1].set(e.left,e.bottom),h=Up[2].set(e.right,e.top),d=Up[3].set(e.right,e.bottom);if(h.x<=l.x||c.y<=l.y)return!1;const p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(l,l),t.apply(c,c),t.apply(h,h),t.apply(d,d),Math.max(l.x,c.x,h.x,d.x)<=r||Math.min(l.x,c.x,h.x,d.x)>=i||Math.max(l.y,c.y,h.y,d.y)<=s||Math.min(l.y,c.y,h.y,d.y)>=a))return!1;const g=p*(c.y-l.y),y=p*(l.x-c.x),_=g*r+y*s,S=g*i+y*s,x=g*r+y*a,E=g*i+y*a;if(Math.max(_,S,x,E)<=g*l.x+y*l.y||Math.min(_,S,x,E)>=g*d.x+y*d.y)return!1;const w=p*(l.y-h.y),C=p*(h.x-l.x),A=w*r+C*s,P=w*i+C*s,M=w*r+C*a,I=w*i+C*a;return!(Math.max(A,P,M,I)<=w*l.x+C*l.y||Math.min(A,P,M,I)>=w*d.x+C*d.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=s-i,this}getBounds(e){return e||(e=new Rt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,r=e.y,i=e.x+e.width,s=e.y+e.height;return t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height&&i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,t,r,i){return this.x=e,this.y=t,this.width=r,this.height=i,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const cd={default:-1};function Zt(n="default"){return cd[n]===void 0&&(cd[n]=-1),++cd[n]}function aj(){for(const n in cd)delete cd[n]}const mR=new Set,nt="8.0.0",BO="8.3.4",Uu={quiet:!1,noColor:!1},Ae=((n,e,t=3)=>{if(Uu.quiet||mR.has(e))return;let r=new Error().stack;const i=`${e}
Deprecated since v${n}`,s=typeof console.groupCollapsed=="function"&&!Uu.noColor;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",i):(r=r.split(`
`).splice(t).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i),console.warn(r))),mR.add(e)});Object.defineProperties(Ae,{quiet:{get:()=>Uu.quiet,set:n=>{Uu.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>Uu.noColor,set:n=>{Uu.noColor=n},enumerable:!0,configurable:!1}});const x1=()=>{};function Ml(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function pv(n){return!(n&n-1)&&!!n}function oj(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function xs(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const gR=Object.create(null);function lj(n){const e=gR[n];return e===void 0&&(gR[n]=Zt("resource")),e}const DO=class kO extends hr{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...kO.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Ae(nt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=lj(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};DO.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Di=DO;const OO=class IO extends hr{constructor(e={}){super(),this.options=e,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=Zt("textureSource"),this._resourceType="textureSource",this._resourceId=Zt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.viewDimension="2d",this.arrayLayerCount=1,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...IO.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.viewDimension=e.viewDimension??e.dimensions,this.arrayLayerCount=e.arrayLayerCount,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Di(xs(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Zt("resource"),this.emit("change",this),this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,r){r||(r=this._resolution),e||(e=this.width),t||(t=this.height);const i=Math.round(e*r),s=Math.round(t*r);return this.width=i/r,this.height=s/r,this._resolution=r,this.pixelWidth===i&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Zt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=pv(this.pixelWidth)&&pv(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};OO.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",viewDimension:"2d",arrayLayerCount:1,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let yn=OO;class Qg extends yn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let r=e.format;r||(t instanceof Float32Array?r="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?r="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?r="rgba16uint":(t instanceof Int8Array,r="bgra8unorm")),super({...e,resource:t,format:r}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Qg.extension=q.TextureSource;const yR=new Ce;class v1{constructor(e,t){this.mapCoord=new Ce,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],a=e[i+1];t[i]=s*r.a+a*r.c+r.tx,t[i+1]=s*r.b+a*r.d+r.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const r=e.orig,i=e.trim;i&&(yR.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(yR));const s=e.source,a=this.uClampFrame,l=this.clampMargin/s._resolution,c=this.clampOffset/s._resolution;return a[0]=(e.frame.x+l+c)/s.width,a[1]=(e.frame.y+l+c)/s.height,a[2]=(e.frame.x+e.frame.width-l+c)/s.width,a[3]=(e.frame.y+e.frame.height-l+c)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class we extends hr{constructor({source:e,label:t,frame:r,orig:i,trim:s,defaultAnchor:a,defaultBorders:l,rotate:c,dynamic:h}={}){if(super(),this.uid=Zt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Rt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new yn,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:d,height:p}=this._source;this.frame.width=d,this.frame.height=p}this.orig=i||this.frame,this.trim=s,this.rotate=c??0,this.defaultAnchor=a,this.defaultBorders=l,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new v1(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:r,height:i}=this._source,s=t.x/r,a=t.y/i,l=t.width/r,c=t.height/i;let h=this.rotate;if(h){const d=l/2,p=c/2,g=s+d,y=a+p;h=Xe.add(h,Xe.NW),e.x0=g+d*Xe.uX(h),e.y0=y+p*Xe.uY(h),h=Xe.add(h,2),e.x1=g+d*Xe.uX(h),e.y1=y+p*Xe.uY(h),h=Xe.add(h,2),e.x2=g+d*Xe.uX(h),e.y2=y+p*Xe.uY(h),h=Xe.add(h,2),e.x3=g+d*Xe.uX(h),e.y3=y+p*Xe.uY(h)}else e.x0=s,e.y0=a,e.x1=s+l,e.y1=a,e.x2=s+l,e.y2=a+c,e.x3=s,e.y3=a+c}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Ae(nt,"Texture.baseTexture is now Texture.source"),this._source}}we.EMPTY=new we({label:"EMPTY",source:new yn({label:"EMPTY"})});we.EMPTY.destroy=x1;we.WHITE=new we({source:new Qg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});we.WHITE.destroy=x1;function S1(n,e,t){const{width:r,height:i}=t.orig,s=t.trim;if(s){const a=s.width,l=s.height;n.minX=s.x-e._x*r,n.maxX=n.minX+a,n.minY=s.y-e._y*i,n.maxY=n.minY+l}else n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*i,n.maxY=n.minY+i}const _R=new Ce;class Qn{constructor(e=1/0,t=1/0,r=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=_R,this.minX=e,this.minY=t,this.maxX=r,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Rt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=_R,this}set(e,t,r,i){this.minX=e,this.minY=t,this.maxX=r,this.maxY=i}addFrame(e,t,r,i,s){s||(s=this.matrix);const a=s.a,l=s.b,c=s.c,h=s.d,d=s.tx,p=s.ty;let g=this.minX,y=this.minY,_=this.maxX,S=this.maxY,x=a*e+c*t+d,E=l*e+h*t+p;x<g&&(g=x),E<y&&(y=E),x>_&&(_=x),E>S&&(S=E),x=a*r+c*t+d,E=l*r+h*t+p,x<g&&(g=x),E<y&&(y=E),x>_&&(_=x),E>S&&(S=E),x=a*e+c*i+d,E=l*e+h*i+p,x<g&&(g=x),E<y&&(y=E),x>_&&(_=x),E>S&&(S=E),x=a*r+c*i+d,E=l*r+h*i+p,x<g&&(g=x),E<y&&(y=E),x>_&&(_=x),E>S&&(S=E),this.minX=g,this.minY=y,this.maxX=_,this.maxY=S}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,r=this.minY,i=this.maxX,s=this.maxY,{a,b:l,c,d:h,tx:d,ty:p}=e;let g=a*t+c*r+d,y=l*t+h*r+p;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=a*i+c*r+d,y=l*i+h*r+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*t+c*s+d,y=l*t+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*i+c*s+d,y=l*i+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,r,i){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<r&&(this.minY=r),this.maxY>i&&(this.maxY=i),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Qn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,r,i){let s=this.minX,a=this.minY,l=this.maxX,c=this.maxY;i||(i=this.matrix);const h=i.a,d=i.b,p=i.c,g=i.d,y=i.tx,_=i.ty;for(let S=t;S<r;S+=2){const x=e[S],E=e[S+1],w=h*x+p*E+y,C=d*x+g*E+_;s=w<s?w:s,a=C<a?C:a,l=w>l?w:l,c=C>c?C:c}this.minX=s,this.minY=a,this.maxX=l,this.maxY=c}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var uj={grad:.9,turn:360,rad:360/(2*Math.PI)},ya=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},lr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Qi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},NO=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},bR=function(n){return{r:Qi(n.r,0,255),g:Qi(n.g,0,255),b:Qi(n.b,0,255),a:Qi(n.a)}},w0=function(n){return{r:lr(n.r),g:lr(n.g),b:lr(n.b),a:lr(n.a,3)}},cj=/^#([0-9a-f]{3,8})$/i,Gp=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},LO=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),l=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:60*(l<0?l+6:l),s:s?a/s*100:0,v:s/255*100,a:i}},FO=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),l=r*(1-(e-s)*t),c=r*(1-(1-e+s)*t),h=s%6;return{r:255*[r,l,a,a,c,r][h],g:255*[c,r,r,l,a,a][h],b:255*[a,a,c,r,r,l][h],a:i}},xR=function(n){return{h:NO(n.h),s:Qi(n.s,0,100),l:Qi(n.l,0,100),a:Qi(n.a)}},vR=function(n){return{h:lr(n.h),s:lr(n.s),l:lr(n.l),a:lr(n.a,3)}},SR=function(n){return FO((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},hd=function(n){return{h:(e=LO(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},hj=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dj=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mv={string:[[function(n){var e=cj.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?lr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?lr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=fj.exec(n)||pj.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:bR({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=hj.exec(n)||dj.exec(n);if(!e)return null;var t,r,i=xR({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(uj[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return SR(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return ya(e)&&ya(t)&&ya(r)?bR({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!ya(e)||!ya(t)||!ya(r))return null;var a=xR({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return SR(a)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!ya(e)||!ya(t)||!ya(r))return null;var a=(function(l){return{h:NO(l.h),s:Qi(l.s,0,100),v:Qi(l.v,0,100),a:Qi(l.a)}})({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return FO(a)},"hsv"]]},ER=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},mj=function(n){return typeof n=="string"?ER(n.trim(),mv.string):typeof n=="object"&&n!==null?ER(n,mv.object):[null,void 0]},C0=function(n,e){var t=hd(n);return{h:t.h,s:Qi(t.s+100*e,0,100),l:t.l,a:t.a}},T0=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},wR=function(n,e){var t=hd(n);return{h:t.h,s:t.s,l:Qi(t.l+100*e,0,100),a:t.a}},gv=(function(){function n(e){this.parsed=mj(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return lr(T0(this.rgba),2)},n.prototype.isDark=function(){return T0(this.rgba)<.5},n.prototype.isLight=function(){return T0(this.rgba)>=.5},n.prototype.toHex=function(){return e=w0(this.rgba),t=e.r,r=e.g,i=e.b,a=(s=e.a)<1?Gp(lr(255*s)):"","#"+Gp(t)+Gp(r)+Gp(i)+a;var e,t,r,i,s,a},n.prototype.toRgb=function(){return w0(this.rgba)},n.prototype.toRgbString=function(){return e=w0(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return vR(hd(this.rgba))},n.prototype.toHslString=function(){return e=vR(hd(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=LO(this.rgba),{h:lr(e.h),s:lr(e.s),v:lr(e.v),a:lr(e.a,3)};var e},n.prototype.invert=function(){return Bs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Bs(C0(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Bs(C0(this.rgba,-e))},n.prototype.grayscale=function(){return Bs(C0(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Bs(wR(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Bs(wR(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Bs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):lr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=hd(this.rgba);return typeof e=="number"?Bs({h:e,s:t.s,l:t.l,a:t.a}):lr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Bs(e).toHex()},n})(),Bs=function(n){return n instanceof gv?n:new gv(n)},CR=[],gj=function(n){n.forEach(function(e){CR.indexOf(e)<0&&(e(gv,mv),CR.push(e))})};function yj(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,c,h=r[this.toHex()];if(h)return h;if(a?.closest){var d=this.toRgb(),p=1/0,g="black";if(!s.length)for(var y in t)s[y]=new n(t[y]).toRgb();for(var _ in t){var S=(l=d,c=s[_],Math.pow(l.r-c.r,2)+Math.pow(l.g-c.g,2)+Math.pow(l.b-c.b,2));S<p&&(p=S,g=_)}return g}},e.string.push([function(a){var l=a.toLowerCase(),c=l==="transparent"?"#0000":t[l];return c?new n(c).toRgb():null},"name"])}gj([yj]);const ac=class sd{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof sd)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(l=>e[l]===t[l])}return e===t}toRgba(){const[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,r,i,s]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,t,r]=this.toUint8RgbArray();return(r<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,i,s]=sd._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,r=(a>>8&255)/255,i=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,s=255]=e,t/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=sd.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const a=Bs(e);a.isValid()&&({r:t,g:r,b:i,a:s}=a.rgba,t/=255,r/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),r)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof sd||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};ac.shared=new ac;ac._temp=new ac;ac.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let yt=ac;const UO={cullArea:null,cullable:!1,cullableChildren:!0};let A0=0;const TR=500;function Ue(...n){A0!==TR&&(A0++,A0===TR?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Il={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class GO{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class zO{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new GO(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const r=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[r]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Gn=new zO;Il.register(Gn);const VO={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Ae("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function E1(n,e,t){const r=n.length;let i;if(e>=r||t===0)return;t=e+t>r?r-e:t;const s=r-t;for(i=e;i<s;++i)n[i]=n[i+t];n.length=s}const HO={allowChildren:!0,removeChildren(n=0,e){const t=e??this.children.length,r=t-n,i=[];if(r>0&&r<=t){for(let a=t-1;a>=n;a--){const l=this.children[a];l&&(i.push(l),l.parent=null)}E1(this.children,n,t);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(i);for(let a=0;a<i.length;++a){const l=i[a];l.parentRenderLayer?.detach(l),this.emit("childRemoved",l,this,a),i[a].emit("removed",this)}return i.length>0&&this._didViewChangeTick++,i}else if(r===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||Ae(nt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const i=n.parent.children.indexOf(n);if(n.parent===this&&i===e)return n;i!==-1&&n.parent.children.splice(i,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),r=this.getChildIndex(e);this.children[t]=e,this.children[r]=n;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const r=this.worldTransform.clone();return r.invert(),t.prepend(r),n.setFromMatrix(t),n},replaceChild(n,e){n.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(n)),e.setFromMatrix(n.localTransform),e.updateLocalTransform(),this.removeChild(n)}},jO={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const r=this.children,i=r.length;for(let s=0;s<i;s++)r[s].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:r}=e;for(let i=0;i<this.effects.length;i++){const s=this.effects[i];r[s.pipe].push(s,this,n)}this.collectRenderablesSimple(n,e,t);for(let i=this.effects.length-1;i>=0;i--){const s=this.effects[i];r[s.pipe].pop(s,this,n)}}};class Cd{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class XO{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const r=this._tests[t];if(r.test(e))return Gn.get(r.maskClass,e)}return e}returnMaskEffect(e){Gn.return(e)}}const dg=new XO;ze.handleByList(q.MaskEffect,dg._effectClasses);const WO={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,r)=>t.priority-r.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;e?.mask!==n&&(e&&(this.removeEffect(e),dg.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=dg.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new Cd);n=n;const t=n?.length>0,r=e.filters?.length>0,i=t!==r;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),i&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new Cd),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},$O={label:null,get name(){return Ae(nt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Ae(nt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let r=0;r<t.length;r++){const i=t[r];if(i.label===n||n instanceof RegExp&&n.test(i.label))return i}if(e)for(let r=0;r<t.length;r++){const s=t[r].getChildByLabel(n,!0);if(s)return s}return null},getChildrenByLabel(n,e=!1,t=[]){const r=this.children;for(let i=0;i<r.length;i++){const s=r[i];(s.label===n||n instanceof RegExp&&n.test(s.label))&&t.push(s)}if(e)for(let i=0;i<r.length;i++)r[i].getChildrenByLabel(n,!0,t);return t}},Mr=Gn.getPool(Ce),Vs=Gn.getPool(Qn),_j=new Ce,qO={getFastGlobalBounds(n,e){e||(e=new Qn),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let r=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(r=Vs.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;r.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(n,r,t)}if(i){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let l=0;l<this.effects.length;l++)this.effects[l].addBounds&&(s||(s=!0,r.applyMatrix(a.worldTransform)),this.effects[l].addBounds(r,!0));s&&r.applyMatrix(a.worldTransform.copyTo(_j).invert()),e.addBounds(r),Vs.return(r)}else this.renderGroup&&(e.addBounds(r,this.relativeGroupTransform),Vs.return(r))}};function Kd(n,e,t){t.clear();let r,i;return n.parent?e?r=n.parent.worldTransform:(i=Mr.get().identity(),r=Jg(n,i)):r=Ce.IDENTITY,YO(n,t,r,e),i&&Mr.return(i),t.isValid||t.set(0,0,0,0),t}function YO(n,e,t,r){if(!n.visible||!n.measurable)return;let i;r?i=n.worldTransform:(n.updateLocalTransform(),i=Mr.get(),i.appendFrom(n.localTransform,t));const s=e,a=!!n.effects.length;if(a&&(e=Vs.get().clear()),n.boundsArea)e.addRect(n.boundsArea,i);else{const l=n.bounds;l&&!l.isEmpty()&&(e.matrix=i,e.addBounds(l));for(let c=0;c<n.children.length;c++)YO(n.children[c],e,i,r)}if(a){for(let l=0;l<n.effects.length;l++)n.effects[l].addBounds?.(e);s.addBounds(e,Ce.IDENTITY),Vs.return(e)}r||Mr.return(i)}function Jg(n,e){const t=n.parent;return t&&(Jg(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function Ta(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,r=n>>8&255,i=n&255,s=e>>16&255,a=e>>8&255,l=e&255,c=t*s/255|0,h=r*a/255|0,d=i*l/255|0;return(c<<16)+(h<<8)+d}const AR=16777215;function Td(n,e){return n===AR?e:e===AR?n:Ta(n,e)}function Hs(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const KO={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n=new Ce,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Jg(this,Mr.get().identity());return n.appendFrom(this.localTransform,t),Mr.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?Hs(this.renderGroup.worldColor):this.parentRenderGroup?Hs(Td(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Td(e,t.localColor),t=t.parent;return Hs(e)}};function ey(n,e,t){return e.clear(),t||(t=Ce.IDENTITY),ZO(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function ZO(n,e,t,r,i){let s;if(i)s=Mr.get(),s=t.copyTo(s);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const c=n.localTransform;s=Mr.get(),s.appendFrom(c,t)}const a=e,l=!!n.effects.length;if(l&&(e=Vs.get().clear()),n.boundsArea)e.addRect(n.boundsArea,s);else{n.renderPipeId&&(e.matrix=s,e.addBounds(n.bounds));const c=n.children;for(let h=0;h<c.length;h++)ZO(c[h],e,s,r,!1)}if(l){for(let c=0;c<n.effects.length;c++)n.effects[c].addLocalBounds?.(e,r);a.addBounds(e,Ce.IDENTITY),Vs.return(e)}Mr.return(s)}function w1(n,e){const t=n.children;for(let r=0;r<t.length;r++){const i=t[r],s=i.uid,a=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,l=e.index;(e.data[l]!==s||e.data[l+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=l+2,i.children.length&&w1(i,e)}return e.didChange}const bj=new Ce,QO={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Qn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),w1(this,n),n.didChange&&ey(this,n.localBounds,bj),n.localBounds},getBounds(n,e){return Kd(this,n,e||new Qn)}},JO={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},eI={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(xj))}};function xj(n,e){return n._zIndex-e._zIndex}const tI={getGlobalPosition(n=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const r=this.getGlobalTransform(Mr.get(),t);return e=r.apply(n,e),Mr.return(r),e},toLocal(n,e,t,r){e&&(n=e.toGlobal(n,t,r));const i=this.getGlobalTransform(Mr.get(),r);return t=i.applyInverse(n,t),Mr.return(i),t}};class ty{constructor(){this.uid=Zt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let vj=0;class nI{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Di(this.textureOptions)}createTexture(e,t,r){const i=new yn({...this.textureOptions,width:e,height:t,resolution:1,antialias:r,autoGarbageCollect:!1});return new we({source:i,label:`texturePool_${vj++}`})}getOptimalTexture(e,t,r=1,i){let s=Math.ceil(e*r-1e-6),a=Math.ceil(t*r-1e-6);s=Ml(s),a=Ml(a);const l=(s<<17)+(a<<1)+(i?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let c=this._texturePool[l].pop();return c||(c=this.createTexture(s,a,i)),c.source._resolution=r,c.source.width=s/r,c.source.height=a/r,c.source.pixelWidth=s,c.source.pixelHeight=a,c.frame.x=0,c.frame.y=0,c.frame.width=e,c.frame.height=t,c.updateUvs(),this._poolKeyHash[c.uid]=l,c}getSameSizeTexture(e,t=!1){const r=e.source;return this.getOptimalTexture(e.width,e.height,r._resolution,t)}returnTexture(e,t=!1){const r=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[r].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const r=this._texturePool[t];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this._texturePool={}}}const Dn=new nI;Il.register(Dn);class fg{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Ce,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new ty,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Dn.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let r=0;r<t.length;r++)this.addChild(t[r])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let r=0;r<t.length;r++)this.removeChild(t[r])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let r=0;r<t.length;r++)this._getChildren(t[r],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const r=e.children;for(let i=0;i<r.length;i++)this._getChildren(r[i],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Ce),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Ce),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Ce),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function pg(n,e,t={}){for(const r in e)!t[r]&&e[r]!==void 0&&(n[r]=e[r])}const M0=new gn(null),zp=new gn(null),R0=new gn(null,1,1),Vp=new gn(null),Ad=1,ny=2,Wu=4,Sj=8;class bn extends hr{constructor(e={}){super(),this.uid=Zt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Ce,this.relativeGroupTransform=new Ce,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new gn(this,0,0),this._scale=R0,this._pivot=zp,this._origin=Vp,this._skew=M0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],pg(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){Ae("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ze.mixin(bn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Ae(nt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const t=e[0],r=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),r&&(r.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,r&&r.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const t=e[0],r=this.children.indexOf(t);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,r),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=Gn.get(fg,this),this.groupTransform=Ce.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),Gn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Ce),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*MO}set angle(e){this.rotation=e*RO}get pivot(){return this._pivot===zp&&(this._pivot=new gn(this,0,0)),this._pivot}set pivot(e){this._pivot===zp&&(this._pivot=new gn(this,0,0),this._origin!==Vp&&Ue("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===M0&&(this._skew=new gn(this,0,0)),this._skew}set skew(e){this._skew===M0&&(this._skew=new gn(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===R0&&(this._scale=new gn(this,1,1)),this._scale}set scale(e){this._scale===R0&&(this._scale=new gn(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Vp&&(this._origin=new gn(this,0,0)),this._origin}set origin(e){this._origin===Vp&&(this._origin=new gn(this,0,0),this._pivot!==zp&&Ue("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const r=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,r.width),t!==void 0&&this._setHeight(t,r.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,r=this._scale,i=this._pivot,s=this._origin,a=this._position,l=r._x,c=r._y,h=i._x,d=i._y,p=-s._x,g=-s._y;t.a=this._cx*l,t.b=this._sx*l,t.c=this._cy*c,t.d=this._sy*c,t.tx=a._x-(h*t.a+d*t.c)+(p*t.a+g*t.c)-p,t.ty=a._y-(h*t.b+d*t.d)+(p*t.b+g*t.d)-g}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Ad,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const r=yt.shared.setValue(e??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=Ad,this._onUpdate())}get tint(){return Hs(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ny,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Wu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Wu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Wu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let i=0;i<t.length;++i)t[i].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}ze.mixin(bn,HO,qO,tI,JO,QO,WO,$O,eI,UO,VO,KO,jO);class qs extends bn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Qn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:r,y:i}=e;return r>=t.minX&&r<=t.maxX&&i>=t.minY&&i<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,r){const{renderPipes:i}=t;i.blendMode.pushBlendMode(this,this.groupBlendMode,e);const a=i[this.renderPipeId];a?.addRenderable&&a.addRenderable(this,e),this.didViewUpdate=!1;const l=this.children,c=l.length;for(let h=0;h<c;h++)l[h].collectRenderables(e,t,r);i.blendMode.popBlendMode(e)}}class vs extends qs{constructor(e=we.EMPTY){e instanceof we&&(e={texture:e});const{texture:t=we.EMPTY,anchor:r,roundPixels:i,width:s,height:a,...l}=e;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new gn({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=i??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,t=!1){return e instanceof we?new vs(e):new vs(we.from(e,t))}set texture(e){e||(e=we.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return S1(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Ae("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,r=this._bounds,{width:i,height:s}=t.orig;r.minX=-e._x*i,r.maxX=r.minX+i,r.minY=-e._y*s,r.maxY=r.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const Ej=new Qn;function ry(n,e,t){const r=Ej;n.measurable=!0,Kd(n,t,r),e.addBoundsMask(r),n.measurable=!1}function iy(n,e,t){const r=Vs.get();n.measurable=!0;const i=Mr.get().identity(),s=rI(n,t,i);ey(n,r,s),n.measurable=!1,e.addBoundsMask(r),Mr.return(i),Vs.return(r)}function rI(n,e,t){return n?(n!==e&&(rI(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(Ue("Mask bounds, renderable is not inside the root container"),t)}class C1{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof vs),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||ry(this.mask,e,t)}addLocalBounds(e,t){iy(this.mask,e,t)}containsPoint(e,t){const r=this.mask;return t(r,e)}destroy(){this.reset()}static test(e){return e instanceof vs}}C1.extension=q.MaskEffect;class T1{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}T1.extension=q.MaskEffect;class A1{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){ry(this.mask,e,t)}addLocalBounds(e,t){iy(this.mask,e,t)}containsPoint(e,t){const r=this.mask;return t(r,e)}destroy(){this.reset()}static test(e){return e instanceof bn}}A1.extension=q.MaskEffect;const iI={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let MR=iI;const je={get(){return MR},set(n){MR=n}};class ms extends yn{constructor(e){e.resource||(e.resource=je.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,r=this._resolution){const i=super.resize(e,t,r);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}ms.extension=q.TextureSource;class So extends yn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}So.extension=q.TextureSource;var Ws=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ws||{});class Im{constructor(e,t=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=r,this._once=i}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const sI=class Mi{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Im(null,null,1/0),this.deltaMS=1/Mi.targetFPMS,this.elapsedMS=1/Mi.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Ws.NORMAL){return this._addListener(new Im(e,t,r))}addOnce(e,t,r=Ws.NORMAL){return this._addListener(new Im(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Mi.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Mi.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Mi._shared){const e=Mi._shared=new Mi;e.autoStart=!0,e._protected=!0}return Mi._shared}static get system(){if(!Mi._system){const e=Mi._system=new Mi;e.autoStart=!0,e._protected=!0}return Mi._system}};sI.targetFPMS=.06;let Zn=sI,P0;async function M1(){return P0??(P0=(async()=>{const e=je.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!t)return"premultiply-alpha-on-upload";const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(i),e.deleteTexture(r),e.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),P0}const sy=class aI extends yn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...aI.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Zn.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await M1(),this._load=new Promise((r,i)=>{this.isValid?r(this):(this._resolve=r,this._reject=i,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Zn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Zn.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Zn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};sy.extension=q.TextureSource;sy.defaultOptions={...yn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};sy.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let $u=sy;const Zi=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n);class wj{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ue(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=Zi(e);let i;for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];if(h.test(t)){i=h.getCacheableAssets(r,t);break}}const s=new Map(Object.entries(i||{}));i||r.forEach(c=>{s.set(c,t)});const a=[...s.keys()],l={cacheKeys:a,keys:r};r.forEach(c=>{this._cacheMap.set(c,l)}),a.forEach(c=>{const h=i?i[c]:t;this._cache.has(c)&&this._cache.get(c)!==h&&Ue("[Cache] already has key:",c),this._cache.set(c,s.get(c))})}remove(e){if(!this._cacheMap.has(e)){Ue(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const At=new wj,yv=[];ze.handleByList(q.TextureSource,yv);function Cj(n={}){return R1(n)}function R1(n={}){const e=n&&n.resource,t=e?n.resource:n,r=e?n:{resource:n};for(let i=0;i<yv.length;i++){const s=yv[i];if(s.test(t))return new s(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function oI(n={},e=!1){const t=n&&n.resource,r=t?n.resource:n,i=t?n:{resource:n};if(!e&&At.has(r))return At.get(r);const s=new we({source:R1(i)});return s.on("destroy",()=>{At.has(r)&&At.remove(r)}),e||At.set(r,s),s}function lI(n,e=!1){return typeof n=="string"?At.get(n):n instanceof yn?new we({source:n}):oI(n,e)}we.from=lI;yn.from=R1;ze.add(C1,T1,A1,$u,So,ms,Qg);var Oi=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Oi||{});function us(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Ph(n){return n.split("?")[0].split("#")[0]}function Tj(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Aj(n,e,t){return n.replace(new RegExp(Tj(e),"g"),t)}function Mj(n,e){let t="",r=0,i=-1,s=0,a=-1;for(let l=0;l<=n.length;++l){if(l<n.length)a=n.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||s===1))if(i!==l-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const c=t.lastIndexOf("/");if(c!==t.length-1){c===-1?(t="",r=0):(t=t.slice(0,c),r=t.length-1-t.lastIndexOf("/")),i=l,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,i=l,s=0;continue}}}else t.length>0?t+=`/${n.slice(i+1,l)}`:t=n.slice(i+1,l),r=l-i-1;i=l,s=0}else a===46&&s!==-1?++s:s=-1}return t}const ci={toPosix(n){return Aj(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){us(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(us(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=Ph(this.toPosix(e??je.get().getBaseUrl())),i=Ph(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?ci.join(i,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(us(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const r=n.endsWith("/");return n=Mj(n),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return us(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const r=n[t];if(us(r),r.length>0)if(e===void 0)e=r;else{const i=n[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(us(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let r=-1,i=!0;const s=this.getProtocol(n),a=n;n=n.slice(s.length);for(let l=n.length-1;l>=1;--l)if(e=n.charCodeAt(l),e===47){if(!i){r=l;break}}else i=!1;return r===-1?t?"/":this.isUrl(a)?s+n:s:t&&r===1?"//":s+n.slice(0,r)},rootname(n){us(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){us(n),e&&us(e),n=Ph(this.toPosix(n));let t=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let a=e.length-1,l=-1;for(s=n.length-1;s>=0;--s){const c=n.charCodeAt(s);if(c===47){if(!i){t=s+1;break}}else l===-1&&(i=!1,l=s+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=s):(a=-1,r=l))}return t===r?r=l:r===-1&&(r=n.length),n.slice(t,r)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){t=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":n.slice(t,r)},extname(n){us(n),n=Ph(this.toPosix(n));let e=-1,t=0,r=-1,i=!0,s=0;for(let a=n.length-1;a>=0;--a){const l=n.charCodeAt(a);if(l===47){if(!i){t=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){us(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Ph(this.toPosix(n));let t=n.charCodeAt(0);const r=this.isAbsolute(n);let i;e.root=this.rootname(n),r||this.hasProtocol(n)?i=1:i=0;let s=-1,a=0,l=-1,c=!0,h=n.length-1,d=0;for(;h>=i;--h){if(t=n.charCodeAt(h),t===47){if(!c){a=h+1;break}continue}l===-1&&(c=!1,l=h+1),t===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===a+1?l!==-1&&(a===0&&r?e.base=e.name=n.slice(1,l):e.base=e.name=n.slice(a,l)):(a===0&&r?(e.name=n.slice(1,s),e.base=n.slice(1,l)):(e.name=n.slice(a,s),e.base=n.slice(a,l)),e.ext=n.slice(s,l)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function uI(n,e,t,r,i){const s=e[t];for(let a=0;a<s.length;a++){const l=s[a];t<e.length-1?uI(n.replace(r[t],l),e,t+1,r,i):i.push(n.replace(r[t],l))}}function cI(n){const e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){const i=[];t.forEach(s=>{const a=s.substring(1,s.length-1).split(",");i.push(a)}),uI(n,i,0,t,r)}else r.push(n);return r}const Md=n=>!Array.isArray(n);class Ao{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,src:r}=e;return Zi(t||r,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>a?.src??a):s?.src?s.src:s,!0)}addManifest(e){this._manifest&&Ue("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];let i=t;Array.isArray(t)||(i=Object.entries(t).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),i.forEach(s=>{const a=s.src,l=s.alias;let c;if(typeof l=="string"){const h=this._createBundleAssetId(e,l);r.push(h),c=[l,h]}else{const h=l.map(d=>this._createBundleAssetId(e,d));r.push(...h),c=[...l,...h]}this.add({...s,alias:c,src:a})}),this._bundles[e]=r}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let r;r=s=>{this.hasKey(s)&&Ue(`[Resolver] already has key: ${s} overwriting`)},Zi(t).forEach(s=>{const{src:a}=s;let{data:l,format:c,loadParser:h,parser:d}=s;const p=Zi(a).map(S=>typeof S=="string"?cI(S):Array.isArray(S)?S:[S]),g=this.getAlias(s);Array.isArray(g)?g.forEach(r):r(g);const y=[],_=S=>{const x=this._parsers.find(E=>E.test(S));return{src:S,...x?.parse(S)}};p.forEach(S=>{S.forEach(x=>{let E={};if(typeof x!="object"?E=_(x):(l=x.data??l,c=x.format??c,(x.loadParser||x.parser)&&(h=x.loadParser??h,d=x.parser??d),E={..._(x.src),...x}),!g)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this._buildResolvedAsset(E,{aliases:g,data:l,format:c,loadParser:h,parser:d,progressSize:s.progressSize}),y.push(E)})}),g.forEach(S=>{this._assetMap[S]=y})})}resolveBundle(e){const t=Md(e);e=Zi(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const a=this.resolve(s),l={};for(const c in a){const h=a[c];l[this._extractAssetIdFromBundle(i,c)]=h}r[i]=l}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const i in t)r[i]=t[i].src;return r}return t.src}resolve(e){const t=Md(e);e=Zi(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const a=this._getPreferredOrder(s);a?.priority.forEach(l=>{a.params[l].forEach(c=>{const h=s.filter(d=>d[l]?d[l]===c:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[t],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:r,data:i,loadParser:s,parser:a,format:l,progressSize:c}=t;return(this._basePath||this._rootPath)&&(e.src=ci.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.parser=a??e.parser,e.format=l??e.format??hI(e.src),c!==void 0&&(e.progressSize=c),e}}Ao.RETINA_PREFIX=/@([0-9\.]+)x/;function hI(n){return n.split(".").pop().split("?").shift().split("#").shift()}const mg=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},dI=class ad{constructor(e,t){this.linkedSheets=[];let r=e;e?.source instanceof yn&&(r={texture:e,data:t});const{texture:i,data:s,cachePrefix:a=""}=r;this.cachePrefix=a,this._texture=i instanceof we?i:null,this.textureSource=i.source,this.textures={},this.animations={},this.data=s;const l=parseFloat(s.meta.scale);l?(this.resolution=l,i.source.resolution=this.resolution):this.resolution=i.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ad.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}parseSync(){return this._processFrames(0,!0),this._processAnimations(),this.textures}_processFrames(e,t=!1){let r=e;const i=t?1/0:ad.BATCH_SIZE;for(;r-e<i&&r<this._frameKeys.length;){const s=this._frameKeys[r],a=this._frames[s],l=a.frame;if(l){let c=null,h=null;const d=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,p=new Rt(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);a.rotated?c=new Rt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):c=new Rt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new Rt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[s]=new we({source:this.textureSource,frame:c,orig:p,trim:h,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:s.toString()})}r++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const i=e[t][r];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ad.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ad.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};dI.BATCH_SIZE=1e3;let _v=dI;const Rj=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function fI(n,e,t){const r={};if(n.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=ci.dirname(n[0]);e.linkedSheets.forEach((s,a)=>{const l=fI([`${i}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(r,l)})}return r}const pI={extension:q.Asset,cache:{test:n=>n instanceof _v,getCacheableAssets:(n,e)=>fI(n,e,!1)},resolver:{extension:{type:q.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),r=t.pop(),i=t.pop();return r==="json"&&Rj.includes(i)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(Ao.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:q.LoadParser,priority:Oi.Normal,name:"spritesheetLoader"},async testParse(n,e){return ci.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:r,imageFilename:i,textureOptions:s,cachePrefix:a}=e?.data??{};let l=ci.dirname(e.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let c;if(r instanceof we)c=r;else{const p=mg(l+(i??n.meta.image),e.src);c=(await t.load([{src:p,data:s}]))[p]}const h=new _v({texture:c.source,data:n,cachePrefix:a});await h.parse();const d=n?.meta?.related_multi_packs;if(Array.isArray(d)){const p=[];for(const y of d){if(typeof y!="string")continue;let _=l+y;e.data?.ignoreMultiPack||(_=mg(_,e.src),p.push(t.load({src:_,data:{textureOptions:s,ignoreMultiPack:!0}})))}const g=await Promise.all(p);h.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[h].concat(h.linkedSheets.filter(_=>_!==y))})}return h},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};ze.add(pI);class P1{constructor(e){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const t=this._canvas.getBoundingClientRect(),r=this._canvas.width,i=this._canvas.height,s=t.width/r*this._renderer.resolution,a=t.height/i*this._renderer.resolution,l=t.left,c=t.top,h=`translate(${l}px, ${c}px) scale(${s}, ${a})`;h!==this._lastTransform&&(this._domElement.style.transform=h,this._lastTransform=h)},this._domElement=e.domElement,this._renderer=e.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(e=>{for(const t of e){if(t.target!==this._canvas)continue;const r=this.canvas.width,i=this.canvas.height,s=t.contentRect.width/r*this._renderer.resolution,a=t.contentRect.height/i*this._renderer.resolution;(this._lastScaleX!==s||this._lastScaleY!==a)&&(this.updateTranslation(),this._lastScaleX=s,this._lastScaleY=a)}}),this._observer.observe(this._canvas)):this._tickerAttached||Zn.shared.add(this.updateTranslation,this,Ws.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&Zn.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}class bc{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=bc.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Bt,this.page=new Bt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var B0=/iPhone/i,RR=/iPod/i,PR=/iPad/i,BR=/\biOS-universal(?:.+)Mac\b/i,D0=/\bAndroid(?:.+)Mobile\b/i,DR=/Android/i,vu=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Hp=/Silk/i,_a=/Windows Phone/i,kR=/\bWindows(?:.+)ARM\b/i,OR=/BlackBerry/i,IR=/BB10/i,NR=/Opera Mini/i,LR=/\b(CriOS|Chrome)(?:.+)Mobile/i,FR=/Mobile(?:.+)Firefox\b/i,UR=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function Pj(n){return function(e){return e.test(n)}}function GR(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var i=Pj(t),s={apple:{phone:i(B0)&&!i(_a),ipod:i(RR),tablet:!i(B0)&&(i(PR)||UR(e))&&!i(_a),universal:i(BR),device:(i(B0)||i(RR)||i(PR)||i(BR)||UR(e))&&!i(_a)},amazon:{phone:i(vu),tablet:!i(vu)&&i(Hp),device:i(vu)||i(Hp)},android:{phone:!i(_a)&&i(vu)||!i(_a)&&i(D0),tablet:!i(_a)&&!i(vu)&&!i(D0)&&(i(Hp)||i(DR)),device:!i(_a)&&(i(vu)||i(Hp)||i(D0)||i(DR))||i(/\bokhttp\b/i)},windows:{phone:i(_a),tablet:i(kR),device:i(_a)||i(kR)},other:{blackberry:i(OR),blackberry10:i(IR),opera:i(NR),firefox:i(FR),chrome:i(LR),device:i(OR)||i(IR)||i(NR)||i(FR)||i(LR)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Bj=GR.default??GR,mI=Bj(globalThis.navigator),Dj=9,zR=100,kj=0,Oj=0,VR=2,HR=1,Ij=-1e3,Nj=-1e3,Lj=2,B1=class gI{constructor(e,t=mI){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){const e=document.createElement("button");e.style.width=`${HR}px`,e.style.height=`${HR}px`,e.style.position="absolute",e.style.top=`${Ij}px`,e.style.left=`${Nj}px`,e.style.zIndex=Lj.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${kj}px`,this._div.style.left=`${Oj}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=VR.toString(),this._canvasObserver=new P1({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);const e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const t=new MutationObserver(()=>{e.parentNode&&(t.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv?.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(const e in this._pools)this._pools[e].forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)}),delete this._pools[e];this._div?.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this._updateAccessibleObjects(t[r])}init(e){const r={accessibilityOptions:{...gI.defaultOptions,...e?.accessibilityOptions||{}}};this.debug=r.accessibilityOptions.debug,this._activateOnTab=r.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=r.accessibilityOptions.deactivateOnMouseMove,r.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests))return;const t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const r of this._children)r._renderId===this._renderId&&t.add(this._children.indexOf(r))}for(let r=this._children.length-1;r>=0;r--){const i=this._children[r];t.has(r)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._getPool(i.accessibleType).push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,E1(this._children,r,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let r=0;r<this._children.length;r++){const i=this._children[r];if(!i._accessibleActive||!i._accessibleDiv)continue;const s=i._accessibleDiv,a=i.hitArea||i.getBounds().rectangle;if(i.hitArea){const l=i.worldTransform;s.style.left=`${l.tx+a.x*l.a}px`,s.style.top=`${l.ty+a.y*l.d}px`,s.style.width=`${a.width*l.a}px`,s.style.height=`${a.height*l.d}px`}else this._capHitArea(a),s.style.left=`${a.x}px`,s.style.top=`${a.y}px`,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}_addChild(e){let r=this._getPool(e.accessibleType).pop();r?(r.innerHTML="",r.removeAttribute("title"),r.removeAttribute("aria-label"),r.tabIndex=0):(e.accessibleType==="button"?r=document.createElement("button"):(r=document.createElement(e.accessibleType),r.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(r.innerText=e.accessibleText)),r.style.width=`${zR}px`,r.style.height=`${zR}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=VR.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),e.interactive?r.tabIndex=e.tabIndex:r.tabIndex=0,this.debug&&this._updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,t){const{container:r}=e.target,i=this._renderer.events.rootBoundary,s=Object.assign(new bc(i),{target:r});i.rootTarget=this._renderer.lastObjectRendered,t.forEach(a=>i.dispatchEvent(s,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==Dj||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}};B1.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"accessibility"};B1.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let Fj=B1;const Uj={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},k0=Object.create(null),jR=Object.create(null);function oc(n,e){let t=jR[n];return t===void 0&&(k0[e]===void 0&&(k0[e]=1),jR[n]=t=k0[e]++),t}let jp;function D1(){return(!jp||jp?.isContextLost())&&(jp=je.get().createCanvas().getContext("webgl",{})),jp}let Xp;function yI(){if(!Xp){Xp="mediump";const n=D1();n&&n.getShaderPrecisionFormat&&(Xp=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Xp}function _I(n,e,t){return e?n:t?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function bI(n,e,t){const r=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let i=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return i==="highp"&&r!=="highp"&&(i="mediump"),`precision ${i} float;
${n}`}else if(r!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function xI(n,e){return e?`#version 300 es
${n}`:n}const Gj={},zj={};function vI(n,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const r=t?Gj:zj;return r[e]?(r[e]++,e+=`-${r[e]}`):r[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function SI(n,e){return e?n.replace("#version 300 es",""):n}const O0={stripVersion:SI,ensurePrecision:bI,addProgramDefines:_I,setProgramName:vI,insertVersion:xI},Bh=Object.create(null),EI=class bv{constructor(e){e={...bv.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:yI()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let i=e.fragment,s=e.vertex;Object.keys(O0).forEach(a=>{const l=r[a];i=O0[a](i,l,!0),s=O0[a](s,l,!1)}),this.fragment=i,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=oc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Bh[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Bh[t]||(Bh[t]=new bv(e),Bh[t]._cacheKey=t),Bh[t]}};EI.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let mi=EI;const XR={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Ma(n){return XR[n]??XR.float32}const Vj={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",vec2i:"sint32x2",vec3i:"sint32x3",vec4i:"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",vec2u:"uint32x2",vec3u:"uint32x3",vec4u:"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"},WR=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|\)|$)/g;function $R(n,e){let t;for(;(t=WR.exec(n))!==null;){const r=Vj[t[3]]??"float32";e[t[2]]={location:parseInt(t[1],10),format:r,stride:Ma(r).stride,offset:0,instance:!1,start:0}}WR.lastIndex=0}function Hj(n){return n.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}function wI({source:n,entryPoint:e}){const t={},r=Hj(n),i=r.indexOf(`fn ${e}(`);if(i===-1)return t;const s=r.indexOf("->",i);if(s===-1)return t;const a=r.substring(i,s);if($R(a,t),Object.keys(t).length===0){const l=a.match(/\(\s*\w+\s*:\s*(\w+)/);if(l){const c=l[1],h=new RegExp(`struct\\s+${c}\\s*\\{([^}]+)\\}`,"s"),d=r.match(h);d&&$R(d[1],t)}}return t}function Nm(n){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,s=/:\s*([\w<>]+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,h=n.match(e)?.map(p=>({group:parseInt(p.match(t)[1],10),binding:parseInt(p.match(r)[1],10),name:p.match(i)[2],isUniform:p.match(i)[1]==="<uniform>",type:p.match(s)[1]}));if(!h)return{groups:[],structs:[]};const d=n.match(a)?.map(p=>{const g=p.match(c)[1],y=p.match(l).reduce((_,S)=>{const[x,E]=S.split(":");return _[x.trim()]=E.trim(),_},{});return y?{name:g,members:y}:null}).filter(({name:p})=>h.some(g=>g.type===p||g.type.includes(`<${p}>`)))??[];return{groups:h,structs:d}}var fo=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(fo||{});function CI({groups:n}){const e=[];for(let t=0;t<n.length;t++){const r=n[t];e[r.group]||(e[r.group]=[]),r.isUniform?e[r.group].push({binding:r.binding,visibility:fo.VERTEX|fo.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?e[r.group].push({binding:r.binding,visibility:fo.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"||r.type.startsWith("texture_2d<")?e[r.group].push({binding:r.binding,visibility:fo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}}):r.type==="texture_2d_array"||r.type.startsWith("texture_2d_array<")?e[r.group].push({binding:r.binding,visibility:fo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d-array",multisampled:!1}}):(r.type==="texture_cube"||r.type.startsWith("texture_cube<"))&&e[r.group].push({binding:r.binding,visibility:fo.FRAGMENT,texture:{sampleType:"float",viewDimension:"cube",multisampled:!1}})}for(let t=0;t<e.length;t++)e[t]||(e[t]=[]);return e}function TI({groups:n}){const e=[];for(let t=0;t<n.length;t++){const r=n[t];e[r.group]||(e[r.group]={}),e[r.group][r.name]=r.binding}return e}function AI(n,e){const t=new Set,r=new Set,i=[...n.structs,...e.structs].filter(a=>t.has(a.name)?!1:(t.add(a.name),!0)),s=[...n.groups,...e.groups].filter(a=>{const l=`${a.name}-${a.binding}`;return r.has(l)?!1:(r.add(l),!0)});return{structs:i,groups:s}}const Dh=Object.create(null);class jr{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:r,layout:i,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=t,this.vertex=r,t.source===r.source){const l=Nm(t.source);this.structsAndGroups=l}else{const l=Nm(r.source),c=Nm(t.source);this.structsAndGroups=AI(l,c)}this.layout=i??TI(this.structsAndGroups),this.gpuLayout=s??CI(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,r=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=oc(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=wI(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Dh[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Dh[t]||(Dh[t]=new jr(e),Dh[t]._cacheKey=t),Dh[t]}}const k1=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],MI=k1.reduce((n,e)=>(n[e]=!0,n),{});function RI(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const PI=class BI{constructor(e,t){this._touched=0,this.uid=Zt("uniform"),this._resourceType="uniformGroup",this._resourceId=Zt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...BI.defaultOptions,...t},this.uniformStructures=e;const r={};for(const i in e){const s=e[i];if(s.name=i,s.size=s.size??1,!MI[s.type]){const a=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,l,c]=a;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${l}', size: ${c} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${k1.join(", ")}`)}s.value??(s.value=RI(s.type,s.size)),r[i]=s.value}this.uniforms=r,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=oc(Object.keys(r).map(i=>`${i}-${e[i].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};PI.defaultOptions={ubo:!1,isStatic:!1};let zn=PI;class js{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const r in e){const i=e[r];this.setResource(i,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const r in this.resources)e[t++]=this.resources[r]._resourceId;this._key=e.join("|")}setResource(e,t){const r=this.resources[t];e!==r&&(r&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,t){const r=this.resources;for(const i in r)r[i]._gcLastUsed=e,r[i]._touched=t}destroy(){const e=this.resources;for(const t in e)e[t]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const r in t)t[r]===e&&(t[r]=null)}else this._updateKey()}}var xr=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.CANVAS=4]="CANVAS",n[n.BOTH=3]="BOTH",n))(xr||{});class Ii extends hr{constructor(e){super(),this.uid=Zt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:r,groups:i,resources:s,compatibleRenderers:a,groupMap:l}=e;this.gpuProgram=t,this.glProgram=r,a===void 0&&(a=0,t&&(a|=xr.WEBGPU),r&&(a|=xr.WEBGL)),this.compatibleRenderers=a;const c={};if(!s&&!i&&(s={}),s&&i)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&i&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&i&&l)for(const h in l)for(const d in l[h]){const p=l[h][d];c[p]={group:h,binding:d,name:p}}else if(t&&i&&!l){const h=t.structsAndGroups.groups;l={},h.forEach(d=>{l[d.group]=l[d.group]||{},l[d.group][d.binding]=d.name,c[d.name]=d})}else if(s){i={},l={},t&&t.structsAndGroups.groups.forEach(p=>{l[p.group]=l[p.group]||{},l[p.group][p.binding]=p.name,c[p.name]=p});let h=0;for(const d in s)c[d]||(i[99]||(i[99]=new js,this._ownedBindGroups.push(i[99])),c[d]={group:99,binding:h,name:d},l[99]=l[99]||{},l[99][h]=d,h++);for(const d in s){const p=d;let g=s[d];!g.source&&!g._resourceType&&(g=new zn(g));const y=c[p];y&&(i[y.group]||(i[y.group]=new js,this._ownedBindGroups.push(i[y.group])),i[y.group].setResource(g,y.binding))}}this.groups=i,this._uniformBindMap=l,this.resources=this._buildResourceAccessor(i,c)}addResource(e,t,r){var i,s;(i=this._uniformBindMap)[t]||(i[t]={}),(s=this._uniformBindMap[t])[r]||(s[r]=e),this.groups[t]||(this.groups[t]=new js,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const r={};for(const i in t){const s=t[i];Object.defineProperty(r,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return r}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:r,...i}=e;let s,a;return t&&(s=jr.from(t)),r&&(a=mi.from(r)),new Ii({gpuProgram:s,glProgram:a,...i})}}const jj={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},I0=0,N0=1,L0=2,F0=3,U0=4,G0=5,xv=class DI{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<I0)}set blend(e){!!(this.data&1<<I0)!==e&&(this.data^=1<<I0)}get offsets(){return!!(this.data&1<<N0)}set offsets(e){!!(this.data&1<<N0)!==e&&(this.data^=1<<N0)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<L0)}set culling(e){!!(this.data&1<<L0)!==e&&(this.data^=1<<L0)}get depthTest(){return!!(this.data&1<<F0)}set depthTest(e){!!(this.data&1<<F0)!==e&&(this.data^=1<<F0)}get depthMask(){return!!(this.data&1<<G0)}set depthMask(e){!!(this.data&1<<G0)!==e&&(this.data^=1<<G0)}get clockwiseFrontFace(){return!!(this.data&1<<U0)}set clockwiseFrontFace(e){!!(this.data&1<<U0)!==e&&(this.data^=1<<U0)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=jj[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new DI;return e.depthTest=!1,e.blend=!0,e}};xv.default2d=xv.for2d();let pi=xv;const kI=class vv extends Ii{constructor(e){e={...vv.defaultOptions,...e},super(e),this.enabled=!0,this._state=pi.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,t,r,i){e.applyFilter(this,t,r,i)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:t,gl:r,...i}=e;let s,a;return t&&(s=jr.from(t)),r&&(a=mi.from(r)),new vv({gpuProgram:s,glProgram:a,...i})}};kI.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Ys=kI;var OI=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,II=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,NI=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class On extends Ys{constructor(e){const t=e.gpu,r=qR({source:NI,...t}),i=jr.from({vertex:{source:r,entryPoint:"mainVertex"},fragment:{source:r,entryPoint:"mainFragment"}}),s=e.gl,a=qR({source:OI,...s}),l=mi.from({vertex:II,fragment:a}),c=new zn({uBlend:{value:1,type:"f32"}});super({gpuProgram:i,glProgram:l,blendRequired:!0,resources:{blendUniforms:c,uBackTexture:we.EMPTY}})}}function qR(n){const{source:e,functions:t,main:r}=n;return e.replace("{FUNCTIONS}",t).replace("{MAIN}",r)}const ay=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,oy=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class LI extends On{constructor(){super({gl:{functions:`
                ${ay}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${oy}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}LI.extension={name:"color",type:q.BlendMode};class FI extends On{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}FI.extension={name:"color-burn",type:q.BlendMode};class UI extends On{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}UI.extension={name:"color-dodge",type:q.BlendMode};class GI extends On{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}GI.extension={name:"darken",type:q.BlendMode};class zI extends On{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}zI.extension={name:"difference",type:q.BlendMode};class VI extends On{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}VI.extension={name:"divide",type:q.BlendMode};class HI extends On{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}HI.extension={name:"exclusion",type:q.BlendMode};class jI extends On{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}jI.extension={name:"hard-light",type:q.BlendMode};class XI extends On{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}XI.extension={name:"hard-mix",type:q.BlendMode};class WI extends On{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}WI.extension={name:"lighten",type:q.BlendMode};class $I extends On{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}$I.extension={name:"linear-burn",type:q.BlendMode};class qI extends On{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}qI.extension={name:"linear-dodge",type:q.BlendMode};class YI extends On{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}YI.extension={name:"linear-light",type:q.BlendMode};class KI extends On{constructor(){super({gl:{functions:`
                ${ay}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${oy}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}KI.extension={name:"luminosity",type:q.BlendMode};class ZI extends On{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}ZI.extension={name:"negation",type:q.BlendMode};class QI extends On{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}QI.extension={name:"overlay",type:q.BlendMode};class JI extends On{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}JI.extension={name:"pin-light",type:q.BlendMode};class eN extends On{constructor(){super({gl:{functions:`
                ${ay}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${oy}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}eN.extension={name:"saturation",type:q.BlendMode};class tN extends On{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}tN.extension={name:"soft-light",type:q.BlendMode};class nN extends On{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}nN.extension={name:"subtract",type:q.BlendMode};class rN extends On{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}rN.extension={name:"vivid-light",type:q.BlendMode};const Sv=[];ze.handleByNamedList(q.Environment,Sv);async function O1(n){if(!n)for(let e=0;e<Sv.length;e++){const t=Sv[e];if(t.value.test()){await t.value.load();return}}}async function Xj(n){return O1(!n)}let kh;function I1(){if(typeof kh=="boolean")return kh;try{kh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{kh=!1}return kh}function YR(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=iN(n,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,c,h;if(r&&(s=Kj(n,e,s,t)),n.length>80*t){l=n[0],c=n[1];let d=l,p=c;for(let g=t;g<i;g+=t){const y=n[g],_=n[g+1];y<l&&(l=y),_<c&&(c=_),y>d&&(d=y),_>p&&(p=_)}h=Math.max(d-l,p-c),h=h!==0?32767/h:0}return Rd(s,a,t,l,c,h,0),a}function iN(n,e,t,r,i){let s;if(i===o7(n,e,t,r)>0)for(let a=e;a<t;a+=r)s=KR(a/r|0,n[a],n[a+1],s);else for(let a=t-r;a>=e;a-=r)s=KR(a/r|0,n[a],n[a+1],s);return s&&lc(s,s.next)&&(Bd(s),s=s.next),s}function Rl(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(lc(t,t.next)||Cn(t.prev,t,t.next)===0)){if(Bd(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Rd(n,e,t,r,i,s,a){if(!n)return;!a&&s&&t7(n,r,i,s);let l=n;for(;n.prev!==n.next;){const c=n.prev,h=n.next;if(s?$j(n,r,i,s):Wj(n)){e.push(c.i,n.i,h.i),Bd(n),n=h.next,l=h.next;continue}if(n=h,n===l){a?a===1?(n=qj(Rl(n),e),Rd(n,e,t,r,i,s,2)):a===2&&Yj(n,e,t,r,i,s):Rd(Rl(n),e,t,r,i,s,1);break}}}function Wj(n){const e=n.prev,t=n,r=n.next;if(Cn(e,t,r)>=0)return!1;const i=e.x,s=t.x,a=r.x,l=e.y,c=t.y,h=r.y,d=Math.min(i,s,a),p=Math.min(l,c,h),g=Math.max(i,s,a),y=Math.max(l,c,h);let _=r.next;for(;_!==e;){if(_.x>=d&&_.x<=g&&_.y>=p&&_.y<=y&&od(i,l,s,c,a,h,_.x,_.y)&&Cn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function $j(n,e,t,r){const i=n.prev,s=n,a=n.next;if(Cn(i,s,a)>=0)return!1;const l=i.x,c=s.x,h=a.x,d=i.y,p=s.y,g=a.y,y=Math.min(l,c,h),_=Math.min(d,p,g),S=Math.max(l,c,h),x=Math.max(d,p,g),E=Ev(y,_,e,t,r),w=Ev(S,x,e,t,r);let C=n.prevZ,A=n.nextZ;for(;C&&C.z>=E&&A&&A.z<=w;){if(C.x>=y&&C.x<=S&&C.y>=_&&C.y<=x&&C!==i&&C!==a&&od(l,d,c,p,h,g,C.x,C.y)&&Cn(C.prev,C,C.next)>=0||(C=C.prevZ,A.x>=y&&A.x<=S&&A.y>=_&&A.y<=x&&A!==i&&A!==a&&od(l,d,c,p,h,g,A.x,A.y)&&Cn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;C&&C.z>=E;){if(C.x>=y&&C.x<=S&&C.y>=_&&C.y<=x&&C!==i&&C!==a&&od(l,d,c,p,h,g,C.x,C.y)&&Cn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;A&&A.z<=w;){if(A.x>=y&&A.x<=S&&A.y>=_&&A.y<=x&&A!==i&&A!==a&&od(l,d,c,p,h,g,A.x,A.y)&&Cn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function qj(n,e){let t=n;do{const r=t.prev,i=t.next.next;!lc(r,i)&&aN(r,t,t.next,i)&&Pd(r,i)&&Pd(i,r)&&(e.push(r.i,t.i,i.i),Bd(t),Bd(t.next),t=n=i),t=t.next}while(t!==n);return Rl(t)}function Yj(n,e,t,r,i,s){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&i7(a,l)){let c=oN(a,l);a=Rl(a,a.next),c=Rl(c,c.next),Rd(a,e,t,r,i,s,0),Rd(c,e,t,r,i,s,0);return}l=l.next}a=a.next}while(a!==n)}function Kj(n,e,t,r){const i=[];for(let s=0,a=e.length;s<a;s++){const l=e[s]*r,c=s<a-1?e[s+1]*r:n.length,h=iN(n,l,c,r,!1);h===h.next&&(h.steiner=!0),i.push(r7(h))}i.sort(Zj);for(let s=0;s<i.length;s++)t=Qj(i[s],t);return t}function Zj(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function Qj(n,e){const t=Jj(n,e);if(!t)return e;const r=oN(t,n);return Rl(r,r.next),Rl(t,t.next)}function Jj(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,a;if(lc(n,t))return t;do{if(lc(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const p=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>s&&(s=p,a=t.x<t.next.x?t:t.next,p===r))return a}t=t.next}while(t!==e);if(!a)return null;const l=a,c=a.x,h=a.y;let d=1/0;t=a;do{if(r>=t.x&&t.x>=c&&r!==t.x&&sN(i<h?r:s,i,c,h,i<h?s:r,i,t.x,t.y)){const p=Math.abs(i-t.y)/(r-t.x);Pd(t,n)&&(p<d||p===d&&(t.x>a.x||t.x===a.x&&e7(a,t)))&&(a=t,d=p)}t=t.next}while(t!==l);return a}function e7(n,e){return Cn(n.prev,n,e.prev)<0&&Cn(e.next,n,n.next)<0}function t7(n,e,t,r){let i=n;do i.z===0&&(i.z=Ev(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,n7(i)}function n7(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let a=r,l=0;for(let h=0;h<t&&(l++,a=a.nextZ,!!a);h++);let c=t;for(;l>0||c>0&&a;)l!==0&&(c===0||!a||r.z<=a.z)?(i=r,r=r.nextZ,l--):(i=a,a=a.nextZ,c--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=a}s.nextZ=null,t*=2}while(e>1);return n}function Ev(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function r7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function sN(n,e,t,r,i,s,a,l){return(i-a)*(e-l)>=(n-a)*(s-l)&&(n-a)*(r-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(i-a)*(r-l)}function od(n,e,t,r,i,s,a,l){return!(n===a&&e===l)&&sN(n,e,t,r,i,s,a,l)}function i7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!s7(n,e)&&(Pd(n,e)&&Pd(e,n)&&a7(n,e)&&(Cn(n.prev,n,e.prev)||Cn(n,e.prev,e))||lc(n,e)&&Cn(n.prev,n,n.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lc(n,e){return n.x===e.x&&n.y===e.y}function aN(n,e,t,r){const i=$p(Cn(n,e,t)),s=$p(Cn(n,e,r)),a=$p(Cn(t,r,n)),l=$p(Cn(t,r,e));return!!(i!==s&&a!==l||i===0&&Wp(n,t,e)||s===0&&Wp(n,r,e)||a===0&&Wp(t,n,r)||l===0&&Wp(t,e,r))}function Wp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function $p(n){return n>0?1:n<0?-1:0}function s7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&aN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Pd(n,e){return Cn(n.prev,n,n.next)<0?Cn(n,e,n.next)>=0&&Cn(n,n.prev,e)>=0:Cn(n,e,n.prev)<0||Cn(n,n.next,e)<0}function a7(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function oN(n,e){const t=wv(n.i,n.x,n.y),r=wv(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function KR(n,e,t,r){const i=wv(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function wv(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function o7(n,e,t,r){let i=0;for(let s=e,a=t-r;s<t;s+=r)i+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return i}const lN=YR.default||YR;var ui=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(ui||{});class N1{constructor(e){this.items=[],this._name=e}emit(e,t,r,i,s,a,l,c){const{name:h,items:d}=this;for(let p=0,g=d.length;p<g;p++)d[p][h](e,t,r,i,s,a,l,c);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const l7=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],uN=class cN extends hr{constructor(e){super(),this.tick=0,this.uid=Zt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...l7,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await O1(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const r in this._systemsHash)e={...this._systemsHash[r].constructor.defaultOptions,...e};e={...cN.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(e);this._initOptions=e}render(e,t){this.tick++;let r=e;if(r instanceof bn&&(r={container:r},t&&(Ae(nt,"passing a second argument is deprecated, please use render options instead"),r.target=t.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor??(r.clearColor=this.background.colorRgba),r.clear??(r.clear=this.background.clearBeforeRender)),r.clearColor){const i=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=i?r.clearColor:yt.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.visible&&(r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r))}resize(e,t,r){const i=this.view.resolution;this.view.resize(e,t,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==i&&this.runners.resolutionChange.emit(r)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=ui.ALL);const{clear:r,clearColor:i,target:s,mipLevel:a,layer:l}=e;yt.shared.setValue(i??this.background.colorRgba),t.renderTarget.clear(s,r,yt.shared.toArray(),a??0,l??0)}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new N1(t)})}_addSystems(e){let t;for(t in e){const r=e[t];this._addSystem(r.value,r.name)}}_addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const i in this.runners)this.runners[i].add(r);return this}_addPipes(e,t){const r=t.reduce((i,s)=>(i[s.name]=s.value,i),{});e.forEach(i=>{const s=i.value,a=i.name,l=r[a];this.renderPipes[a]=new s(this,l?new l:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Il.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!I1())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};uN.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let xc=uN,qp;function Zd(n){return qp!==void 0||(qp=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:n??xc.defaultOptions.failIfMajorPerformanceCaveat};try{if(!je.get().getWebGLRenderingContext())return!1;let r=je.get().createCanvas().getContext("webgl",e);const i=!!r?.getContextAttributes()?.stencil;if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}})()),qp}let Yp;async function Qd(n={}){return Yp!==void 0||(Yp=await(async()=>{const e=je.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Yp}const ZR=["webgl","webgpu","canvas"];async function hN(n){let e=[];n.preference?(e.push(n.preference),ZR.forEach(s=>{s!==n.preference&&e.push(s)})):e=ZR.slice();let t,r={};for(let s=0;s<e.length;s++){const a=e[s];if(a==="webgpu"&&await Qd()){const{WebGPURenderer:l}=await zs(async()=>{const{WebGPURenderer:c}=await Promise.resolve().then(()=>cq);return{WebGPURenderer:c}},void 0);t=l,r={...n,...n.webgpu};break}else if(a==="webgl"&&Zd(n.failIfMajorPerformanceCaveat??xc.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await zs(async()=>{const{WebGLRenderer:c}=await Promise.resolve().then(()=>nq);return{WebGLRenderer:c}},void 0);t=l,r={...n,...n.webgl};break}else if(a==="canvas"){const{CanvasRenderer:l}=await zs(async()=>{const{CanvasRenderer:c}=await Promise.resolve().then(()=>D$);return{CanvasRenderer:c}},void 0);t=l,r={...n,...n.canvasOptions};break}}if(delete r.webgpu,delete r.webgl,delete r.canvasOptions,!t)throw new Error("No available renderer for the current environment");const i=new t;return await i.init(r),i}const u7=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,uc="8.16.0";class L1{static init(){globalThis.__PIXI_APP_INIT__?.(this,uc)}static destroy(){}}L1.extension=q.Application;class F1{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,uc)}destroy(){this._renderer=null}}F1.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"initHook",priority:-10};class U1{static init(e){Object.defineProperty(this,"resizeTo",{configurable:!0,set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,r=s}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}U1.extension=q.Application;class G1{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{configurable:!0,set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ws.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Zn.shared:new Zn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}G1.extension=q.Application;ze.add(U1);ze.add(G1);const dN=class Cv{constructor(...e){this.stage=new bn,e[0]!==void 0&&Ae(nt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new bn),this.renderer=await hN(e),Cv._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ae(nt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const r=Cv._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};dN._plugins=[];let fN=dN;ze.handleByList(q.Application,fN._plugins);ze.add(L1);const Lm={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const e=n.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const p in e){const g=e[p].match(/^[a-z]+/gm)[0],y=e[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const S in y){const x=y[S].split("="),E=x[0],w=x[1].replace(/"/gm,""),C=parseFloat(w),A=isNaN(C)?w:C;_[E]=A}t[g].push(_)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=t.info,[s]=t.common,[a]=t.distanceField??[];a&&(r.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(s.lineHeight,10);const l=t.page;for(let p=0;p<l.length;p++)r.pages.push({id:parseInt(l[p].id,10)||0,file:l[p].file});const c={};r.baseLineOffset=r.lineHeight-parseInt(s.base,10);const h=t.char;for(let p=0;p<h.length;p++){const g=h[p],y=parseInt(g.id,10);let _=g.letter??g.char??String.fromCharCode(y);_==="space"&&(_=" "),c[y]=_,r.chars[_]={id:y,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const d=t.kerning||[];for(let p=0;p<d.length;p++){const g=parseInt(d[p].first,10),y=parseInt(d[p].second,10),_=parseInt(d[p].amount,10);r.chars[c[y]].kerning[c[g]]=_}return r}},Tv={test(n){const e=n;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=n.getElementsByTagName("info")[0],r=n.getElementsByTagName("common")[0],i=n.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const s=n.getElementsByTagName("page"),a=n.getElementsByTagName("char"),l=n.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let h=0;h<s.length;h++)e.pages.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});const c={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let h=0;h<a.length;h++){const d=a[h],p=parseInt(d.getAttribute("id"),10);let g=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(p);g==="space"&&(g=" "),c[p]=g,e.chars[g]={id:p,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<l.length;h++){const d=parseInt(l[h].getAttribute("first"),10),p=parseInt(l[h].getAttribute("second"),10),g=parseInt(l[h].getAttribute("amount"),10);e.chars[c[p]].kerning[c[d]]=g}return e}},Av={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?Tv.test(je.get().parseXML(n)):!1},parse(n){return Tv.parse(je.get().parseXML(n))}},c7=[".xml",".fnt"],pN={extension:{type:q.CacheParser,name:"cacheBitmapFont"},test:n=>!!n?.pages&&!!n?.chars&&typeof n?.fontFamily=="string",getCacheableAssets(n,e){const t={};return n.forEach(r=>{t[r]=e,t[`${r}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},mN={extension:{type:q.LoadParser,priority:Oi.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return c7.includes(ci.extname(n).toLowerCase())},async testParse(n){return Lm.test(n)||Av.test(n)},async parse(n,e,t){const r=Lm.test(n)?Lm.parse(n):Av.parse(n),{src:i}=e,{pages:s}=r,a=[],l=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let g=0;g<s.length;++g){const y=s[g].file;let _=ci.join(ci.dirname(i),y);_=mg(_,i),a.push({src:_,data:l})}const[c,{BitmapFont:h}]=await Promise.all([t.load(a),zs(()=>Promise.resolve().then(()=>zq),void 0)]),d=a.map(g=>c[g.src]);return new h({data:r,textures:d},i)},async load(n,e){return await(await je.get().fetch(n)).text()},async unload(n,e,t){await Promise.all(n.pages.map(r=>t.unload(r.texture.source._sourceOrigin))),n.destroy()}};class gN{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const yN={extension:{type:q.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(e=>e instanceof we),getCacheableAssets:(n,e)=>{const t={};return n.forEach(r=>{e.forEach((i,s)=>{t[r+(s===0?"":s+1)]=i})}),t}};async function z1(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const _N={extension:{type:q.DetectionParser,priority:1},test:async()=>z1("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},QR=["png","jpg","jpeg"],bN={extension:{type:q.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...QR],remove:async n=>n.filter(e=>!QR.includes(e))},h7="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Jd(n){return h7?!1:document.createElement("video").canPlayType(n)!==""}const xN={extension:{type:q.DetectionParser,priority:0},test:async()=>Jd("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},vN={extension:{type:q.DetectionParser,priority:0},test:async()=>Jd("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},SN={extension:{type:q.DetectionParser,priority:0},test:async()=>Jd("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},EN={extension:{type:q.DetectionParser,priority:0},test:async()=>z1("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")},wN=class Fm{constructor(){this.loadOptions={...Fm.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let i=null,s=null;if((t.parser||t.loadParser)&&(s=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ue(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Ue(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!s){for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&l.test?.(e,t,this)){s=l;break}}if(!s)return Ue(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),r.parser=s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await l.testParse?.(i,t,this)&&(i=await l.parse(i,t,this)||i,r.parser=l)}return i})(),r}async load(e,t){this._parsersValidated||this._validateParsers();const r=typeof t=="function"?{...Fm.defaultOptions,...this.loadOptions,onProgress:t}:{...Fm.defaultOptions,...this.loadOptions,...t||{}},{onProgress:i,onError:s,strategy:a,retryCount:l,retryDelay:c}=r;let h=0;const d={},p=Md(e),g=Zi(e,S=>({alias:[S],src:S,data:{}})),y=g.reduce((S,x)=>S+(x.progressSize||1),0),_=g.map(async S=>{const x=ci.toAbsolute(S.src);d[S.src]||(await this._loadAssetWithRetry(x,S,{onProgress:i,onError:s,strategy:a,retryCount:l,retryDelay:c},d),h+=S.progressSize||1,i&&i(h/y))});return await Promise.all(_),p?d[g[0].src]:d}async unload(e){const r=Zi(e,i=>({alias:[i],src:i})).map(async i=>{const s=ci.toAbsolute(i.src),a=this.promiseCache[s];if(a){const l=await a.promise;delete this.promiseCache[s],await a.parser?.unload?.(l,i,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ue("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ue(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,r,i){let s=0;const{onError:a,strategy:l,retryCount:c,retryDelay:h}=r,d=p=>new Promise(g=>setTimeout(g,p));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),i[t.src]=await this.promiseCache[e].promise;return}catch(p){delete this.promiseCache[e],delete i[t.src],s++;const g=l!=="retry"||s>c;if(l==="retry"&&!g){a&&a(p,t),await d(h);continue}if(l==="skip"){a&&a(p,t);return}a&&a(p,t);const y=new Error(`[Loader.load] Failed to load ${e}.
${p}`);throw p instanceof Error&&p.stack&&(y.stack=p.stack),y}}};wN.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let CN=wN;function Nl(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function rs(n,e){const t=n.split("?")[0],r=ci.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const d7=".json",f7="application/json",TN={extension:{type:q.LoadParser,priority:Oi.Low},name:"loadJson",id:"json",test(n){return Nl(n,f7)||rs(n,d7)},async load(n){return await(await je.get().fetch(n)).json()}},p7=".txt",m7="text/plain",AN={name:"loadTxt",id:"text",extension:{type:q.LoadParser,priority:Oi.Low,name:"loadTxt"},test(n){return Nl(n,m7)||rs(n,p7)},async load(n){return await(await je.get().fetch(n)).text()}},g7=["normal","bold","100","200","300","400","500","600","700","800","900"],y7=[".ttf",".otf",".woff",".woff2"],_7=["font/ttf","font/otf","font/woff","font/woff2"],b7=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function MN(n){const e=ci.extname(n),i=ci.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let s=i.length>0;for(const l of i)if(!l.match(b7)){s=!1;break}let a=i.join(" ");return s||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const x7=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function v7(n){return x7.test(n)?n:encodeURI(n)}const RN={extension:{type:q.LoadParser,priority:Oi.Low},name:"loadWebFont",id:"web-font",test(n){return Nl(n,_7)||rs(n,y7)},async load(n,e){const t=je.get().getFontFaceSet();if(t){const r=[],i=e.data?.family??MN(n),s=e.data?.weights?.filter(l=>g7.includes(l))??["normal"],a=e.data??{};for(let l=0;l<s.length;l++){const c=s[l],h=new FontFace(i,`url(${v7(n)})`,{...a,weight:c});await h.load(),t.add(h),r.push(h)}return At.has(`${i}-and-url`)?At.get(`${i}-and-url`).entries.push({url:n,faces:r}):At.set(`${i}-and-url`,{entries:[{url:n,faces:r}]}),r.length===1?r[0]:r}return Ue("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const e=Array.isArray(n)?n:[n],t=e[0].family,r=At.get(`${t}-and-url`),i=r.entries.find(s=>s.faces.some(a=>e.indexOf(a)!==-1));i.faces=i.faces.filter(s=>e.indexOf(s)===-1),i.faces.length===0&&(r.entries=r.entries.filter(s=>s!==i)),e.forEach(s=>{je.get().getFontFaceSet().delete(s)}),r.entries.length===0&&At.remove(`${t}-and-url`)}};var z0,JR;function S7(){if(JR)return z0;JR=1,z0=t;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(s){var a=[];return s.replace(e,function(l,c,h){var d=c.toLowerCase();for(h=i(h),d=="m"&&h.length>2&&(a.push([c].concat(h.splice(0,2))),d="l",c=c=="m"?"l":"L");;){if(h.length==n[d])return h.unshift(c),a.push(h);if(h.length<n[d])throw new Error("malformed path data");a.push([c].concat(h.splice(0,n[d])))}}),a}var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function i(s){var a=s.match(r);return a?a.map(Number):[]}return z0}var E7=S7();const w7=Ol(E7);function PN(n,e){const t=w7(n),r=[];let i=null,s=0,a=0;for(let l=0;l<t.length;l++){const c=t[l],h=c[0],d=c;switch(h){case"M":s=d[1],a=d[2],e.moveTo(s,a);break;case"m":s+=d[1],a+=d[2],e.moveTo(s,a);break;case"H":s=d[1],e.lineTo(s,a);break;case"h":s+=d[1],e.lineTo(s,a);break;case"V":a=d[1],e.lineTo(s,a);break;case"v":a+=d[1],e.lineTo(s,a);break;case"L":s=d[1],a=d[2],e.lineTo(s,a);break;case"l":s+=d[1],a+=d[2],e.lineTo(s,a);break;case"C":s=d[5],a=d[6],e.bezierCurveTo(d[1],d[2],d[3],d[4],s,a);break;case"c":e.bezierCurveTo(s+d[1],a+d[2],s+d[3],a+d[4],s+d[5],a+d[6]),s+=d[5],a+=d[6];break;case"S":s=d[3],a=d[4],e.bezierCurveToShort(d[1],d[2],s,a);break;case"s":e.bezierCurveToShort(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"Q":s=d[3],a=d[4],e.quadraticCurveTo(d[1],d[2],s,a);break;case"q":e.quadraticCurveTo(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"T":s=d[1],a=d[2],e.quadraticCurveToShort(s,a);break;case"t":s+=d[1],a+=d[2],e.quadraticCurveToShort(s,a);break;case"A":s=d[6],a=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"a":s+=d[6],a+=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"Z":case"z":e.closePath(),r.length>0&&(i=r.pop(),i?(s=i.startX,a=i.startY):(s=0,a=0)),i=null;break;default:Ue(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&i===null&&(i={startX:s,startY:a},r.push(i))}return e}class ly{constructor(e=0,t=0,r=0){this.type="circle",this.x=e,this.y=t,this.radius=r}clone(){return new ly(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=r}strokeContains(e,t,r,i=.5){if(this.radius===0)return!1;const s=this.x-e,a=this.y-t,l=this.radius,c=(1-i)*r,h=Math.sqrt(s*s+a*a);return h<=l+c&&h>l-(r-c)}getBounds(e){return e||(e=new Rt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class uy{constructor(e=0,t=0,r=0,i=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=r,this.halfHeight=i}clone(){return new uy(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(e-this.x)/this.halfWidth,i=(t-this.y)/this.halfHeight;return r*=r,i*=i,r+i<=1}strokeContains(e,t,r,i=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const l=r*(1-i),c=r-l,h=s-c,d=a-c,p=s+l,g=a+l,y=e-this.x,_=t-this.y,S=y*y/(h*h)+_*_/(d*d),x=y*y/(p*p)+_*_/(g*g);return S>1&&x<=1}getBounds(e){return e||(e=new Rt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function dd(n,e,t,r,i,s){const a=n-t,l=e-r,c=i-t,h=s-r,d=a*c+l*h,p=c*c+h*h;let g=-1;p!==0&&(g=d/p);let y,_;g<0?(y=t,_=r):g>1?(y=i,_=s):(y=t+g*c,_=r+g*h);const S=n-y,x=e-_;return S*S+x*x}let C7,T7;class qu{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let i=0,s=t.length;i<s;i++)r.push(t[i].x,t[i].y);t=r}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,r=t.length;for(let i=0;i<r;i+=2){const s=t[i],a=t[i+1],l=t[(i+2)%r],c=t[(i+3)%r];e+=(l-s)*(c+a)}return e<0}containsPolygon(e){const t=this.getBounds(C7),r=e.getBounds(T7);if(!t.containsRect(r))return!1;const i=e.points;for(let s=0;s<i.length;s+=2){const a=i[s],l=i[s+1];if(!this.contains(a,l))return!1}return!0}clone(){const e=this.points.slice(),t=new qu(e);return t.closePath=this.closePath,t}contains(e,t){let r=!1;const i=this.points.length/2;for(let s=0,a=i-1;s<i;a=s++){const l=this.points[s*2],c=this.points[s*2+1],h=this.points[a*2],d=this.points[a*2+1];c>t!=d>t&&e<(h-l)*((t-c)/(d-c))+l&&(r=!r)}return r}strokeContains(e,t,r,i=.5){const s=r*r,a=s*(1-i),l=s-a,{points:c}=this,h=c.length-(this.closePath?0:2);for(let d=0;d<h;d+=2){const p=c[d],g=c[d+1],y=c[(d+2)%c.length],_=c[(d+3)%c.length],S=dd(e,t,p,g,y,_),x=Math.sign((y-p)*(t-g)-(_-g)*(e-p));if(S<=(x<0?l:a))return!0}return!1}getBounds(e){e||(e=new Rt);const t=this.points;let r=1/0,i=-1/0,s=1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=2){const h=t[l],d=t[l+1];r=h<r?h:r,i=h>i?h:i,s=d<s?d:s,a=d>a?d:a}return e.x=r,e.width=i-r,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Ae("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Ae("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Kp=(n,e,t,r,i,s,a)=>{const l=n-t,c=e-r,h=Math.sqrt(l*l+c*c);return h>=i-s&&h<=i+a};class cy{constructor(e=0,t=0,r=0,i=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=r,this.height=i,this.radius=s}getBounds(e){return e||(e=new Rt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new cy(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=t-(this.y+r);const a=r*r;if(i*i+s*s<=a||(i=e-(this.x+this.width-r),i*i+s*s<=a)||(s=t-(this.y+this.height-r),i*i+s*s<=a)||(i=e-(this.x+r),i*i+s*s<=a))return!0}return!1}strokeContains(e,t,r,i=.5){const{x:s,y:a,width:l,height:c,radius:h}=this,d=r*(1-i),p=r-d,g=s+h,y=a+h,_=l-h*2,S=c-h*2,x=s+l,E=a+c;return(e>=s-d&&e<=s+p||e>=x-p&&e<=x+d)&&t>=y&&t<=y+S||(t>=a-d&&t<=a+p||t>=E-p&&t<=E+d)&&e>=g&&e<=g+_?!0:e<g&&t<y&&Kp(e,t,g,y,h,p,d)||e>x-h&&t<y&&Kp(e,t,x-h,y,h,p,d)||e>x-h&&t>E-h&&Kp(e,t,x-h,E-h,h,p,d)||e<g&&t>E-h&&Kp(e,t,g,E-h,h,p,d)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const BN={};function hy(n,e,t){let r=2166136261;for(let i=0;i<e;i++)r^=n[i].uid,r=Math.imul(r,16777619),r>>>=0;return BN[r]||A7(n,e,r,t)}function A7(n,e,t,r){const i={};let s=0;for(let l=0;l<r;l++){const c=l<e?n[l]:we.EMPTY.source;i[s++]=c.source,i[s++]=c.style}const a=new js(i);return BN[t]=a,a}class yl{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function gg(n,e,t,r){if(t??(t=0),r??(r=Math.min(n.byteLength-t,e.byteLength)),!(t&7)&&!(r&7)){const i=r/8;new Float64Array(e,0,i).set(new Float64Array(n,t,i))}else if(!(t&3)&&!(r&3)){const i=r/4;new Float32Array(e,0,i).set(new Float32Array(n,t,i))}else new Uint8Array(e).set(new Uint8Array(n,t,r))}const DN={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var kn=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(kn||{});function cc(n,e){return e.alphaMode==="no-premultiply-alpha"&&DN[n]||n}const M7=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function R7(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function V1(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const r=M7.replace(/%forloop%/gi,R7(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(t)}return n}let Su=null;function kN(){if(Su)return Su;const n=D1();return Su=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Su=V1(Su,n),n.getExtension("WEBGL_lose_context")?.loseContext(),Su}class ON{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class IN{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new ON,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null,this.elements=null}}const fd=[];let yg=0;Il.register({clear:()=>{if(fd.length>0)for(const n of fd)n&&n.destroy();fd.length=0,yg=0}});function eP(){return yg>0?fd[--yg]:new IN}function tP(n){n.elements=null,fd[yg++]=n}let Oh=0;const NN=class LN{constructor(e){this.uid=Zt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...LN.defaultOptions,...e},e.maxTextures||(Ae("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=kN());const{maxTextures:t,attributesInitialSize:r,indicesInitialSize:i}=e;this.attributeBuffer=new yl(r*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)tP(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const r=e._batch.textures.ids[t._source.uid];return!r&&r!==0?!1:(e._textureId=r,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let r=eP(),i=r.textures;i.clear();const s=t[this.elementStart];let a=cc(s.blendMode,s.texture._source),l=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const c=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,d=this.indexBuffer;let p=this._batchIndexSize,g=this._batchIndexStart,y="startBatch",_=[];const S=this.maxTextures;for(let x=this.elementStart;x<this.elementSize;++x){const E=t[x];t[x]=null;const C=E.texture._source,A=cc(E.blendMode,C),P=a!==A||l!==E.topology;if(C._batchTick===Oh&&!P){E._textureId=C._textureBindLocation,p+=E.indexSize,E.packAsQuad?(this.packQuadAttributes(E,c,h,E._attributeStart,E._textureId),this.packQuadIndex(d,E._indexStart,E._attributeStart/this.vertexSize)):(this.packAttributes(E,c,h,E._attributeStart,E._textureId),this.packIndex(E,d,E._indexStart,E._attributeStart/this.vertexSize)),E._batch=r,_.push(E);continue}C._batchTick=Oh,(i.count>=S||P)&&(this._finishBatch(r,g,p-g,i,a,l,e,y,_),y="renderBatch",g=p,a=A,l=E.topology,r=eP(),i=r.textures,i.clear(),_=[],++Oh),E._textureId=C._textureBindLocation=i.count,i.ids[C.uid]=i.count,i.textures[i.count++]=C,E._batch=r,_.push(E),p+=E.indexSize,E.packAsQuad?(this.packQuadAttributes(E,c,h,E._attributeStart,E._textureId),this.packQuadIndex(d,E._indexStart,E._attributeStart/this.vertexSize)):(this.packAttributes(E,c,h,E._attributeStart,E._textureId),this.packIndex(E,d,E._indexStart,E._attributeStart/this.vertexSize))}i.count>0&&(this._finishBatch(r,g,p-g,i,a,l,e,y,_),g=p,++Oh),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,t,r,i,s,a,l,c,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=c,e.batcher=this,e.textures=i,e.blendMode=s,e.topology=a,e.start=t,e.size=r,e.elements=h,++Oh,this.batches[this.batchIndex++]=e,l.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),r=new yl(t);gg(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(e){const t=this.indexBuffer;let r=Math.max(e,t.length*1.5);r+=r%2;const i=r>65535?new Uint32Array(r):new Uint16Array(r);if(i.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)i[s]=t[s];else gg(t.buffer,i.buffer);this.indexBuffer=i}packQuadIndex(e,t,r){e[t]=r+0,e[t+1]=r+1,e[t+2]=r+2,e[t+3]=r+0,e[t+4]=r+2,e[t+5]=r+3}packIndex(e,t,r,i){const s=e.indices,a=e.indexSize,l=e.indexOffset,c=e.attributeOffset;for(let h=0;h<a;h++)t[r++]=i+s[h+l]-c}destroy(e={}){if(this.batches!==null){for(let t=0;t<this.batchIndex;t++)tP(this.batches[t]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let t=0;t<this._elements.length;t++)this._elements[t]&&(this._elements[t]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};NN.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let FN=NN;var Mt=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Mt||{});let hi=class extends hr{constructor(e){let{data:t,size:r}=e;const{usage:i,label:s,shrinkToFit:a}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=Zt("buffer"),this._resourceType="buffer",this._resourceId=Zt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,r??(r=t?.byteLength);const l=!!t;this.descriptor={size:r,usage:i,mappedAtCreation:l,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Mt.STATIC)}set static(e){e?this.descriptor.usage|=Mt.STATIC:this.descriptor.usage&=~Mt.STATIC}setDataWithSize(e,t,r){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){r&&this.emit("update",this);return}const i=this._data;if(this._data=e,this._dataInt32=null,!i||i.length!==e.length){!this.shrinkToFit&&i&&e.byteLength<i.byteLength?r&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Zt("resource"),this.emit("change",this));return}r&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function H1(n,e){if(!(n instanceof hi)){let t=e?Mt.INDEX:Mt.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=Mt.INDEX|Mt.COPY_DST):(n=new Float32Array(n),t=Mt.VERTEX|Mt.COPY_DST)),n=new hi({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function UN(n,e,t){const r=n.getAttribute(e);if(!r)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const i=r.buffer.data;let s=1/0,a=1/0,l=-1/0,c=-1/0;const h=i.BYTES_PER_ELEMENT,d=(r.offset||0)/h,p=(r.stride||8)/h;for(let g=d;g<i.length;g+=p){const y=i[g],_=i[g+1];y>l&&(l=y),_>c&&(c=_),y<s&&(s=y),_<a&&(a=_)}return t.minX=s,t.minY=a,t.maxX=l,t.maxY=c,t}function P7(n){return(n instanceof hi||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=H1(n.buffer,!1),n}class Ll extends hr{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=Zt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Qn,this._boundsDirty=!0;const{attributes:t,indexBuffer:r,topology:i}=e;if(this.buffers=[],this.attributes={},t)for(const s in t)this.addAttribute(s,t[s]);this.instanceCount=e.instanceCount??1,r&&this.addIndex(r),this.topology=i||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const r=P7(t);this.buffers.indexOf(r.buffer)===-1&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=r}addIndex(e){this.indexBuffer=H1(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,UN(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const B7=new Float32Array(1),D7=new Uint32Array(1);class GN extends Ll{constructor(){const t=new hi({data:B7,label:"attribute-batch-buffer",usage:Mt.VERTEX|Mt.COPY_DST,shrinkToFit:!1}),r=new hi({data:D7,label:"index-batch-buffer",usage:Mt.INDEX|Mt.COPY_DST,shrinkToFit:!1}),i=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:20}},indexBuffer:r})}}function Mv(n,e,t){if(n)for(const r in n){const i=r.toLocaleLowerCase(),s=e[i];if(s){let a=n[r];r==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(a)}else Ue(`${r} placement hook does not exist in shader`)}}const k7=/\{\{(.*?)\}\}/g;function Rv(n){const e={};return(n.match(k7)?.map(r=>r.replace(/[{()}]/g,""))??[]).forEach(r=>{e[r]=[]}),e}function nP(n,e){let t;const r=/@in\s+([^;]+);/g;for(;(t=r.exec(n))!==null;)e.push(t[1])}function Pv(n,e,t=!1){const r=[];nP(e,r),n.forEach(l=>{l.header&&nP(l.header,r)});const i=r;t&&i.sort();const s=i.map((l,c)=>`       @location(${c}) ${l},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function rP(n,e){let t;const r=/@out\s+([^;]+);/g;for(;(t=r.exec(n))!==null;)e.push(t[1])}function O7(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function I7(n){const e=/@.*?\s+/g;return n.replace(e,"")}function zN(n,e){const t=[];rP(e,t),n.forEach(c=>{c.header&&rP(c.header,t)});let r=0;const i=t.sort().map(c=>c.indexOf("builtin")>-1?c:`@location(${r++}) ${c}`).join(`,
`),s=t.sort().map(c=>`       var ${I7(c)};`).join(`
`),a=`return VSOutput(
            ${t.sort().map(c=>` ${O7(c)}`).join(`,
`)});`;let l=e.replace(/@out\s+[^;]+;\s*/g,"");return l=l.replace("{{struct}}",`
${i}
`),l=l.replace("{{start}}",`
${s}
`),l=l.replace("{{return}}",`
${a}
`),l}function Bv(n,e){let t=n;for(const r in e){const i=e[r];i.join(`
`).length?t=t.replace(`{{${r}}}`,`//-----${r} START-----//
${i.join(`
`)}
//----${r} FINISH----//`):t=t.replace(`{{${r}}}`,"")}return t}const go=Object.create(null),V0=new Map;let N7=0;function VN({template:n,bits:e}){const t=jN(n,e);if(go[t])return go[t];const{vertex:r,fragment:i}=L7(n,e);return go[t]=XN(r,i,e),go[t]}function HN({template:n,bits:e}){const t=jN(n,e);return go[t]||(go[t]=XN(n.vertex,n.fragment,e)),go[t]}function L7(n,e){const t=e.map(a=>a.vertex).filter(a=>!!a),r=e.map(a=>a.fragment).filter(a=>!!a);let i=Pv(t,n.vertex,!0);i=zN(t,i);const s=Pv(r,n.fragment,!0);return{vertex:i,fragment:s}}function jN(n,e){return e.map(t=>(V0.has(t)||V0.set(t,N7++),V0.get(t))).sort((t,r)=>t-r).join("-")+n.vertex+n.fragment}function XN(n,e,t){const r=Rv(n),i=Rv(e);return t.forEach(s=>{Mv(s.vertex,r,s.name),Mv(s.fragment,i,s.name)}),{vertex:Bv(n,r),fragment:Bv(e,i)}}const WN=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,$N=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,qN=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,YN=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,KN={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},F7={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},ZN={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function vc({bits:n,name:e}){const t=VN({template:{fragment:$N,vertex:WN},bits:[KN,...n]});return jr.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Sc({bits:n,name:e}){return new mi({name:e,...HN({template:{vertex:qN,fragment:YN},bits:[ZN,...n]})})}const dy={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},fy={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},H0={};function U7(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let r=0;r<n;r++)e.push(`@group(1) @binding(${t++}) var textureSource${r+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${r+1}: sampler;`)}return e.join(`
`)}function G7(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<n;t++)t===n-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function py(n){return H0[n]||(H0[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${U7(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${G7(n)}
            `}}),H0[n]}const j0={};function z7(n){const e=[];for(let t=0;t<n;t++)t>0&&e.push("else"),t<n-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function my(n){return j0[n]||(j0[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${z7(n)}
            `}}),j0[n]}const Ec={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},wc={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},iP={};function gy(n){let e=iP[n];if(e)return e;const t=new Int32Array(n);for(let r=0;r<n;r++)t[r]=r;return e=iP[n]=new zn({uTextures:{value:t,type:"i32",size:n}},{isStatic:!0}),e}class Dv extends Ii{constructor(e){const t=Sc({name:"batch",bits:[fy,my(e),wc]}),r=vc({name:"batch",bits:[dy,py(e),Ec]});super({glProgram:t,gpuProgram:r,resources:{batchSamplers:gy(e)}}),this.maxTextures=e}}let Ih=null;const QN=class JN extends FN{constructor(e){super(e),this.geometry=new GN,this.name=JN.extension.name,this.vertexSize=6,Ih??(Ih=new Dv(e.maxTextures)),this.shader=Ih}packAttributes(e,t,r,i,s){const a=s<<16|e.roundPixels&65535,l=e.transform,c=l.a,h=l.b,d=l.c,p=l.d,g=l.tx,y=l.ty,{positions:_,uvs:S}=e,x=e.color,E=e.attributeOffset,w=E+e.attributeSize;for(let C=E;C<w;C++){const A=C*2,P=_[A],M=_[A+1];t[i++]=c*P+d*M+g,t[i++]=p*M+h*P+y,t[i++]=S[A],t[i++]=S[A+1],r[i++]=x,r[i++]=a}}packQuadAttributes(e,t,r,i,s){const a=e.texture,l=e.transform,c=l.a,h=l.b,d=l.c,p=l.d,g=l.tx,y=l.ty,_=e.bounds,S=_.maxX,x=_.minX,E=_.maxY,w=_.minY,C=a.uvs,A=e.color,P=s<<16|e.roundPixels&65535;t[i+0]=c*x+d*w+g,t[i+1]=p*w+h*x+y,t[i+2]=C.x0,t[i+3]=C.y0,r[i+4]=A,r[i+5]=P,t[i+6]=c*S+d*w+g,t[i+7]=p*w+h*S+y,t[i+8]=C.x1,t[i+9]=C.y1,r[i+10]=A,r[i+11]=P,t[i+12]=c*S+d*E+g,t[i+13]=p*E+h*S+y,t[i+14]=C.x2,t[i+15]=C.y2,r[i+16]=A,r[i+17]=P,t[i+18]=c*x+d*E+g,t[i+19]=p*E+h*x+y,t[i+20]=C.x3,t[i+21]=C.y3,r[i+22]=A,r[i+23]=P}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Ih=new Dv(e),this.shader=Ih)}destroy(){this.shader=null,super.destroy()}};QN.extension={type:[q.Batcher],name:"default"};let yy=QN;class Br{constructor(e){this.items=Object.create(null);const{renderer:t,type:r,onUnload:i,priority:s,name:a}=e;this._renderer=t,t.gc.addResourceHash(this,"items",r,s??0),this._onUnload=i,this.name=a}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...t){if(!this.items[e.uid])return;const r=e._gpuData[this._renderer.uid];r&&(this._onUnload?.(e,...t),r.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(t=>t&&this.remove(t,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function j1(n,e,t,r,i,s,a,l=null){let c=0;t*=e,i*=s;const h=l.a,d=l.b,p=l.c,g=l.d,y=l.tx,_=l.ty;for(;c<a;){const S=n[t],x=n[t+1];r[i]=h*S+p*x+y,r[i+1]=d*S+g*x+_,i+=s,t+=e,c++}}function X1(n,e,t,r){let i=0;for(e*=t;i<r;)n[e]=0,n[e+1]=0,e+=t,i++}function _y(n,e,t,r,i){const s=e.a,a=e.b,l=e.c,c=e.d,h=e.tx,d=e.ty;t||(t=0),r||(r=2),i||(i=n.length/r-t);let p=t*r;for(let g=0;g<i;g++){const y=n[p],_=n[p+1];n[p]=s*y+l*_+h,n[p+1]=a*y+c*_+d,p+=r}}const V7=new Ce;class by{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,r=this.renderable;return r?Ta(t,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||V7}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const hc={extension:{type:q.ShapeBuilder,name:"circle"},build(n,e){let t,r,i,s,a,l;if(n.type==="circle"){const A=n;if(a=l=A.radius,a<=0)return!1;t=A.x,r=A.y,i=s=0}else if(n.type==="ellipse"){const A=n;if(a=A.halfWidth,l=A.halfHeight,a<=0||l<=0)return!1;t=A.x,r=A.y,i=s=0}else{const A=n,P=A.width/2,M=A.height/2;t=A.x+P,r=A.y+M,a=l=Math.max(0,Math.min(A.radius,Math.min(P,M))),i=P-a,s=M-l}if(i<0||s<0)return!1;const c=Math.ceil(2.3*Math.sqrt(a+l)),h=c*8+(i?4:0)+(s?4:0);if(h===0)return!1;if(c===0)return e[0]=e[6]=t+i,e[1]=e[3]=r+s,e[2]=e[4]=t-i,e[5]=e[7]=r-s,!0;let d=0,p=c*4+(i?2:0)+2,g=p,y=h,_=i+a,S=s,x=t+_,E=t-_,w=r+S;if(e[d++]=x,e[d++]=w,e[--p]=w,e[--p]=E,s){const A=r-S;e[g++]=E,e[g++]=A,e[--y]=A,e[--y]=x}for(let A=1;A<c;A++){const P=Math.PI/2*(A/c),M=i+Math.cos(P)*a,I=s+Math.sin(P)*l,V=t+M,O=t-M,D=r+I,H=r-I;e[d++]=V,e[d++]=D,e[--p]=D,e[--p]=O,e[g++]=O,e[g++]=H,e[--y]=H,e[--y]=V}_=i,S=s+l,x=t+_,E=t-_,w=r+S;const C=r-S;return e[d++]=x,e[d++]=w,e[--y]=C,e[--y]=x,i&&(e[d++]=E,e[d++]=w,e[--y]=C,e[--y]=E),!0},triangulate(n,e,t,r,i,s){if(n.length===0)return;let a=0,l=0;for(let d=0;d<n.length;d+=2)a+=n[d],l+=n[d+1];a/=n.length/2,l/=n.length/2;let c=r;e[c*t]=a,e[c*t+1]=l;const h=c++;for(let d=0;d<n.length;d+=2)e[c*t]=n[d],e[c*t+1]=n[d+1],d>0&&(i[s++]=c,i[s++]=h,i[s++]=c-1),c++;i[s++]=h+1,i[s++]=h,i[s++]=c-1}},eL={...hc,extension:{...hc.extension,name:"ellipse"}},tL={...hc,extension:{...hc.extension,name:"roundedRectangle"}},W1=1e-4,kv=1e-4;function nL(n){const e=n.length;if(e<6)return 1;let t=0;for(let r=0,i=n[e-2],s=n[e-1];r<e;r+=2){const a=n[r],l=n[r+1];t+=(a-i)*(l+s),i=a,s=l}return t<0?-1:1}function sP(n,e,t,r,i,s,a,l){const c=n-t*i,h=e-r*i,d=n+t*s,p=e+r*s;let g,y;a?(g=r,y=-t):(g=-r,y=t);const _=c+g,S=h+y,x=d+g,E=p+y;return l.push(_,S),l.push(x,E),2}function Jo(n,e,t,r,i,s,a,l){const c=t-n,h=r-e;let d=Math.atan2(c,h),p=Math.atan2(i-n,s-e);l&&d<p?d+=Math.PI*2:!l&&d>p&&(p+=Math.PI*2);let g=d;const y=p-d,_=Math.abs(y),S=Math.sqrt(c*c+h*h),x=(15*_*Math.sqrt(S)/Math.PI>>0)+1,E=y/x;if(g+=E,l){a.push(n,e),a.push(t,r);for(let w=1,C=g;w<x;w++,C+=E)a.push(n,e),a.push(n+Math.sin(C)*S,e+Math.cos(C)*S);a.push(n,e),a.push(i,s)}else{a.push(t,r),a.push(n,e);for(let w=1,C=g;w<x;w++,C+=E)a.push(n+Math.sin(C)*S,e+Math.cos(C)*S),a.push(n,e);a.push(i,s),a.push(n,e)}return x*2}function $1(n,e,t,r,i,s){const a=W1;if(n.length===0)return;const l=e;let c=l.alignment;if(e.alignment!==.5){let J=nL(n);t&&(J*=-1),c=(c-.5)*J+.5}const h=new Bt(n[0],n[1]),d=new Bt(n[n.length-2],n[n.length-1]),p=r,g=Math.abs(h.x-d.x)<a&&Math.abs(h.y-d.y)<a;if(p){n=n.slice(),g&&(n.pop(),n.pop(),d.set(n[n.length-2],n[n.length-1]));const J=(h.x+d.x)*.5,U=(d.y+h.y)*.5;n.unshift(J,U),n.push(J,U)}const y=i,_=n.length/2;let S=n.length;const x=y.length/2,E=l.width/2,w=E*E,C=l.miterLimit*l.miterLimit;let A=n[0],P=n[1],M=n[2],I=n[3],V=0,O=0,D=-(P-I),H=A-M,$=0,ne=0,Z=Math.sqrt(D*D+H*H);D/=Z,H/=Z,D*=E,H*=E;const te=c,z=(1-te)*2,X=te*2;p||(l.cap==="round"?S+=Jo(A-D*(z-X)*.5,P-H*(z-X)*.5,A-D*z,P-H*z,A+D*X,P+H*X,y,!0)+2:l.cap==="square"&&(S+=sP(A,P,D,H,z,X,!0,y))),y.push(A-D*z,P-H*z),y.push(A+D*X,P+H*X);for(let J=1;J<_-1;++J){A=n[(J-1)*2],P=n[(J-1)*2+1],M=n[J*2],I=n[J*2+1],V=n[(J+1)*2],O=n[(J+1)*2+1],D=-(P-I),H=A-M,Z=Math.sqrt(D*D+H*H),D/=Z,H/=Z,D*=E,H*=E,$=-(I-O),ne=M-V,Z=Math.sqrt($*$+ne*ne),$/=Z,ne/=Z,$*=E,ne*=E;const U=M-A,G=P-I,Q=M-V,L=O-I,he=U*Q+G*L,fe=G*Q-L*U,ve=fe<0;if(Math.abs(fe)<.001*Math.abs(he)){y.push(M-D*z,I-H*z),y.push(M+D*X,I+H*X),he>=0&&(l.join==="round"?S+=Jo(M,I,M-D*z,I-H*z,M-$*z,I-ne*z,y,!1)+4:S+=2,y.push(M-$*X,I-ne*X),y.push(M+$*z,I+ne*z));continue}const Be=(-D+A)*(-H+I)-(-D+M)*(-H+P),ke=(-$+V)*(-ne+I)-(-$+M)*(-ne+O),Ne=(U*ke-Q*Be)/fe,rt=(L*Be-G*ke)/fe,st=(Ne-M)*(Ne-M)+(rt-I)*(rt-I),at=M+(Ne-M)*z,nn=I+(rt-I)*z,ut=M-(Ne-M)*X,Vt=I-(rt-I)*X,De=Math.min(U*U+G*G,Q*Q+L*L),ln=ve?z:X,vn=De+ln*ln*w;st<=vn?l.join==="bevel"||st/w>C?(ve?(y.push(at,nn),y.push(M+D*X,I+H*X),y.push(at,nn),y.push(M+$*X,I+ne*X)):(y.push(M-D*z,I-H*z),y.push(ut,Vt),y.push(M-$*z,I-ne*z),y.push(ut,Vt)),S+=2):l.join==="round"?ve?(y.push(at,nn),y.push(M+D*X,I+H*X),S+=Jo(M,I,M+D*X,I+H*X,M+$*X,I+ne*X,y,!0)+4,y.push(at,nn),y.push(M+$*X,I+ne*X)):(y.push(M-D*z,I-H*z),y.push(ut,Vt),S+=Jo(M,I,M-D*z,I-H*z,M-$*z,I-ne*z,y,!1)+4,y.push(M-$*z,I-ne*z),y.push(ut,Vt)):(y.push(at,nn),y.push(ut,Vt)):(y.push(M-D*z,I-H*z),y.push(M+D*X,I+H*X),l.join==="round"?ve?S+=Jo(M,I,M+D*X,I+H*X,M+$*X,I+ne*X,y,!0)+2:S+=Jo(M,I,M-D*z,I-H*z,M-$*z,I-ne*z,y,!1)+2:l.join==="miter"&&st/w<=C&&(ve?(y.push(ut,Vt),y.push(ut,Vt)):(y.push(at,nn),y.push(at,nn)),S+=2),y.push(M-$*z,I-ne*z),y.push(M+$*X,I+ne*X),S+=2)}A=n[(_-2)*2],P=n[(_-2)*2+1],M=n[(_-1)*2],I=n[(_-1)*2+1],D=-(P-I),H=A-M,Z=Math.sqrt(D*D+H*H),D/=Z,H/=Z,D*=E,H*=E,y.push(M-D*z,I-H*z),y.push(M+D*X,I+H*X),p||(l.cap==="round"?S+=Jo(M-D*(z-X)*.5,I-H*(z-X)*.5,M-D*z,I-H*z,M+D*X,I+H*X,y,!1)+2:l.cap==="square"&&(S+=sP(M,I,D,H,z,X,!1,y)));const K=kv*kv;for(let J=x;J<S+x-2;++J)A=y[J*2],P=y[J*2+1],M=y[(J+1)*2],I=y[(J+1)*2+1],V=y[(J+2)*2],O=y[(J+2)*2+1],!(Math.abs(A*(I-O)+M*(O-P)+V*(P-I))<K)&&s.push(J,J+1,J+2)}function rL(n,e,t,r){const i=W1;if(n.length===0)return;const s=n[0],a=n[1],l=n[n.length-2],c=n[n.length-1],h=e||Math.abs(s-l)<i&&Math.abs(a-c)<i,d=t,p=n.length/2,g=d.length/2;for(let y=0;y<p;y++)d.push(n[y*2]),d.push(n[y*2+1]);for(let y=0;y<p-1;y++)r.push(g+y,g+y+1);h&&r.push(g+p-1,g)}function q1(n,e,t,r,i,s,a){const l=lN(n,e,2);if(!l)return;for(let h=0;h<l.length;h+=3)s[a++]=l[h]+i,s[a++]=l[h+1]+i,s[a++]=l[h+2]+i;let c=i*r;for(let h=0;h<n.length;h+=2)t[c]=n[h],t[c+1]=n[h+1],c+=r}const H7=[],iL={extension:{type:q.ShapeBuilder,name:"polygon"},build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return!0},triangulate(n,e,t,r,i,s){q1(n,H7,e,t,r,i,s)}},sL={extension:{type:q.ShapeBuilder,name:"rectangle"},build(n,e){const t=n,r=t.x,i=t.y,s=t.width,a=t.height;return s>0&&a>0?(e[0]=r,e[1]=i,e[2]=r+s,e[3]=i,e[4]=r+s,e[5]=i+a,e[6]=r,e[7]=i+a,!0):!1},triangulate(n,e,t,r,i,s){let a=0;r*=t,e[r+a]=n[0],e[r+a+1]=n[1],a+=t,e[r+a]=n[2],e[r+a+1]=n[3],a+=t,e[r+a]=n[6],e[r+a+1]=n[7],a+=t,e[r+a]=n[4],e[r+a+1]=n[5],a+=t;const l=r/t;i[s++]=l,i[s++]=l+1,i[s++]=l+2,i[s++]=l+1,i[s++]=l+3,i[s++]=l+2}},aL={extension:{type:q.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,!0},triangulate(n,e,t,r,i,s){let a=0;r*=t,e[r+a]=n[0],e[r+a+1]=n[1],a+=t,e[r+a]=n[2],e[r+a+1]=n[3],a+=t,e[r+a]=n[4],e[r+a+1]=n[5];const l=r/t;i[s++]=l,i[s++]=l+1,i[s++]=l+2}},aP=[{offset:0,color:"white"},{offset:1,color:"black"}],Y1=class Ov{constructor(...e){this.uid=Zt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=j7(e);t={...t.type==="radial"?Ov.defaultRadialOptions:Ov.defaultLinearOptions,...xs(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(i=>{this.addColorStop(i.offset,i.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:yt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:r,y:i}=this.end,s=r-e,a=i-t;const l=s<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const x=e;e=r,r=x,s*=-1}if(a<0){const x=t;t=i,i=x,a*=-1}}const c=this.colorStops.length?this.colorStops:aP,h=this._textureSize,{canvas:d,context:p}=lP(h,1),g=l?p.createLinearGradient(this._textureSize,0,0,0):p.createLinearGradient(0,0,this._textureSize,0);oP(g,c),p.fillStyle=g,p.fillRect(0,0,h,1),this.texture=new we({source:new So({resource:d,addressMode:this._wrapMode})});const y=Math.sqrt(s*s+a*a),_=Math.atan2(a,s),S=new Ce;S.scale(y/h,1),S.rotate(_),S.translate(e,t),this.textureSpace==="local"&&S.scale(h,h),this.transform=S}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:aP,t=this._textureSize,{canvas:r,context:i}=lP(t,t),{x:s,y:a}=this.center,{x:l,y:c}=this.outerCenter,h=this.innerRadius,d=this.outerRadius,p=l-d,g=c-d,y=t/(d*2),_=(s-p)*y,S=(a-g)*y,x=i.createRadialGradient(_,S,h*y,(l-p)*y,(c-g)*y,d*y);oP(x,e),i.fillStyle=e[e.length-1].color,i.fillRect(0,0,t,t),i.fillStyle=x,i.translate(_,S),i.rotate(this.rotation),i.scale(1,this.scale),i.translate(-_,-S),i.fillRect(0,0,t,t),this.texture=new we({source:new So({resource:r,addressMode:this._wrapMode})});const E=new Ce;E.scale(1/y,1/y),E.translate(p,g),this.textureSpace==="local"&&E.scale(t,t),this.transform=E}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Y1.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Y1.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ki=Y1;function oP(n,e){for(let t=0;t<e.length;t++){const r=e[t];n.addColorStop(r.offset,r.color)}}function lP(n,e){const t=je.get().createCanvas(n,e),r=t.getContext("2d");return{canvas:t,context:r}}function j7(n){let e=n[0]??{};return(typeof e=="number"||n[1])&&(Ae("8.5.2","use options object instead"),e={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??ki.defaultLinearOptions.textureSize}),e}const X7=new Ce,W7=new Rt;function K1(n,e,t,r){const i=e.matrix?n.copyFrom(e.matrix).invert():n.identity();if(e.textureSpace==="local"){const a=t.getBounds(W7);e.width&&a.pad(e.width);const{x:l,y:c}=a,h=1/a.width,d=1/a.height,p=-l*h,g=-c*d,y=i.a,_=i.b,S=i.c,x=i.d;i.a*=h,i.b*=h,i.c*=d,i.d*=d,i.tx=p*y+g*S+i.tx,i.ty=p*_+g*x+i.ty}else i.translate(e.texture.frame.x,e.texture.frame.y),i.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof ki)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),r&&i.append(X7.copyFrom(r).invert()),i}const Fl={};ze.handleByMap(q.ShapeBuilder,Fl);ze.add(sL,iL,aL,hc,eL,tL);const $7=new Rt,q7=new Ce;function oL(n,e){const{geometryData:t,batches:r}=e;r.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let i=0;i<n.instructions.length;i++){const s=n.instructions[i];if(s.action==="texture")Y7(s.data,r,t);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",l=s.data.path.shapePath,c=s.data.style,h=s.data.hole;a&&h&&uP(h.shapePath,c,!0,r,t),h&&(l.shapePrimitives[l.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),uP(l,c,a,r,t)}}}function Y7(n,e,t){const r=[],i=Fl.rectangle,s=$7;s.x=n.dx,s.y=n.dy,s.width=n.dw,s.height=n.dh;const a=n.transform;if(!i.build(s,r))return;const{vertices:l,uvs:c,indices:h}=t,d=h.length,p=l.length/2;a&&_y(r,a),i.triangulate(r,l,2,p,h,d);const g=n.image,y=g.uvs;c.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const _=Gn.get(by);_.indexOffset=d,_.indexSize=h.length-d,_.attributeOffset=p,_.attributeSize=l.length/2-p,_.baseColor=n.style,_.alpha=n.alpha,_.texture=g,_.geometryData=t,e.push(_)}function uP(n,e,t,r,i){const{vertices:s,uvs:a,indices:l}=i;n.shapePrimitives.forEach(({shape:c,transform:h,holes:d})=>{const p=[],g=Fl[c.type];if(!g.build(c,p))return;const y=l.length,_=s.length/2;let S="triangle-list";if(h&&_y(p,h),t){const C=c.closePath??!0,A=e;A.pixelLine?(rL(p,C,s,l),S="line-list"):$1(p,A,!1,C,s,l)}else if(d){const C=[],A=p.slice();K7(d).forEach(M=>{C.push(A.length/2),A.push(...M)}),q1(A,C,s,2,_,l,y)}else g.triangulate(p,s,2,_,l,y);const x=a.length/2,E=e.texture;if(E!==we.WHITE){const C=K1(q7,e,c,h);j1(s,2,_,a,x,2,s.length/2-_,C)}else X1(a,x,2,s.length/2-_);const w=Gn.get(by);w.indexOffset=y,w.indexSize=l.length-y,w.attributeOffset=_,w.attributeSize=s.length/2-_,w.baseColor=e.color,w.alpha=e.alpha,w.texture=E,w.geometryData=i,w.topology=S,r.push(w)})}function K7(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t].shape,i=[];Fl[r.type].build(r,i)&&e.push(i)}return e}class lL{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{Gn.return(e)}),this.graphicsData&&Gn.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class uL{constructor(){this.instructions=new ty}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new yy({maxTextures:t}),this.instructions.reset()}get geometry(){return Ae(BO,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Z1=class Iv{constructor(e){this._renderer=e,this._managedContexts=new Br({renderer:e,type:"resource",name:"graphicsContext"})}init(e){Iv.defaultOptions.bezierSmoothness=e?.bezierSmoothness??Iv.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=!!e._gpuData[this._renderer.uid],r=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!t){t&&r.reset(),oL(e,r);const i=e.batchMode;e.customShader||i==="no-batch"?r.isBatchable=!1:i==="auto"?r.isBatchable=r.geometryData.vertices.length<400:r.isBatchable=!0,e.dirty=!1}return r}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=Gn.get(uL,{maxTextures:this._renderer.limits.maxBatchableTextures}),r=e._gpuData[this._renderer.uid],{batches:i,geometryData:s}=r;r.graphicsData=t;const a=s.vertices.length,l=s.indices.length;for(let p=0;p<i.length;p++)i[p].applyTransform=!1;const c=t.batcher;c.ensureAttributeBuffer(a),c.ensureIndexBuffer(l),c.begin();for(let p=0;p<i.length;p++){const g=i[p];c.add(g)}c.finish(t.instructions);const h=c.geometry;h.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),h.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const d=c.batches;for(let p=0;p<d.length;p++){const g=d[p];g.bindGroup=hy(g.textures.textures,g.textures.count,this._renderer.limits.maxBatchableTextures)}return t}_initContext(e){const t=new lL;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};Z1.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"graphicsContext"};Z1.defaultOptions={bezierSmoothness:.5};let xy=Z1;const Z7=8,Zp=11920929e-14,Q7=1;function Q1(n,e,t,r,i,s,a,l,c,h){const p=Math.min(.99,Math.max(0,h??xy.defaultOptions.bezierSmoothness));let g=(Q7-p)/1;return g*=g,J7(e,t,r,i,s,a,l,c,n,g),n}function J7(n,e,t,r,i,s,a,l,c,h){Nv(n,e,t,r,i,s,a,l,c,h,0),c.push(a,l)}function Nv(n,e,t,r,i,s,a,l,c,h,d){if(d>Z7)return;const p=(n+t)/2,g=(e+r)/2,y=(t+i)/2,_=(r+s)/2,S=(i+a)/2,x=(s+l)/2,E=(p+y)/2,w=(g+_)/2,C=(y+S)/2,A=(_+x)/2,P=(E+C)/2,M=(w+A)/2;if(d>0){let I=a-n,V=l-e;const O=Math.abs((t-a)*V-(r-l)*I),D=Math.abs((i-a)*V-(s-l)*I);if(O>Zp&&D>Zp){if((O+D)*(O+D)<=h*(I*I+V*V)){c.push(P,M);return}}else if(O>Zp){if(O*O<=h*(I*I+V*V)){c.push(P,M);return}}else if(D>Zp){if(D*D<=h*(I*I+V*V)){c.push(P,M);return}}else if(I=P-(n+a)/2,V=M-(e+l)/2,I*I+V*V<=h){c.push(P,M);return}}Nv(n,e,p,g,E,w,P,M,c,h,d+1),Nv(P,M,C,A,S,x,a,l,c,h,d+1)}const eX=8,tX=11920929e-14,nX=1;function cL(n,e,t,r,i,s,a,l){const h=Math.min(.99,Math.max(0,l??xy.defaultOptions.bezierSmoothness));let d=(nX-h)/1;return d*=d,rX(e,t,r,i,s,a,n,d),n}function rX(n,e,t,r,i,s,a,l){Lv(a,n,e,t,r,i,s,l,0),a.push(i,s)}function Lv(n,e,t,r,i,s,a,l,c){if(c>eX)return;const h=(e+r)/2,d=(t+i)/2,p=(r+s)/2,g=(i+a)/2,y=(h+p)/2,_=(d+g)/2;let S=s-e,x=a-t;const E=Math.abs((r-s)*x-(i-a)*S);if(E>tX){if(E*E<=l*(S*S+x*x)){n.push(y,_);return}}else if(S=y-(e+s)/2,x=_-(t+a)/2,S*S+x*x<=l){n.push(y,_);return}Lv(n,e,t,h,d,y,_,l,c+1),Lv(n,y,_,p,g,s,a,l,c+1)}function J1(n,e,t,r,i,s,a,l){let c=Math.abs(i-s);(!a&&i>s||a&&s>i)&&(c=2*Math.PI-c),l||(l=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(c/Math.PI)))),l=Math.max(l,3);let h=c/l,d=i;h*=a?-1:1;for(let p=0;p<l+1;p++){const g=Math.cos(d),y=Math.sin(d),_=e+g*r,S=t+y*r;n.push(_,S),d+=h}}function hL(n,e,t,r,i,s){const a=n[n.length-2],c=n[n.length-1]-t,h=a-e,d=i-t,p=r-e,g=Math.abs(c*p-h*d);if(g<1e-8||s===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const y=c*c+h*h,_=d*d+p*p,S=c*d+h*p,x=s*Math.sqrt(y)/g,E=s*Math.sqrt(_)/g,w=x*S/y,C=E*S/_,A=x*p+E*h,P=x*d+E*c,M=h*(E+w),I=c*(E+w),V=p*(x+C),O=d*(x+C),D=Math.atan2(I-P,M-A),H=Math.atan2(O-P,V-A);J1(n,A+e,P+t,s,D,H,h*d>p*c)}const pd=Math.PI*2,X0={centerX:0,centerY:0,ang1:0,ang2:0},W0=({x:n,y:e},t,r,i,s,a,l,c)=>{n*=t,e*=r;const h=i*n-s*e,d=s*n+i*e;return c.x=h+a,c.y=d+l,c};function iX(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=e===1.5707963267948966?.551915024494:t,i=Math.cos(n),s=Math.sin(n),a=Math.cos(n+e),l=Math.sin(n+e);return[{x:i-s*r,y:s+i*r},{x:a+l*r,y:l-a*r},{x:a,y:l}]}const cP=(n,e,t,r)=>{const i=n*r-e*t<0?-1:1;let s=n*t+e*r;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},sX=(n,e,t,r,i,s,a,l,c,h,d,p,g)=>{const y=Math.pow(i,2),_=Math.pow(s,2),S=Math.pow(d,2),x=Math.pow(p,2);let E=y*_-y*x-_*S;E<0&&(E=0),E/=y*x+_*S,E=Math.sqrt(E)*(a===l?-1:1);const w=E*i/s*p,C=E*-s/i*d,A=h*w-c*C+(n+t)/2,P=c*w+h*C+(e+r)/2,M=(d-w)/i,I=(p-C)/s,V=(-d-w)/i,O=(-p-C)/s,D=cP(1,0,M,I);let H=cP(M,I,V,O);l===0&&H>0&&(H-=pd),l===1&&H<0&&(H+=pd),g.centerX=A,g.centerY=P,g.ang1=D,g.ang2=H};function dL(n,e,t,r,i,s,a,l=0,c=0,h=0){if(s===0||a===0)return;const d=Math.sin(l*pd/360),p=Math.cos(l*pd/360),g=p*(e-r)/2+d*(t-i)/2,y=-d*(e-r)/2+p*(t-i)/2;if(g===0&&y===0)return;s=Math.abs(s),a=Math.abs(a);const _=Math.pow(g,2)/Math.pow(s,2)+Math.pow(y,2)/Math.pow(a,2);_>1&&(s*=Math.sqrt(_),a*=Math.sqrt(_)),sX(e,t,r,i,s,a,c,h,d,p,g,y,X0);let{ang1:S,ang2:x}=X0;const{centerX:E,centerY:w}=X0;let C=Math.abs(x)/(pd/4);Math.abs(1-C)<1e-7&&(C=1);const A=Math.max(Math.ceil(C),1);x/=A;let P=n[n.length-2],M=n[n.length-1];const I={x:0,y:0};for(let V=0;V<A;V++){const O=iX(S,x),{x:D,y:H}=W0(O[0],s,a,p,d,E,w,I),{x:$,y:ne}=W0(O[1],s,a,p,d,E,w,I),{x:Z,y:te}=W0(O[2],s,a,p,d,E,w,I);Q1(n,P,M,D,H,$,ne,Z,te),P=Z,M=te,S+=x}}function fL(n,e,t){const r=(a,l)=>{const c=l.x-a.x,h=l.y-a.y,d=Math.sqrt(c*c+h*h),p=c/d,g=h/d;return{len:d,nx:p,ny:g}},i=(a,l)=>{a===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y)};let s=e[e.length-1];for(let a=0;a<e.length;a++){const l=e[a%e.length],c=l.radius??t;if(c<=0){i(a,l),s=l;continue}const h=e[(a+1)%e.length],d=r(l,s),p=r(l,h);if(d.len<1e-4||p.len<1e-4){i(a,l),s=l;continue}let g=Math.asin(d.nx*p.ny-d.ny*p.nx),y=1,_=!1;d.nx*p.nx-d.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,_=!0):g>0&&(y=-1,_=!0);const S=g/2;let x,E=Math.abs(Math.cos(S)*c/Math.sin(S));E>Math.min(d.len/2,p.len/2)?(E=Math.min(d.len/2,p.len/2),x=Math.abs(E*Math.sin(S)/Math.cos(S))):x=c;const w=l.x+p.nx*E+-p.ny*x*y,C=l.y+p.ny*E+p.nx*x*y,A=Math.atan2(d.ny,d.nx)+Math.PI/2*y,P=Math.atan2(p.ny,p.nx)-Math.PI/2*y;a===0&&n.moveTo(w+Math.cos(A)*x,C+Math.sin(A)*x),n.arc(w,C,x,A,P,_),s=l}}function pL(n,e,t,r){const i=(l,c)=>Math.sqrt((l.x-c.x)**2+(l.y-c.y)**2),s=(l,c,h)=>({x:l.x+(c.x-l.x)*h,y:l.y+(c.y-l.y)*h}),a=e.length;for(let l=0;l<a;l++){const c=e[(l+1)%a],h=c.radius??t;if(h<=0){l===0?n.moveTo(c.x,c.y):n.lineTo(c.x,c.y);continue}const d=e[l],p=e[(l+2)%a],g=i(d,c);let y;if(g<1e-4)y=c;else{const x=Math.min(g/2,h);y=s(c,d,x/g)}const _=i(p,c);let S;if(_<1e-4)S=c;else{const x=Math.min(_/2,h);S=s(c,p,x/_)}l===0?n.moveTo(y.x,y.y):n.lineTo(y.x,y.y),n.quadraticCurveTo(c.x,c.y,S.x,S.y,r)}}const aX=new Rt;class mL{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Qn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const r=this._currentPoly.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==t)&&r.push(e,t),this}arc(e,t,r,i,s,a){this._ensurePoly(!1);const l=this._currentPoly.points;return J1(l,e,t,r,i,s,a),this}arcTo(e,t,r,i,s){this._ensurePoly();const a=this._currentPoly.points;return hL(a,e,t,r,i,s),this}arcToSvg(e,t,r,i,s,a,l){const c=this._currentPoly.points;return dL(c,this._currentPoly.lastX,this._currentPoly.lastY,a,l,e,t,r,i,s),this}bezierCurveTo(e,t,r,i,s,a,l){this._ensurePoly();const c=this._currentPoly;return Q1(this._currentPoly.points,c.lastX,c.lastY,e,t,r,i,s,a,l),this}quadraticCurveTo(e,t,r,i,s){this._ensurePoly();const a=this._currentPoly;return cL(this._currentPoly.points,a.lastX,a.lastY,e,t,r,i,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const r=this.shapePrimitives,i=r.length;for(let s=0;s<e.instructions.length;s++){const a=e.instructions[s];this[a.action](...a.data)}if(e.checkForHoles&&r.length-i>1){let s=null;for(let a=i;a<r.length;a++){const l=r[a];if(l.shape.type==="polygon"){const c=l.shape,h=s?.shape;h&&h.containsPolygon(c)?(s.holes||(s.holes=[]),s.holes.push(l),r.copyWithin(a,a+1),r.length--,a--):s=l}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,r,i,s){return this.drawShape(new Rt(e,t,r,i),s),this}circle(e,t,r,i){return this.drawShape(new ly(e,t,r),i),this}poly(e,t,r){const i=new qu(e);return i.closePath=t,this.drawShape(i,r),this}regularPoly(e,t,r,i,s=0,a){i=Math.max(i|0,3);const l=-1*Math.PI/2+s,c=Math.PI*2/i,h=[];for(let d=0;d<i;d++){const p=l-d*c;h.push(e+r*Math.cos(p),t+r*Math.sin(p))}return this.poly(h,!0,a),this}roundPoly(e,t,r,i,s,a=0,l){if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,t,r,i,a);const c=r*Math.sin(Math.PI/i)-.001;s=Math.min(s,c);const h=-1*Math.PI/2+a,d=Math.PI*2/i,p=(i-2)*Math.PI/i/2;for(let g=0;g<i;g++){const y=g*d+h,_=e+r*Math.cos(y),S=t+r*Math.sin(y),x=y+Math.PI+p,E=y-Math.PI-p,w=_+s*Math.cos(x),C=S+s*Math.sin(x),A=_+s*Math.cos(E),P=S+s*Math.sin(E);g===0?this.moveTo(w,C):this.lineTo(w,C),this.quadraticCurveTo(_,S,A,P,l)}return this.closePath()}roundShape(e,t,r=!1,i){return e.length<3?this:(r?pL(this,e,t,i):fL(this,e,t),this.closePath())}filletRect(e,t,r,i,s){if(s===0)return this.rect(e,t,r,i);const a=Math.min(r,i)/2,l=Math.min(a,Math.max(-a,s)),c=e+r,h=t+i,d=l<0?-l:0,p=Math.abs(l);return this.moveTo(e,t+p).arcTo(e+d,t+d,e+p,t,p).lineTo(c-p,t).arcTo(c-d,t+d,c,t+p,p).lineTo(c,h-p).arcTo(c-d,h-d,e+r-p,h,p).lineTo(e+p,h).arcTo(e+d,h-d,e,h-p,p).closePath()}chamferRect(e,t,r,i,s,a){if(s<=0)return this.rect(e,t,r,i);const l=Math.min(s,Math.min(r,i)/2),c=e+r,h=t+i,d=[e+l,t,c-l,t,c,t+l,c,h-l,c-l,h,e+l,h,e,h-l,e,t+l];for(let p=d.length-1;p>=2;p-=2)d[p]===d[p-2]&&d[p-1]===d[p-3]&&d.splice(p-1,2);return this.poly(d,!0,a)}ellipse(e,t,r,i,s){return this.drawShape(new uy(e,t,r,i),s),this}roundRect(e,t,r,i,s,a){return this.drawShape(new cy(e,t,r,i,s),a),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let r=this._currentPoly;return r&&this.endPoly(),r=new qu,r.points.push(e,t),this._currentPoly=r,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new qu,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let r=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const s=t.transform,a=r;r=s.a*r+s.c*i+s.tx,i=s.b*a+s.d*i+s.ty}this._currentPoly.points.push(r,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const r=e.instructions[t];this[r.action](...r.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let r=0;r<t.length;r++){const i=t[r],s=i.shape.getBounds(aX);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}class gs{constructor(e,t=!1){this.instructions=[],this.uid=Zt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?PN(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new mL(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,r,i,s){const a=this.instructions[this.instructions.length-1],l=this.getLastPoint(Bt.shared);let c=0,h=0;if(!a||a.action!=="bezierCurveTo")c=l.x,h=l.y;else{c=a.data[2],h=a.data[3];const d=l.x,p=l.y;c=d+(d-c),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[c,h,e,t,r,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,r){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(Bt.shared);let a=0,l=0;if(!i||i.action!=="quadraticCurveTo")a=s.x,l=s.y;else{a=i.data[0],l=i.data[1];const c=s.x,h=s.y;a=c+(c-a),l=h+(h-l)}return this.instructions.push({action:"quadraticCurveTo",data:[a,l,e,t,r]}),this._dirty=!0,this}rect(e,t,r,i,s){return this.instructions.push({action:"rect",data:[e,t,r,i,s]}),this._dirty=!0,this}circle(e,t,r,i){return this.instructions.push({action:"circle",data:[e,t,r,i]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,r,i,s,a,l){s||(s=i/2);const c=-1*Math.PI/2+a,h=r*2,d=Math.PI*2/h,p=[];for(let g=0;g<h;g++){const y=g%2?s:i,_=g*d+c;p.push(e+y*Math.cos(_),t+y*Math.sin(_))}return this.poly(p,!0,l),this}clone(e=!1){const t=new gs;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const i=this.instructions[r];t.instructions.push({action:i.action,data:i.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,r=e.b,i=e.c,s=e.d,a=e.tx,l=e.ty;let c=0,h=0,d=0,p=0,g=0,y=0,_=0,S=0;for(let x=0;x<this.instructions.length;x++){const E=this.instructions[x],w=E.data;switch(E.action){case"moveTo":case"lineTo":c=w[0],h=w[1],w[0]=t*c+i*h+a,w[1]=r*c+s*h+l;break;case"bezierCurveTo":d=w[0],p=w[1],g=w[2],y=w[3],c=w[4],h=w[5],w[0]=t*d+i*p+a,w[1]=r*d+s*p+l,w[2]=t*g+i*y+a,w[3]=r*g+s*y+l,w[4]=t*c+i*h+a,w[5]=r*c+s*h+l;break;case"quadraticCurveTo":d=w[0],p=w[1],c=w[2],h=w[3],w[0]=t*d+i*p+a,w[1]=r*d+s*p+l,w[2]=t*c+i*h+a,w[3]=r*c+s*h+l;break;case"arcToSvg":c=w[5],h=w[6],_=w[0],S=w[1],w[0]=t*_+i*S,w[1]=r*_+s*S,w[5]=t*c+i*h+a,w[6]=r*c+s*h+l;break;case"circle":w[4]=Nh(w[3],e);break;case"rect":w[4]=Nh(w[4],e);break;case"ellipse":w[8]=Nh(w[8],e);break;case"roundRect":w[5]=Nh(w[5],e);break;case"addPath":w[0].transform(e);break;case"poly":w[2]=Nh(w[2],e);break;default:Ue("unknown transform action",E.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,r=this.instructions[t];if(!r)return e.x=0,e.y=0,e;for(;r.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;r=this.instructions[t]}switch(r.action){case"moveTo":case"lineTo":e.x=r.data[0],e.y=r.data[1];break;case"quadraticCurveTo":e.x=r.data[2],e.y=r.data[3];break;case"bezierCurveTo":e.x=r.data[4],e.y=r.data[5];break;case"arc":case"arcToSvg":e.x=r.data[5],e.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(e);break}return e}}function Nh(n,e){return n?n.prepend(e):e.clone()}function wn(n,e,t){const r=n.getAttribute(e);return r?Number(r):t}function gL(n,e){const t=n.querySelectorAll("defs");for(let r=0;r<t.length;r++){const i=t[r];for(let s=0;s<i.children.length;s++){const a=i.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=oX(a);break;case"radialgradient":e.defs[a.id]=lX();break}}}}function oX(n){const e=wn(n,"x1",0),t=wn(n,"y1",0),r=wn(n,"x2",1),i=wn(n,"y2",0),s=n.getAttribute("gradientUnits")||"objectBoundingBox",a=new ki(e,t,r,i,s==="objectBoundingBox"?"local":"global");for(let l=0;l<n.children.length;l++){const c=n.children[l],h=wn(c,"offset",0),d=yt.shared.setValue(c.getAttribute("stop-color")).toNumber();a.addColorStop(h,d)}return a}function lX(n){return Ue("[SVG Parser] Radial gradients are not yet supported"),new ki(0,0,1,0)}function Fv(n){const e=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const Uv={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function eE(n,e){const t=n.getAttribute("style"),r={},i={},s={strokeStyle:r,fillStyle:i,useFill:!1,useStroke:!1};for(const a in Uv){const l=n.getAttribute(a);l&&hP(e,s,a,l.trim())}if(t){const a=t.split(";");for(let l=0;l<a.length;l++){const c=a[l].trim(),[h,d]=c.split(":");Uv[h]&&hP(e,s,h,d.trim())}}return{strokeStyle:s.useStroke?r:null,fillStyle:s.useFill?i:null,useFill:s.useFill,useStroke:s.useStroke}}function hP(n,e,t,r){switch(t){case"stroke":if(r!=="none"){if(r.startsWith("url(")){const i=Fv(r);e.strokeStyle.fill=n.defs[i]}else e.strokeStyle.color=yt.shared.setValue(r).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(r);break;case"fill":if(r!=="none"){if(r.startsWith("url(")){const i=Fv(r);e.fillStyle.fill=n.defs[i]}else e.fillStyle.color=yt.shared.setValue(r).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(r);break;case"stroke-opacity":e.strokeStyle.alpha=Number(r);break;case"opacity":e.fillStyle.alpha=Number(r),e.strokeStyle.alpha=Number(r);break}}function yL(n){if(n.length<=2)return!0;const e=n.map(l=>l.area).sort((l,c)=>c-l),[t,r]=e,i=e[e.length-1],s=t/r,a=r/i;return!(s>3&&a<2)}function uX(n,e=0){const t=n.instructions[e];if(!t||t.action!=="fill")throw new Error(`Expected fill instruction at index ${e}, got ${t?.action||"undefined"}`);return t.data}function _L(n){return n.split(/(?=[Mm])/).filter(r=>r.trim().length>0)}function bL(n){const e=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),r=[],i=[];for(let d=0;d<t.length;d+=2)d+1<t.length&&(r.push(t[d]),i.push(t[d+1]));if(r.length===0||i.length===0)return 0;const s=Math.min(...r),a=Math.max(...r),l=Math.min(...i),c=Math.max(...i);return(a-s)*(c-l)}function Gv(n,e){const t=new gs(n,!1);for(const r of t.instructions)e.instructions.push(r)}function xL(n,e){if(typeof n=="string"){const a=document.createElement("div");a.innerHTML=n.trim(),n=a.querySelector("svg")}const t={context:e,defs:{},path:new gs};gL(n,t);const r=n.children,{fillStyle:i,strokeStyle:s}=eE(n,t);for(let a=0;a<r.length;a++){const l=r[a];l.nodeName.toLowerCase()!=="defs"&&vL(l,t,i,s)}return e}function vL(n,e,t,r){const i=n.children,{fillStyle:s,strokeStyle:a}=eE(n,e);s&&t?t={...t,...s}:s&&(t=s),a&&r?r={...r,...a}:a&&(r=a);const l=!t&&!r;l&&(t={color:0});let c,h,d,p,g,y,_,S,x,E,w,C,A,P,M,I,V;switch(n.nodeName.toLowerCase()){case"path":{P=n.getAttribute("d");const O=n.getAttribute("fill-rule"),D=_L(P),H=O==="evenodd",$=D.length>1;if(H&&$){const Z=D.map(z=>({path:z,area:bL(z)}));if(Z.sort((z,X)=>X.area-z.area),D.length>3||!yL(Z))for(let z=0;z<Z.length;z++){const X=Z[z],K=z===0;e.context.beginPath();const J=new gs(void 0,!0);Gv(X.path,J),e.context.path(J),K?(t&&e.context.fill(t),r&&e.context.stroke(r)):e.context.cut()}else for(let z=0;z<Z.length;z++){const X=Z[z],K=z%2===1;e.context.beginPath();const J=new gs(void 0,!0);Gv(X.path,J),e.context.path(J),K?e.context.cut():(t&&e.context.fill(t),r&&e.context.stroke(r))}}else{const Z=O?O==="evenodd":!0;M=new gs(P,Z),e.context.path(M),t&&e.context.fill(t),r&&e.context.stroke(r)}break}case"circle":_=wn(n,"cx",0),S=wn(n,"cy",0),x=wn(n,"r",0),e.context.ellipse(_,S,x,x),t&&e.context.fill(t),r&&e.context.stroke(r);break;case"rect":c=wn(n,"x",0),h=wn(n,"y",0),I=wn(n,"width",0),V=wn(n,"height",0),E=wn(n,"rx",0),w=wn(n,"ry",0),E||w?e.context.roundRect(c,h,I,V,E||w):e.context.rect(c,h,I,V),t&&e.context.fill(t),r&&e.context.stroke(r);break;case"ellipse":_=wn(n,"cx",0),S=wn(n,"cy",0),E=wn(n,"rx",0),w=wn(n,"ry",0),e.context.beginPath(),e.context.ellipse(_,S,E,w),t&&e.context.fill(t),r&&e.context.stroke(r);break;case"line":d=wn(n,"x1",0),p=wn(n,"y1",0),g=wn(n,"x2",0),y=wn(n,"y2",0),e.context.beginPath(),e.context.moveTo(d,p),e.context.lineTo(g,y),r&&e.context.stroke(r);break;case"polygon":A=n.getAttribute("points"),C=A.match(/-?\d+/g).map(O=>parseInt(O,10)),e.context.poly(C,!0),t&&e.context.fill(t),r&&e.context.stroke(r);break;case"polyline":A=n.getAttribute("points"),C=A.match(/-?\d+/g).map(O=>parseInt(O,10)),e.context.poly(C,!1),r&&e.context.stroke(r);break;case"g":case"svg":break;default:{Ue(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}l&&(t=null);for(let O=0;O<i.length;O++)vL(i[O],e,t,r)}const dP={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Cc{constructor(e,t){this.uid=Zt("fillPattern"),this._tick=0,this.transform=new Ce,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=dP[t].addressModeU,e.source.style.addressModeV=dP[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}function cX(n){return yt.isColorLike(n)}function fP(n){return n instanceof Cc}function pP(n){return n instanceof ki}function hX(n){return n instanceof we}function dX(n,e,t){const r=yt.shared.setValue(e??0);return n.color=r.toNumber(),n.alpha=r.alpha===1?t.alpha:r.alpha,n.texture=we.WHITE,{...t,...n}}function fX(n,e,t){return n.texture=e,{...t,...n}}function mP(n,e,t){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...t,...n}}function gP(n,e,t){return e.buildGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,n.textureSpace=e.textureSpace,{...t,...n}}function pX(n,e){const t={...e,...n},r=yt.shared.setValue(t.color);return t.alpha*=r.alpha,t.color=r.toNumber(),t}function yo(n,e){if(n==null)return null;const t={},r=n;return cX(n)?dX(t,n,e):hX(n)?fX(t,n,e):fP(n)?mP(t,n,e):pP(n)?gP(t,n,e):r.fill&&fP(r.fill)?mP(r,r.fill,e):r.fill&&pP(r.fill)?gP(r,r.fill,e):pX(r,e)}function Dd(n,e){const{width:t,alignment:r,miterLimit:i,cap:s,join:a,pixelLine:l,...c}=e,h=yo(n,c);return h?{width:t,alignment:r,miterLimit:i,cap:s,join:a,pixelLine:l,...h}:null}const mX=new Bt,yP=new Ce,tE=class Ds extends hr{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=Zt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new gs,this._transform=new Ce,this._fillStyle={...Ds.defaultFillStyle},this._strokeStyle={...Ds.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Qn,this._boundsDirty=!0}clone(){const e=new Ds;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=yo(e,Ds.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Dd(e,Ds.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=yo(e,Ds.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=yo(e,Ds.defaultStrokeStyle),this}texture(e,t,r,i,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:r||0,dy:i||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t||t===0?yt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new gs,this}fill(e,t){let r;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i?.action==="stroke"?r=i.data.path:r=this._activePath.clone(),r?(e!=null&&(t!==void 0&&typeof e=="number"&&(Ae(nt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=yo(e,Ds.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r?.action==="fill"?t=r.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Dd(e,Ds.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],r=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(r);else{t.data.hole=r;break}}return this._initNextPathLocation(),this}arc(e,t,r,i,s,a){this._tick++;const l=this._transform;return this._activePath.arc(l.a*e+l.c*t+l.tx,l.b*e+l.d*t+l.ty,r,i,s,a),this}arcTo(e,t,r,i,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*r+a.c*i+a.tx,a.b*r+a.d*i+a.ty,s),this}arcToSvg(e,t,r,i,s,a,l){this._tick++;const c=this._transform;return this._activePath.arcToSvg(e,t,r,i,s,c.a*a+c.c*l+c.tx,c.b*a+c.d*l+c.ty),this}bezierCurveTo(e,t,r,i,s,a,l){this._tick++;const c=this._transform;return this._activePath.bezierCurveTo(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,c.a*r+c.c*i+c.tx,c.b*r+c.d*i+c.ty,c.a*s+c.c*a+c.tx,c.b*s+c.d*a+c.ty,l),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,r,i){return this._tick++,this._activePath.ellipse(e,t,r,i,this._transform.clone()),this}circle(e,t,r){return this._tick++,this._activePath.circle(e,t,r,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*e+r.c*t+r.tx,r.b*e+r.d*t+r.ty),this}moveTo(e,t){this._tick++;const r=this._transform,i=this._activePath.instructions,s=r.a*e+r.c*t+r.tx,a=r.b*e+r.d*t+r.ty;return i.length===1&&i[0].action==="moveTo"?(i[0].data[0]=s,i[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,t,r,i,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*r+a.c*i+a.tx,a.b*r+a.d*i+a.ty,s),this}rect(e,t,r,i){return this._tick++,this._activePath.rect(e,t,r,i,this._transform.clone()),this}roundRect(e,t,r,i,s){return this._tick++,this._activePath.roundRect(e,t,r,i,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,r,i,s=0,a){return this._tick++,this._activePath.regularPoly(e,t,r,i,s,a),this}roundPoly(e,t,r,i,s,a){return this._tick++,this._activePath.roundPoly(e,t,r,i,s,a),this}roundShape(e,t,r,i){return this._tick++,this._activePath.roundShape(e,t,r,i),this}filletRect(e,t,r,i,s){return this._tick++,this._activePath.filletRect(e,t,r,i,s),this}chamferRect(e,t,r,i,s,a){return this._tick++,this._activePath.chamferRect(e,t,r,i,s,a),this}star(e,t,r,i,s=0,a=0){return this._tick++,this._activePath.star(e,t,r,i,s,a,this._transform.clone()),this}svg(e){return this._tick++,xL(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,r,i,s,a){return e instanceof Ce?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,r,i,s,a),this)}transform(e,t,r,i,s,a){return e instanceof Ce?(this._transform.append(e),this):(yP.set(e,t,r,i,s,a),this._transform.append(yP),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const r=this.instructions[t],i=r.action;if(i==="fill"){const s=r.data;e.addBounds(s.path.bounds)}else if(i==="texture"){const s=r.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(i==="stroke"){const s=r.data,a=s.style.alignment,l=s.style.width*(1-a),c=s.path.bounds;e.addFrame(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let r=!1;for(let i=0;i<t.length;i++){const s=t[i],a=s.data,l=a.path;if(!s.action||!l)continue;const c=a.style,h=l.shapePath.shapePrimitives;for(let d=0;d<h.length;d++){const p=h[d].shape;if(!c||!p)continue;const g=h[d].transform,y=g?g.applyInverse(e,mX):e;if(s.action==="fill")r=p.contains(y.x,y.y);else{const S=c;r=p.strokeContains(y.x,y.y,S.width,S.alignment)}const _=a.hole;if(_){const S=_.shapePath?.shapePrimitives;if(S)for(let x=0;x<S.length;x++)S[x].shape.contains(y.x,y.y)&&(r=!1)}if(r)return!0}}return r}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(r)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(r))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};tE.defaultFillStyle={color:16777215,alpha:1,texture:we.WHITE,matrix:null,fill:null,textureSpace:"local"};tE.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:we.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Lr=tE;function vy(n,e=1){const t=Ao.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}function Mo(n,e,t){n.label=t,n._sourceOrigin=t;const r=new we({source:n,label:t}),i=()=>{delete e.promiseCache[t],At.has(t)&&At.remove(t)};return r.source.once("destroy",()=>{e.promiseCache[t]&&(Ue("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),r.once("destroy",()=>{n.destroyed||(Ue("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const gX=".svg",yX="image/svg+xml",SL={extension:{type:q.LoadParser,priority:Oi.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Nl(n,yX)||rs(n,gX)},async load(n,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?bX(n):_X(n,e,t,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function _X(n,e,t,r){const i=await je.get().fetch(n),s=je.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,s.crossOrigin=r,await s.decode();const a=e.data?.width??s.width,l=e.data?.height??s.height,c=e.data?.resolution||vy(n),h=Math.ceil(a*c),d=Math.ceil(l*c),p=je.get().createCanvas(h,d),g=p.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(s,0,0,a*c,l*c);const{parseAsGraphicsContext:y,..._}=e.data??{},S=new So({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:c,..._});return Mo(S,t,n)}async function bX(n){const t=await(await je.get().fetch(n)).text(),r=new Lr;return r.svg(t),r}const xX=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function") return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Yu=null,zv=class{constructor(){Yu||(Yu=URL.createObjectURL(new Blob([xX],{type:"application/javascript"}))),this.worker=new Worker(Yu)}};zv.revokeObjectURL=function(){Yu&&(URL.revokeObjectURL(Yu),Yu=null)};const vX=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ku=null,EL=class{constructor(){Ku||(Ku=URL.createObjectURL(new Blob([vX],{type:"application/javascript"}))),this.worker=new Worker(Ku)}};EL.revokeObjectURL=function(){Ku&&(URL.revokeObjectURL(Ku),Ku=null)};let _P=0,$0;class SX{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new zv;t.addEventListener("message",r=>{t.terminate(),zv.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){$0===void 0&&($0=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<$0&&(this._createdWorkers++,e=new EL().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const r=new Promise((i,s)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:s})});return this._next(),r}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),r=t.id;this._resolveHash[_P]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:_P++,id:r})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Vv=new SX,EX=[".jpeg",".jpg",".png",".webp",".avif"],wX=["image/jpeg","image/png","image/webp","image/avif"];async function wL(n,e){const t=await je.get().fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const r=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const nE={name:"loadTextures",id:"texture",extension:{type:q.LoadParser,priority:Oi.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Nl(n,wX)||rs(n,EX)},async load(n,e,t){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Vv.isImageBitmapSupported()?r=await Vv.loadImageBitmap(n,e):r=await wL(n,e):r=await new Promise((s,a)=>{r=je.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=n,r.complete?s(r):(r.onload=()=>{s(r)},r.onerror=a)});const i=new So({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||vy(n),...e.data});return Mo(i,t,n)},unload(n){n.destroy(!0)}},CX=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let q0,Y0;function CL(n,e,t){t===void 0&&!e.startsWith("data:")?n.crossOrigin=AL(e):t!==!1&&(n.crossOrigin=typeof t=="string"?t:"anonymous")}function TL(n){return new Promise((e,t)=>{n.addEventListener("canplaythrough",r),n.addEventListener("error",i),n.load();function r(){s(),e()}function i(a){s(),t(a)}function s(){n.removeEventListener("canplaythrough",r),n.removeEventListener("error",i)}})}function AL(n,e=globalThis.location){if(n.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function TX(){const n=[],e=[];for(const t of CX){const r=$u.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Jd(r)&&(n.push(t),e.includes(r)||e.push(r))}return{validVideoExtensions:n,validVideoMime:e}}const ML={name:"loadVideo",id:"video",extension:{type:q.LoadParser,name:"loadVideo"},test(n){if(!q0||!Y0){const{validVideoExtensions:r,validVideoMime:i}=TX();q0=r,Y0=i}const e=Nl(n,Y0),t=rs(n,q0);return e||t},async load(n,e,t){const r={...$u.defaultOptions,resolution:e.data?.resolution||vy(n),alphaMode:e.data?.alphaMode||await M1(),...e.data},i=document.createElement("video"),s={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(s).forEach(c=>{const h=s[c];h!==void 0&&i.setAttribute(c,h)}),r.muted===!0&&(i.muted=!0),CL(i,n,r.crossorigin);const a=document.createElement("source");let l;if(r.mime)l=r.mime;else if(n.startsWith("data:"))l=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const c=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();l=$u.MIME_TYPES[c]||`video/${c}`}return a.src=n,l&&(a.type=l),new Promise((c,h)=>{r.preload&&!r.autoPlay&&i.load(),i.addEventListener("canplay",d),i.addEventListener("error",p),a.addEventListener("error",p),i.appendChild(a);async function d(){const y=new $u({...r,resource:i});g(),e.data.preload&&await TL(i),c(Mo(y,t,n))}function p(y){g(),h(y)}function g(){i.removeEventListener("canplay",d),i.removeEventListener("error",p),a.removeEventListener("error",p)}})},unload(n){n.destroy(!0)}},rE={extension:{type:q.ResolveParser,name:"resolveTexture"},test:nE.test,parse:n=>({resolution:parseFloat(Ao.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},RL={extension:{type:q.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Ao.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:rE.parse};class PL{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ao,this.loader=new CN,this.cache=At,this._backgroundLoader=new gN(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Ue("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const r=Md(e),i=Zi(e).map(l=>{if(typeof l!="string"){const c=this.resolver.getAlias(l);return c.some(h=>!this.resolver.hasKey(h))&&this.add(l),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),s=this.resolver.resolve(i),a=await this._mapLoadToResolve(s,t);return r?a[i[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},a=Object.keys(i);let l=0;const c=[],h=()=>{t?.(c.reduce((p,g)=>p+g,0)/l)},d=a.map((p,g)=>{const y=i[p],_=Object.values(y),x=[...new Set(_.flat())].reduce((E,w)=>E+(w.progressSize||1),0);return c.push(0),l+=x,this._mapLoadToResolve(y,E=>{c[g]=E*x,h()}).then(E=>{s[p]=E})});return await Promise.all(d),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return At.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=At.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(r,t);this._backgroundLoader.active=!0;const s={};return r.forEach(a=>{const l=i[a.src],c=[a.src];a.alias&&c.push(...a.alias),c.forEach(h=>{s[h]=l}),At.set(c,l)}),s}async unload(e){this._initialized||await this.init();const t=Zi(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Zi(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{At.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,i)=>t.indexOf(r)===i),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const Gu=new PL;ze.handleByList(q.LoadParser,Gu.loader.parsers).handleByList(q.ResolveParser,Gu.resolver.parsers).handleByList(q.CacheParser,Gu.cache.parsers).handleByList(q.DetectionParser,Gu.detections);ze.add(yN,bN,_N,EN,xN,vN,SN,TN,AN,RN,SL,nE,ML,mN,pN,rE,RL);const bP={loader:q.LoadParser,resolver:q.ResolveParser,cache:q.CacheParser,detection:q.DetectionParser};ze.handle(q.Asset,n=>{const e=n.ref;Object.entries(bP).filter(([t])=>!!e[t]).forEach(([t,r])=>ze.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{const e=n.ref;Object.keys(bP).filter(t=>!!e[t]).forEach(t=>ze.remove(e[t]))});const AX={extension:{type:q.DetectionParser,priority:3},test:async()=>!!(await Qd()||Zd()),add:async n=>[...n,"basis"],remove:async n=>n.filter(e=>e!=="basis")};class ef extends yn{constructor(e){super({...e,mipLevelCount:e.resource.length}),this.uploadMethodId="compressed"}}let Qp;function Hv(){if(Qp)return Qp;const e=je.get().createCanvas(1,1).getContext("webgl");return e?(Qp=[...e.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...e.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...e.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...e.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Qp):[]}let Jp;async function jv(){if(Jp)return Jp;const n=await je.get().getNavigator().gpu.requestAdapter();return Jp=[...n.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...n.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...n.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Jp}let em;async function iE(){return em!==void 0||(em=await(async()=>{const n=await Qd(),e=Zd();if(n&&e){const t=await jv(),r=Hv();return t.filter(i=>r.includes(i))}else{if(n)return await jv();if(e)return Hv()}return[]})()),em}const BL=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let tm;async function tf(){if(tm!==void 0)return tm;const n=await iE();return tm=[...BL,...n],tm}const MX=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl) settings.jsUrl = jsUrl;
      if (wasmUrl) settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = (async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    });

})();
`;let Zu=null,DL=class{constructor(){Zu||(Zu=URL.createObjectURL(new Blob([MX],{type:"application/javascript"}))),this.worker=new Worker(Zu)}};DL.revokeObjectURL=function(){Zu&&(URL.revokeObjectURL(Zu),Zu=null)};const _g={jsUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.js",wasmUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.wasm"};function RX(n){Object.assign(_g,n)}let Lh;const kL={};function PX(n){return Lh||(Lh=new DL().worker,Lh.onmessage=e=>{const{success:t,url:r,textureOptions:i}=e.data;t||console.warn("Failed to load Basis texture",r),kL[r](i)},Lh.postMessage({type:"init",jsUrl:_g.jsUrl,wasmUrl:_g.wasmUrl,supportedTextures:n})),Lh}function OL(n,e){const t=PX(e);return new Promise(r=>{kL[n]=r,t.postMessage({type:"load",url:n})})}const BX={extension:{type:q.LoadParser,priority:Oi.High,name:"loadBasis"},name:"loadBasis",id:"basis",test(n){return rs(n,[".basis"])},async load(n,e,t){const r=await tf(),i=await OL(n,r),s=new ef(i);return Mo(s,t,n)},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};function DX(n,e){const t=n.getNumImages(),r=n.getNumLevels(0);if(!n.startTranscoding())throw new Error("startTranscoding failed");const s=[];for(let a=0;a<r;++a)for(let l=0;l<t;++l){const c=n.getImageTranscodedSizeInBytes(l,a,e),h=new Uint8Array(c);if(!n.transcodeImage(h,l,a,e,1,0))throw new Error("transcodeImage failed");s.push(h)}return s}const kX={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function OX(n){const e=kX[n];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${n}`)}const IX={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},NX={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var sE=(n=>(n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",n))(sE||{}),aE=(n=>(n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",n))(aE||{});function ar(n){return n.charCodeAt(0)+(n.charCodeAt(1)<<8)+(n.charCodeAt(2)<<16)+(n.charCodeAt(3)<<24)}var ri=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.R8G8B8=20]="R8G8B8",n[n.A8R8G8B8=21]="A8R8G8B8",n[n.X8R8G8B8=22]="X8R8G8B8",n[n.R5G6B5=23]="R5G6B5",n[n.X1R5G5B5=24]="X1R5G5B5",n[n.A1R5G5B5=25]="A1R5G5B5",n[n.A4R4G4B4=26]="A4R4G4B4",n[n.R3G3B2=27]="R3G3B2",n[n.A8=28]="A8",n[n.A8R3G3B2=29]="A8R3G3B2",n[n.X4R4G4B4=30]="X4R4G4B4",n[n.A2B10G10R10=31]="A2B10G10R10",n[n.A8B8G8R8=32]="A8B8G8R8",n[n.X8B8G8R8=33]="X8B8G8R8",n[n.G16R16=34]="G16R16",n[n.A2R10G10B10=35]="A2R10G10B10",n[n.A16B16G16R16=36]="A16B16G16R16",n[n.A8P8=40]="A8P8",n[n.P8=41]="P8",n[n.L8=50]="L8",n[n.A8L8=51]="A8L8",n[n.A4L4=52]="A4L4",n[n.V8U8=60]="V8U8",n[n.L6V5U5=61]="L6V5U5",n[n.X8L8V8U8=62]="X8L8V8U8",n[n.Q8W8V8U8=63]="Q8W8V8U8",n[n.V16U16=64]="V16U16",n[n.A2W10V10U10=67]="A2W10V10U10",n[n.Q16W16V16U16=110]="Q16W16V16U16",n[n.R16F=111]="R16F",n[n.G16R16F=112]="G16R16F",n[n.A16B16G16R16F=113]="A16B16G16R16F",n[n.R32F=114]="R32F",n[n.G32R32F=115]="G32R32F",n[n.A32B32G32R32F=116]="A32B32G32R32F",n[n.UYVY=ar("UYVY")]="UYVY",n[n.R8G8_B8G8=ar("RGBG")]="R8G8_B8G8",n[n.YUY2=ar("YUY2")]="YUY2",n[n.D3DFMT_G8R8_G8B8=ar("GRGB")]="D3DFMT_G8R8_G8B8",n[n.DXT1=ar("DXT1")]="DXT1",n[n.DXT2=ar("DXT2")]="DXT2",n[n.DXT3=ar("DXT3")]="DXT3",n[n.DXT4=ar("DXT4")]="DXT4",n[n.DXT5=ar("DXT5")]="DXT5",n[n.ATI1=ar("ATI1")]="ATI1",n[n.AT1N=ar("AT1N")]="AT1N",n[n.ATI2=ar("ATI2")]="ATI2",n[n.AT2N=ar("AT2N")]="AT2N",n[n.BC4U=ar("BC4U")]="BC4U",n[n.BC4S=ar("BC4S")]="BC4S",n[n.BC5U=ar("BC5U")]="BC5U",n[n.BC5S=ar("BC5S")]="BC5S",n[n.DX10=ar("DX10")]="DX10",n))(ri||{});const Xv={[ri.DXT1]:"bc1-rgba-unorm",[ri.DXT2]:"bc2-rgba-unorm",[ri.DXT3]:"bc2-rgba-unorm",[ri.DXT4]:"bc3-rgba-unorm",[ri.DXT5]:"bc3-rgba-unorm",[ri.ATI1]:"bc4-r-unorm",[ri.BC4U]:"bc4-r-unorm",[ri.BC4S]:"bc4-r-snorm",[ri.ATI2]:"bc5-rg-unorm",[ri.BC5U]:"bc5-rg-unorm",[ri.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},ii={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},tt={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:IX,HEADER_DX10_FIELDS:NX,DXGI_FORMAT:sE,D3D10_RESOURCE_DIMENSION:aE,D3DFMT:ri},IL={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function NL(n,e){const{format:t,fourCC:r,width:i,height:s,dataOffset:a,mipmapCount:l}=FX(n);if(!e.includes(t))throw new Error(`Unsupported texture format: ${r} ${t}, supported: ${e}`);if(l<=1)return{format:t,width:i,height:s,resource:[new Uint8Array(n,a)],alphaMode:"no-premultiply-alpha"};const c=LX(t,i,s,a,l,n);return{format:t,width:i,height:s,resource:c,alphaMode:"no-premultiply-alpha"}}function LX(n,e,t,r,i,s){const a=[],l=IL[n];let c=e,h=t,d=r;for(let p=0;p<i;++p){const g=Math.ceil(Math.max(4,c)/4)*4,y=Math.ceil(Math.max(4,h)/4)*4,_=l?g/4*y/4*l:c*h*4,S=new Uint8Array(s,d,_);a.push(S),d+=_,c=Math.max(c>>1,1),h=Math.max(h>>1,1)}return a}function FX(n){const e=new Uint32Array(n,0,tt.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[tt.HEADER_FIELDS.MAGIC]!==tt.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const t=e[tt.HEADER_FIELDS.HEIGHT],r=e[tt.HEADER_FIELDS.WIDTH],i=Math.max(1,e[tt.HEADER_FIELDS.MIPMAP_COUNT]),s=e[tt.HEADER_FIELDS.PF_FLAGS],a=e[tt.HEADER_FIELDS.FOURCC],l=UX(e,s,a,n),c=tt.MAGIC_SIZE+tt.HEADER_SIZE+(a===tt.D3DFMT.DX10?tt.HEADER_DX10_SIZE:0);return{format:l,fourCC:a,width:r,height:t,dataOffset:c,mipmapCount:i}}function UX(n,e,t,r){if(e&tt.PIXEL_FORMAT_FLAGS.FOURCC){if(t===tt.D3DFMT.DX10){const i=new Uint32Array(r,tt.MAGIC_SIZE+tt.HEADER_SIZE,tt.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(i[tt.HEADER_DX10_FIELDS.MISC_FLAG]===tt.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(i[tt.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===tt.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const l=i[tt.HEADER_DX10_FIELDS.DXGI_FORMAT];if(l in ii)return ii[l];throw new Error(`DDSParser cannot parse texture data with DXGI format ${l}`)}if(t in Xv)return Xv[t];throw new Error(`DDSParser cannot parse texture data with fourCC format ${t}`)}if(e&tt.PIXEL_FORMAT_FLAGS.RGB||e&tt.PIXEL_FORMAT_FLAGS.RGBA)return GX(n);throw e&tt.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&tt.PIXEL_FORMAT_FLAGS.LUMINANCE||e&tt.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&tt.PIXEL_FORMAT_FLAGS.ALPHA||e&tt.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function GX(n){const e=n[tt.HEADER_FIELDS.RGB_BITCOUNT],t=n[tt.HEADER_FIELDS.R_BIT_MASK],r=n[tt.HEADER_FIELDS.G_BIT_MASK],i=n[tt.HEADER_FIELDS.B_BIT_MASK],s=n[tt.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(t===255&&r===65280&&i===16711680&&s===4278190080)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(t===16711680&&r===65280&&i===255&&s===4278190080)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(t===1072693248&&r===1047552&&i===1023&&s===3221225472)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(t===65535&&r===4294901760&&i===0&&s===0)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(t===4294967295&&r===0&&i===0&&s===0)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(t===31744&&r===992&&i===31&&s===32768)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(t===63488&&r===2016&&i===31&&s===0)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(t===3840&&r===240&&i===15&&s===61440)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(t===255&&r===0&&i===0&&s===65280)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(t===65535&&r===0&&i===0&&s===0)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(t===255&&r===0&&i===0&&s===0)return ii[tt.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${t}, gBitMask = ${r}, aBitMask = ${s}`)}const zX={extension:{type:q.LoadParser,priority:Oi.High,name:"loadDDS"},name:"loadDDS",id:"dds",test(n){return rs(n,[".dds"])},async load(n,e,t){const r=await tf(),s=await(await fetch(n)).arrayBuffer(),a=NL(s,r),l=new ef(a);return Mo(l,t,n)},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};var LL=(n=>(n[n.RGBA8_SNORM=36759]="RGBA8_SNORM",n[n.RGBA=6408]="RGBA",n[n.RGBA8UI=36220]="RGBA8UI",n[n.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",n[n.RGBA8I=36238]="RGBA8I",n[n.RGBA8=32856]="RGBA8",n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",n[n.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",n[n.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",n[n.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",n[n.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",n[n.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(LL||{});const VX={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},HX=[171,75,84,88,32,49,49,187,13,10,26,10],jX={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},XX=64,WX=67305985,$X={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},qX={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},YX={32819:2,32820:2,33635:2},KX={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Pn={FILE_HEADER_SIZE:XX,FILE_IDENTIFIER:HX,FORMATS_TO_COMPONENTS:qX,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:KX,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:VX,FIELDS:jX,TYPES_TO_BYTES_PER_COMPONENT:$X,TYPES_TO_BYTES_PER_PIXEL:YX,ENDIANNESS:WX};function FL(n,e){const t=new DataView(n);if(!eW(t))throw new Error("Invalid KTX identifier in header");const{littleEndian:r,glType:i,glFormat:s,glInternalFormat:a,pixelWidth:l,pixelHeight:c,numberOfMipmapLevels:h,offset:d}=JX(t),p=Pn.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[a];if(!p)throw new Error(`Unknown texture format ${a}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);const g=QX(i,s,a),y=ZX(t,i,g,l,c,d,h,r);return{format:p,width:l,height:c,resource:y,alphaMode:"no-premultiply-alpha"}}function ZX(n,e,t,r,i,s,a,l){const c=r+3&-4,h=i+3&-4;let d=r*i;e===0&&(d=c*h);let p=d*t,g=r,y=i,_=c,S=h,x=s;const E=new Array(a);for(let w=0;w<a;w++){const C=n.getUint32(x,l);let A=x+4;E[w]=new Uint8Array(n.buffer,A,p),A+=p,x+=C+4,x=x%4!==0?x+4-x%4:x,g=g>>1||1,y=y>>1||1,_=g+4-1&-4,S=y+4-1&-4,p=_*S*t}return E}function QX(n,e,t){let r=Pn.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[t];if(n!==0&&(Pn.TYPES_TO_BYTES_PER_COMPONENT[n]?r=Pn.TYPES_TO_BYTES_PER_COMPONENT[n]*Pn.FORMATS_TO_COMPONENTS[e]:r=Pn.TYPES_TO_BYTES_PER_PIXEL[n]),r===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return r}function JX(n){const e=n.getUint32(Pn.FIELDS.ENDIANNESS,!0)===Pn.ENDIANNESS,t=n.getUint32(Pn.FIELDS.GL_TYPE,e),r=n.getUint32(Pn.FIELDS.GL_FORMAT,e),i=n.getUint32(Pn.FIELDS.GL_INTERNAL_FORMAT,e),s=n.getUint32(Pn.FIELDS.PIXEL_WIDTH,e),a=n.getUint32(Pn.FIELDS.PIXEL_HEIGHT,e)||1,l=n.getUint32(Pn.FIELDS.PIXEL_DEPTH,e)||1,c=n.getUint32(Pn.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,h=n.getUint32(Pn.FIELDS.NUMBER_OF_FACES,e),d=n.getUint32(Pn.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=n.getUint32(Pn.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(a===0||l!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:t,glFormat:r,glInternalFormat:i,pixelWidth:s,pixelHeight:a,numberOfMipmapLevels:d,offset:Pn.FILE_HEADER_SIZE+p}}function eW(n){for(let e=0;e<Pn.FILE_IDENTIFIER.length;e++)if(n.getUint8(e)!==Pn.FILE_IDENTIFIER[e])return!1;return!0}const tW={extension:{type:q.LoadParser,priority:Oi.High,name:"loadKTX"},name:"loadKTX",id:"ktx",test(n){return rs(n,".ktx")},async load(n,e,t){const r=await tf(),s=await(await fetch(n)).arrayBuffer(),a=FL(s,r),l=new ef(a);return Mo(l,t,n)},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}},nW=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl) settings.jsUrl = jsUrl;
      if (wasmUrl) settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = (async (messageEvent) => {
      const message = messageEvent.data;
      try {
        const response = await messageHandlers[message.type]?.(message);
        if (response) {
          self.postMessage(response, response.transferables);
        }
      } catch (err) {
        self.postMessage({
          type: "error",
          err,
          url: message.url
        });
      }
    });

})();
`;let Qu=null;class UL{constructor(){Qu||(Qu=URL.createObjectURL(new Blob([nW],{type:"application/javascript"}))),this.worker=new Worker(Qu)}}UL.revokeObjectURL=function(){Qu&&(URL.revokeObjectURL(Qu),Qu=null)};const bg={jsUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.js",wasmUrl:"https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.wasm"};function rW(n){Object.assign(bg,n)}let Fh;const GL={},zL={};function iW(n){return Fh||(Fh=new UL().worker,Fh.onmessage=e=>{const{err:t,success:r,url:i,textureOptions:s}=e.data;if(t){zL[i](t);return}r||console.warn("Failed to load KTX texture",i),GL[i](s)},Fh.postMessage({type:"init",jsUrl:bg.jsUrl,wasmUrl:bg.wasmUrl,supportedTextures:n})),Fh}function VL(n,e){const t=iW(e);return new Promise((r,i)=>{GL[n]=r,zL[n]=i,t.postMessage({type:"load",url:n})})}const sW={extension:{type:q.LoadParser,priority:Oi.High,name:"loadKTX2"},name:"loadKTX2",id:"ktx2",test(n){return rs(n,".ktx2")},async load(n,e,t){const r=await tf(),i=await VL(n,r),s=new ef(i);return Mo(s,t,n)},async unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}},K0={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:xP},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:xP}};function aW(n){const e=n.format;if(K0[e]){const t=K0[e].convertFunction,r=n.resource;for(let i=0;i<r.length;i++)r[i]=t(r[i]);n.format=K0[e].convertedFormat}}function xP(n){const e=n.byteLength/3,t=new Uint32Array(e);for(let r=0;r<e;++r)t[r]=n[r*3]+(n[r*3+1]<<8)+(n[r*3+2]<<16)+4278190080;return new Uint8Array(t.buffer)}function oW(n){const e=[];for(let t=0;t<n.numLevels;t++){const r=n.getImageData(t,0,0),i=new Uint8Array(r.byteLength);i.set(r),e.push(i)}return e}const lW={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function HL(n){const e=lW[n];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${n}`)}const uW={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function jL(n){const e=uW[n];if(e)return e;throw new Error(`Unsupported VkFormat: ${n}`)}function cW(n){return n.classId===2?jL(n.vkFormat):HL(n.glInternalformat)}const hW={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function dW(n){const e=hW[n];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${n}`)}const xg=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],fW={extension:q.ResolveParser,test:n=>rs(n,[".ktx",".ktx2",".dds"]),parse:n=>{let e;const t=n.split(".");if(t.length>2){const r=t[t.length-2];xg.includes(r)&&(e=r)}else e=t[t.length-1];return{resolution:parseFloat(Ao.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e,src:n}}};let nm;const pW={extension:{type:q.DetectionParser,priority:2},test:async()=>!!(await Qd()||Zd()),add:async n=>{const e=await iE();return nm=mW(e),[...nm,...n]},remove:async n=>nm?n.filter(e=>!(e in nm)):n};function mW(n){const e=["basis"],t={};return n.forEach(r=>{const i=r.split("-")[0];i&&!t[i]&&(t[i]=!0,e.push(i))}),e.sort((r,i)=>{const s=xg.indexOf(r),a=xg.indexOf(i);return s===-1?1:a===-1?-1:s-a}),e}const gW=new Qn,yW=new Ce,Uh=new Rt,Wv=class{cull(e,t,r=!0){this._cullRecursive(e,t,r)}_cullRecursive(e,t,r=!0){if(e.cullable&&e.measurable&&e.includeInBuild)if(e.cullArea){Uh.x=t.x,Uh.y=t.y,Uh.width=t.width,Uh.height=t.height;const i=r?e.worldTransform:e.getGlobalTransform(yW,r);e.culled=!Uh.intersects(e.cullArea,i)}else{const i=Kd(e,r,gW);e.culled=i.x>=t.x+t.width||i.y>=t.y+t.height||i.x+i.width<=t.x||i.y+i.height<=t.y}else e.culled=!1;if(!(!e.cullableChildren||e.culled||!e.renderable||!e.measurable||!e.includeInBuild))for(let i=0;i<e.children.length;i++)this._cullRecursive(e.children[i],t,r)}};Wv.shared=new Wv;let XL=Wv;class WL{static init(e){this._renderRef=this.render.bind(this),this.render=()=>{const t=e?.culler?.updateTransform!==!0;XL.shared.cull(this.stage,this.renderer.screen,t),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}WL.extension={priority:10,type:q.Application,name:"culler"};class oE{constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new P1({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,t){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){const e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let t=0;t<e.length;t++){const r=e[t],i=r.element;if(!r.parent||r.globalDisplayStatus<7)i?.remove(),e.splice(t,1),t--;else{this._domElement.contains(i)||(i.style.position="absolute",i.style.pointerEvents="auto",this._domElement.appendChild(i));const s=r.worldTransform,a=r._anchor,l=r.width*a.x,c=r.height*a.y;i.style.transformOrigin=`${l}px ${c}px`,i.style.transform=`matrix(${s.a}, ${s.b}, ${s.c}, ${s.d}, ${s.tx-l}, ${s.ty-c})`,i.style.opacity=r.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)this._attachedDomElements[e].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}oE.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"dom"};ze.add(oE);class _W extends qs{constructor(e={}){const{element:t,anchor:r,...i}=e;super({label:"DOMContainer",...i}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Bt(0,0),r&&(this.anchor=r),this.element=e.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set element(e){this._element!==e&&(this._element=e,this.onViewUpdate())}get element(){return this._element}updateBounds(){const e=this._bounds,t=this._element;if(!t){e.minX=0,e.minY=0,e.maxX=0,e.maxY=0;return}const{offsetWidth:r,offsetHeight:i}=t;e.minX=0,e.maxX=r,e.minY=0,e.maxY=i}destroy(e=!1){super.destroy(e),this._element?.parentNode?.removeChild(this._element),this._element=null,this._anchor=null}}var Gh={},ba={},el={},vP;function Sy(){if(vP)return el;vP=1;function n(s,a,l){if(l===void 0&&(l=Array.prototype),s&&typeof l.find=="function")return l.find.call(s,a);for(var c=0;c<s.length;c++)if(Object.prototype.hasOwnProperty.call(s,c)){var h=s[c];if(a.call(void 0,h,c,s))return h}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l]);return s}var r=e({HTML:"text/html",isHTML:function(s){return s===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return el.assign=t,el.find=n,el.freeze=e,el.MIME_TYPE=r,el.NAMESPACE=i,el}var SP;function $L(){if(SP)return ba;SP=1;var n=Sy(),e=n.find,t=n.NAMESPACE;function r(k){return k!==""}function i(k){return k?k.split(/[\t\n\f\r ]+/).filter(r):[]}function s(k,F){return k.hasOwnProperty(F)||(k[F]=!0),k}function a(k){if(!k)return[];var F=i(k);return Object.keys(F.reduce(s,{}))}function l(k){return function(F){return k&&k.indexOf(F)!==-1}}function c(k,F){for(var R in k)Object.prototype.hasOwnProperty.call(k,R)&&(F[R]=k[R])}function h(k,F){var R=k.prototype;if(!(R instanceof F)){let j=function(){};j.prototype=F.prototype,j=new j,c(R,j),k.prototype=R=j}R.constructor!=k&&(typeof k!="function"&&console.error("unknown Class:"+k),R.constructor=k)}var d={},p=d.ELEMENT_NODE=1,g=d.ATTRIBUTE_NODE=2,y=d.TEXT_NODE=3,_=d.CDATA_SECTION_NODE=4,S=d.ENTITY_REFERENCE_NODE=5,x=d.ENTITY_NODE=6,E=d.PROCESSING_INSTRUCTION_NODE=7,w=d.COMMENT_NODE=8,C=d.DOCUMENT_NODE=9,A=d.DOCUMENT_TYPE_NODE=10,P=d.DOCUMENT_FRAGMENT_NODE=11,M=d.NOTATION_NODE=12,I={},V={};I.INDEX_SIZE_ERR=(V[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(V[2]="DOMString size error",2);var O=I.HIERARCHY_REQUEST_ERR=(V[3]="Hierarchy request error",3);I.WRONG_DOCUMENT_ERR=(V[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(V[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(V[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(V[7]="No modification allowed",7);var D=I.NOT_FOUND_ERR=(V[8]="Not found",8);I.NOT_SUPPORTED_ERR=(V[9]="Not supported",9);var H=I.INUSE_ATTRIBUTE_ERR=(V[10]="Attribute in use",10);I.INVALID_STATE_ERR=(V[11]="Invalid state",11),I.SYNTAX_ERR=(V[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(V[13]="Invalid modification",13),I.NAMESPACE_ERR=(V[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(V[15]="Invalid access",15);function $(k,F){if(F instanceof Error)var R=F;else R=this,Error.call(this,V[k]),this.message=V[k],Error.captureStackTrace&&Error.captureStackTrace(this,$);return R.code=k,F&&(this.message=this.message+": "+F),R}$.prototype=Error.prototype,c(I,$);function ne(){}ne.prototype={length:0,item:function(k){return k>=0&&k<this.length?this[k]:null},toString:function(k,F){for(var R=[],j=0;j<this.length;j++)An(this[j],R,k,F);return R.join("")},filter:function(k){return Array.prototype.filter.call(this,k)},indexOf:function(k){return Array.prototype.indexOf.call(this,k)}};function Z(k,F){this._node=k,this._refresh=F,te(this)}function te(k){var F=k._node._inc||k._node.ownerDocument._inc;if(k._inc!==F){var R=k._refresh(k._node);if(Zs(k,"length",R.length),!k.$$length||R.length<k.$$length)for(var j=R.length;j in k;j++)Object.prototype.hasOwnProperty.call(k,j)&&delete k[j];c(R,k),k._inc=F}}Z.prototype.item=function(k){return te(this),this[k]||null},h(Z,ne);function z(){}function X(k,F){for(var R=k.length;R--;)if(k[R]===F)return R}function K(k,F,R,j){if(j?F[X(F,j)]=R:F[F.length++]=R,k){R.ownerElement=k;var ie=k.ownerDocument;ie&&(j&&ve(ie,k,j),fe(ie,k,R))}}function J(k,F,R){var j=X(F,R);if(j>=0){for(var ie=F.length-1;j<ie;)F[j]=F[++j];if(F.length=ie,k){var ye=k.ownerDocument;ye&&(ve(ye,k,R),R.ownerElement=null)}}else throw new $(D,new Error(k.tagName+"@"+R))}z.prototype={length:0,item:ne.prototype.item,getNamedItem:function(k){for(var F=this.length;F--;){var R=this[F];if(R.nodeName==k)return R}},setNamedItem:function(k){var F=k.ownerElement;if(F&&F!=this._ownerElement)throw new $(H);var R=this.getNamedItem(k.nodeName);return K(this._ownerElement,this,k,R),R},setNamedItemNS:function(k){var F=k.ownerElement,R;if(F&&F!=this._ownerElement)throw new $(H);return R=this.getNamedItemNS(k.namespaceURI,k.localName),K(this._ownerElement,this,k,R),R},removeNamedItem:function(k){var F=this.getNamedItem(k);return J(this._ownerElement,this,F),F},removeNamedItemNS:function(k,F){var R=this.getNamedItemNS(k,F);return J(this._ownerElement,this,R),R},getNamedItemNS:function(k,F){for(var R=this.length;R--;){var j=this[R];if(j.localName==F&&j.namespaceURI==k)return j}return null}};function U(){}U.prototype={hasFeature:function(k,F){return!0},createDocument:function(k,F,R){var j=new he;if(j.implementation=this,j.childNodes=new ne,j.doctype=R||null,R&&j.appendChild(R),F){var ie=j.createElementNS(k,F);j.appendChild(ie)}return j},createDocumentType:function(k,F,R){var j=new Fe;return j.name=k,j.nodeName=k,j.publicId=F||"",j.systemId=R||"",j}};function G(){}G.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(k,F){return Sn(this,k,F)},replaceChild:function(k,F){Sn(this,k,F,vn),F&&this.removeChild(F)},removeChild:function(k){return ke(this,k)},appendChild:function(k){return this.insertBefore(k,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(k){return ss(this.ownerDocument||this,this,k)},normalize:function(){for(var k=this.firstChild;k;){var F=k.nextSibling;F&&F.nodeType==y&&k.nodeType==y?(this.removeChild(F),k.appendData(F.data)):(k.normalize(),k=F)}},isSupported:function(k,F){return this.ownerDocument.implementation.hasFeature(k,F)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(k){for(var F=this;F;){var R=F._nsMap;if(R){for(var j in R)if(Object.prototype.hasOwnProperty.call(R,j)&&R[j]===k)return j}F=F.nodeType==g?F.ownerDocument:F.parentNode}return null},lookupNamespaceURI:function(k){for(var F=this;F;){var R=F._nsMap;if(R&&Object.prototype.hasOwnProperty.call(R,k))return R[k];F=F.nodeType==g?F.ownerDocument:F.parentNode}return null},isDefaultNamespace:function(k){var F=this.lookupPrefix(k);return F==null}};function Q(k){return k=="<"&&"&lt;"||k==">"&&"&gt;"||k=="&"&&"&amp;"||k=='"'&&"&quot;"||"&#"+k.charCodeAt()+";"}c(d,G),c(d,G.prototype);function L(k,F){if(F(k))return!0;if(k=k.firstChild)do if(L(k,F))return!0;while(k=k.nextSibling)}function he(){this.ownerDocument=this}function fe(k,F,R){k&&k._inc++;var j=R.namespaceURI;j===t.XMLNS&&(F._nsMap[R.prefix?R.localName:""]=R.value)}function ve(k,F,R,j){k&&k._inc++;var ie=R.namespaceURI;ie===t.XMLNS&&delete F._nsMap[R.prefix?R.localName:""]}function Be(k,F,R){if(k&&k._inc){k._inc++;var j=F.childNodes;if(R)j[j.length++]=R;else{for(var ie=F.firstChild,ye=0;ie;)j[ye++]=ie,ie=ie.nextSibling;j.length=ye,delete j[j.length]}}}function ke(k,F){var R=F.previousSibling,j=F.nextSibling;return R?R.nextSibling=j:k.firstChild=j,j?j.previousSibling=R:k.lastChild=R,F.parentNode=null,F.previousSibling=null,F.nextSibling=null,Be(k.ownerDocument,k),F}function Ne(k){return k&&(k.nodeType===G.DOCUMENT_NODE||k.nodeType===G.DOCUMENT_FRAGMENT_NODE||k.nodeType===G.ELEMENT_NODE)}function rt(k){return k&&(at(k)||nn(k)||st(k)||k.nodeType===G.DOCUMENT_FRAGMENT_NODE||k.nodeType===G.COMMENT_NODE||k.nodeType===G.PROCESSING_INSTRUCTION_NODE)}function st(k){return k&&k.nodeType===G.DOCUMENT_TYPE_NODE}function at(k){return k&&k.nodeType===G.ELEMENT_NODE}function nn(k){return k&&k.nodeType===G.TEXT_NODE}function ut(k,F){var R=k.childNodes||[];if(e(R,at)||st(F))return!1;var j=e(R,st);return!(F&&j&&R.indexOf(j)>R.indexOf(F))}function Vt(k,F){var R=k.childNodes||[];function j(ye){return at(ye)&&ye!==F}if(e(R,j))return!1;var ie=e(R,st);return!(F&&ie&&R.indexOf(ie)>R.indexOf(F))}function De(k,F,R){if(!Ne(k))throw new $(O,"Unexpected parent node type "+k.nodeType);if(R&&R.parentNode!==k)throw new $(D,"child not in parent");if(!rt(F)||st(F)&&k.nodeType!==G.DOCUMENT_NODE)throw new $(O,"Unexpected node type "+F.nodeType+" for parent node type "+k.nodeType)}function ln(k,F,R){var j=k.childNodes||[],ie=F.childNodes||[];if(F.nodeType===G.DOCUMENT_FRAGMENT_NODE){var ye=ie.filter(at);if(ye.length>1||e(ie,nn))throw new $(O,"More than one element or text in fragment");if(ye.length===1&&!ut(k,R))throw new $(O,"Element in fragment can not be inserted before doctype")}if(at(F)&&!ut(k,R))throw new $(O,"Only one element can be added and only after doctype");if(st(F)){if(e(j,st))throw new $(O,"Only one doctype is allowed");var $e=e(j,at);if(R&&j.indexOf($e)<j.indexOf(R))throw new $(O,"Doctype can only be inserted before an element");if(!R&&$e)throw new $(O,"Doctype can not be appended since element is present")}}function vn(k,F,R){var j=k.childNodes||[],ie=F.childNodes||[];if(F.nodeType===G.DOCUMENT_FRAGMENT_NODE){var ye=ie.filter(at);if(ye.length>1||e(ie,nn))throw new $(O,"More than one element or text in fragment");if(ye.length===1&&!Vt(k,R))throw new $(O,"Element in fragment can not be inserted before doctype")}if(at(F)&&!Vt(k,R))throw new $(O,"Only one element can be added and only after doctype");if(st(F)){if(e(j,function(Me){return st(Me)&&Me!==R}))throw new $(O,"Only one doctype is allowed");var $e=e(j,at);if(R&&j.indexOf($e)<j.indexOf(R))throw new $(O,"Doctype can only be inserted before an element")}}function Sn(k,F,R,j){De(k,F,R),k.nodeType===G.DOCUMENT_NODE&&(j||ln)(k,F,R);var ie=F.parentNode;if(ie&&ie.removeChild(F),F.nodeType===P){var ye=F.firstChild;if(ye==null)return F;var $e=F.lastChild}else ye=$e=F;var ct=R?R.previousSibling:k.lastChild;ye.previousSibling=ct,$e.nextSibling=R,ct?ct.nextSibling=ye:k.firstChild=ye,R==null?k.lastChild=$e:R.previousSibling=$e;do{ye.parentNode=k;var Me=k.ownerDocument||k;In(ye,Me)}while(ye!==$e&&(ye=ye.nextSibling));return Be(k.ownerDocument||k,k),F.nodeType==P&&(F.firstChild=F.lastChild=null),F}function In(k,F){if(k.ownerDocument!==F){if(k.ownerDocument=F,k.nodeType===p&&k.attributes)for(var R=0;R<k.attributes.length;R++){var j=k.attributes.item(R);j&&(j.ownerDocument=F)}for(var ie=k.firstChild;ie;)In(ie,F),ie=ie.nextSibling}}function Pt(k,F){F.parentNode&&F.parentNode.removeChild(F),F.parentNode=k,F.previousSibling=k.lastChild,F.nextSibling=null,F.previousSibling?F.previousSibling.nextSibling=F:k.firstChild=F,k.lastChild=F,Be(k.ownerDocument,k,F);var R=k.ownerDocument||k;return In(F,R),F}he.prototype={nodeName:"#document",nodeType:C,doctype:null,documentElement:null,_inc:1,insertBefore:function(k,F){if(k.nodeType==P){for(var R=k.firstChild;R;){var j=R.nextSibling;this.insertBefore(R,F),R=j}return k}return Sn(this,k,F),In(k,this),this.documentElement===null&&k.nodeType===p&&(this.documentElement=k),k},removeChild:function(k){return this.documentElement==k&&(this.documentElement=null),ke(this,k)},replaceChild:function(k,F){Sn(this,k,F,vn),In(k,this),F&&this.removeChild(F),at(k)&&(this.documentElement=k)},importNode:function(k,F){return ko(this,k,F)},getElementById:function(k){var F=null;return L(this.documentElement,function(R){if(R.nodeType==p&&R.getAttribute("id")==k)return F=R,!0}),F},getElementsByClassName:function(k){var F=a(k);return new Z(this,function(R){var j=[];return F.length>0&&L(R.documentElement,function(ie){if(ie!==R&&ie.nodeType===p){var ye=ie.getAttribute("class");if(ye){var $e=k===ye;if(!$e){var ct=a(ye);$e=F.every(l(ct))}$e&&j.push(ie)}}}),j})},createElement:function(k){var F=new Ht;F.ownerDocument=this,F.nodeName=k,F.tagName=k,F.localName=k,F.childNodes=new ne;var R=F.attributes=new z;return R._ownerElement=F,F},createDocumentFragment:function(){var k=new Sr;return k.ownerDocument=this,k.childNodes=new ne,k},createTextNode:function(k){var F=new yi;return F.ownerDocument=this,F.appendData(k),F},createComment:function(k){var F=new de;return F.ownerDocument=this,F.appendData(k),F},createCDATASection:function(k){var F=new be;return F.ownerDocument=this,F.appendData(k),F},createProcessingInstruction:function(k,F){var R=new Nn;return R.ownerDocument=this,R.tagName=R.nodeName=R.target=k,R.nodeValue=R.data=F,R},createAttribute:function(k){var F=new vr;return F.ownerDocument=this,F.name=k,F.nodeName=k,F.localName=k,F.specified=!0,F},createEntityReference:function(k){var F=new Jn;return F.ownerDocument=this,F.nodeName=k,F},createElementNS:function(k,F){var R=new Ht,j=F.split(":"),ie=R.attributes=new z;return R.childNodes=new ne,R.ownerDocument=this,R.nodeName=F,R.tagName=F,R.namespaceURI=k,j.length==2?(R.prefix=j[0],R.localName=j[1]):R.localName=F,ie._ownerElement=R,R},createAttributeNS:function(k,F){var R=new vr,j=F.split(":");return R.ownerDocument=this,R.nodeName=F,R.name=F,R.namespaceURI=k,R.specified=!0,j.length==2?(R.prefix=j[0],R.localName=j[1]):R.localName=F,R}},h(he,G);function Ht(){this._nsMap={}}Ht.prototype={nodeType:p,hasAttribute:function(k){return this.getAttributeNode(k)!=null},getAttribute:function(k){var F=this.getAttributeNode(k);return F&&F.value||""},getAttributeNode:function(k){return this.attributes.getNamedItem(k)},setAttribute:function(k,F){var R=this.ownerDocument.createAttribute(k);R.value=R.nodeValue=""+F,this.setAttributeNode(R)},removeAttribute:function(k){var F=this.getAttributeNode(k);F&&this.removeAttributeNode(F)},appendChild:function(k){return k.nodeType===P?this.insertBefore(k,null):Pt(this,k)},setAttributeNode:function(k){return this.attributes.setNamedItem(k)},setAttributeNodeNS:function(k){return this.attributes.setNamedItemNS(k)},removeAttributeNode:function(k){return this.attributes.removeNamedItem(k.nodeName)},removeAttributeNS:function(k,F){var R=this.getAttributeNodeNS(k,F);R&&this.removeAttributeNode(R)},hasAttributeNS:function(k,F){return this.getAttributeNodeNS(k,F)!=null},getAttributeNS:function(k,F){var R=this.getAttributeNodeNS(k,F);return R&&R.value||""},setAttributeNS:function(k,F,R){var j=this.ownerDocument.createAttributeNS(k,F);j.value=j.nodeValue=""+R,this.setAttributeNode(j)},getAttributeNodeNS:function(k,F){return this.attributes.getNamedItemNS(k,F)},getElementsByTagName:function(k){return new Z(this,function(F){var R=[];return L(F,function(j){j!==F&&j.nodeType==p&&(k==="*"||j.tagName==k)&&R.push(j)}),R})},getElementsByTagNameNS:function(k,F){return new Z(this,function(R){var j=[];return L(R,function(ie){ie!==R&&ie.nodeType===p&&(k==="*"||ie.namespaceURI===k)&&(F==="*"||ie.localName==F)&&j.push(ie)}),j})}},he.prototype.getElementsByTagName=Ht.prototype.getElementsByTagName,he.prototype.getElementsByTagNameNS=Ht.prototype.getElementsByTagNameNS,h(Ht,G);function vr(){}vr.prototype.nodeType=g,h(vr,G);function Nt(){}Nt.prototype={data:"",substringData:function(k,F){return this.data.substring(k,k+F)},appendData:function(k){k=this.data+k,this.nodeValue=this.data=k,this.length=k.length},insertData:function(k,F){this.replaceData(k,0,F)},appendChild:function(k){throw new Error(V[O])},deleteData:function(k,F){this.replaceData(k,F,"")},replaceData:function(k,F,R){var j=this.data.substring(0,k),ie=this.data.substring(k+F);R=j+R+ie,this.nodeValue=this.data=R,this.length=R.length}},h(Nt,G);function yi(){}yi.prototype={nodeName:"#text",nodeType:y,splitText:function(k){var F=this.data,R=F.substring(k);F=F.substring(0,k),this.data=this.nodeValue=F,this.length=F.length;var j=this.ownerDocument.createTextNode(R);return this.parentNode&&this.parentNode.insertBefore(j,this.nextSibling),j}},h(yi,Nt);function de(){}de.prototype={nodeName:"#comment",nodeType:w},h(de,Nt);function be(){}be.prototype={nodeName:"#cdata-section",nodeType:_},h(be,Nt);function Fe(){}Fe.prototype.nodeType=A,h(Fe,G);function et(){}et.prototype.nodeType=M,h(et,G);function mt(){}mt.prototype.nodeType=x,h(mt,G);function Jn(){}Jn.prototype.nodeType=S,h(Jn,G);function Sr(){}Sr.prototype.nodeName="#document-fragment",Sr.prototype.nodeType=P,h(Sr,G);function Nn(){}Nn.prototype.nodeType=E,h(Nn,G);function dn(){}dn.prototype.serializeToString=function(k,F,R){return er.call(k,F,R)},G.prototype.toString=er;function er(k,F){var R=[],j=this.nodeType==9&&this.documentElement||this,ie=j.prefix,ye=j.namespaceURI;if(ye&&ie==null){var ie=j.lookupPrefix(ye);if(ie==null)var $e=[{namespace:ye,prefix:null}]}return An(this,R,k,F,$e),R.join("")}function Lt(k,F,R){var j=k.prefix||"",ie=k.namespaceURI;if(!ie||j==="xml"&&ie===t.XML||ie===t.XMLNS)return!1;for(var ye=R.length;ye--;){var $e=R[ye];if($e.prefix===j)return $e.namespace!==ie}return!0}function Xr(k,F,R){k.push(" ",F,'="',R.replace(/[<>&"\t\n\r]/g,Q),'"')}function An(k,F,R,j,ie){if(ie||(ie=[]),j)if(k=j(k),k){if(typeof k=="string"){F.push(k);return}}else return;switch(k.nodeType){case p:var ye=k.attributes,$e=ye.length,_t=k.firstChild,ct=k.tagName;R=t.isHTML(k.namespaceURI)||R;var Me=ct;if(!R&&!k.prefix&&k.namespaceURI){for(var Te,Le=0;Le<ye.length;Le++)if(ye.item(Le).name==="xmlns"){Te=ye.item(Le).value;break}if(!Te)for(var jt=ie.length-1;jt>=0;jt--){var Ft=ie[jt];if(Ft.prefix===""&&Ft.namespace===k.namespaceURI){Te=Ft.namespace;break}}if(Te!==k.namespaceURI)for(var jt=ie.length-1;jt>=0;jt--){var Ft=ie[jt];if(Ft.namespace===k.namespaceURI){Ft.prefix&&(Me=Ft.prefix+":"+ct);break}}}F.push("<",Me);for(var dr=0;dr<$e;dr++){var fr=ye.item(dr);fr.prefix=="xmlns"?ie.push({prefix:fr.localName,namespace:fr.value}):fr.nodeName=="xmlns"&&ie.push({prefix:"",namespace:fr.value})}for(var dr=0;dr<$e;dr++){var fr=ye.item(dr);if(Lt(fr,R,ie)){var Wr=fr.prefix||"",Er=fr.namespaceURI;Xr(F,Wr?"xmlns:"+Wr:"xmlns",Er),ie.push({prefix:Wr,namespace:Er})}An(fr,F,R,j,ie)}if(ct===Me&&Lt(k,R,ie)){var Wr=k.prefix||"",Er=k.namespaceURI;Xr(F,Wr?"xmlns:"+Wr:"xmlns",Er),ie.push({prefix:Wr,namespace:Er})}if(_t||R&&!/^(?:meta|link|img|br|hr|input)$/i.test(ct)){if(F.push(">"),R&&/^script$/i.test(ct))for(;_t;)_t.data?F.push(_t.data):An(_t,F,R,j,ie.slice()),_t=_t.nextSibling;else for(;_t;)An(_t,F,R,j,ie.slice()),_t=_t.nextSibling;F.push("</",Me,">")}else F.push("/>");return;case C:case P:for(var _t=k.firstChild;_t;)An(_t,F,R,j,ie.slice()),_t=_t.nextSibling;return;case g:return Xr(F,k.name,k.value);case y:return F.push(k.data.replace(/[<&>]/g,Q));case _:return F.push("<![CDATA[",k.data,"]]>");case w:return F.push("<!--",k.data,"-->");case A:var tr=k.publicId,kr=k.systemId;if(F.push("<!DOCTYPE ",k.name),tr)F.push(" PUBLIC ",tr),kr&&kr!="."&&F.push(" ",kr),F.push(">");else if(kr&&kr!=".")F.push(" SYSTEM ",kr,">");else{var Oa=k.internalSubset;Oa&&F.push(" [",Oa,"]"),F.push(">")}return;case E:return F.push("<?",k.target," ",k.data,"?>");case S:return F.push("&",k.nodeName,";");default:F.push("??",k.nodeName)}}function ko(k,F,R){var j;switch(F.nodeType){case p:j=F.cloneNode(!1),j.ownerDocument=k;case P:break;case g:R=!0;break}if(j||(j=F.cloneNode(!1)),j.ownerDocument=k,j.parentNode=null,R)for(var ie=F.firstChild;ie;)j.appendChild(ko(k,ie,R)),ie=ie.nextSibling;return j}function ss(k,F,R){var j=new F.constructor;for(var ie in F)if(Object.prototype.hasOwnProperty.call(F,ie)){var ye=F[ie];typeof ye!="object"&&ye!=j[ie]&&(j[ie]=ye)}switch(F.childNodes&&(j.childNodes=new ne),j.ownerDocument=k,j.nodeType){case p:var $e=F.attributes,ct=j.attributes=new z,Me=$e.length;ct._ownerElement=j;for(var Te=0;Te<Me;Te++)j.setAttributeNode(ss(k,$e.item(Te),!0));break;case g:R=!0}if(R)for(var Le=F.firstChild;Le;)j.appendChild(ss(k,Le,R)),Le=Le.nextSibling;return j}function Zs(k,F,R){k[F]=R}try{if(Object.defineProperty){let k=function(F){switch(F.nodeType){case p:case P:var R=[];for(F=F.firstChild;F;)F.nodeType!==7&&F.nodeType!==8&&R.push(k(F)),F=F.nextSibling;return R.join("");default:return F.nodeValue}};Object.defineProperty(Z.prototype,"length",{get:function(){return te(this),this.$$length}}),Object.defineProperty(G.prototype,"textContent",{get:function(){return k(this)},set:function(F){switch(this.nodeType){case p:case P:for(;this.firstChild;)this.removeChild(this.firstChild);(F||String(F))&&this.appendChild(this.ownerDocument.createTextNode(F));break;default:this.data=F,this.value=F,this.nodeValue=F}}}),Zs=function(F,R,j){F["$$"+R]=j}}}catch{}return ba.DocumentType=Fe,ba.DOMException=$,ba.DOMImplementation=U,ba.Element=Ht,ba.Node=G,ba.NodeList=ne,ba.XMLSerializer=dn,ba}var zh={},Z0={},EP;function bW(){return EP||(EP=1,(function(n){var e=Sy().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES})(Z0)),Z0}var rm={},wP;function xW(){if(wP)return rm;wP=1;var n=Sy().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,s=1,a=2,l=3,c=4,h=5,d=6,p=7;function g(O,D){this.message=O,this.locator=D,Error.captureStackTrace&&Error.captureStackTrace(this,g)}g.prototype=new Error,g.prototype.name=g.name;function y(){}y.prototype={parse:function(O,D,H){var $=this.domBuilder;$.startDocument(),A(D,D={}),_(O,D,H,$,this.errorHandler),$.endDocument()}};function _(O,D,H,$,ne){function Z(Pt){if(Pt>65535){Pt-=65536;var Ht=55296+(Pt>>10),vr=56320+(Pt&1023);return String.fromCharCode(Ht,vr)}else return String.fromCharCode(Pt)}function te(Pt){var Ht=Pt.slice(1,-1);return Object.hasOwnProperty.call(H,Ht)?H[Ht]:Ht.charAt(0)==="#"?Z(parseInt(Ht.substr(1).replace("x","0x"))):(ne.error("entity not found:"+Pt),Pt)}function z(Pt){if(Pt>he){var Ht=O.substring(he,Pt).replace(/&#?\w+;/g,te);G&&X(he),$.characters(Ht,0,Pt-he),he=Pt}}function X(Pt,Ht){for(;Pt>=J&&(Ht=U.exec(O));)K=Ht.index,J=K+Ht[0].length,G.lineNumber++;G.columnNumber=Pt-K+1}for(var K=0,J=0,U=/.*(?:\r\n?|\n)|.*$/g,G=$.locator,Q=[{currentNSMap:D}],L={},he=0;;){try{var fe=O.indexOf("<",he);if(fe<0){if(!O.substr(he).match(/^\s*$/)){var ve=$.doc,Be=ve.createTextNode(O.substr(he));ve.appendChild(Be),$.currentElement=Be}return}switch(fe>he&&z(fe),O.charAt(fe+1)){case"/":var De=O.indexOf(">",fe+3),ke=O.substring(fe+2,De).replace(/[ \t\n\r]+$/g,""),Ne=Q.pop();De<0?(ke=O.substring(fe+2).replace(/[\s<].*/,""),ne.error("end tag name: "+ke+" is not complete:"+Ne.tagName),De=fe+1+ke.length):ke.match(/\s</)&&(ke=ke.replace(/[\s<].*/,""),ne.error("end tag name: "+ke+" maybe not complete"),De=fe+1+ke.length);var rt=Ne.localNSMap,st=Ne.tagName==ke,at=st||Ne.tagName&&Ne.tagName.toLowerCase()==ke.toLowerCase();if(at){if($.endElement(Ne.uri,Ne.localName,ke),rt)for(var nn in rt)Object.prototype.hasOwnProperty.call(rt,nn)&&$.endPrefixMapping(nn);st||ne.fatalError("end tag name: "+ke+" is not match the current start tagName:"+Ne.tagName)}else Q.push(Ne);De++;break;case"?":G&&X(fe),De=M(O,fe,$);break;case"!":G&&X(fe),De=P(O,fe,$,ne);break;default:G&&X(fe);var ut=new I,Vt=Q[Q.length-1].currentNSMap,De=x(O,fe,ut,Vt,te,ne),ln=ut.length;if(!ut.closed&&C(O,De,ut.tagName,L)&&(ut.closed=!0,H.nbsp||ne.warning("unclosed xml attribute")),G&&ln){for(var vn=S(G,{}),Sn=0;Sn<ln;Sn++){var In=ut[Sn];X(In.offset),In.locator=S(G,{})}$.locator=vn,E(ut,$,Vt)&&Q.push(ut),$.locator=G}else E(ut,$,Vt)&&Q.push(ut);n.isHTML(ut.uri)&&!ut.closed?De=w(O,De,ut.tagName,te,$):De++}}catch(Pt){if(Pt instanceof g)throw Pt;ne.error("element parse error: "+Pt),De=-1}De>he?he=De:z(Math.max(fe,he)+1)}}function S(O,D){return D.lineNumber=O.lineNumber,D.columnNumber=O.columnNumber,D}function x(O,D,H,$,ne,Z){function te(G,Q,L){H.attributeNames.hasOwnProperty(G)&&Z.fatalError("Attribute "+G+" redefined"),H.addValue(G,Q.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ne),L)}for(var z,X,K=++D,J=i;;){var U=O.charAt(K);switch(U){case"=":if(J===s)z=O.slice(D,K),J=l;else if(J===a)J=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(J===l||J===s)if(J===s&&(Z.warning('attribute value must after "="'),z=O.slice(D,K)),D=K+1,K=O.indexOf(U,D),K>0)X=O.slice(D,K),te(z,X,D-1),J=h;else throw new Error("attribute value no end '"+U+"' match");else if(J==c)X=O.slice(D,K),te(z,X,D),Z.warning('attribute "'+z+'" missed start quot('+U+")!!"),D=K+1,J=h;else throw new Error('attribute value must after "="');break;case"/":switch(J){case i:H.setTagName(O.slice(D,K));case h:case d:case p:J=p,H.closed=!0;case c:case s:break;case a:H.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Z.error("unexpected end of input"),J==i&&H.setTagName(O.slice(D,K)),K;case">":switch(J){case i:H.setTagName(O.slice(D,K));case h:case d:case p:break;case c:case s:X=O.slice(D,K),X.slice(-1)==="/"&&(H.closed=!0,X=X.slice(0,-1));case a:J===a&&(X=z),J==c?(Z.warning('attribute "'+X+'" missed quot(")!'),te(z,X,D)):((!n.isHTML($[""])||!X.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+X+'" missed value!! "'+X+'" instead!!'),te(X,X,D));break;case l:throw new Error("attribute value missed!!")}return K;case"":U=" ";default:if(U<=" ")switch(J){case i:H.setTagName(O.slice(D,K)),J=d;break;case s:z=O.slice(D,K),J=a;break;case c:var X=O.slice(D,K);Z.warning('attribute "'+X+'" missed quot(")!!'),te(z,X,D);case h:J=d;break}else switch(J){case a:H.tagName,(!n.isHTML($[""])||!z.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+z+'" missed value!! "'+z+'" instead2!!'),te(z,z,D),D=K,J=s;break;case h:Z.warning('attribute space is required"'+z+'"!!');case d:J=s,D=K;break;case l:J=c,D=K;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}K++}}function E(O,D,H){for(var $=O.tagName,ne=null,U=O.length;U--;){var Z=O[U],te=Z.qName,z=Z.value,G=te.indexOf(":");if(G>0)var X=Z.prefix=te.slice(0,G),K=te.slice(G+1),J=X==="xmlns"&&K;else K=te,X=null,J=te==="xmlns"&&"";Z.localName=K,J!==!1&&(ne==null&&(ne={},A(H,H={})),H[J]=ne[J]=z,Z.uri=n.XMLNS,D.startPrefixMapping(J,z))}for(var U=O.length;U--;){Z=O[U];var X=Z.prefix;X&&(X==="xml"&&(Z.uri=n.XML),X!=="xmlns"&&(Z.uri=H[X||""]))}var G=$.indexOf(":");G>0?(X=O.prefix=$.slice(0,G),K=O.localName=$.slice(G+1)):(X=null,K=O.localName=$);var Q=O.uri=H[X||""];if(D.startElement(Q,K,$,O),O.closed){if(D.endElement(Q,K,$),ne)for(X in ne)Object.prototype.hasOwnProperty.call(ne,X)&&D.endPrefixMapping(X)}else return O.currentNSMap=H,O.localNSMap=ne,!0}function w(O,D,H,$,ne){if(/^(?:script|textarea)$/i.test(H)){var Z=O.indexOf("</"+H+">",D),te=O.substring(D+1,Z);if(/[&<]/.test(te))return/^script$/i.test(H)?(ne.characters(te,0,te.length),Z):(te=te.replace(/&#?\w+;/g,$),ne.characters(te,0,te.length),Z)}return D+1}function C(O,D,H,$){var ne=$[H];return ne==null&&(ne=O.lastIndexOf("</"+H+">"),ne<D&&(ne=O.lastIndexOf("</"+H)),$[H]=ne),ne<D}function A(O,D){for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&(D[H]=O[H])}function P(O,D,H,$){var ne=O.charAt(D+2);switch(ne){case"-":if(O.charAt(D+3)==="-"){var Z=O.indexOf("-->",D+4);return Z>D?(H.comment(O,D+4,Z-D-4),Z+3):($.error("Unclosed comment"),-1)}else return-1;default:if(O.substr(D+3,6)=="CDATA["){var Z=O.indexOf("]]>",D+9);return H.startCDATA(),H.characters(O,D+9,Z-D-9),H.endCDATA(),Z+3}var te=V(O,D),z=te.length;if(z>1&&/!doctype/i.test(te[0][0])){var X=te[1][0],K=!1,J=!1;z>3&&(/^public$/i.test(te[2][0])?(K=te[3][0],J=z>4&&te[4][0]):/^system$/i.test(te[2][0])&&(J=te[3][0]));var U=te[z-1];return H.startDTD(X,K,J),H.endDTD(),U.index+U[0].length}}return-1}function M(O,D,H){var $=O.indexOf("?>",D);if($){var ne=O.substring(D,$).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ne?(ne[0].length,H.processingInstruction(ne[1],ne[2]),$+2):-1}return-1}function I(){this.attributeNames={}}I.prototype={setTagName:function(O){if(!r.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,D,H){if(!r.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:D,offset:H}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}};function V(O,D){var H,$=[],ne=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ne.lastIndex=D,ne.exec(O);H=ne.exec(O);)if($.push(H),H[1])return $}return rm.XMLReader=y,rm.ParseError=g,rm}var CP;function vW(){if(CP)return zh;CP=1;var n=Sy(),e=$L(),t=bW(),r=xW(),i=e.DOMImplementation,s=n.NAMESPACE,a=r.ParseError,l=r.XMLReader;function c(x){return x.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(x){this.options=x||{locator:{}}}h.prototype.parseFromString=function(x,E){var w=this.options,C=new l,A=w.domBuilder||new p,P=w.errorHandler,M=w.locator,I=w.xmlns||{},V=/\/x?html?$/.test(E),O=V?t.HTML_ENTITIES:t.XML_ENTITIES;M&&A.setDocumentLocator(M),C.errorHandler=d(P,A,M),C.domBuilder=w.domBuilder||A,V&&(I[""]=s.HTML),I.xml=I.xml||s.XML;var D=w.normalizeLineEndings||c;return x&&typeof x=="string"?C.parse(D(x),I,O):C.errorHandler.error("invalid doc source"),A.doc};function d(x,E,w){if(!x){if(E instanceof p)return E;x=E}var C={},A=x instanceof Function;w=w||{};function P(M){var I=x[M];!I&&A&&(I=x.length==2?function(V){x(M,V)}:x),C[M]=I&&function(V){I("[xmldom "+M+"]	"+V+y(w))}||function(){}}return P("warning"),P("error"),P("fatalError"),C}function p(){this.cdata=!1}function g(x,E){E.lineNumber=x.lineNumber,E.columnNumber=x.columnNumber}p.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(x,E,w,C){var A=this.doc,P=A.createElementNS(x,w||E),M=C.length;S(this,P),this.currentElement=P,this.locator&&g(this.locator,P);for(var I=0;I<M;I++){var x=C.getURI(I),V=C.getValue(I),w=C.getQName(I),O=A.createAttributeNS(x,w);this.locator&&g(C.getLocator(I),O),O.value=O.nodeValue=V,P.setAttributeNode(O)}},endElement:function(x,E,w){var C=this.currentElement;C.tagName,this.currentElement=C.parentNode},startPrefixMapping:function(x,E){},endPrefixMapping:function(x){},processingInstruction:function(x,E){var w=this.doc.createProcessingInstruction(x,E);this.locator&&g(this.locator,w),S(this,w)},ignorableWhitespace:function(x,E,w){},characters:function(x,E,w){if(x=_.apply(this,arguments),x){if(this.cdata)var C=this.doc.createCDATASection(x);else var C=this.doc.createTextNode(x);this.currentElement?this.currentElement.appendChild(C):/^\s*$/.test(x)&&this.doc.appendChild(C),this.locator&&g(this.locator,C)}},skippedEntity:function(x){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(x){(this.locator=x)&&(x.lineNumber=0)},comment:function(x,E,w){x=_.apply(this,arguments);var C=this.doc.createComment(x);this.locator&&g(this.locator,C),S(this,C)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(x,E,w){var C=this.doc.implementation;if(C&&C.createDocumentType){var A=C.createDocumentType(x,E,w);this.locator&&g(this.locator,A),S(this,A),this.doc.doctype=A}},warning:function(x){console.warn("[xmldom warning]	"+x,y(this.locator))},error:function(x){console.error("[xmldom error]	"+x,y(this.locator))},fatalError:function(x){throw new a(x,this.locator)}};function y(x){if(x)return`
@`+(x.systemId||"")+"#[line:"+x.lineNumber+",col:"+x.columnNumber+"]"}function _(x,E,w){return typeof x=="string"?x.substr(E,w):x.length>=E+w||E?new java.lang.String(x,E,w)+"":x}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(x){p.prototype[x]=function(){return null}});function S(x,E){x.currentElement?x.currentElement.appendChild(E):x.doc.appendChild(E)}return zh.__DOMHandler=p,zh.normalizeLineEndings=c,zh.DOMParser=h,zh}var TP;function SW(){if(TP)return Gh;TP=1;var n=$L();return Gh.DOMImplementation=n.DOMImplementation,Gh.XMLSerializer=n.XMLSerializer,Gh.DOMParser=vW().DOMParser,Gh}var EW=SW();const wW={createCanvas:(n,e)=>new OffscreenCanvas(n??0,e??0),createImage:()=>new Image,getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new EW.DOMParser().parseFromString(n,"text/xml")};class CW{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(Zn.system.add(this._tickerUpdate,this,Ws.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Zn.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}}const Gs=new CW;class kd extends bc{constructor(){super(...arguments),this.client=new Bt,this.movement=new Bt,this.offset=new Bt,this.global=new Bt,this.screen=new Bt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,i,s,a,l,c,h,d,p,g,y,_,S){throw new Error("Method not implemented.")}}class qi extends kd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Pl extends kd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Pl.DOM_DELTA_PIXEL=0;Pl.DOM_DELTA_LINE=1;Pl.DOM_DELTA_PAGE=2;const TW=2048,AW=new Bt,Vh=new Bt;class qL{constructor(e){this.dispatch=new hr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,i=t.length;r<i;r++)t[r].fn(e);else Ue(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Gs.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,AW.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=r.length-1;s>=0;s--)i.forEach(a=>{e.currentTarget=r[s],this.notifyTarget(e,a)})}propagationPath(e){const t=[e];for(let r=0;r<TW&&e!==this.rootTarget&&e.parent;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,i,s,a=!1){let l=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Gs.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const g=d[p],y=this.hitTestMoveRecursive(g,this._isInteractive(t)?t:g.eventMode,r,i,s,a||s(e,r));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const _=e.isInteractive();(y.length>0||_)&&(_&&this._allInteractiveElements.push(e),y.push(e)),this._hitElements.length===0&&(this._hitElements=y),l=!0}}}const c=this._isInteractive(t),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:l?this._hitElements:c&&!s(e,r)&&i(e,r)?h?[e]:[]:null}hitTestRecursive(e,t,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Gs.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children,h=r;for(let d=c.length-1;d>=0;d--){const p=c[d],g=this.hitTestRecursive(p,this._isInteractive(t)?t:p.eventMode,h,i,s);if(g){if(g.length>0&&!g[g.length-1].parent)continue;const y=e.isInteractive();return(g.length>0||y)&&g.push(e),g}}}const a=this._isInteractive(t),l=e.isInteractive();return a&&i(e,r)?l?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Vh),!e.hitArea.contains(Vh.x,Vh.y)))return!0;if(e.effects&&e.effects.length)for(let r=0;r<e.effects.length;r++){const i=e.effects[r];if(i.containsPoint&&!i.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e?.containsPoint?(e.worldTransform.applyInverse(t,Vh),e.containsPoint(Vh)):!1}notifyTarget(e,t){if(!e.currentTarget.isInteractive())return;t??(t=e.type);const r=`on${t}`;e.currentTarget[r]?.(e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==t.target){const c=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,c,s);if(this.dispatchEvent(h,"pointerout"),r&&this.dispatchEvent(h,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),r&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==t.target){const c=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(t,c);this.dispatchEvent(h,"pointerover"),r&&this.dispatchEvent(h,"mouseover");let d=s?.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const g=this.clonePointerEvent(t,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),r&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(h)}const a=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(t,"pointermove"),l&&a.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),l&&a.push("globaltouchmove")),r&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),l&&a.push("globalmousemove"),this.cursor=t.target?.cursor),a.length>0&&this.all(t,a),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const a=this.createPointerEvent(e,"pointerleave",i);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),r&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.dispatchEvent(r,l?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let a=s;if(s&&!r.composedPath().includes(s)){let l=s;for(;l&&!r.composedPath().includes(l);){if(r.currentTarget=l,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const c=r.button===2;this.notifyTarget(r,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete i.pressTargetsByButton[e.button],a=l}if(a){const l=this.clonePointerEvent(r,"click");l.target=a,l.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:t});const c=i.clicksByButton[e.button];if(c.target===l.target&&t-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=t,l.detail=c.clickCount,l.pointerType==="mouse"){const h=l.button===2;this.dispatchEvent(l,h?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof qi)){Ue("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Pl)){Ue("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const i=this.allocateEvent(qi);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Pl);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(qi);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof qi&&t instanceof qi&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof kd&&t instanceof kd&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const r=e.currentTarget._events[t];if(r)if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const MW=1,RW={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},lE=class $v{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new qL(null),Gs.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new qi(null),this._rootWheelEvent=new Pl(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...$v.defaultEventFeatures},{set:(t,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[r]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,$v._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){Gs.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=t.length;r<i;r++){const s=t[r],a=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Gs.pointerMoved();const t=this._normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this._bootstrapEvent(this._rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",i=this._normalizeToPointerData(e);for(let s=0,a=i.length;s<a;s++){const l=this._bootstrapEvent(this._rootPointerEvent,i[s]);l.type+=r,this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this._bootstrapEvent(this._rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Gs.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Gs.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Gs.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=MW),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=RW[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};lE.extension={name:"events",type:[q.WebGLSystem,q.CanvasSystem,q.WebGPUSystem],priority:-1};lE.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let YL=lE;const PW={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(n){this.eventMode=n?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??YL.defaultEventMode},set eventMode(n){this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,a=typeof e=="function"?void 0:e;n=r?`${n}capture`:n;const l=typeof e=="function"?e:e.handleEvent,c=this;i&&i.addEventListener("abort",()=>{c.off(n,l,a)}),s?c.once(n,l,a):c.on(n,l,a)},removeEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,i)},dispatchEvent(n){if(!(n instanceof bc))throw new Error("Container cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};var nf=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,KL=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,qv=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const ZL=class QL extends Ys{constructor(e){e={...QL.defaultOptions,...e};const t=jr.from({vertex:{source:qv,entryPoint:"mainVertex"},fragment:{source:qv,entryPoint:"mainFragment"}}),r=mi.from({vertex:nf,fragment:KL,name:"alpha-filter"}),{alpha:i,...s}=e,a=new zn({uAlpha:{value:i,type:"f32"}});super({...s,gpuProgram:t,glProgram:r,resources:{alphaUniforms:a}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};ZL.defaultOptions={alpha:1};let BW=ZL;const uE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},DW=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function JL(n){const e=uE[n],t=e.length;let r=DW,i="";const s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let a;for(let l=0;l<n;l++){let c=s.replace("%index%",l.toString());a=l,l>=t&&(a=n-l-1),c=c.replace("%value%",e[a].toString()),i+=c,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}const kW=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function eF(n,e){const t=Math.ceil(n/2);let r=kW,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let a=0;a<n;a++){let l=s.replace("%index%",a.toString());l=l.replace("%sampleIndex%",`${a-(t-1)}.0`),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r=r.replace("%dimension%",e?"z":"w"),r}function tF(n,e){const t=eF(e,n),r=JL(e);return mi.from({vertex:t,fragment:r,name:`blur-${n?"horizontal":"vertical"}-pass-filter`})}var nF=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function rF(n,e){const t=uE[e],r=t.length,i=[],s=[],a=[];for(let p=0;p<e;p++){i[p]=`@location(${p}) offset${p}: vec2<f32>,`,n?s[p]=`filteredCord + vec2(${p-r+1} * pixelStrength, 0.0),`:s[p]=`filteredCord + vec2(0.0, ${p-r+1} * pixelStrength),`;const g=p<r?p:e-p-1,y=t[g].toString();a[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${y};`}const l=i.join(`
`),c=s.join(`
`),h=a.join(`
`),d=nF.replace("%blur-struct%",l).replace("%blur-vertex-out%",c).replace("%blur-fragment-in%",l).replace("%blur-sampling%",h).replace("%dimension%",n?"z":"w");return jr.from({vertex:{source:d,entryPoint:"mainVertex"},fragment:{source:d,entryPoint:"mainFragment"}})}const iF=class sF extends Ys{constructor(e){e={...sF.defaultOptions,...e};const t=tF(e.horizontal,e.kernelSize),r=rF(e.horizontal,e.kernelSize);super({glProgram:t,gpuProgram:r,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,r,i){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,r,i);else{const s=Dn.getSameSizeTexture(t);let a=t,l=s;this._state.blend=!1;const c=e.renderer.type===xr.WEBGPU;for(let h=0;h<this.passes-1;h++){e.applyFilter(this,a,l,h===0?!0:c);const d=l;l=a,a=d}this._state.blend=!0,e.applyFilter(this,a,r,i),Dn.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};iF.defaultOptions={strength:8,quality:4,kernelSize:5};let Um=iF;class aF extends Ys{constructor(...e){let t=e[0]??{};typeof t=="number"&&(Ae(nt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.resolution=e[2]||"inherit"),e[3]!==void 0&&(t.kernelSize=e[3])),t={...Um.defaultOptions,...t};const{strength:r,strengthX:i,strengthY:s,quality:a,...l}=t;super({...l,compatibleRenderers:xr.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new Um({horizontal:!0,...t}),this.blurYFilter=new Um({horizontal:!1,...t}),this.quality=a,this.strengthX=i??r,this.strengthY=s??r,this.repeatEdgePixels=!1}apply(e,t,r,i){const s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){const l=Dn.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,l,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,l,r,i),Dn.returnTexture(l)}else a?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,r,i)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,r,i))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return Ae("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){Ae("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return Ae("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){Ae("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return Ae("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){Ae("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}aF.defaultOptions={strength:8,quality:4,kernelSize:5};var oF=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,Yv=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class OW extends Ys{constructor(e={}){const t=new zn({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),r=jr.from({vertex:{source:Yv,entryPoint:"mainVertex"},fragment:{source:Yv,entryPoint:"mainFragment"}}),i=mi.from({vertex:nf,fragment:oF,name:"color-matrix-filter"});super({...e,gpuProgram:r,glProgram:i,resources:{colorMatrixUniforms:t}}),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.matrix,e),r=this._colorMatrix(r)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=r,this.resources.colorMatrixUniforms.update()}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,i,s]=yt.shared.setValue(e).toArray(),a=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(a,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}grayscale(e,t){this.greyscale(e,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,a=1/3,l=s(a),c=r+(1-r)*a,h=a*(1-r)-l*i,d=a*(1-r)+l*i,p=a*(1-r)+l*i,g=r+a*(1-r),y=a*(1-r)-l*i,_=a*(1-r)-l*i,S=a*(1-r)+l*i,x=r+a*(1-r),E=[c,h,d,0,0,p,g,y,0,0,_,S,x,0,0,0,0,0,1,0];this._loadMatrix(E,t)}contrast(e,t){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,i,s){e||(e=.2),t||(t=.15),r||(r=16770432),i||(i=3375104);const a=yt.shared,[l,c,h]=a.setValue(r).toArray(),[d,p,g]=a.setValue(i).toArray(),y=[.3,.59,.11,0,0,l,c,h,e,0,d,p,g,t,0,l-d,c-p,h-g,0,0];this._loadMatrix(y,s)}night(e,t){e||(e=.1);const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(e){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=e}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(e){this.resources.colorMatrixUniforms.uniforms.uAlpha=e}}var lF=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,uF=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,Kv=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class IW extends Ys{constructor(...e){let t=e[0];t instanceof vs&&(e[1]&&Ae(nt,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),t={sprite:t,scale:e[1]});const{sprite:r,scale:i,...s}=t;let a=i??20;typeof a=="number"&&(a=new Bt(a,a));const l=new zn({uFilterMatrix:{value:new Ce,type:"mat3x3<f32>"},uScale:{value:a,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),c=mi.from({vertex:uF,fragment:lF,name:"displacement-filter"}),h=jr.from({vertex:{source:Kv,entryPoint:"mainVertex"},fragment:{source:Kv,entryPoint:"mainFragment"}}),d=r.texture.source;super({...s,gpuProgram:h,glProgram:c,resources:{filterUniforms:l,uMapTexture:d,uMapSampler:d.style}}),this._sprite=t.sprite,this._sprite.renderable=!1}apply(e,t,r,i){const s=this.resources.filterUniforms.uniforms;e.calculateSpriteMatrix(s.uFilterMatrix,this._sprite);const a=this._sprite.worldTransform,l=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);l!==0&&c!==0&&(s.uRotation[0]=a.a/l,s.uRotation[1]=a.b/l,s.uRotation[2]=a.c/c,s.uRotation[3]=a.d/c),this.resources.uMapTexture=this._sprite.texture.source,e.applyFilter(this,t,r,i)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var cF=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,Zv=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const hF=class dF extends Ys{constructor(e={}){e={...dF.defaultOptions,...e};const t=jr.from({vertex:{source:Zv,entryPoint:"mainVertex"},fragment:{source:Zv,entryPoint:"mainFragment"}}),r=mi.from({vertex:nf,fragment:cF,name:"noise-filter"}),{noise:i,seed:s,...a}=e;super({...a,gpuProgram:t,glProgram:r,resources:{noiseUniforms:new zn({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=i,this.seed=s??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};hF.defaultOptions={noise:.5};let NW=hF;var fF=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`,Qv=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`;class pF extends Ys{constructor(){const e=jr.from({vertex:{source:Qv,entryPoint:"mainVertex"},fragment:{source:Qv,entryPoint:"mainFragment"},name:"passthrough-filter"}),t=mi.from({vertex:nf,fragment:fF,name:"passthrough-filter"});super({gpuProgram:e,glProgram:t})}}class mF{constructor(e){this._renderer=e}push(e,t,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}mF.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"filter"};function Jv(n,e,t,r,i,s,a,l){const c=a-t,h=l-r,d=i-t,p=s-r,g=n-t,y=e-r,_=c*c+h*h,S=c*d+h*p,x=c*g+h*y,E=d*d+p*p,w=d*g+p*y,C=1/(_*E-S*S),A=(E*x-S*w)*C,P=(_*w-S*x)*C;return A>=0&&P>=0&&A+P<1}class cE{constructor(e=0,t=0,r=0,i=0,s=0,a=0){this.type="triangle",this.x=e,this.y=t,this.x2=r,this.y2=i,this.x3=s,this.y3=a}contains(e,t){const r=(this.x-this.x3)*(t-this.y3)-(this.y-this.y3)*(e-this.x3),i=(this.x2-this.x)*(t-this.y)-(this.y2-this.y)*(e-this.x);if(r<0!=i<0&&r!==0&&i!==0)return!1;const s=(this.x3-this.x2)*(t-this.y2)-(this.y3-this.y2)*(e-this.x2);return s===0||s<0==r+i<=0}strokeContains(e,t,r,i=.5){const s=r/2,a=s*s,{x:l,x2:c,x3:h,y:d,y2:p,y3:g}=this;return dd(e,t,l,d,c,g)<=a||dd(e,t,c,p,h,g)<=a||dd(e,t,h,g,l,d)<=a}clone(){return new cE(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new Rt);const t=Math.min(this.x,this.x2,this.x3),r=Math.max(this.x,this.x2,this.x3),i=Math.min(this.y,this.y2,this.y3),s=Math.max(this.y,this.y2,this.y3);return e.x=t,e.y=i,e.width=r-t,e.height=s-i,e}}const AP=new Ce;function hE(n,e){e.clear();const t=e.matrix;for(let r=0;r<n.length;r++){const i=n[r];if(i.globalDisplayStatus<7)continue;const s=i.renderGroup??i.parentRenderGroup;s?.isCachedAsTexture?e.matrix=AP.copyFrom(s.textureOffsetInverseTransform).append(i.worldTransform):s?._parentCacheAsTextureRenderGroup?e.matrix=AP.copyFrom(s._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(i.groupTransform):e.matrix=i.worldTransform,e.addBounds(i.bounds)}return e.matrix=t,e}const LW=new Ll({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class FW{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new Qn,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}}class gF{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new zn({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new js({}),this.renderer=e}get activeBackTexture(){return this._activeFilterData?.backTexture}push(e){const t=this.renderer,r=e.filterEffect.filters,i=this._pushFilterData();i.skip=!1,i.filters=r,i.container=e.container,i.outputRenderSurface=t.renderTarget.renderSurface;const s=t.renderTarget.renderTarget.colorTexture.source,a=s.resolution,l=s.antialias;if(r.every(y=>!y.enabled)){i.skip=!0;return}const c=i.bounds;if(this._calculateFilterArea(e,c),this._calculateFilterBounds(i,t.renderTarget.rootViewPort,l,a,1),i.skip)return;const h=this._getPreviousFilterData(),d=this._findFilterResolution(a);let p=0,g=0;h&&(p=h.bounds.minX,g=h.bounds.minY),this._calculateGlobalFrame(i,p,g,d,s.width,s.height),this._setupFilterTextures(i,c,t,h)}generateFilteredTexture({texture:e,filters:t}){const r=this._pushFilterData();this._activeFilterData=r,r.skip=!1,r.filters=t;const i=e.source,s=i.resolution,a=i.antialias;if(t.every(y=>!y.enabled))return r.skip=!0,e;const l=r.bounds;if(l.addRect(e.frame),this._calculateFilterBounds(r,l.rectangle,a,s,0),r.skip)return e;const c=s;this._calculateGlobalFrame(r,0,0,c,i.width,i.height),r.outputRenderSurface=Dn.getOptimalTexture(l.width,l.height,r.resolution,r.antialias),r.backTexture=we.EMPTY,r.inputTexture=e,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(r,!0);const g=r.outputRenderSurface;return g.source.alphaMode="premultiplied-alpha",g}pop(){const e=this.renderer,t=this._popFilterData();t.skip||(e.globalUniforms.pop(),e.renderTarget.finishRenderPass(),this._activeFilterData=t,this._applyFiltersToTexture(t,!1),t.blendRequired&&Dn.returnTexture(t.backTexture),Dn.returnTexture(t.inputTexture))}getBackTexture(e,t,r){const i=e.colorTexture.source._resolution,s=Dn.getOptimalTexture(t.width,t.height,i,!1);let a=t.minX,l=t.minY;r&&(a-=r.minX,l-=r.minY),a=Math.floor(a*i),l=Math.floor(l*i);const c=Math.ceil(t.width*i),h=Math.ceil(t.height*i);return this.renderer.renderTarget.copyToTexture(e,s,{x:a,y:l},{width:c,height:h},{x:0,y:0}),s}applyFilter(e,t,r,i){const s=this.renderer,a=this._activeFilterData,c=a.outputRenderSurface===r,h=s.renderTarget.rootRenderTarget.colorTexture.source._resolution,d=this._findFilterResolution(h);let p=0,g=0;if(c){const _=this._findPreviousFilterOffset();p=_.x,g=_.y}this._updateFilterUniforms(t,r,a,p,g,d,c,i);const y=e.enabled?e:this._getPassthroughFilter();this._setupBindGroupsAndRender(y,t,s)}calculateSpriteMatrix(e,t){const r=this._activeFilterData,i=e.set(r.inputTexture._source.width,0,0,r.inputTexture._source.height,r.bounds.minX,r.bounds.minY),s=t.worldTransform.copyTo(Ce.shared),a=t.renderGroup||t.parentRenderGroup;return a&&a.cacheToLocalTransform&&s.prepend(a.cacheToLocalTransform),s.invert(),i.prepend(s),i.scale(1/t.texture.orig.width,1/t.texture.orig.height),i.translate(t.anchor.x,t.anchor.y),i}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??(this._passthroughFilter=new pF),this._passthroughFilter}_setupBindGroupsAndRender(e,t,r){if(r.renderPipes.uniformBatch){const i=r.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(i,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,r.encoder.draw({geometry:LW,shader:e,state:e._state,topology:"triangle-list"}),r.type===xr.WEBGL&&r.renderTarget.finishRenderPass()}_setupFilterTextures(e,t,r,i){if(e.backTexture=we.EMPTY,e.inputTexture=Dn.getOptimalTexture(t.width,t.height,e.resolution,e.antialias),e.blendRequired){r.renderTarget.finishRenderPass();const s=r.renderTarget.getRenderTarget(e.outputRenderSurface);e.backTexture=this.getBackTexture(s,t,i?.bounds)}r.renderTarget.bind(e.inputTexture,!0),r.globalUniforms.push({offset:t})}_calculateGlobalFrame(e,t,r,i,s,a){const l=e.globalFrame;l.x=t*i,l.y=r*i,l.width=s*i,l.height=a*i}_updateFilterUniforms(e,t,r,i,s,a,l,c){const h=this._filterGlobalUniforms.uniforms,d=h.uOutputFrame,p=h.uInputSize,g=h.uInputPixel,y=h.uInputClamp,_=h.uGlobalFrame,S=h.uOutputTexture;l?(d[0]=r.bounds.minX-i,d[1]=r.bounds.minY-s):(d[0]=0,d[1]=0),d[2]=e.frame.width,d[3]=e.frame.height,p[0]=e.source.width,p[1]=e.source.height,p[2]=1/p[0],p[3]=1/p[1],g[0]=e.source.pixelWidth,g[1]=e.source.pixelHeight,g[2]=1/g[0],g[3]=1/g[1],y[0]=.5*g[2],y[1]=.5*g[3],y[2]=e.frame.width*p[2]-.5*g[2],y[3]=e.frame.height*p[3]-.5*g[3];const x=this.renderer.renderTarget.rootRenderTarget.colorTexture;_[0]=i*a,_[1]=s*a,_[2]=x.source.width*a,_[3]=x.source.height*a,t instanceof we&&(t.source.resource=null);const E=this.renderer.renderTarget.getRenderTarget(t);this.renderer.renderTarget.bind(t,!!c),t instanceof we?(S[0]=t.frame.width,S[1]=t.frame.height):(S[0]=E.width,S[1]=E.height),S[2]=E.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(e){let t=this._filterStackIndex-1;for(;t>0&&this._filterStack[t].skip;)--t;return t>0&&this._filterStack[t].inputTexture?this._filterStack[t].inputTexture.source._resolution:e}_findPreviousFilterOffset(){let e=0,t=0,r=this._filterStackIndex;for(;r>0;){r--;const i=this._filterStack[r];if(!i.skip){e=i.bounds.minX,t=i.bounds.minY;break}}return{x:e,y:t}}_calculateFilterArea(e,t){if(e.renderables?hE(e.renderables,t):e.filterEffect.filterArea?(t.clear(),t.addRect(e.filterEffect.filterArea),t.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,t),e.container){const i=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;i&&t.applyMatrix(i)}}_applyFiltersToTexture(e,t){const r=e.inputTexture,i=e.bounds,s=e.filters,a=e.firstEnabledIndex,l=e.lastEnabledIndex;if(this._globalFilterBindGroup.setResource(r.source.style,2),this._globalFilterBindGroup.setResource(e.backTexture.source,3),a===l)s[a].apply(this,r,e.outputRenderSurface,t);else{let c=e.inputTexture;const h=Dn.getOptimalTexture(i.width,i.height,c.source._resolution,!1);let d=h;for(let p=a;p<l;p++){const g=s[p];if(!g.enabled)continue;g.apply(this,c,d,!0);const y=c;c=d,d=y}s[l].apply(this,c,e.outputRenderSurface,t),Dn.returnTexture(h)}}_calculateFilterBounds(e,t,r,i,s){const a=this.renderer,l=e.bounds,c=e.filters;let h=1/0,d=0,p=!0,g=!1,y=!1,_=!0,S=-1,x=-1;for(let E=0;E<c.length;E++){const w=c[E];if(!w.enabled)continue;if(S===-1&&(S=E),x=E,h=Math.min(h,w.resolution==="inherit"?i:w.resolution),d+=w.padding,w.antialias==="off"?p=!1:w.antialias==="inherit"&&p&&(p=r),w.clipToViewport||(_=!1),!!!(w.compatibleRenderers&a.type)){y=!1;break}if(w.blendRequired&&!(a.backBuffer?.useBackBuffer??!0)){Ue("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),y=!1;break}y=!0,g||(g=w.blendRequired)}if(!y){e.skip=!0;return}if(_&&l.fitBounds(0,t.width/i,0,t.height/i),l.scale(h).ceil().scale(1/h).pad((d|0)*s),!l.isPositive){e.skip=!0;return}e.antialias=p,e.resolution=h,e.blendRequired=g,e.firstEnabledIndex=S,e.lastEnabledIndex=x}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let e,t=this._filterStackIndex-1;for(;t>0&&(t--,e=this._filterStack[t],!!e.skip););return e}_pushFilterData(){let e=this._filterStack[this._filterStackIndex];return e||(e=this._filterStack[this._filterStackIndex]=new FW),this._filterStackIndex++,e}}gF.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"filter"};var yF=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,_F=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,eS=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class bF extends Ys{constructor(e){const{sprite:t,...r}=e,i=new v1(t.texture),s=new zn({uFilterMatrix:{value:new Ce,type:"mat3x3<f32>"},uMaskClamp:{value:i.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),a=jr.from({vertex:{source:eS,entryPoint:"mainVertex"},fragment:{source:eS,entryPoint:"mainFragment"}}),l=mi.from({vertex:_F,fragment:yF,name:"mask-filter"});super({...r,gpuProgram:a,glProgram:l,clipToViewport:!1,resources:{filterUniforms:s,uMaskTexture:t.texture.source}}),this.sprite=t,this._textureMatrix=i}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,r,i){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,r,i)}}var UW=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;const xF=class vF{constructor(e){this._tick=()=>{this._destroyed||(this.timeout=setTimeout(this._processQueue,0))},this._processQueue=()=>{if(this._destroyed)return;const{queue:t}=this;let r=0;for(;t.length&&r<vF.uploadsPerFrame;){const i=t.shift();this.uploadQueueItem(i),r++}t.length?Zn.system.addOnce(this._tick,this,Ws.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){const t=Array.isArray(e)?e:[e];for(const r of t)r instanceof bn?this._addContainer(r):this.resolveQueueItem(r,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(const t of e.children)this._addContainer(t)}upload(e){return e&&this.add(e),new Promise(t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),Zn.system.addOnce(this._tick,this,Ws.UTILITY)):t()})}dedupeQueue(){const e=Object.create(null);let t=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];e[i.uid]||(e[i.uid]=!0,this.queue[t++]=i)}this.queue.length=t}destroy(){this._destroyed=!0,clearTimeout(this.timeout)}_resolve(){const{resolves:e}=this,t=e.slice(0);e.length=0;for(const r of t)r()}};xF.uploadsPerFrame=4;let SF=xF;class GW{constructor(){this.isBatchable=!1}reset(){this.isBatchable=!1,this.context=null,this.graphicsData&&(this.graphicsData.destroy(),this.graphicsData=null)}destroy(){this.reset()}}class zW{constructor(){this.instructions=new ty}init(){this.instructions.reset()}destroy(){this.instructions.destroy(),this.instructions=null}}const dE=class tS{constructor(e){this._renderer=e,this._managedContexts=new Br({renderer:e,type:"resource",name:"graphicsContext"})}init(e){tS.defaultOptions.bezierSmoothness=e?.bezierSmoothness??tS.defaultOptions.bezierSmoothness}getContextRenderData(e){return this.getGpuContext(e).graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=e._gpuData,r=!!t[this._renderer.uid],i=t[this._renderer.uid]||this._initContext(e);return(e.dirty||!r)&&(r&&i.reset(),i.isBatchable=!1,e.dirty=!1),i}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=new zW,r=this.getGpuContext(e);return r.graphicsData=t,t.init(),t}_initContext(e){const t=new GW;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};dE.extension={type:[q.CanvasSystem],name:"graphicsContext"};dE.defaultOptions={bezierSmoothness:.5};let EF=dE;class fE{constructor(e,t){this.state=pi.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Br({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){return!1}addRenderable(e,t){this._managedGraphics.add(e),this.renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){e.isRenderable&&this._adaptor.execute(this,e)}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null}}fE.extension={type:[q.CanvasPipes],name:"graphics"};function VW(n,e,t,r){t[r++]=(n>>16&255)/255,t[r++]=(n>>8&255)/255,t[r++]=(n&255)/255,t[r++]=e}function Tc(n,e,t){const r=(n>>24&255)/255;e[t++]=(n&255)/255*r,e[t++]=(n>>8&255)/255*r,e[t++]=(n>>16&255)/255*r,e[t++]=r}class wF{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{Gn.return(e)}),this.batches.length=0}}class pE{constructor(e,t){this.state=pi.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Br({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const t=e.context,r=!!e._gpuData,s=this.renderer.graphicsContext.updateGpuContext(t);return!!(s.isBatchable||r!==s.isBatchable)}addRenderable(e,t){const i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){const r=this._getGpuDataForRenderable(e).batches;for(let i=0;i<r.length;i++){const s=r[i];s._batcher.updateElement(s)}}execute(e){if(!e.isRenderable)return;const t=this.renderer,r=e.context;if(!t.graphicsContext.getGpuContext(r).batches.length)return;const s=r.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const a=s.resources.localUniforms.uniforms;a.uTransformMatrix=e.groupTransform,a.uRound=t._roundPixels|e._roundPixels,Tc(e.groupColorAlpha,a.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const t=this._getGpuDataForRenderable(e),i=this.renderer.graphicsContext.updateGpuContext(e.context);t.destroy(),i.isBatchable&&this._updateBatchesForRenderable(e,t)}_addToBatcher(e,t){const r=this.renderer.renderPipes.batch,i=this._getGpuDataForRenderable(e).batches;for(let s=0;s<i.length;s++){const a=i[s];r.addToBatch(a,t)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const t=new wF;return e._gpuData[this.renderer.uid]=t,this._managedGraphics.add(e),t}_updateBatchesForRenderable(e,t){const r=e.context,s=this.renderer.graphicsContext.getGpuContext(r),a=this.renderer._roundPixels|e._roundPixels;t.batches=s.batches.map(l=>{const c=Gn.get(by);return l.copyTo(c),c.renderable=e,c.roundPixels=a,c})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}pE.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"graphics"};ze.add(fE);ze.add(pE);ze.add(EF);ze.add(xy);class Bl extends qs{constructor(e){e instanceof Lr&&(e={context:e});const{context:t,roundPixels:r,...i}=e||{};super({label:"Graphics",...i}),this.renderPipeId="graphics",t?this.context=t:(this.context=this._ownedContext=new Lr,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=r??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Bl(this._context.clone()):(this._ownedContext=null,new Bl(this._context))}lineStyle(e,t,r){Ae(nt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return e&&(i.width=e),t&&(i.color=t),r&&(i.alpha=r),this.context.strokeStyle=i,this}beginFill(e,t){Ae(nt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const r={};return e!==void 0&&(r.color=e),t!==void 0&&(r.alpha=t),this.context.fillStyle=r,this}endFill(){Ae(nt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Lr.defaultStrokeStyle.width||e.color!==Lr.defaultStrokeStyle.color||e.alpha!==Lr.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Ae(nt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Ae(nt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Ae(nt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Ae(nt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Ae(nt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Ae(nt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const CF=class TF extends Ll{constructor(...e){let t=e[0]??{};t instanceof Float32Array&&(Ae(nt,"use new MeshGeometry({ positions, uvs, indices }) instead"),t={positions:t,uvs:e[1],indices:e[2]}),t={...TF.defaultOptions,...t};const r=t.positions||new Float32Array([0,0,1,0,1,1,0,1]);let i=t.uvs;i||(t.positions?i=new Float32Array(r.length):i=new Float32Array([0,0,1,0,1,1,0,1]));const s=t.indices||new Uint32Array([0,1,2,0,2,3]),a=t.shrinkBuffersToFit,l=new hi({data:r,label:"attribute-mesh-positions",shrinkToFit:a,usage:Mt.VERTEX|Mt.COPY_DST}),c=new hi({data:i,label:"attribute-mesh-uvs",shrinkToFit:a,usage:Mt.VERTEX|Mt.COPY_DST}),h=new hi({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:Mt.INDEX|Mt.COPY_DST});super({attributes:{aPosition:{buffer:l,format:"float32x2",stride:8,offset:0},aUV:{buffer:c,format:"float32x2",stride:8,offset:0}},indexBuffer:h,topology:t.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};CF.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let Ro=CF;class Ey{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const t=this.geometry.getBuffer("aUV"),r=t.data;let i=r;const s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==t._updateID)&&((!i||i.length<r.length)&&(i=this._transformedUvs=new Float32Array(r.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=t._updateID,s.multiplyUvs(r,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}class nS{destroy(){}}class mE{constructor(e,t){this.localUniforms=new zn({uTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new js({0:this.localUniforms}),this.renderer=e,this._adaptor=t,this._adaptor.init()}validateRenderable(e){const t=this._getMeshData(e),r=t.batched,i=e.batched;if(t.batched=i,r!==i)return!0;if(i){const s=e._geometry;if(s.indices.length!==t.indexSize||s.positions.length!==t.vertexSize)return t.indexSize=s.indices.length,t.vertexSize=s.positions.length,!0;const a=this._getBatchableMesh(e);return a.texture.uid!==e._texture.uid&&(a._textureMatrixUpdateId=-1),!a._batcher.checkAndUpdateTexture(a,e._texture)}return!1}addRenderable(e,t){const r=this.renderer.renderPipes.batch,i=this._getMeshData(e);if(e.didViewUpdate&&(i.indexSize=e._geometry.indices?.length,i.vertexSize=e._geometry.positions?.length),i.batched){const s=this._getBatchableMesh(e);s.setTexture(e._texture),s.geometry=e._geometry,r.addToBatch(s,t)}else r.break(t),t.add(e)}updateRenderable(e){if(e.batched){const t=this._getBatchableMesh(e);t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}execute(e){if(!e.isRenderable)return;e.state.blendMode=cc(e.groupBlendMode,e.texture._source);const t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),Tc(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){var t,r;return(t=e._gpuData)[r=this.renderer.uid]||(t[r]=new nS),e._gpuData[this.renderer.uid].meshData||this._initMeshData(e)}_initMeshData(e){return e._gpuData[this.renderer.uid].meshData={batched:e.batched,indexSize:0,vertexSize:0},e._gpuData[this.renderer.uid].meshData}_getBatchableMesh(e){var t,r;return(t=e._gpuData)[r=this.renderer.uid]||(t[r]=new nS),e._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(e)}_initBatchableMesh(e){const t=new Ey;return t.renderable=e,t.setTexture(e._texture),t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,e._gpuData[this.renderer.uid].batchableMesh=t,t}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}mE.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"mesh"};ze.add(mE);class Ac extends qs{constructor(...e){let t=e[0];t instanceof Ll&&(Ae(nt,"Mesh: use new Mesh({ geometry, shader }) instead"),t={geometry:t,shader:e[1]},e[3]&&(Ae(nt,"Mesh: drawMode argument has been removed, use geometry.topology instead"),t.geometry.topology=e[3]));const{geometry:r,shader:i,texture:s,roundPixels:a,state:l,...c}=t;super({label:"Mesh",...c}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=i??null,this.texture=s??i?.texture??we.WHITE,this.state=l??pi.for2d(),this._geometry=r,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=a??!1}get material(){return Ae(nt,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){this._geometry!==e&&(this._geometry?.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=we.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof Ro?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:t,y:r}=e;if(!this.bounds.containsPoint(t,r))return!1;const i=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const a=this.geometry.getIndex().data,l=a.length;for(let c=0;c+2<l;c+=s){const h=a[c]*2,d=a[c+1]*2,p=a[c+2]*2;if(Jv(t,r,i[h],i[h+1],i[d],i[d+1],i[p],i[p+1]))return!0}}else{const a=i.length/2;for(let l=0;l+2<a;l+=s){const c=l*2,h=(l+1)*2,d=(l+2)*2;if(Jv(t,r,i[c],i[c+1],i[h],i[h+1],i[d],i[d+1]))return!0}}return!1}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}class Od extends vs{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});const{animationSpeed:r=1,autoPlay:i=!1,autoUpdate:s=!0,loop:a=!0,onComplete:l=null,onFrameChange:c=null,onLoop:h=null,textures:d,updateAnchor:p=!1,...g}=t,[y]=d;super({...g,texture:y instanceof we?y:y.texture}),this._textures=null,this._durations=null,this._autoUpdate=s,this._isConnectedToTicker=!1,this.animationSpeed=r,this.loop=a,this.updateAnchor=p,this.onComplete=l,this.onFrameChange=c,this.onLoop=h,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=d,i&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Zn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Zn.shared.add(this.update,this,Ws.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=e.deltaTime,r=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=r/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this._updateTexture())}_updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e=!1){if(typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._textures.forEach(i=>{this.texture!==i&&i.destroy(r)})}this._textures=[],this._durations=null,this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(we.from(e[r]));return new Od(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(we.from(e[r]));return new Od(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof we)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Zn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Zn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class gE{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new Ce,this.observer=t,this.position=new gn(this,0,0),this.scale=new gn(this,1,1),this.pivot=new gn(this,0,0),this.skew=new gn(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}let Eu;function MP(n){const e=je.get().createCanvas(6,1),t=e.getContext("2d");return t.fillStyle=n,t.fillRect(0,0,6,1),e}function yE(){if(Eu!==void 0)return Eu;try{const n=MP("#ff00ff"),e=MP("#ffff00"),r=je.get().createCanvas(6,1).getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(n,0,0),r.drawImage(e,2,0);const i=r.getImageData(2,0,1,1);if(!i)Eu=!1;else{const s=i.data;Eu=s[0]===255&&s[1]===0&&s[2]===0}}catch{Eu=!1}return Eu}const lt={canvas:null,convertTintToImage:!1,cacheStepsPerColorChannel:8,canUseMultiply:yE(),tintMethod:null,_canvasSourceCache:new WeakMap,_unpremultipliedCache:new WeakMap,getCanvasSource:n=>{const e=n.source,t=e?.resource;if(!t)return null;const r=e.alphaMode==="premultiplied-alpha",i=e.resourceWidth??e.pixelWidth,s=e.resourceHeight??e.pixelHeight,a=i!==e.pixelWidth||s!==e.pixelHeight;if(r){if((t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)&&!a)return t;const l=lt._unpremultipliedCache.get(e);if(l?.resourceId===e._resourceId)return l.canvas}if(t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Uint32Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof ArrayBuffer){const l=lt._canvasSourceCache.get(e);if(l?.resourceId===e._resourceId)return l.canvas;const c=je.get().createCanvas(e.pixelWidth,e.pixelHeight),h=c.getContext("2d"),d=h.createImageData(e.pixelWidth,e.pixelHeight),p=d.data,g=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(e.format==="bgra8unorm")for(let y=0;y<p.length&&y+3<g.length;y+=4)p[y]=g[y+2],p[y+1]=g[y+1],p[y+2]=g[y],p[y+3]=g[y+3];else p.set(g.subarray(0,p.length));return h.putImageData(d,0,0),lt._canvasSourceCache.set(e,{canvas:c,resourceId:e._resourceId}),c}if(r){const l=je.get().createCanvas(e.pixelWidth,e.pixelHeight),c=l.getContext("2d",{willReadFrequently:!0});l.width=e.pixelWidth,l.height=e.pixelHeight,c.drawImage(t,0,0);const h=c.getImageData(0,0,l.width,l.height),d=h.data;for(let p=0;p<d.length;p+=4){const g=d[p+3];if(g>0){const y=255/g;d[p]=Math.min(255,d[p]*y+.5),d[p+1]=Math.min(255,d[p+1]*y+.5),d[p+2]=Math.min(255,d[p+2]*y+.5)}}return c.putImageData(h,0,0),lt._unpremultipliedCache.set(e,{canvas:l,resourceId:e._resourceId}),l}if(a){const l=lt._canvasSourceCache.get(e);if(l?.resourceId===e._resourceId)return l.canvas;const c=je.get().createCanvas(e.pixelWidth,e.pixelHeight),h=c.getContext("2d");return c.width=e.pixelWidth,c.height=e.pixelHeight,h.drawImage(t,0,0),lt._canvasSourceCache.set(e,{canvas:c,resourceId:e._resourceId}),c}return t},getTintedCanvas:(n,e)=>{const t=n.texture,r=yt.shared.setValue(e).toHex(),i=t.tintCache||(t.tintCache={}),s=i[r],a=t.source._resourceId;if(s?.tintId===a)return s;const l=s&&"getContext"in s?s:je.get().createCanvas();if(lt.tintMethod(t,e,l),l.tintId=a,lt.convertTintToImage&&l.toDataURL!==void 0){const c=je.get().createImage();c.src=l.toDataURL(),c.tintId=a,i[r]=c}else i[r]=l;return i[r]},getTintedPattern:(n,e)=>{const t=yt.shared.setValue(e).toHex(),r=n.patternCache||(n.patternCache={}),i=n.source._resourceId;let s=r[t];return s?.tintId===i||(lt.canvas||(lt.canvas=je.get().createCanvas()),lt.tintMethod(n,e,lt.canvas),s=lt.canvas.getContext("2d").createPattern(lt.canvas,"repeat"),s.tintId=i,r[t]=s),s},applyPatternTransform:(n,e,t=!0)=>{if(!e)return;const r=n;if(!r.setTransform)return;const i=globalThis.DOMMatrix;if(!i)return;const s=new i([e.a,e.b,e.c,e.d,e.tx,e.ty]);r.setTransform(t?s.inverse():s)},tintWithMultiply:(n,e,t)=>{const r=t.getContext("2d"),i=n.frame.clone(),s=n.source._resolution??n.source.resolution??1,a=n.rotate;i.x*=s,i.y*=s,i.width*=s,i.height*=s;const l=Xe.isVertical(a),c=l?i.height:i.width,h=l?i.width:i.height;t.width=Math.ceil(c),t.height=Math.ceil(h),r.save(),r.fillStyle=yt.shared.setValue(e).toHex(),r.fillRect(0,0,c,h),r.globalCompositeOperation="multiply";const d=lt.getCanvasSource(n);if(!d){r.restore();return}a&&lt._applyInverseRotation(r,a,i.width,i.height),r.drawImage(d,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(d,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:(n,e,t)=>{const r=t.getContext("2d"),i=n.frame.clone(),s=n.source._resolution??n.source.resolution??1,a=n.rotate;i.x*=s,i.y*=s,i.width*=s,i.height*=s;const l=Xe.isVertical(a),c=l?i.height:i.width,h=l?i.width:i.height;t.width=Math.ceil(c),t.height=Math.ceil(h),r.save(),r.globalCompositeOperation="copy",r.fillStyle=yt.shared.setValue(e).toHex(),r.fillRect(0,0,c,h),r.globalCompositeOperation="destination-atop";const d=lt.getCanvasSource(n);if(!d){r.restore();return}a&&lt._applyInverseRotation(r,a,i.width,i.height),r.drawImage(d,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:(n,e,t)=>{const r=t.getContext("2d"),i=n.frame.clone(),s=n.source._resolution??n.source.resolution??1,a=n.rotate;i.x*=s,i.y*=s,i.width*=s,i.height*=s;const l=Xe.isVertical(a),c=l?i.height:i.width,h=l?i.width:i.height;t.width=Math.ceil(c),t.height=Math.ceil(h),r.save(),r.globalCompositeOperation="copy";const d=lt.getCanvasSource(n);if(!d){r.restore();return}a&&lt._applyInverseRotation(r,a,i.width,i.height),r.drawImage(d,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore();const p=e>>16&255,g=e>>8&255,y=e&255,_=r.getImageData(0,0,c,h),S=_.data;for(let x=0;x<S.length;x+=4)S[x]=S[x]*p/255,S[x+1]=S[x+1]*g/255,S[x+2]=S[x+2]*y/255;r.putImageData(_,0,0)},_applyInverseRotation:(n,e,t,r)=>{const i=Xe.inv(e),s=Xe.uX(i),a=Xe.uY(i),l=Xe.vX(i),c=Xe.vY(i),h=-Math.min(0,s*t,l*r,s*t+l*r),d=-Math.min(0,a*t,c*r,a*t+c*r);n.transform(s,a,l,c,h,d)}};lt.tintMethod=lt.canUseMultiply?lt.tintWithMultiply:lt.tintWithPerPixel;const im=new Ce,Hh=new Ce,Ps=[new Bt,new Bt,new Bt,new Bt];class _E{constructor(e){this._renderer=e}validateRenderable(e){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){const t=this._renderer,r=t.canvasContext,i=r.activeContext;i.save(),r.setBlendMode(e.groupBlendMode);const s=t.globalUniforms.globalUniformData?.worldColor??4294967295,a=e.groupColorAlpha,l=(s>>>24&255)/255,c=(a>>>24&255)/255,h=t.filter?.alphaMultiplier??1,d=l*c*h;if(d<=0){i.restore();return}i.globalAlpha=d;const p=s&16777215,g=a&16777215,y=Hs(Ta(g,p)),_=e.texture,S=lt.getTintedPattern(_,y),x=e.width,E=e.height,w=e.groupTransform,C=_.source._resolution??_.source.resolution??1;Hh.copyFrom(e._tileTransform.matrix),e.applyAnchorToTexture||Hh.translate(-e.anchor.x*x,-e.anchor.y*E),Hh.scale(1/C,1/C),im.identity(),im.prepend(Hh),im.prepend(w);const A=t._roundPixels|e._roundPixels;r.setContextTransform(im,A===1),i.fillStyle=S;const P=e.anchor.x*-x,M=e.anchor.y*-E;Ps[0].set(P,M),Ps[1].set(P+x,M),Ps[2].set(P+x,M+E),Ps[3].set(P,M+E);for(let I=0;I<4;I++)Hh.applyInverse(Ps[I],Ps[I]);i.beginPath(),i.moveTo(Ps[0].x,Ps[0].y);for(let I=1;I<4;I++)i.lineTo(Ps[I].x,Ps[I].y);i.closePath(),i.fill(),i.restore()}destroy(){this._renderer=null}}_E.extension={type:[q.CanvasPipes],name:"tilingSprite"};const Ju={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},AF={...Ju,vertex:{...Ju.vertex,header:Ju.vertex.header.replace("group(1)","group(2)")}},wy={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},MF={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},RF={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let Q0,J0;class PF extends Ii{constructor(){Q0??(Q0=vc({name:"tiling-sprite-shader",bits:[Ju,MF,Ec]})),J0??(J0=Sc({name:"tiling-sprite-shader",bits:[wy,RF,wc]}));const e=new zn({uMapCoord:{value:new Ce,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Ce,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:J0,gpuProgram:Q0,resources:{localUniforms:new zn({uTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:we.EMPTY.source,uSampler:we.EMPTY.source.style}})}updateUniforms(e,t,r,i,s,a){const l=this.resources.tilingUniforms,c=a.width,h=a.height,d=a.textureMatrix,p=l.uniforms.uTextureTransform;p.set(r.a*c/e,r.b*c/t,r.c*h/e,r.d*h/t,r.tx/e,r.ty/t),p.invert(),l.uniforms.uMapCoord=d.mapCoord,l.uniforms.uClampFrame=d.uClampFrame,l.uniforms.uClampOffset=d.uClampOffset,l.uniforms.uTextureTransform=p,l.uniforms.uSizeAnchor[0]=e,l.uniforms.uSizeAnchor[1]=t,l.uniforms.uSizeAnchor[2]=i,l.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}class BF extends Ro{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function DF(n,e){const t=n.anchor.x,r=n.anchor.y;e[0]=-t*n.width,e[1]=-r*n.height,e[2]=(1-t)*n.width,e[3]=-r*n.height,e[4]=(1-t)*n.width,e[5]=(1-r)*n.height,e[6]=-t*n.width,e[7]=(1-r)*n.height}function kF(n,e,t,r){let i=0;const s=n.length/(e||2),a=r.a,l=r.b,c=r.c,h=r.d,d=r.tx,p=r.ty;for(t*=e;i<s;){const g=n[t],y=n[t+1];n[t]=a*g+c*y+d,n[t+1]=l*g+h*y+p,t+=e,i++}}function OF(n,e){const t=n.texture,r=t.frame.width,i=t.frame.height;let s=0,a=0;n.applyAnchorToTexture&&(s=n.anchor.x,a=n.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-a,e[5]=e[7]=1-a;const l=Ce.shared;l.copyFrom(n._tileTransform.matrix),l.tx/=n.width,l.ty/=n.height,l.invert(),l.scale(n.width/r,n.height/i),kF(e,2,0,l)}const Gm=new BF;class IF{constructor(){this.canBatch=!0,this.geometry=new Ro({indices:Gm.indices.slice(),positions:Gm.positions.slice(),uvs:Gm.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class bE{constructor(e){this._state=pi.default2d,this._renderer=e,this._managedTilingSprites=new Br({renderer:e,type:"renderable",name:"tilingSprite"})}validateRenderable(e){const t=this._getTilingSpriteData(e),r=t.canBatch;this._updateCanBatch(e);const i=t.canBatch;if(i&&i===r){const{batchableMesh:s}=t;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return r!==i}addRenderable(e,t){const r=this._renderer.renderPipes.batch;this._updateCanBatch(e);const i=this._getTilingSpriteData(e),{geometry:s,canBatch:a}=i;if(a){i.batchableMesh||(i.batchableMesh=new Ey);const l=i.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),l.geometry=s,l.renderable=e,l.transform=e.groupTransform,l.setTexture(e._texture)),l.roundPixels=this._renderer._roundPixels|e._roundPixels,r.addToBatch(l,t)}else r.break(t),i.shader||(i.shader=new PF),this.updateRenderable(e),t.add(e)}execute(e){const t=this._renderer,{shader:r}=this._getTilingSpriteData(e);r.groups[0]=t.globalUniforms.bindGroup;const i=r.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=t._roundPixels|e._roundPixels,Tc(e.groupColorAlpha,i.uColor,0),this._state.blendMode=cc(e.groupBlendMode,e.texture._source),t.encoder.draw({geometry:Gm,shader:r,state:this._state})}updateRenderable(e){const t=this._getTilingSpriteData(e),{canBatch:r}=t;if(r){const{batchableMesh:i}=t;e.didViewUpdate&&this._updateBatchableMesh(e),i._batcher.updateElement(i)}else if(e.didViewUpdate){const{shader:i}=t;i.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const t=new IF;return t.renderable=e,e._gpuData[this._renderer.uid]=t,this._managedTilingSprites.add(e),t}_updateBatchableMesh(e){const t=this._getTilingSpriteData(e),{geometry:r}=t,i=e.texture.source.style;i.addressMode!=="repeat"&&(i.addressMode="repeat",i.update()),OF(e,r.uvs),DF(e,r.positions)}destroy(){this._managedTilingSprites.destroy(),this._renderer=null}_updateCanBatch(e){const t=this._getTilingSpriteData(e),r=e.texture;let i=!0;return this._renderer.type===xr.WEBGL&&(i=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=r.textureMatrix.isSimple&&(i||r.source.isPowerOfTwo),t.canBatch}}bE.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"tilingSprite"};ze.add(_E);ze.add(bE);const NF=class zm extends qs{constructor(...e){let t=e[0]||{};t instanceof we&&(t={texture:t}),e.length>1&&(Ae(nt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),t.width=e[1],t.height=e[2]),t={...zm.defaultOptions,...t};const{texture:r,anchor:i,tilePosition:s,tileScale:a,tileRotation:l,width:c,height:h,applyAnchorToTexture:d,roundPixels:p,...g}=t??{};super({label:"TilingSprite",...g}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new gn({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=d,this.texture=r,this._width=c??r.width,this._height=h??r.height,this._tileTransform=new gE({observer:{_onUpdate:()=>this.onViewUpdate()}}),i&&(this.anchor=i),this.tilePosition=s,this.tileScale=a,this.tileRotation=l,this.roundPixels=p??!1}static from(e,t={}){return typeof e=="string"?new zm({texture:At.get(e),...t}):new zm({texture:e,...t})}get uvRespectAnchor(){return Ae(nt,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Ae(nt,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=we.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){typeof e=="object"&&(t=e.height??e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,t=this._anchor,r=this._width,i=this._height;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*i,e.maxY=e.minY+i}containsPoint(e){const t=this._width,r=this._height,i=-t*this._anchor._x;let s=0;return e.x>=i&&e.x<=i+t&&(s=-r*this._anchor._y,e.y>=s&&e.y<=s+r)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null}};NF.defaultOptions={texture:we.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let LF=NF;class Cy extends qs{constructor(e,t){const{text:r,resolution:i,style:s,anchor:a,width:l,height:c,roundPixels:h,...d}=e;super({...d}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=r??"",this.style=s,this.resolution=i??null,this.allowChildren=!1,this._anchor=new gn({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,l!==void 0&&(this.width=l),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,r=this.bounds.height,i=-t*this.anchor.x;let s=0;return e.x>=i&&e.x<=i+t&&(s=-r*this.anchor.y,e.y>=s&&e.y<=s+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function Ty(n,e){let t=n[0]??{};return(typeof t=="string"||n[1])&&(Ae(nt,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:n[1]}),t}class FF{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const r=je.get().createCanvas();r.width=e,r.height=t;const i=r.getContext("2d");return{canvas:r,context:i}}getOptimalCanvasAndContext(e,t,r=1){e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),e=Ml(e),t=Ml(t);const i=(e<<17)+(t<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let s=this._canvasPool[i].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){const t=e.canvas,{width:r,height:i}=t,s=(r<<17)+(i<<1);e.context.resetTransform(),e.context.clearRect(0,0,r,i),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const Ss=new FF;Il.register(Ss);let tl=null,Sa=null;function HW(n,e){tl||(tl=je.get().createCanvas(256,128),Sa=tl.getContext("2d",{willReadFrequently:!0}),Sa.globalCompositeOperation="copy",Sa.globalAlpha=1),(tl.width<n||tl.height<e)&&(tl.width=Ml(n),tl.height=Ml(e))}function RP(n,e,t){for(let r=0,i=4*t*e;r<e;++r,i+=4)if(n[i+3]!==0)return!1;return!0}function PP(n,e,t,r,i){const s=4*e;for(let a=r,l=r*s+4*t;a<=i;++a,l+=s)if(n[l+3]!==0)return!1;return!0}function UF(...n){let e=n[0];e.canvas||(e={canvas:n[0],resolution:n[1]});const{canvas:t}=e,r=Math.min(e.resolution??1,1),i=e.width??t.width,s=e.height??t.height;let a=e.output;if(HW(i,s),!Sa)throw new TypeError("Failed to get canvas 2D context");Sa.drawImage(t,0,0,i,s,0,0,i*r,s*r);const c=Sa.getImageData(0,0,i,s).data;let h=0,d=0,p=i-1,g=s-1;for(;d<s&&RP(c,i,d);)++d;if(d===s)return Rt.EMPTY;for(;RP(c,i,g);)--g;for(;PP(c,i,h,d,g);)++h;for(;PP(c,i,p,d,g);)--p;return++p,++g,Sa.globalCompositeOperation="source-over",Sa.strokeRect(h,d,p-h,g-d),Sa.globalCompositeOperation="copy",a??(a=new Rt),a.set(h/r,d/r,(p-h)/r,(g-d)/r),a}class jW{constructor(e=0,t=0,r=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=r,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){const t=new Array(e.length);for(let r=0;r<e.length;r++){const i=e[r];t[r]=[i,this.get(i)]}return t}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=new Array(this.size);let t=this.first,r=0;for(;t!==null;)e[r++]=t.key,t=t.next;return e}setWithEvicted(e,t,r=this.resetTtl){let i=null;if(this.has(e))this.set(e,t,!0,r);else{this.max>0&&this.size===this.max&&(i={...this.first},this.evict(!0));let s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=s:this.last.next=s,this.last=s}return i}set(e,t,r=!1,i=this.resetTtl){let s=this.items[e];return r||s!==void 0?(s.value=t,r===!1&&i&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=s:this.last.next=s,this.last=s),this}values(e=this.keys()){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this.get(e[r]);return t}}function GF(n=1e3,e=0,t=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new jW(n,e,t)}function Ay(n){return!!n.tagStyles&&Object.keys(n.tagStyles).length>0}function My(n){return n.includes("<")}function XW(n,e){return n.clone().assign(e)}function xE(n,e){const t=[],r=e.tagStyles;if(!Ay(e)||!My(n))return t.push({text:n,style:e}),t;const i=[e],s=[];let a="",l=0;for(;l<n.length;){const c=n[l];if(c==="<"){const h=n.indexOf(">",l);if(h===-1){a+=c,l++;continue}const d=n.slice(l+1,h);if(d.startsWith("/")){const p=d.slice(1).trim();if(s.length>0&&s[s.length-1]===p){a.length>0&&(t.push({text:a,style:i[i.length-1]}),a=""),i.pop(),s.pop(),l=h+1;continue}else{a+=n.slice(l,h+1),l=h+1;continue}}else{const p=d.trim();if(r[p]){a.length>0&&(t.push({text:a,style:i[i.length-1]}),a="");const g=i[i.length-1],y=XW(g,r[p]);i.push(y),s.push(p),l=h+1;continue}else{a+=n.slice(l,h+1),l=h+1;continue}}}else a+=c,l++}return a.length>0&&t.push({text:a,style:i[i.length-1]}),t}function WW(n,e){return!Ay(e)||!My(n)?n:xE(n,e).map(r=>r.text).join("")}const zF=[10,13],VF=new Set(zF),HF=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],jF=new Set(HF),XF=/(\r\n|\r|\n)/,WF=/(?:\r\n|\r|\n)/;function Ry(n){return typeof n!="string"?!1:VF.has(n.charCodeAt(0))}function Ji(n,e){return typeof n!="string"?!1:jF.has(n.charCodeAt(0))}function vE(n){return n==="normal"||n==="pre-line"}function SE(n){return n==="normal"}function Fs(n){if(typeof n!="string")return"";let e=n.length-1;for(;e>=0&&Ji(n[e]);)e--;return e<n.length-1?n.slice(0,e+1):n}function EE(n){const e=[],t=[];if(typeof n!="string")return e;for(let r=0;r<n.length;r++){const i=n[r],s=n[r+1];if(Ji(i)||Ry(i)){t.length>0&&(e.push(t.join("")),t.length=0),i==="\r"&&s===`
`?(e.push(`\r
`),r++):e.push(i);continue}t.push(i)}return t.length>0&&e.push(t.join("")),e}function wE(n,e,t,r){const i=t(n),s=[];for(let a=0;a<i.length;a++){let l=i[a],c=l,h=1;for(;i[a+h];){const d=i[a+h];if(!r(c,d,n,a,e))l+=d,c=d,h++;else break}a+=h-1,s.push(l)}return s}const $W=/\r\n|\r|\n/g;function $F(n,e,t,r,i,s,a,l){const c=xE(n,e);if(SE(e.whiteSpace))for(let Z=0;Z<c.length;Z++){const te=c[Z];c[Z]={text:te.text.replace($W," "),style:te.style}}const d=[];let p=[];for(const Z of c){const te=Z.text.split(XF);for(let z=0;z<te.length;z++){const X=te[z];X===`\r
`||X==="\r"||X===`
`?(d.push(p),p=[]):X.length>0&&p.push({text:X,style:Z.style})}}(p.length>0||d.length===0)&&d.push(p);const g=t?qF(d,e,r,i,a,l):d,y=[],_=[],S=[],x=[],E=[];let w=0;const C=e._fontString,A=s(C);A.fontSize===0&&(A.fontSize=e.fontSize,A.ascent=e.fontSize);let P="",M=!!e.dropShadow;for(const Z of g){let te=0,z=A.ascent,X=A.descent,K="";for(const U of Z){const G=U.style._fontString,Q=s(G);G!==P&&(r.font=G,P=G);const L=i(U.text,U.style.letterSpacing,r);te+=L,z=Math.max(z,Q.ascent),X=Math.max(X,Q.descent),K+=U.text,!M&&U.style.dropShadow&&(M=!0)}Z.length===0&&(z=A.ascent,X=A.descent),y.push(te),_.push(z),S.push(X),E.push(K);const J=e.lineHeight||z+X;x.push(J+e.leading),w=Math.max(w,te)}const I=e._stroke?.width||0,D=(t&&e.align!=="left"&&e.align!=="justify"?Math.max(w,e.wordWrapWidth):w)+I+(e.dropShadow?e.dropShadow.distance:0);let H=0;for(let Z=0;Z<x.length;Z++)H+=x[Z];H=Math.max(H,x[0]+I);const $=H+(e.dropShadow?e.dropShadow.distance:0),ne=e.lineHeight||A.fontSize;return{width:D,height:$,lines:E,lineWidths:y,lineHeight:ne+e.leading,maxLineWidth:w,fontProperties:A,runsByLine:g,lineAscents:_,lineDescents:S,lineHeights:x,hasDropShadow:M}}function qF(n,e,t,r,i,s){const{letterSpacing:a,whiteSpace:l,wordWrapWidth:c,breakWords:h}=e,d=vE(l),p=c+a,g={};let y="";const _=(x,E)=>{const w=`${x}|${E.styleKey}`;let C=g[w];if(C===void 0){const A=E._fontString;A!==y&&(t.font=A,y=A),C=r(x,E.letterSpacing,t)+E.letterSpacing,g[w]=C}return C},S=[];for(const x of n){const E=YF(x),w=S.length,C=H=>{let $=0,ne=H;do{const{token:Z,style:te}=E[ne];$+=_(Z,te),ne++}while(ne<E.length&&E[ne].continuesFromPrevious);return $},A=H=>{const $=[];let ne=H;do $.push({token:E[ne].token,style:E[ne].style}),ne++;while(ne<E.length&&E[ne].continuesFromPrevious);return $};let P=[],M=0,I=!d,V=null;const O=()=>{V&&V.text.length>0&&P.push(V),V=null},D=()=>{if(O(),P.length>0){const H=P[P.length-1];H.text=Fs(H.text),H.text.length===0&&P.pop()}S.push(P),P=[],M=0,I=!1};for(let H=0;H<E.length;H++){const{token:$,style:ne,continuesFromPrevious:Z}=E[H],te=_($,ne);if(d){const K=Ji($),J=V?.text[V.text.length-1]??P[P.length-1]?.text.slice(-1)??"",U=J?Ji(J):!1;if(K&&U)continue}const z=!Z,X=z?C(H):te;if(X>p&&z)if(M>0&&D(),h){const K=A(H);for(let J=0;J<K.length;J++){const U=K[J].token,G=K[J].style,Q=wE(U,h,s,i);for(const L of Q){const he=_(L,G);he+M>p&&D(),!V||V.style!==G?(O(),V={text:L,style:G}):V.text+=L,M+=he}}H+=K.length-1}else{const K=A(H);O(),S.push(K.map(J=>({text:J.token,style:J.style}))),I=!1,H+=K.length-1}else if(X+M>p&&z){if(Ji($)){I=!1;continue}D(),V={text:$,style:ne},M=te}else if(Z&&!h)!V||V.style!==ne?(O(),V={text:$,style:ne}):V.text+=$,M+=te;else{const K=Ji($);if(M===0&&K&&!I)continue;!V||V.style!==ne?(O(),V={text:$,style:ne}):V.text+=$,M+=te}}if(O(),P.length>0){const H=P[P.length-1];H.text=Fs(H.text),H.text.length===0&&P.pop()}(P.length>0||S.length===w)&&S.push(P)}return S}function YF(n){const e=[];let t=!1;for(const r of n){const i=EE(r.text);let s=!0;for(const a of i){const l=Ji(a)||Ry(a),c=s&&t&&!l;e.push({token:a,style:r.style,continuesFromPrevious:c}),t=!l,s=!1}}return e}const qW={willReadFrequently:!0};function BP(n,e,t,r,i){let s=t[n];return typeof s!="number"&&(s=i(n,e,r)+e,t[n]=s),s}function KF(n,e,t,r,i,s,a){const l=t.getContext("2d",qW);l.font=e._fontString;let c=0,h="";const d=[],p=Object.create(null),{letterSpacing:g,whiteSpace:y}=e,_=vE(y),S=SE(y);let x=!_;const E=e.wordWrapWidth+g,w=EE(n);for(let A=0;A<w.length;A++){let P=w[A];if(Ry(P)){if(!S){d.push(Fs(h)),x=!_,h="",c=0;continue}P=" "}if(_){const I=Ji(P),V=Ji(h[h.length-1]);if(I&&V)continue}const M=BP(P,g,p,l,r);if(M>E)if(h!==""&&(d.push(Fs(h)),h="",c=0),i(P,e.breakWords)){const I=wE(P,e.breakWords,a,s);for(const V of I){const O=BP(V,g,p,l,r);O+c>E&&(d.push(Fs(h)),x=!1,h="",c=0),h+=V,c+=O}}else h.length>0&&(d.push(Fs(h)),h="",c=0),d.push(Fs(P)),x=!1,h="",c=0;else M+c>E&&(x=!1,d.push(Fs(h)),h="",c=0),(h.length>0||!Ji(P)||x)&&(h+=P,c+=M)}const C=Fs(h);return C.length>0&&d.push(C),d.join(`
`)}const DP={willReadFrequently:!0},Ba=class Je{static get experimentalLetterSpacingSupported(){let e=Je._experimentalLetterSpacingSupported;if(e===void 0){const t=je.get().getCanvasRenderingContext2D().prototype;e=Je._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,i,s,a,l,c,h,d){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=h,d&&(this.runsByLine=d.runsByLine,this.lineAscents=d.lineAscents,this.lineDescents=d.lineDescents,this.lineHeights=d.lineHeights,this.hasDropShadow=d.hasDropShadow)}static measureText(e=" ",t,r=Je._canvas,i=t.wordWrap){const s=`${e}-${t.styleKey}-wordWrap-${i}`;if(Je._measurementCache.has(s))return Je._measurementCache.get(s);if(Ay(t)&&My(e)){const P=$F(e,t,i,Je._context,Je._measureText,Je.measureFont,Je.canBreakChars,Je.wordWrapSplit),M=new Je(e,t,P.width,P.height,P.lines,P.lineWidths,P.lineHeight,P.maxLineWidth,P.fontProperties,{runsByLine:P.runsByLine,lineAscents:P.lineAscents,lineDescents:P.lineDescents,lineHeights:P.lineHeights,hasDropShadow:P.hasDropShadow});return Je._measurementCache.set(s,M),M}const l=t._fontString,c=Je.measureFont(l);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize,c.descent=0);const h=Je._context;h.font=l;const p=(i?Je._wordWrap(e,t,r):e).split(WF),g=new Array(p.length);let y=0;for(let P=0;P<p.length;P++){const M=Je._measureText(p[P],t.letterSpacing,h);g[P]=M,y=Math.max(y,M)}const _=t._stroke?.width??0,S=t.lineHeight||c.fontSize,x=Je._getAlignWidth(y,t,i),E=Je._adjustWidthForStyle(x,t),w=Math.max(S,c.fontSize+_)+(p.length-1)*(S+t.leading),C=Je._adjustHeightForStyle(w,t),A=new Je(e,t,E,C,p,g,S+t.leading,y,c);return Je._measurementCache.set(s,A),A}static _adjustWidthForStyle(e,t){const r=t._stroke?.width||0;let i=e+r;return t.dropShadow&&(i+=t.dropShadow.distance),i}static _adjustHeightForStyle(e,t){let r=e;return t.dropShadow&&(r+=t.dropShadow.distance),r}static _getAlignWidth(e,t,r){return r&&t.align!=="left"&&t.align!=="justify"?Math.max(e,t.wordWrapWidth):e}static _measureText(e,t,r){let i=!1;Je.experimentalLetterSpacingSupported&&(Je.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const s=r.measureText(e);let a=s.width;const l=-(s.actualBoundingBoxLeft??0);let h=(s.actualBoundingBoxRight??0)-l;if(a>0)if(i)a-=t,h-=t;else{const d=(Je.graphemeSegmenter(e).length-1)*t;a+=d,h+=d}return Math.max(a,h)}static _wordWrap(e,t,r=Je._canvas){return KF(e,t,r,Je._measureText,Je.canBreakWords,Je.canBreakChars,Je.wordWrapSplit)}static isBreakingSpace(e,t){return Ji(e)}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,i,s){return!0}static wordWrapSplit(e){return Je.graphemeSegmenter(e)}static measureFont(e){if(Je._fonts[e])return Je._fonts[e];const t=Je._context;t.font=e;const r=t.measureText(Je.METRICS_STRING+Je.BASELINE_SYMBOL),i=r.actualBoundingBoxAscent??0,s=r.actualBoundingBoxDescent??0,a={ascent:i,descent:s,fontSize:i+s};return Je._fonts[e]=a,a}static clearMetrics(e=""){e?delete Je._fonts[e]:Je._fonts={}}static get _canvas(){if(!Je.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",DP)?.measureText)return Je.__canvas=t,t;e=je.get().createCanvas()}catch{e=je.get().createCanvas()}e.width=e.height=10,Je.__canvas=e}return Je.__canvas}static get _context(){return Je.__context||(Je.__context=Je._canvas.getContext("2d",DP)),Je.__context}};Ba.METRICS_STRING="|q";Ba.BASELINE_SYMBOL="M";Ba.BASELINE_MULTIPLIER=1.4;Ba.HEIGHT_MULTIPLIER=2;Ba.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>{const t=n.segment(e),r=[];let i=0;for(const s of t)r[i++]=s.segment;return r}}return n=>[...n]})();Ba.experimentalLetterSpacing=!1;Ba._fonts={};Ba._measurementCache=GF(1e3);let ur=Ba;const YW=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function dc(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!YW.includes(i)&&(i=`"${i}"`),t[r]=i}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const kP=1e5;function _l(n,e,t,r=0,i=0,s=0){if(n.texture===we.WHITE&&!n.fill)return yt.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Cc){const a=n.fill,l=e.createPattern(a.texture.source.resource,"repeat"),c=a.transform.copyTo(Ce.shared);return c.scale(a.texture.source.pixelWidth,a.texture.source.pixelHeight),l.setTransform(c),l}else if(n.fill instanceof ki){const a=n.fill,l=a.type==="linear",c=a.textureSpace==="local";let h=1,d=1;c&&t&&(h=t.width+r,d=t.height+r);let p,g=!1;if(l){const{start:y,end:_}=a;p=e.createLinearGradient(y.x*h+i,y.y*d+s,_.x*h+i,_.y*d+s),g=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:S,outerRadius:x}=a;p=e.createRadialGradient(y.x*h+i,y.y*d+s,_*h,S.x*h+i,S.y*d+s,x*h)}if(g&&c&&t){const y=t.lineHeight/d;for(let _=0;_<t.lines.length;_++){const S=(_*t.lineHeight+r/2)/d;a.colorStops.forEach(x=>{let E=S+x.offset*y;E=Math.max(0,Math.min(1,E)),p.addColorStop(Math.floor(E*kP)/kP,yt.shared.setValue(x.color).toHex())})}}else a.colorStops.forEach(y=>{p.addColorStop(y.offset,yt.shared.setValue(y.color).toHex())});return p}}else{const a=e.createPattern(n.texture.source.resource,"repeat"),l=n.matrix.copyTo(Ce.shared);return l.scale(n.texture.source.pixelWidth,n.texture.source.pixelHeight),a.setTransform(l),a}return Ue("FillStyle not recognised",n),"red"}const OP=new Rt;class KW{getCanvasAndContext(e){const{text:t,style:r,resolution:i=1}=e,s=r._getFinalPadding(),a=ur.measureText(t||" ",r),l=Math.ceil(Math.ceil(Math.max(1,a.width)+s*2)*i),c=Math.ceil(Math.ceil(Math.max(1,a.height)+s*2)*i),h=Ss.getOptimalCanvasAndContext(l,c);this._renderTextToCanvas(r,s,i,h,a);const d=r.trim?UF({canvas:h.canvas,width:l,height:c,resolution:1,output:OP}):OP.set(0,0,l,c);return{canvasAndContext:h,frame:d}}returnCanvasAndContext(e){Ss.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,r,i,s){if(s.runsByLine&&s.runsByLine.length>0){this._renderTaggedTextToCanvas(s,e,t,r,i);return}const{canvas:a,context:l}=i,c=dc(e),h=s.lines,d=s.lineHeight,p=s.lineWidths,g=s.maxLineWidth,y=s.fontProperties,_=a.height;if(l.resetTransform(),l.scale(r,r),l.textBaseline=e.textBaseline,e._stroke?.width){const M=e._stroke;l.lineWidth=M.width,l.miterLimit=M.miterLimit,l.lineJoin=M.join,l.lineCap=M.cap}l.font=c;let S,x;const E=e.dropShadow?2:1,w=e.wordWrap?e.wordWrapWidth:g,A=(e._stroke?.width??0)/2;let P=(d-y.fontSize)/2;d-y.fontSize<0&&(P=0);for(let M=0;M<E;++M){const I=e.dropShadow&&M===0,V=I?Math.ceil(Math.max(1,_)+t*2):0,O=V*r;if(I)this._setupDropShadow(l,e,r,O);else{const D=e._gradientBounds,H=e._gradientOffset;if(D){const $={width:D.width,height:D.height,lineHeight:D.height,lines:s.lines};this._setFillAndStrokeStyles(l,e,$,t,A,H?.x??0,H?.y??0)}else H?this._setFillAndStrokeStyles(l,e,s,t,A,H.x,H.y):this._setFillAndStrokeStyles(l,e,s,t,A);l.shadowColor="black"}for(let D=0;D<h.length;D++)S=A,x=A+D*d+y.ascent+P,S+=this._getAlignmentOffset(p[D],w,e.align),e._stroke?.width&&this._drawLetterSpacing(h[D],e,i,S+t,x+t-V,!0),e._fill!==void 0&&this._drawLetterSpacing(h[D],e,i,S+t,x+t-V)}}_renderTaggedTextToCanvas(e,t,r,i,s){const{canvas:a,context:l}=s,{runsByLine:c,lineWidths:h,maxLineWidth:d,lineAscents:p,lineHeights:g,hasDropShadow:y}=e,_=a.height;l.resetTransform(),l.scale(i,i),l.textBaseline=t.textBaseline;const S=y?2:1,x=t.wordWrap?t.wordWrapWidth:d,w=(t._stroke?.width??0)/2,C=[];for(let A=0;A<c.length;A++){const P=c[A],M=[];for(const I of P){const V=dc(I.style);l.font=V,M.push({width:ur._measureText(I.text,I.style.letterSpacing,l),font:V})}C.push(M)}for(let A=0;A<S;++A){const P=y&&A===0,M=P?Math.ceil(Math.max(1,_)+r*2):0,I=M*i;P||(l.shadowColor="black");let V=w;for(let O=0;O<c.length;O++){const D=c[O],H=h[O],$=p[O],ne=g[O],Z=C[O];let te=w;te+=this._getAlignmentOffset(H,x,t.align);const z=V+$;let X=te+r;for(let K=0;K<D.length;K++){const J=D[K],{width:U,font:G}=Z[K];if(l.font=G,l.textBaseline=J.style.textBaseline,J.style._stroke?.width){const Q=J.style._stroke;if(l.lineWidth=Q.width,l.miterLimit=Q.miterLimit,l.lineJoin=Q.join,l.lineCap=Q.cap,P)if(J.style.dropShadow)this._setupDropShadow(l,J.style,i,I);else{X+=U;continue}else{const L=ur.measureFont(G),he=J.style.lineHeight||L.fontSize,fe={width:U,height:he,lineHeight:he,lines:[J.text]};l.strokeStyle=_l(Q,l,fe,r*2,X-r,V)}this._drawLetterSpacing(J.text,J.style,s,X,z+r-M,!0)}X+=U}X=te+r;for(let K=0;K<D.length;K++){const J=D[K],{width:U,font:G}=Z[K];if(l.font=G,l.textBaseline=J.style.textBaseline,J.style._fill!==void 0){if(P)if(J.style.dropShadow)this._setupDropShadow(l,J.style,i,I);else{X+=U;continue}else{const Q=ur.measureFont(G),L=J.style.lineHeight||Q.fontSize,he={width:U,height:L,lineHeight:L,lines:[J.text]};l.fillStyle=_l(J.style._fill,l,he,r*2,X-r,V)}this._drawLetterSpacing(J.text,J.style,s,X,z+r-M,!1)}X+=U}V+=ne}}}_setFillAndStrokeStyles(e,t,r,i,s,a=0,l=0){if(e.fillStyle=t._fill?_l(t._fill,e,r,i*2,a,l):null,t._stroke?.width){const c=s+i*2;e.strokeStyle=_l(t._stroke,e,r,c,a,l)}}_setupDropShadow(e,t,r,i){e.fillStyle="black",e.strokeStyle="black";const s=t.dropShadow,a=s.color,l=s.alpha;e.shadowColor=yt.shared.setValue(a).setAlpha(l).toRgbaString();const c=s.blur*r,h=s.distance*r;e.shadowBlur=c,e.shadowOffsetX=Math.cos(s.angle)*h,e.shadowOffsetY=Math.sin(s.angle)*h+i}_getAlignmentOffset(e,t,r){return r==="right"?t-e:r==="center"?(t-e)/2:0}_drawLetterSpacing(e,t,r,i,s,a=!1){const{context:l}=r,c=t.letterSpacing;let h=!1;if(ur.experimentalLetterSpacingSupported&&(ur.experimentalLetterSpacing?(l.letterSpacing=`${c}px`,l.textLetterSpacing=`${c}px`,h=!0):(l.letterSpacing="0px",l.textLetterSpacing="0px")),c===0||h){a?l.strokeText(e,i,s):l.fillText(e,i,s);return}let d=i;const p=ur.graphemeSegmenter(e);let g=l.measureText(e).width,y=0;for(let _=0;_<p.length;++_){const S=p[_];a?l.strokeText(S,d,s):l.fillText(S,d,s);let x="";for(let E=_+1;E<p.length;++E)x+=p[E];y=l.measureText(x).width,d+=g-y+c,g=y}}}const wa=new KW,CE=class hl extends hr{constructor(e={}){super(),this.uid=Zt("textStyle"),this._tick=0,this._cachedFontString=null,ZW(e),e instanceof hl&&(e=e._toObject());const i={...hl.defaultTextStyle,...e};for(const s in i){const a=s;this[a]=i[s]}this._tagStyles=e.tagStyles??void 0,this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...hl.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...hl.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Lr.defaultFillStyle,...e},()=>{this._fill=yo({...this._originalFill},Lr.defaultFillStyle)})),this._fill=yo(e===0?"black":e,Lr.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Lr.defaultStrokeStyle,...e},()=>{this._stroke=Dd({...this._originalStroke},Lr.defaultStrokeStyle)})),this._stroke=Dd(e,Lr.defaultStrokeStyle),this.update())}get tagStyles(){return this._tagStyles}set tagStyles(e){this._tagStyles!==e&&(this._tagStyles=e??void 0,this.update())}update(){this._tick++,this._cachedFontString=null,this.emit("update",this)}reset(){const e=hl.defaultTextStyle;for(const t in e)this[t]=e[t]}assign(e){for(const t in e){const r=t;this[r]=e[t]}return this}get styleKey(){return`${this.uid}-${this._tick}`}get _fontString(){return this._cachedFontString===null&&(this._cachedFontString=dc(this)),this._cachedFontString}_toObject(){return{align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill?{...this._fill}:void 0,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke?{...this._stroke}:void 0,textBaseline:this.textBaseline,trim:this.trim,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0,tagStyles:this._tagStyles?{...this._tagStyles}:void 0}}clone(){return new hl(this._toObject())}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(r),this._originalFill?.texture&&this._originalFill.texture.destroy(r),this._stroke?.texture&&this._stroke.texture.destroy(r),this._originalStroke?.texture&&this._originalStroke.texture.destroy(r)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(r,i,s)=>(r[i]===s||(r[i]=s,t?.(i,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(yt.isColorLike(e)||e instanceof ki||e instanceof Cc)}};CE.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};CE.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Vr=CE;function ZW(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Vr.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Ae(nt,"strokeThickness is now a part of stroke");const t=e.stroke;let r={};if(yt.isColorLike(t))r.color=t;else if(t instanceof ki||t instanceof Cc)r.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))r=t;else throw new Error("Invalid stroke value.");n.stroke={...r,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Ae(nt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ue("The number of fill colors must match the number of fill gradient stops.");const t=new ki({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),r=e.fillGradientStops.slice(),i=e.fill.map(s=>yt.shared.setValue(s).toNumber());r.forEach((s,a)=>{t.addColorStop(s,i[a])}),n.fill={fill:t}}}function vg(n,e){const{texture:t,bounds:r}=n,i=e._style._getFinalPadding();S1(r,e._anchor,t);const s=e._anchor._x*i*2,a=e._anchor._y*i*2;r.minX-=i-s,r.minY-=i-a,r.maxX-=i-s,r.maxY-=i-a}class rf{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}class ZF extends rf{}class TE{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new Br({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"canvasText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),r=e.styleKey;return t.currentKey!==r?!0:e._didTextUpdate}addRenderable(e,t){const r=this._getGpuText(e);if(e._didTextUpdate){const i=e._autoResolution?this._renderer.resolution:e.resolution;(r.currentKey!==e.styleKey||e._resolution!==i)&&this._updateGpuText(e),e._didTextUpdate=!1,vg(r,e)}this._renderer.renderPipes.batch.addToBatch(r,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}_updateGpuText(e){const t=this._getGpuText(e);t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,t.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new ZF;return t.currentKey="--",t.renderable=e,t.transform=e.groupTransform,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{canvasText:r}=this._renderer;r.getReferenceCount(t.currentKey)>0?r.decreaseReferenceCount(t.currentKey):t.texture&&r.returnTexture(t.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}}TE.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"text"};const QW=new Qn;function Py(n,e,t,r){const i=QW;i.minX=0,i.minY=0,i.maxX=n.width/r|0,i.maxY=n.height/r|0;const s=Dn.getOptimalTexture(i.width,i.height,r,!1);return s.source.uploadMethodId="image",s.source.resource=n,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/r,s.frame.height=t/r,s.source.emit("update",s.source),s.updateUvs(),s}class AE{constructor(e,t){this._activeTextures={},this._renderer=e,this._retainCanvasContext=t}getTexture(e,t,r,i){typeof e=="string"&&(Ae("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:r,resolution:t}),e.style instanceof Vr||(e.style=new Vr(e.style)),e.textureStyle instanceof Di||(e.textureStyle=new Di(e.textureStyle)),typeof e.text!="string"&&(e.text=e.text.toString());const{text:s,style:a,textureStyle:l}=e,c=e.resolution??this._renderer.resolution,{frame:h,canvasAndContext:d}=wa.getCanvasAndContext({text:s,style:a,resolution:c}),p=Py(d.canvas,h.width,h.height,c);if(l&&(p.source.style=l),a.trim&&(h.pad(a.padding),p.frame.copyFrom(h),p.frame.scale(1/c),p.updateUvs()),a.filters){const g=this._applyFilters(p,a.filters);return this.returnTexture(p),wa.returnCanvasAndContext(d),g}return this._renderer.texture.initSource(p._source),this._retainCanvasContext||wa.returnCanvasAndContext(d),p}returnTexture(e){const t=e.source,r=t.resource;if(this._retainCanvasContext&&r?.getContext){const i=r.getContext("2d");i&&wa.returnCanvasAndContext({canvas:r,context:i})}t.resource=null,t.uploadMethodId="unknown",t.alphaMode="no-premultiply-alpha",Dn.returnTexture(e,!0)}renderTextToCanvas(){Ae("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;const r=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[t]={texture:r,usageCount:1},r}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(this.returnTexture(t.texture),this._activeTextures[e]=null))}getReferenceCount(e){return this._activeTextures[e]?.usageCount??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,t){const r=this._renderer.renderTarget.renderTarget,i=this._renderer.filter.generateFilteredTexture({texture:e,filters:t});return this._renderer.renderTarget.bind(r,!1),i}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}}class ME extends AE{constructor(e){super(e,!0)}}ME.extension={type:[q.CanvasSystem],name:"canvasText"};class RE extends AE{constructor(e){super(e,!1)}}RE.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"canvasText"};ze.add(ME);ze.add(RE);ze.add(TE);class By extends Cy{constructor(...e){const t=Ty(e,"Text");super(t,Vr),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Di?t.textureStyle:new Di(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let r=0,i=0;if(this._style.trim){const{frame:s,canvasAndContext:a}=wa.getCanvasAndContext({text:this.text,style:this._style,resolution:1});wa.returnCanvasAndContext(a),r=s.width,i=s.height}else{const s=ur.measureText(this._text,this._style);r=s.width,i=s.height}e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*i,e.maxY=e.minY+i}}class QF extends SF{resolveQueueItem(e,t){return e instanceof bn?this.resolveContainerQueueItem(e,t):e instanceof yn||e instanceof we?t.push(e.source):e instanceof Lr&&t.push(e),null}resolveContainerQueueItem(e,t){e instanceof vs||e instanceof LF||e instanceof Ac?t.push(e.texture.source):e instanceof By?t.push(e):e instanceof Bl?t.push(e.context):e instanceof Od&&e.textures.forEach(r=>{r.source?t.push(r.source):t.push(r.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:t}=e;for(const r of t)if(r.action==="texture"){const{image:i}=r.data;return i.source}else if(r.action==="fill"){const{texture:i}=r.data.style;return i.source}return null}}class PE extends hr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Ae(nt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Ae(nt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Ae(nt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Ae(nt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Ae(nt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}const JF=class eU extends PE{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...eU.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const r=t.style.clone();t.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=we.WHITE,r._fill.fill=null),this.applyFillAsTint=t.overrideFill;const i=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const s=dc(r);t.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/i):r.fontSize=this.baseRenderedFontSize=i,this._style=r,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Di?t.textureStyle:new Di(t.textureStyle)),this.fontMetrics=ur.measureFont(s),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(e){const t=ur.graphemeSegmenter(e).filter(x=>!this._currentChars.includes(x)).filter((x,E,w)=>w.indexOf(x)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:i,context:s}=r.canvasAndContext,a=r.texture.source;const l=this._style;let c=this._currentX,h=this._currentY,d=this._currentMaxCharHeight;const p=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*p;let y=!1;const _=i.width/this.resolution,S=i.height/this.resolution;for(let x=0;x<t.length;x++){const E=t[x],w=ur.measureText(E,l,i,!1);w.lineHeight=w.height;const C=w.width*p,A=Math.ceil((l.fontStyle==="italic"?2:1)*C),P=w.height*p,M=A+g*2,I=P+g*2;if(y=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(y=!0,d=Math.ceil(Math.max(I,d))),c+M>_&&(h+=d,d=I,c=0,h+d>S)){a.update();const O=this._nextPage();i=O.canvasAndContext.canvas,s=O.canvasAndContext.context,a=O.texture.source,c=0,h=0,d=0}const V=C/p-(l.dropShadow?.distance??0)-(l._stroke?.width??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:V,kerning:{}},y){this._drawGlyph(s,w,c+g,h+g,p,l);const O=a.width*p,D=a.height*p,H=new Rt(c/O*a.width,h/D*a.height,M/O*a.width,I/D*a.height);this.chars[E].texture=new we({source:a,frame:H}),c+=Math.ceil(M)}}a.update(),this._currentX=c,this._currentY=h,this._currentMaxCharHeight=d,this._skipKerning&&this._applyKerning(t,s)}get pageTextures(){return Ae(nt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const r=this._measureCache;for(let i=0;i<e.length;i++){const s=e[i];for(let a=0;a<this._currentChars.length;a++){const l=this._currentChars[a];let c=r[s];c||(c=r[s]=t.measureText(s).width);let h=r[l];h||(h=r[l]=t.measureText(l).width);let d=t.measureText(s+l).width,p=d-(c+h);p&&(this.chars[s].kerning[l]=p),d=t.measureText(s+l).width,p=d-(c+h),p&&(this.chars[l].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Ss.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const r=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),i=new we({source:new So({resource:t.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(i.source.style=this._textureStyle);const s={canvasAndContext:t,texture:i};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,r){t.fontSize=this.baseRenderedFontSize,e.scale(r,r),e.font=dc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const i=t._stroke,s=i?.width??0;if(i&&(e.lineWidth=s,e.lineJoin=i.join,e.miterLimit=i.miterLimit,e.strokeStyle=_l(i,e)),t._fill&&(e.fillStyle=_l(t._fill,e)),t.dropShadow){const a=t.dropShadow,l=yt.shared.setValue(a.color).toArray(),c=a.blur*r,h=a.distance*r;e.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${a.alpha})`,e.shadowBlur=c,e.shadowOffsetX=Math.cos(a.angle)*h,e.shadowOffsetY=Math.sin(a.angle)*h}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,r,i,s,a){const l=t.text,c=t.fontProperties,d=(a._stroke?.width??0)*s,p=r+d/2,g=i-d/2,y=c.descent*s,_=t.lineHeight*s;let S=!1;a.stroke&&d&&(S=!0,e.strokeText(l,p,g+_-y));const{shadowBlur:x,shadowOffsetX:E,shadowOffsetY:w}=e;a._fill&&(S&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(l,p,g+_-y)),S&&(e.shadowBlur=x,e.shadowOffsetX=E,e.shadowOffsetY=w)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:r}=this.pages[e];Ss.returnCanvasAndContext(t),r.destroy(!0)}this.pages=null}};JF.defaultOptions={textureSize:512,style:new Vr,mipmap:!0};let rS=JF;function Dy(n,e,t,r){const i={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=t.baseLineOffset;let s=i.lines[0],a=null,l=!0;const c={width:0,start:0,index:0,positions:[],chars:[]},h=t.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*h,p=e.wordWrapWidth*h,g=e.lineHeight?e.lineHeight*h:t.lineHeight,y=e.wordWrap&&e.breakWords,_=E=>{const w=s.width;for(let C=0;C<c.index;C++){const A=E.positions[C];s.chars.push(E.chars[C]),s.charPositions.push(A+w)}s.width+=E.width,l=!1,c.width=0,c.index=0,c.chars.length=0},S=()=>{let E=s.chars.length-1;if(r){let w=s.chars[E];for(;w===" ";)s.width-=t.chars[w].xAdvance,w=s.chars[--E]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,i.lines.push(s),i.height+=g},x=E=>E-d>p;for(let E=0;E<n.length+1;E++){let w;const C=E===n.length;C||(w=n[E]);const A=t.chars[w]||t.chars[" "];if(/(?:\s)/.test(w)||w==="\r"||w===`
`||C){if(!l&&e.wordWrap&&x(s.width+c.width)?(S(),_(c),C||s.charPositions.push(0)):(c.start=s.width,_(c),C||s.charPositions.push(0)),w==="\r"||w===`
`)S();else if(!C){const V=A.xAdvance+(A.kerning[a]||0)+d;s.width+=V,s.spaceWidth=V,s.spacesIndex.push(s.charPositions.length),s.chars.push(w)}}else{const I=A.kerning[a]||0,V=A.xAdvance+I+d;y&&x(s.width+c.width+V)&&(_(c),S()),c.positions[c.index++]=c.width+I,c.chars.push(w),c.width+=V}a=w}return S(),e.align==="center"?JW(i):e.align==="right"?e$(i):e.align==="justify"&&t$(i),i}function JW(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],r=n.width/2-t.width/2;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=r}}function e$(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],r=n.width-t.width;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=r}}function t$(n){const e=n.width;for(let t=0;t<n.lines.length;t++){const r=n.lines[t];let i=0,s=r.spacesIndex[i++],a=0;const l=r.spacesIndex.length,h=(e-r.width)/l;for(let d=0;d<r.charPositions.length;d++)d===s&&(s=r.spacesIndex[i++],a+=h),r.charPositions[d]+=a}}function tU(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const e=[];for(let t=0,r=n.length;t<r;t++){const i=n[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);if(i[0].length===0||i[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let l=s,c=a;l<=c;l++)e.push(String.fromCharCode(l))}else e.push(...Array.from(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let sm=0;class n${constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=GF(1e3)}getFont(e,t){let r=`${t.fontFamily}-bitmap`,i=!0;if(t._fill.fill&&!t._stroke?(r+=t._fill.fill.styleKey,i=!1):(t._stroke||t.dropShadow)&&(r=`${t.styleKey}-bitmap`,i=!1),!At.has(r)){const a=Object.create(t);a._lineHeight=0;const l=new rS({style:a,overrideFill:i,overrideSize:!0,...this.defaultOptions});sm++,sm>50&&Ue("BitmapText",`You have dynamically created ${sm} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{sm--,At.remove(r)}),At.set(r,l)}const s=At.get(r);return s.ensureCharacters?.(e),s}getLayout(e,t,r=!0){const i=this.getFont(e,t),s=`${e}-${t.styleKey}-${r}`;if(this.measureCache.has(s))return this.measureCache.get(s);const a=ur.graphemeSegmenter(e),l=Dy(a,t,i,r);return this.measureCache.set(s,l),l}measureText(e,t,r=!0){return this.getLayout(e,t,r)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},Ae(nt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const r=t?.name;if(!r)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const i=t.style,s=i instanceof Vr?i:new Vr(i),a=t.dynamicFill??this._canUseTintForStyle(s),l=new rS({style:s,overrideFill:a,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),c=tU(t.chars);return l.ensureCharacters(c.join("")),At.set(`${r}-bitmap`,l),l.once("destroy",()=>At.remove(`${r}-bitmap`)),l}uninstall(e){const t=`${e}-bitmap`,r=At.get(t);r&&r.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const fc=new n$;class nU extends Bl{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class BE{constructor(e){this._renderer=e,this._managedBitmapTexts=new Br({renderer:e,type:"renderable",priority:-2,name:"bitmapText"})}validateRenderable(e){const t=this._getGpuBitmapText(e);return this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){const r=this._getGpuBitmapText(e);IP(e,r),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,r)),this._renderer.renderPipes.graphics.addRenderable(r,t),r.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){const t=this._getGpuBitmapText(e);IP(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){const{context:r}=t,i=fc.getFont(e.text,e._style);if(r.clear(),i.distanceField.type!=="none"){const E=this.getSdfShader();E&&(r.customShader||(r.customShader=E))}const s=ur.graphemeSegmenter(e.text),a=e._style;let l=i.baseLineOffset;const c=Dy(s,a,i,!0),h=a.padding,d=c.scale;let p=c.width,g=c.height+c.offsetY;a._stroke&&(p+=a._stroke.width/d,g+=a._stroke.width/d),r.translate(-e._anchor._x*p-h,-e._anchor._y*g-h).scale(d,d);const y=i.applyFillAsTint?a._fill.color:16777215;let _=i.fontMetrics.fontSize,S=i.lineHeight;a.lineHeight&&(_=a.fontSize/d,S=a.lineHeight/d);let x=(S-_)/2;x-i.baseLineOffset<0&&(x=0);for(let E=0;E<c.lines.length;E++){const w=c.lines[E];for(let C=0;C<w.charPositions.length;C++){const A=w.chars[C],P=i.chars[A];if(P?.texture){const M=P.texture;r.texture(M,y,Math.round(w.charPositions[C]+P.xOffset),Math.round(l+P.yOffset+x),M.orig.width,M.orig.height)}}l+=S}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new nU;return e._gpuData[this._renderer.uid]=t,this._updateContext(e,t),this._managedBitmapTexts.add(e),t}_updateDistanceField(e){const t=this._getGpuBitmapText(e).context,r=e._style.fontFamily,i=At.get(`${r}-bitmap`),{a:s,b:a,c:l,d:c}=e.groupTransform,h=Math.sqrt(s*s+a*a),d=Math.sqrt(l*l+c*c),p=(Math.abs(h)+Math.abs(d))/2,g=i.baseRenderedFontSize/e._style.fontSize,y=p*i.distanceField.range*(1/g);t.customShader.resources.localUniforms.uniforms.uDistance=y}destroy(){this._managedBitmapTexts.destroy(),this._renderer=null,this._managedBitmapTexts=null}}function IP(n,e){e.groupTransform=n.groupTransform,e.groupColorAlpha=n.groupColorAlpha,e.groupColor=n.groupColor,e.groupBlendMode=n.groupBlendMode,e.globalDisplayStatus=n.globalDisplayStatus,e.groupTransform=n.groupTransform,e.localDisplayStatus=n.localDisplayStatus,e.groupAlpha=n.groupAlpha,e._roundPixels=n._roundPixels}class DE extends BE{getSdfShader(){return null}}DE.extension={type:[q.CanvasPipes],name:"bitmapText"};const rU={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, vColor, localUniforms.uDistance));
        `}},iU={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},sU={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},aU={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let ex,tx;class oU extends Ii{constructor(e){const t=new zn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});ex??(ex=vc({name:"sdf-shader",bits:[dy,py(e),rU,sU,Ec]})),tx??(tx=Sc({name:"sdf-shader",bits:[fy,my(e),iU,aU,wc]})),super({glProgram:tx,gpuProgram:ex,resources:{localUniforms:t,batchSamplers:gy(e)}})}}class kE extends BE{getSdfShader(){return new oU(this._renderer.limits.maxBatchableTextures)}}kE.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"bitmapText"};ze.add(DE);ze.add(kE);class OE extends Cy{constructor(...e){var t;const r=Ty(e,"BitmapText");r.style??(r.style=r.style||{}),(t=r.style).fill??(t.fill=16777215),super(r,Vr),this.renderPipeId="bitmapText"}_onTouch(e){this._gcLastUsed=e;for(const t in this._gpuData)this._gpuData[t]?._onTouch(e)}updateBounds(){const e=this._bounds,t=this._anchor,r=fc.measureText(this.text,this._style),i=r.scale,s=r.offsetY*i;let a=r.width*i,l=r.height*i;const c=this._style._stroke;c&&(a+=c.width,l+=c.width),e.minX=-t._x*a,e.maxX=e.minX+a,e.minY=-t._y*(l+s),e.maxY=e.minY+l}set resolution(e){e!==null&&Ue("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function lU(n){const e=n._stroke,t=n._fill,s=[`div { ${[`color: ${yt.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa()}`,`font-size: ${n.fontSize}px`,`font-family: ${n.fontFamily}`,`font-weight: ${n.fontWeight}`,`font-style: ${n.fontStyle}`,`font-variant: ${n.fontVariant}`,`letter-spacing: ${n.letterSpacing}px`,`text-align: ${n.align}`,`padding: ${n.padding}px`,`white-space: ${n.whiteSpace==="pre"&&n.wordWrap?"pre-wrap":n.whiteSpace}`,...n.lineHeight?[`line-height: ${n.lineHeight}px`]:[],...n.wordWrap?[`word-break: ${n.breakWords?"break-all":"normal"}`,`max-width: ${n.wordWrapWidth}px`]:[],...e?[uU(e)]:[],...n.dropShadow?[iS(n.dropShadow)]:[],...n.cssOverrides].join(";")} }`];return r$(n.tagStyles,s),s.join(" ")}function iS(n){const e={...n},t=yt.shared.setValue(e.color).setAlpha(e.alpha??1).toHexa(),r=Math.round(Math.cos(e.angle)*e.distance),i=Math.round(Math.sin(e.angle)*e.distance),s=`${r}px ${i}px`;return e.blur>0?`text-shadow: ${s} ${e.blur}px ${t}`:`text-shadow: ${s} ${t}`}function uU(n){const e=yt.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();return[`-webkit-text-stroke-width: ${n.width}px`,`-webkit-text-stroke-color: ${e}`,`text-stroke-width: ${n.width}px`,`text-stroke-color: ${e}`,"paint-order: stroke"].join(";")}const NP={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},LP={fill:n=>`color: ${yt.shared.setValue(n).toHexa()}`,breakWords:n=>`word-break: ${n?"break-all":"normal"}`,stroke:uU,dropShadow:n=>n===!0?iS(Vr.defaultDropShadow):n&&typeof n=="object"?iS({...Vr.defaultDropShadow,...n}):""};function r$(n,e){for(const t in n){const r=n[t],i=[];for(const s in r)LP[s]?i.push(LP[s](r[s])):NP[s]&&i.push(NP[s].replace("{{VALUE}}",r[s]));e.push(`${t} { ${i.join(";")} }`)}}class ky extends Vr{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides=e.cssOverrides??[],this.tagStyles=e.tagStyles??{}}get tagStyles(){return this._tagStyles}set tagStyles(e){this._tagStyles!==e&&(this._tagStyles=e??{},this.update())}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new ky({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=lU(this)),this._cssStyle}addOverride(...e){const t=e.filter(r=>!this.cssOverrides.includes(r));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){const t=e.filter(r=>this.cssOverrides.includes(r));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(r=>!t.includes(r)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Ue("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Ue("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const FP="http://www.w3.org/2000/svg",UP="http://www.w3.org/1999/xhtml";class IE{constructor(){this.svgRoot=document.createElementNS(FP,"svg"),this.foreignObject=document.createElementNS(FP,"foreignObject"),this.domElement=document.createElementNS(UP,"div"),this.styleElement=document.createElementNS(UP,"style");const{foreignObject:e,svgRoot:t,styleElement:r,domElement:i}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(r),e.appendChild(i),this.image=je.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src="",this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}}let GP;function NE(n,e,t,r){r||(r=GP||(GP=new IE));const{domElement:i,styleElement:s,svgRoot:a}=r;i.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${n}</div>`,i.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(s.textContent=t),document.body.appendChild(a);let l=i.scrollWidth,c=i.scrollHeight;if(a.remove(),e.dropShadow){const{distance:d,angle:p,blur:g}=e.dropShadow,y=Math.abs(Math.round(Math.cos(p)*d)),_=Math.abs(Math.round(Math.sin(p)*d));l+=y+g,c+=_+g}const h=e.padding*2;return{width:l-h,height:c-h}}class cU extends rf{constructor(){super(...arguments),this.generatingTexture=!1,this.currentKey="--"}destroy(){this.texturePromise=null,this.generatingTexture=!1,this.currentKey="--",super.destroy()}}class LE{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new Br({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"htmlText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),r=e.styleKey;return t.currentKey!==r}addRenderable(e,t){const r=this._getGpuText(e);if(e._didTextUpdate){const i=e._autoResolution?this._renderer.resolution:e.resolution;(r.currentKey!==e.styleKey||e.resolution!==i)&&this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,vg(r,e)}this._renderer.renderPipes.batch.addToBatch(r,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}async _updateGpuText(e){e._didTextUpdate=!1;const t=this._getGpuText(e);if(t.generatingTexture)return;const r=t.texturePromise;t.texturePromise=null,t.generatingTexture=!0,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let i=this._renderer.htmlText.getTexturePromise(e);r&&(i=i.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(t.currentKey),this._renderer.htmlText.returnTexturePromise(r)})),t.texturePromise=i,t.currentKey=e.styleKey,t.texture=await i;const s=e.renderGroup||e.parentRenderGroup;s&&(s.structureDidChange=!0),t.generatingTexture=!1,vg(t,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new cU;return t.renderable=e,t.transform=e.groupTransform,t.texture=we.EMPTY,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{htmlText:r}=this._renderer;r.getReferenceCount(t.currentKey)===null?r.returnTexturePromise(t.texturePromise):r.decreaseReferenceCount(t.currentKey)}destroy(){this._managedTexts.destroy(),this._renderer=null}}LE.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"htmlText"};function FE(){const{userAgent:n}=je.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(n)}function hU(n,e){const t=e.fontFamily,r=[],i={},s=/font-family:([^;"\s]+)/g,a=n.match(s);function l(c){i[c]||(r.push(c),i[c]=!0)}if(Array.isArray(t))for(let c=0;c<t.length;c++)l(t[c]);else l(t);a&&a.forEach(c=>{const h=c.split(":")[1].trim();l(h)});for(const c in e.tagStyles){const h=e.tagStyles[c].fontFamily;l(h)}return r}async function dU(n){const t=await(await je.get().fetch(n)).blob(),r=new FileReader;return await new Promise((s,a)=>{r.onloadend=()=>s(r.result),r.onerror=a,r.readAsDataURL(t)})}async function fU(n,e){const t=await dU(e);return`@font-face {
        font-family: "${n.fontFamily}";
        font-weight: ${n.fontWeight};
        font-style: ${n.fontStyle};
        src: url('${t}');
    }`}const Vm=new Map;async function pU(n){const e=n.filter(t=>At.has(`${t}-and-url`)).map(t=>{if(!Vm.has(t)){const{entries:r}=At.get(`${t}-and-url`),i=[];r.forEach(s=>{const a=s.url,c=s.faces.map(h=>({weight:h.weight,style:h.style}));i.push(...c.map(h=>fU({fontWeight:h.weight,fontStyle:h.style,fontFamily:t},a)))}),Vm.set(t,Promise.all(i).then(s=>s.join(`
`)))}return Vm.get(t)});return(await Promise.all(e)).join(`
`)}function mU(n,e,t,r,i){const{domElement:s,styleElement:a,svgRoot:l}=i;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${n}</div>`,s.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),a.textContent=r;const{width:c,height:h}=i.image;return l.setAttribute("width",c.toString()),l.setAttribute("height",h.toString()),new XMLSerializer().serializeToString(l)}function gU(n,e){const t=Ss.getOptimalCanvasAndContext(n.width,n.height,e),{context:r}=t;return r.clearRect(0,0,n.width,n.height),r.drawImage(n,0,0),t}function yU(n,e,t){return new Promise(async r=>{t&&await new Promise(i=>setTimeout(i,100)),n.onload=()=>{r()},n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,n.crossOrigin="anonymous"})}class UE{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===xr.WEBGPU}getTexture(e){return this.getTexturePromise(e)}getManagedTexture(e){const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].promise;const r=this._buildTexturePromise(e).then(i=>(this._activeTextures[t].texture=i,i));return this._activeTextures[t]={texture:null,promise:r,usageCount:1},r}getReferenceCount(e){return this._activeTextures[e]?.usageCount??null}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t.texture):t.promise.then(r=>{t.texture=r,this._cleanUp(t.texture)}).catch(()=>{Ue("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[e]=null))}getTexturePromise(e){return this._buildTexturePromise(e)}async _buildTexturePromise(e){const{text:t,style:r,resolution:i,textureStyle:s}=e,a=Gn.get(IE),l=hU(t,r),c=await pU(l),h=NE(t,r,c,a),d=Math.ceil(Math.ceil(Math.max(1,h.width)+r.padding*2)*i),p=Math.ceil(Math.ceil(Math.max(1,h.height)+r.padding*2)*i),g=a.image,y=2;g.width=(d|0)+y,g.height=(p|0)+y;const _=mU(t,r,i,c,a);await yU(g,_,FE()&&l.length>0);const S=g;let x;this._createCanvas&&(x=gU(g,i));const E=Py(x?x.canvas:S,g.width-y,g.height-y,i);return s&&(E.source.style=s),this._createCanvas&&(this._renderer.texture.initSource(E.source),Ss.returnCanvasAndContext(x)),Gn.return(a),E}returnTexturePromise(e){e.then(t=>{this._cleanUp(t)}).catch(()=>{Ue("HTMLTextSystem: Failed to clean texture")})}_cleanUp(e){Dn.returnTexture(e,!0),e.source.resource=null,e.source.uploadMethodId="unknown"}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexturePromise(this._activeTextures[e].promise);this._activeTextures=null}}UE.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"htmlText"};ze.add(UE);ze.add(LE);class _U extends Cy{constructor(...e){const t=Ty(e,"HtmlText");super(t,ky),this.renderPipeId="htmlText",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Di?t.textureStyle:new Di(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor,r=NE(this.text,this._style),{width:i,height:s}=r;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*s,e.maxY=e.minY+s}get text(){return this._text}set text(e){const t=this._sanitiseText(e.toString());super.text=t}_sanitiseText(e){return this._removeInvalidHtmlTags(e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;"))}_removeInvalidHtmlTags(e){const t=/<[^>]*?(?=<|$)/g;return e.replace(t,"")}}class bU extends QF{uploadQueueItem(e){e instanceof yn?this.uploadTextureSource(e):e instanceof By?this.uploadText(e):e instanceof _U?this.uploadHTMLText(e):e instanceof OE?this.uploadBitmapText(e):e instanceof Lr&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:t}=e;for(const r of t)if(r.action==="texture"){const{image:i}=r.data;this.uploadTextureSource(i.source)}else if(r.action==="fill"){const{texture:i}=r.data.style;this.uploadTextureSource(i.source)}return null}}class xU extends bU{destroy(){super.destroy(),clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}xU.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"prepare"};const GE=class dl{static _getPatternRepeat(e,t){const r=e&&e!=="clamp-to-edge",i=t&&t!=="clamp-to-edge";return r&&i?"repeat":r?"repeat-x":i?"repeat-y":"no-repeat"}start(e,t,r){}execute(e,t){const r=t.elements;if(!r||!r.length)return;const i=e.renderer,s=i.canvasContext,a=s.activeContext;for(let l=0;l<r.length;l++){const c=r[l];if(!c.packAsQuad)continue;const h=c,d=h.texture,p=d?lt.getCanvasSource(d):null;if(!p)continue;const g=d.source.style,y=s.smoothProperty,_=g.scaleMode!=="nearest";a[y]!==_&&(a[y]=_),s.setBlendMode(t.blendMode);const S=i.globalUniforms.globalUniformData?.worldColor??4294967295,x=h.color,E=(S>>>24&255)/255,w=(x>>>24&255)/255,C=i.filter?.alphaMultiplier??1,A=E*w*C;if(A<=0)continue;a.globalAlpha=A;const P=S&16777215,M=x&16777215,I=Hs(Ta(M,P)),V=d.frame,O=g.addressModeU??g.addressMode,D=g.addressModeV??g.addressMode,H=dl._getPatternRepeat(O,D),$=d.source._resolution??d.source.resolution??1,ne=h.renderable?.renderGroup?.isCachedAsTexture,Z=V.x*$,te=V.y*$,z=V.width*$,X=V.height*$,K=h.bounds,J=i.renderTarget.renderTarget.isRoot,U=K.minX,G=K.minY,Q=K.maxX-K.minX,L=K.maxY-K.minY,he=d.rotate,fe=d.uvs,ve=Math.min(fe.x0,fe.x1,fe.x2,fe.x3,fe.y0,fe.y1,fe.y2,fe.y3),Be=Math.max(fe.x0,fe.x1,fe.x2,fe.x3,fe.y0,fe.y1,fe.y2,fe.y3),ke=H!=="no-repeat"&&(ve<0||Be>1),rt=he&&!(!ke&&(I!==16777215||he));rt?(dl._tempPatternMatrix.copyFrom(h.transform),Xe.matrixAppendRotationInv(dl._tempPatternMatrix,he,U,G,Q,L),s.setContextTransform(dl._tempPatternMatrix,h.roundPixels===1,void 0,ne&&J)):s.setContextTransform(h.transform,h.roundPixels===1,void 0,ne&&J);const st=rt?0:U,at=rt?0:G,nn=Q,ut=L;if(ke){let Vt=p;const De=I!==16777215&&!he,ln=V.width<=d.source.width&&V.height<=d.source.height;De&&ln&&(Vt=lt.getTintedCanvas({texture:d},I));const vn=a.createPattern(Vt,H);if(!vn)continue;const Sn=nn,In=ut;if(Sn===0||In===0)continue;const Pt=1/Sn,Ht=1/In,vr=(fe.x1-fe.x0)*Pt,Nt=(fe.y1-fe.y0)*Pt,yi=(fe.x3-fe.x0)*Ht,de=(fe.y3-fe.y0)*Ht,be=fe.x0-vr*st-yi*at,Fe=fe.y0-Nt*st-de*at,et=d.source.pixelWidth,mt=d.source.pixelHeight;dl._tempPatternMatrix.set(vr*et,Nt*mt,yi*et,de*mt,be*et,Fe*mt),lt.applyPatternTransform(vn,dl._tempPatternMatrix),a.fillStyle=vn,a.fillRect(st,at,nn,ut)}else{const De=I!==16777215||he?lt.getTintedCanvas({texture:d},I):p,ln=De!==p;a.drawImage(De,ln?0:Z,ln?0:te,ln?De.width:z,ln?De.height:X,st,at,nn,ut)}}}};GE._tempPatternMatrix=new Ce;GE.extension={type:[q.CanvasPipesAdaptor],name:"batch"};let vU=GE;class zE{constructor(){this._tempState=pi.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,r){const i=e.renderer,s=this._didUploadHash[r.uid];i.shader.bind(r,s),s||(this._didUploadHash[r.uid]=!0),i.shader.updateUniformGroup(i.globalUniforms.uniformGroup),i.geometry.bind(t,r.glProgram)}execute(e,t){const r=e.renderer;this._tempState.blendMode=t.blendMode,r.state.set(this._tempState);const i=t.textures.textures;for(let s=0;s<t.textures.count;s++)r.texture.bind(i[s],s);r.geometry.draw(t.topology,t.size,t.start)}}zE.extension={type:[q.WebGLPipesAdaptor],name:"batch"};function i$(n){const e=[];let t=0;for(let r=0;r<n;r++)e[t]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:t,visibility:GPUShaderStage.FRAGMENT},t++,e[t]={sampler:{type:"filtering"},binding:t,visibility:GPUShaderStage.FRAGMENT},t++;return e}function s$(n){const e={};let t=0;for(let r=0;r<n;r++)e[`textureSource${r+1}`]=t++,e[`textureSampler${r+1}`]=t++;return e}const am=pi.for2d();class VE{start(e,t,r){const i=e.renderer,s=i.encoder,a=r.gpuProgram;this._shader=r,this._geometry=t,s.setGeometry(t,a),am.blendMode="normal",i.pipeline.getPipeline(t,a,am);const l=i.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,l,a)}execute(e,t){const r=this._shader.gpuProgram,i=e.renderer,s=i.encoder;if(!t.bindGroup){const c=t.textures;t.bindGroup=hy(c.textures,c.count,i.limits.maxBatchableTextures)}am.blendMode=t.blendMode;const a=i.bindGroup.getBindGroup(t.bindGroup,r,1),l=i.pipeline.getPipeline(this._geometry,r,am,t.topology);t.bindGroup._touch(i.gc.now,i.tick),s.setPipeline(l),s.renderPassEncoder.setBindGroup(1,a),s.renderPassEncoder.drawIndexed(t.size,1,t.start)}}VE.extension={type:[q.WebGPUPipesAdaptor],name:"batch"};const HE=class SU{constructor(e,t){this.state=pi.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=t,this._adaptor.init?.(this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new yy({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(const r in this._activeBatches)this._activeBatches[r].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let r=this._activeBatches[e.batcherName];r||(r=this._activeBatches[e.batcherName]=SU.getBatcher(e.batcherName),r.begin()),this._activeBatch=r}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);const t=this._activeBatches;for(const r in t){const i=t[r],s=i.geometry;s.indexBuffer.setDataWithSize(i.indexBuffer,i.indexSize,!0),s.buffers[0].setDataWithSize(i.attributeBuffer.float32View,i.attributeSize,!1)}}upload(e){const t=this._batchersByInstructionSet[e.uid];for(const r in t){const i=t[r],s=i.geometry;i.dirty&&(i.dirty=!1,s.buffers[0].update(i.attributeSize*4))}}execute(e){if(e.action==="startBatch"){const t=e.batcher,r=t.geometry,i=t.shader;this._adaptor.start(this,r,i)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};HE.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"batch"};HE._availableBatchers=Object.create(null);let Oy=HE;ze.handleByMap(q.Batcher,Oy._availableBatchers);ze.add(yy);function a$(n){const e=n.split(/([\n{}])/g).map(i=>i.trim()).filter(i=>i.length);let t="";return e.map(i=>{let s=t+i;return i==="{"?t+="    ":i==="}"&&(t=t.substr(0,t.length-4),s=t+i),s}).join(`
`)}const EU={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},wU={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},o$=new Qn;class l$ extends Cd{constructor(){super(),this.filters=[new bF({sprite:new vs(we.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}}class Iy{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,r){const i=this._renderer;if(i.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){const s=e.mask;s.includeInBuild=!0,s.collectRenderables(r,i,null),s.includeInBuild=!1}i.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){const t=this._renderer,r=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){const i=Gn.get(l$);if(i.inverse=e.inverse,r){e.mask.mask.measurable=!0;const s=Kd(e.mask.mask,!0,o$);e.mask.mask.measurable=!1,s.ceil();const a=t.renderTarget.renderTarget.colorTexture.source,l=Dn.getOptimalTexture(s.width,s.height,a._resolution,a.antialias);t.renderTarget.push(l,!0),t.globalUniforms.push({offset:s,worldColor:4294967295});const c=i.sprite;c.texture=l,c.worldTransform.tx=s.minX,c.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer,filterTexture:l})}else i.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){const i=this._activeMaskStage[this._activeMaskStage.length-1];r&&(t.type===xr.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:i.maskedContainer,filterEffect:i.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();const i=this._activeMaskStage.pop();r&&Dn.returnTexture(i.filterTexture),Gn.return(i.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}Iy.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"alphaMask"};class jE{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,r){this._renderer.renderPipes.batch.break(r);const i=this._colorStack;i[this._colorStackIndex]=i[this._colorStackIndex-1]&e.mask;const s=this._colorStack[this._colorStackIndex];s!==this._currentColor&&(this._currentColor=s,r.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1})),this._colorStackIndex++}pop(e,t,r){this._renderer.renderPipes.batch.break(r);const i=this._colorStack;this._colorStackIndex--;const s=i[this._colorStackIndex-1];s!==this._currentColor&&(this._currentColor=s,r.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1}))}execute(e){}destroy(){this._renderer=null,this._colorStack=null}}jE.extension={type:[q.CanvasPipes],name:"colorMask"};class XE{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,r){this._renderer.renderPipes.batch.break(r);const s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;const a=this._colorStack[this._colorStackIndex];a!==this._currentColor&&(this._currentColor=a,r.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1})),this._colorStackIndex++}pop(e,t,r){this._renderer.renderPipes.batch.break(r);const s=this._colorStack;this._colorStackIndex--;const a=s[this._colorStackIndex-1];a!==this._currentColor&&(this._currentColor=a,r.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._renderer=null,this._colorStack=null}}XE.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"colorMask"};class u${constructor(e){this.priority=0,this.pipe="scissorMask",this.mask=e,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(e,t){ry(this.mask,e,t)}addLocalBounds(e,t){iy(this.mask,e,t)}containsPoint(e,t){const r=this.mask;return t(r,e)}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}destroy(){this.reset()}}function c$(n,e,t,r,i,s){s=Math.max(0,Math.min(s,Math.min(r,i)/2)),n.moveTo(e+s,t),n.lineTo(e+r-s,t),n.quadraticCurveTo(e+r,t,e+r,t+s),n.lineTo(e+r,t+i-s),n.quadraticCurveTo(e+r,t+i,e+r-s,t+i),n.lineTo(e+s,t+i),n.quadraticCurveTo(e,t+i,e,t+i-s),n.lineTo(e,t+s),n.quadraticCurveTo(e,t,e+s,t)}function CU(n,e){switch(e.type){case"rectangle":{const t=e;n.rect(t.x,t.y,t.width,t.height);break}case"roundedRectangle":{const t=e;c$(n,t.x,t.y,t.width,t.height,t.radius);break}case"circle":{const t=e;n.moveTo(t.x+t.radius,t.y),n.arc(t.x,t.y,t.radius,0,Math.PI*2);break}case"ellipse":{const t=e;n.ellipse?(n.moveTo(t.x+t.halfWidth,t.y),n.ellipse(t.x,t.y,t.halfWidth,t.halfHeight,0,0,Math.PI*2)):(n.save(),n.translate(t.x,t.y),n.scale(t.halfWidth,t.halfHeight),n.moveTo(1,0),n.arc(0,0,1,0,Math.PI*2),n.restore());break}case"triangle":{const t=e;n.moveTo(t.x,t.y),n.lineTo(t.x2,t.y2),n.lineTo(t.x3,t.y3),n.closePath();break}default:{const t=e,r=t.points;if(!r?.length)break;n.moveTo(r[0],r[1]);for(let i=2;i<r.length;i+=2)n.lineTo(r[i],r[i+1]);t.closePath&&n.closePath();break}}}function h$(n,e){if(!e?.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!r?.shape)continue;const i=r.transform,s=i&&!i.isIdentity();s&&(n.save(),n.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)),CU(n,r.shape),s&&n.restore()}return!0}class WE{constructor(e){this._warnedMaskTypes=new Set,this._canvasMaskStack=[],this._renderer=e}push(e,t,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"stencilMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){if(e.action!=="pushMaskBegin"&&e.action!=="popMaskEnd")return;const t=this._renderer,r=t.canvasContext,i=r?.activeContext;if(!i)return;if(e.action==="popMaskEnd"){this._canvasMaskStack.pop()&&i.restore();return}e.inverse&&this._warnOnce("inverse","CanvasRenderer: inverse masks are not supported on Canvas2D; ignoring inverse flag.");const s=e.mask.mask;if(!(s instanceof Bl)){this._warnOnce("nonGraphics","CanvasRenderer: only Graphics masks are supported in Canvas2D; skipping mask."),this._canvasMaskStack.push(!1);return}const a=s,l=a.context?.instructions;if(!l?.length){this._canvasMaskStack.push(!1);return}i.save(),r.setContextTransform(a.groupTransform,(t._roundPixels|a._roundPixels)===1),i.beginPath();let c=!1,h=!1;for(let d=0;d<l.length;d++){const p=l[d],g=p.action;if(g!=="fill"&&g!=="stroke")continue;const _=p.data?.path?.shapePath;if(!_?.shapePrimitives?.length)continue;const S=_.shapePrimitives;for(let x=0;x<S.length;x++){const E=S[x];if(!E?.shape)continue;const w=E.transform,C=w&&!w.isIdentity();C&&(i.save(),i.transform(w.a,w.b,w.c,w.d,w.tx,w.ty)),CU(i,E.shape),h=h$(i,E.holes)||h,c=!0,C&&i.restore()}}if(!c){i.restore(),this._canvasMaskStack.push(!1);return}h?i.clip("evenodd"):i.clip(),this._canvasMaskStack.push(!0)}destroy(){this._renderer=null,this._warnedMaskTypes=null,this._canvasMaskStack=null}_warnOnce(e,t){this._warnedMaskTypes.has(e)||(this._warnedMaskTypes.add(e),Ue(t))}}WE.extension={type:[q.CanvasPipes],name:"stencilMask"};class $E{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,r){var i;const s=e,a=this._renderer;a.renderPipes.batch.break(r),a.renderPipes.blendMode.setBlendMode(s.mask,"none",r),r.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});const l=s.mask;l.includeInBuild=!0,this._maskHash.has(s)||this._maskHash.set(s,{instructionsStart:0,instructionsLength:0});const c=this._maskHash.get(s);c.instructionsStart=r.instructionSize,l.collectRenderables(r,a,null),l.includeInBuild=!1,a.renderPipes.batch.break(r),r.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});const h=r.instructionSize-c.instructionsStart-1;c.instructionsLength=h;const d=a.renderTarget.renderTarget.uid;(i=this._maskStackHash)[d]??(i[d]=0)}pop(e,t,r){const i=e,s=this._renderer;s.renderPipes.batch.break(r),s.renderPipes.blendMode.setBlendMode(i.mask,"none",r),r.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});const a=this._maskHash.get(e);for(let l=0;l<a.instructionsLength;l++)r.instructions[r.instructionSize++]=r.instructions[a.instructionsStart++];r.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t;const r=this._renderer,i=r,s=r.renderTarget.renderTarget.uid;let a=(t=this._maskStackHash)[s]??(t[s]=0);e.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(kn.RENDERING_MASK_ADD,a),a++,i.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?i.stencil.setStencilMode(kn.INVERSE_MASK_ACTIVE,a):i.stencil.setStencilMode(kn.MASK_ACTIVE,a),i.colorMask.setMask(15)):e.action==="popMaskBegin"?(i.colorMask.setMask(0),a!==0?i.stencil.setStencilMode(kn.RENDERING_MASK_REMOVE,a):(i.renderTarget.clear(null,ui.STENCIL),i.stencil.setStencilMode(kn.DISABLED,a)),a--):e.action==="popMaskEnd"&&(e.inverse?i.stencil.setStencilMode(kn.INVERSE_MASK_ACTIVE,a):i.stencil.setStencilMode(kn.MASK_ACTIVE,a),i.colorMask.setMask(15)),this._maskStackHash[s]=a}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}$E.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"stencilMask"};const sn="source-over";function TU(){const n=yE(),e=Object.create(null);return e.inherit=sn,e.none=sn,e.normal="source-over",e.add="lighter",e.multiply=n?"multiply":sn,e.screen=n?"screen":sn,e.overlay=n?"overlay":sn,e.darken=n?"darken":sn,e.lighten=n?"lighten":sn,e["color-dodge"]=n?"color-dodge":sn,e["color-burn"]=n?"color-burn":sn,e["hard-light"]=n?"hard-light":sn,e["soft-light"]=n?"soft-light":sn,e.difference=n?"difference":sn,e.exclusion=n?"exclusion":sn,e.saturation=n?"saturation":sn,e.color=n?"color":sn,e.luminosity=n?"luminosity":sn,e["linear-burn"]=n?"color-burn":sn,e["linear-dodge"]=n?"color-dodge":sn,e["linear-light"]=n?"hard-light":sn,e["pin-light"]=n?"hard-light":sn,e["vivid-light"]=n?"hard-light":sn,e["hard-mix"]=sn,e.negation=n?"difference":sn,e["normal-npm"]=e.normal,e["add-npm"]=e.add,e["screen-npm"]=e.screen,e.erase="destination-out",e.subtract=sn,e.divide=sn,e.min=sn,e.max=sn,e}const d$=new Ce;class qE{constructor(e){this.activeResolution=1,this.smoothProperty="imageSmoothingEnabled",this.blendModes=TU(),this._activeBlendMode="normal",this._projTransform=null,this._outerBlend=!1,this._warnedBlendModes=new Set,this._renderer=e}resolutionChange(e){this.activeResolution=e}init(){const e=this._renderer.background.alpha<1;if(this.rootContext=this._renderer.canvas.getContext("2d",{alpha:e}),this.activeContext=this.rootContext,this.activeResolution=this._renderer.resolution,!this.rootContext.imageSmoothingEnabled){const t=this.rootContext;t.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":t.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":t.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":t.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")}}setContextTransform(e,t,r,i){const s=i?Ce.IDENTITY:this._renderer.globalUniforms.globalUniformData?.worldTransformMatrix||Ce.IDENTITY;let a=d$;a.copyFrom(s),a.append(e);const l=this._projTransform,c=this.activeResolution;if(r=r||c,l){const h=Ce.shared;h.copyFrom(a),h.prepend(l),a=h}t?this.activeContext.setTransform(a.a*r,a.b*r,a.c*r,a.d*r,a.tx*c|0,a.ty*c|0):this.activeContext.setTransform(a.a*r,a.b*r,a.c*r,a.d*r,a.tx*c,a.ty*c)}clear(e,t){const r=this.activeContext,i=this._renderer;if(r.clearRect(0,0,i.width,i.height),e){const s=yt.shared.setValue(e);r.globalAlpha=t??s.alpha,r.fillStyle=s.toHex(),r.fillRect(0,0,i.width,i.height),r.globalAlpha=1}}setBlendMode(e){if(this._activeBlendMode===e)return;this._activeBlendMode=e,this._outerBlend=!1;const t=this.blendModes[e];if(!t){this._warnedBlendModes.has(e)||(console.warn(`CanvasRenderer: blend mode "${e}" is not supported in Canvas2D; falling back to "source-over".`),this._warnedBlendModes.add(e)),this.activeContext.globalCompositeOperation="source-over";return}this.activeContext.globalCompositeOperation=t}destroy(){this.rootContext=null,this.activeContext=null,this._warnedBlendModes.clear()}}qE.extension={type:[q.CanvasSystem],name:"canvasContext"};function sS(n){return typeof n.getCanvasFilterString=="function"}class f${constructor(){this.skip=!1,this.useClip=!1,this.filters=null,this.container=null,this.bounds=new Qn,this.cssFilterString=""}}class YE{constructor(e){this._filterStack=[],this._filterStackIndex=0,this._savedStates=[],this._alphaMultiplier=1,this._warnedFilterTypes=new Set,this.renderer=e}push(e){const t=this._pushFilterFrame(),r=e.filterEffect.filters;if(t.skip=!1,t.useClip=!1,t.filters=r,t.container=e.container,t.cssFilterString="",r.every(c=>!c.enabled)){t.skip=!0;return}const i=[],s=1;for(const c of r){if(!c.enabled)continue;if(!sS(c)){this._warnUnsupportedFilter(c);continue}const h=c.getCanvasFilterString();if(h===null){this._warnUnsupportedFilter(c);continue}h&&i.push(h)}if(i.length===0&&s===1){t.skip=!0;return}t.cssFilterString=i.join(" "),this._calculateFilterArea(e,t.bounds),t.useClip=!!e.filterEffect.filterArea;const a=this.renderer.canvasContext.activeContext,l=a.filter||"none";if(this._savedStates.push({filter:l,alphaMultiplier:this._alphaMultiplier}),t.useClip&&Number.isFinite(t.bounds.width)&&Number.isFinite(t.bounds.height)&&t.bounds.width>0&&t.bounds.height>0){const c=this.renderer.canvasContext.activeResolution||1;a.save(),a.setTransform(1,0,0,1,0,0),a.beginPath(),a.rect(t.bounds.x*c,t.bounds.y*c,t.bounds.width*c,t.bounds.height*c),a.clip()}else t.useClip=!1;t.cssFilterString&&(a.filter=l!=="none"?`${l} ${t.cssFilterString}`:t.cssFilterString)}pop(){const e=this._popFilterFrame();if(e.skip)return;const t=this._savedStates.pop();if(!t)return;const r=this.renderer.canvasContext.activeContext;e.useClip?r.restore():r.filter=t.filter,this._alphaMultiplier=t.alphaMultiplier}generateFilteredTexture({texture:e,filters:t}){if(!t?.length||t.every(E=>!E.enabled))return e;const r=[],i=1;for(const E of t){if(!E.enabled)continue;if(!sS(E)){this._warnUnsupportedFilter(E);continue}const w=E.getCanvasFilterString();if(w===null){this._warnUnsupportedFilter(E);continue}w&&r.push(w)}if(r.length===0&&i===1)return e;const s=lt.getCanvasSource(e);if(!s)return e;const a=e.frame,l=e.source._resolution??e.source.resolution??1,c=a.width,h=a.height,d=Ss.getOptimalCanvasAndContext(c,h,l),{canvas:p,context:g}=d;g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,p.width,p.height),r.length&&(g.filter=r.join(" "));const y=a.x*l,_=a.y*l,S=c*l,x=h*l;return g.drawImage(s,y,_,S,x,0,0,S,x),g.filter="none",g.globalAlpha=1,Py(p,c,h,l)}_calculateFilterArea(e,t){if(e.renderables?hE(e.renderables,t):e.filterEffect.filterArea?(t.clear(),t.addRect(e.filterEffect.filterArea),t.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,t),e.container){const i=(e.container.renderGroup||e.container.parentRenderGroup)?.cacheToLocalTransform;i&&t.applyMatrix(i)}}_warnUnsupportedFilter(e){const t=e?.constructor?.name||"Filter";this._warnedFilterTypes.has(t)||(this._warnedFilterTypes.add(t),console.warn(`CanvasRenderer: filter "${t}" is not supported in Canvas2D and will be skipped.`))}get alphaMultiplier(){return this._alphaMultiplier}_pushFilterFrame(){let e=this._filterStack[this._filterStackIndex];return e||(e=this._filterStack[this._filterStackIndex]=new f$),this._filterStackIndex++,e}_popFilterFrame(){return this._filterStackIndex<=0?this._filterStack[0]:(this._filterStackIndex--,this._filterStack[this._filterStackIndex])}destroy(){this._filterStack=null,this._savedStates=null,this._warnedFilterTypes=null,this._alphaMultiplier=1}}YE.extension={type:[q.CanvasSystem],name:"filter"};ze.add(YE);class KE{constructor(){this.maxTextures=16,this.maxBatchableTextures=16,this.maxUniformBindings=0}init(){}}KE.extension={type:[q.CanvasSystem],name:"limits"};class Ny{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}}Ny.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"customRender"};function Sg(n,e){const t=n.instructionSet,r=t.instructions;for(let i=0;i<t.instructionSize;i++){const s=r[i];e[s.renderPipeId].execute(s)}}class Ly{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(Gn.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){const r=e._batchableRenderGroup??(e._batchableRenderGroup=Gn.get(rf));r.renderable=e.root,r.transform=e.root.relativeGroupTransform,r.texture=e.texture,r.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.blendMode.pushBlendMode(e,e.root.groupBlendMode,t),this._renderer.renderPipes.batch.addToBatch(r,t),this._renderer.renderPipes.blendMode.popBlendMode(t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;const t=new Ce().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295,offset:{x:0,y:0}}),Sg(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Sg(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}Ly.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"renderGroup"};const p$="#808080",om=new Ce,m$=new Ce,g$=new Ce,nx=new Ce;function y$(n,e,t){n.beginPath();for(let r=0;r<t.length;r+=3){const i=t[r]*2,s=t[r+1]*2,a=t[r+2]*2;n.moveTo(e[i],e[i+1]),n.lineTo(e[s],e[s+1]),n.lineTo(e[a],e[a+1]),n.closePath()}n.fill()}function _$(n){return`#${(n&16777215).toString(16).padStart(6,"0")}`}function b$(n,e,t,r,i,s){s=Math.max(0,Math.min(s,Math.min(r,i)/2)),n.moveTo(e+s,t),n.lineTo(e+r-s,t),n.quadraticCurveTo(e+r,t,e+r,t+s),n.lineTo(e+r,t+i-s),n.quadraticCurveTo(e+r,t+i,e+r-s,t+i),n.lineTo(e+s,t+i),n.quadraticCurveTo(e,t+i,e,t+i-s),n.lineTo(e,t+s),n.quadraticCurveTo(e,t,e+s,t)}function Hm(n,e){switch(e.type){case"rectangle":{const t=e;n.rect(t.x,t.y,t.width,t.height);break}case"roundedRectangle":{const t=e;b$(n,t.x,t.y,t.width,t.height,t.radius);break}case"circle":{const t=e;n.arc(t.x,t.y,t.radius,0,Math.PI*2);break}case"ellipse":{const t=e;n.ellipse?n.ellipse(t.x,t.y,t.halfWidth,t.halfHeight,0,0,Math.PI*2):(n.save(),n.translate(t.x,t.y),n.scale(t.halfWidth,t.halfHeight),n.arc(0,0,1,0,Math.PI*2),n.restore());break}case"triangle":{const t=e;n.moveTo(t.x,t.y),n.lineTo(t.x2,t.y2),n.lineTo(t.x3,t.y3),n.closePath();break}default:{const t=e,r=t.points;if(!r?.length)break;n.moveTo(r[0],r[1]);for(let i=2;i<r.length;i+=2)n.lineTo(r[i],r[i+1]);t.closePath&&n.closePath();break}}}function x$(n,e){if(!e?.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!r?.shape)continue;const i=r.transform,s=i&&!i.isIdentity();s&&(n.save(),n.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)),Hm(n,r.shape),s&&n.restore()}return!0}function v$(n,e,t,r){const i=n.fill;if(i instanceof ki){i.buildGradient();const a=i.texture;if(a){const l=lt.getTintedPattern(a,e),c=t?nx.copyFrom(t).scale(a.source.pixelWidth,a.source.pixelHeight):nx.copyFrom(i.transform);return r&&!n.textureSpace&&c.append(r),lt.applyPatternTransform(l,c),l}}if(i instanceof Cc){const a=lt.getTintedPattern(i.texture,e);return lt.applyPatternTransform(a,i.transform),a}const s=n.texture;if(s&&s!==we.WHITE){if(!s.source.resource)return p$;const a=lt.getTintedPattern(s,e),l=t?nx.copyFrom(t).scale(s.source.pixelWidth,s.source.pixelHeight):n.matrix;return lt.applyPatternTransform(a,l),a}return _$(e)}class ZE{constructor(){this.shader=null}contextChange(e){}execute(e,t){const r=e.renderer,i=r.canvasContext,s=i.activeContext,a=t.groupTransform,l=r.globalUniforms.globalUniformData?.worldColor??4294967295,c=t.groupColorAlpha,h=(l>>>24&255)/255,d=(c>>>24&255)/255,p=r.filter?.alphaMultiplier??1,g=h*d*p;if(g<=0)return;const y=l&16777215,_=c&16777215,S=Hs(Ta(_,y)),x=r._roundPixels|t._roundPixels;s.save(),i.setContextTransform(a,x===1),i.setBlendMode(t.groupBlendMode);const E=t.context.instructions;for(let w=0;w<E.length;w++){const C=E[w];if(C.action==="texture"){const H=C.data,$=H.image,ne=$?lt.getCanvasSource($):null;if(!ne)continue;const Z=H.alpha*g;if(Z<=0)continue;const te=Ta(H.style,S);s.globalAlpha=Z;let z=ne;te!==16777215&&(z=lt.getTintedCanvas({texture:$},te));const X=$.frame,K=$.source._resolution??$.source.resolution??1;let J=X.x*K,U=X.y*K;const G=X.width*K,Q=X.height*K;z!==ne&&(J=0,U=0);const L=H.transform,he=L&&!L.isIdentity(),fe=$.rotate;he||fe?(om.copyFrom(a),he&&om.append(L),fe&&Xe.matrixAppendRotationInv(om,fe,H.dx,H.dy,H.dw,H.dh),i.setContextTransform(om,x===1)):i.setContextTransform(a,x===1),s.drawImage(z,J,U,z===ne?G:z.width,z===ne?Q:z.height,fe?0:H.dx,fe?0:H.dy,H.dw,H.dh),(he||fe)&&i.setContextTransform(a,x===1);continue}const A=C.data,P=A?.path?.shapePath;if(!P?.shapePrimitives?.length)continue;const M=A.style,I=Ta(M.color,S),V=M.alpha*g;if(V<=0)continue;const O=C.action==="stroke";if(s.globalAlpha=V,O){const H=M;s.lineWidth=H.width,s.lineCap=H.cap,s.lineJoin=H.join,s.miterLimit=H.miterLimit}const D=P.shapePrimitives;if(!O&&A.hole?.shapePath?.shapePrimitives?.length){const H=D[D.length-1];H.holes=A.hole.shapePath.shapePrimitives}for(let H=0;H<D.length;H++){const $=D[H];if(!$?.shape)continue;const ne=$.transform,Z=ne&&!ne.isIdentity(),te=M.texture&&M.texture!==we.WHITE,z=M.textureSpace==="global"?ne:null,X=te?K1(m$,M,$.shape,z):null,K=Z?g$.copyFrom(a).append(ne):a,J=v$(M,I,X,K);if(Z&&(s.save(),s.transform(ne.a,ne.b,ne.c,ne.d,ne.tx,ne.ty)),O){const U=M;if(U.alignment!==.5&&!U.pixelLine){const Q=[],L=[],he=[];if(Fl[$.shape.type]?.build($.shape,Q)){const ve=$.shape.closePath??!0;$1(Q,U,!1,ve,L,he),s.fillStyle=J,y$(s,L,he)}else s.strokeStyle=J,s.beginPath(),Hm(s,$.shape),s.stroke()}else s.strokeStyle=J,s.beginPath(),Hm(s,$.shape),s.stroke()}else s.fillStyle=J,s.beginPath(),Hm(s,$.shape),x$(s,$.holes)?s.fill("evenodd"):s.fill();Z&&s.restore()}}s.restore()}destroy(){this.shader=null}}ZE.extension={type:[q.CanvasPipesAdaptor],name:"graphics"};class Fy{constructor(e){this._renderer=e}addRenderable(e,t){const r=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,r),this._renderer.renderPipes.batch.addToBatch(r,t)}updateRenderable(e){const t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=new rf;return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,t}destroy(){this._renderer=null}}Fy.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"sprite"};const md={};ze.handle(q.BlendMode,n=>{if(!n.name)throw new Error("BlendMode extension must have a name property");md[n.name]=n.ref},n=>{delete md[n.name]});class Uy{constructor(e){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}pushBlendMode(e,t,r){this._blendModeStack.push(t),this.setBlendMode(e,t,r)}popBlendMode(e){this._blendModeStack.pop();const t=this._blendModeStack[this._activeBlendMode.length-1]??"normal";this.setBlendMode(null,t,e)}setBlendMode(e,t,r){const i=e instanceof fg;if(this._activeBlendMode===t){this._isAdvanced&&e&&!i&&this._renderableList?.push(e);return}this._isAdvanced&&this._endAdvancedBlendMode(r),this._activeBlendMode=t,e&&(this._isAdvanced=!!md[t],this._isAdvanced&&this._beginAdvancedBlendMode(e,r))}_beginAdvancedBlendMode(e,t){this._renderer.renderPipes.batch.break(t);const r=this._activeBlendMode;if(!md[r]){Ue(`Unable to assign BlendMode: '${r}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}const i=this._ensureFilterEffect(r),s=e instanceof fg,a={renderPipeId:"filter",action:"pushFilter",filterEffect:i,renderables:s?null:[e],container:s?e.root:null,canBundle:!1};this._renderableList=a.renderables,t.add(a)}_ensureFilterEffect(e){let t=this._filterHash[e];return t||(t=this._filterHash[e]=new Cd,t.filters=[new md[e]]),t}_endAdvancedBlendMode(e){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(const e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}}Uy.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"blendMode"};function Eg(n,e){e||(e=0);for(let t=e;t<n.length&&n[t];t++)n[t]=null}const S$=new bn,zP=Wu|Ad|ny;function QE(n,e=!1){AU(n);const t=n.childrenToUpdate,r=n.updateTick++;for(const i in t){const s=Number(i),a=t[i],l=a.list,c=a.index;for(let h=0;h<c;h++){const d=l[h];d.parentRenderGroup===n&&d.relativeRenderGroupDepth===s&&JE(d,r,0)}Eg(l,c),a.index=0}if(e)for(let i=0;i<n.renderGroupChildren.length;i++)QE(n.renderGroupChildren[i],e)}function AU(n){const e=n.root;let t;if(n.renderGroupParent){const r=n.renderGroupParent;n.worldTransform.appendFrom(e.relativeGroupTransform,r.worldTransform),n.worldColor=Td(e.groupColor,r.worldColor),t=e.groupAlpha*r.worldAlpha}else n.worldTransform.copyFrom(e.localTransform),n.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,n.worldAlpha=t,n.worldColorAlpha=n.worldColor+((t*255|0)<<24)}function JE(n,e,t){if(e===n.updateTick)return;n.updateTick=e,n.didChange=!1;const r=n.localTransform;n.updateLocalTransform();const i=n.parent;if(i&&!i.renderGroup?(t|=n._updateFlags,n.relativeGroupTransform.appendFrom(r,i.relativeGroupTransform),t&zP&&VP(n,i,t)):(t=n._updateFlags,n.relativeGroupTransform.copyFrom(r),t&zP&&VP(n,S$,t)),!n.renderGroup){const s=n.children,a=s.length;for(let h=0;h<a;h++)JE(s[h],e,t);const l=n.parentRenderGroup,c=n;c.renderPipeId&&!l.structureDidChange&&l.updateRenderable(c)}}function VP(n,e,t){if(t&Ad){n.groupColor=Td(n.localColor,e.groupColor);let r=n.localAlpha*e.groupAlpha;r=r<0?0:r>1?1:r,n.groupAlpha=r,n.groupColorAlpha=n.groupColor+((r*255|0)<<24)}t&ny&&(n.groupBlendMode=n.localBlendMode==="inherit"?e.groupBlendMode:n.localBlendMode),t&Wu&&(n.globalDisplayStatus=n.localDisplayStatus&e.globalDisplayStatus),n._updateFlags=0}function MU(n,e){const{list:t}=n.childrenRenderablesToUpdate;let r=!1;for(let i=0;i<n.childrenRenderablesToUpdate.index;i++){const s=t[i];if(r=e[s.renderPipeId].validateRenderable(s),r)break}return n.structureDidChange=r,r}const E$=new Ce;class e2{constructor(e){this._renderer=e}render({container:e,transform:t}){const r=e.parent,i=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;const s=this._renderer,a=E$;t&&(a.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));const l=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Sg(e.renderGroup,l),l.uniformBatch&&l.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(a),e.parent=r,e.renderGroup.renderGroupParent=i}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){if(e._parentCacheAsTextureRenderGroup=t,e.isCachedAsTexture){if(!e.textureNeedsUpdate)return;t=e}for(let r=e.renderGroupChildren.length-1;r>=0;r--)this._updateCachedRenderGroups(e.renderGroupChildren[r],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){const r=e.root.getLocalBounds(),i=this._renderer,s=e.textureOptions.resolution||i.view.resolution,a=e.textureOptions.antialias??i.view.antialias,l=e.textureOptions.scaleMode??"linear",c=e.texture;r.ceil(),e.texture&&Dn.returnTexture(e.texture,!0);const h=Dn.getOptimalTexture(r.width,r.height,s,a);h._source.style=new Di({scaleMode:l}),e.texture=h,e._textureBounds||(e._textureBounds=new Qn),e._textureBounds.copyFrom(r),c!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(Dn.returnTexture(e.texture,!0),e.texture=null)}_updateRenderGroups(e){const t=this._renderer,r=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=r,e.structureDidChange?Eg(e.childrenRenderablesToUpdate.list,0):MU(e,r),QE(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let i=0;i<e.renderGroupChildren.length;i++)this._updateRenderGroups(e.renderGroupChildren[i])}_updateRenderables(e){const{list:t,index:r}=e.childrenRenderablesToUpdate;for(let i=0;i<r;i++){const s=t[i];s.didViewUpdate&&e.updateRenderable(s)}Eg(t,r)}_buildInstructions(e,t){const r=e.root,i=e.instructionSet;i.reset();const s=t.renderPipes?t:t.batch.renderer,a=s.renderPipes;a.batch.buildStart(i),a.blendMode.buildStart(),a.colorMask.buildStart(),r.sortableChildren&&r.sortChildren(),r.collectRenderablesWithEffects(i,s,null),a.batch.buildEnd(i),a.blendMode.buildEnd(i)}}e2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"renderGroup"};const t2=class RU{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new yt(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...RU.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){yt.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&Ue("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};t2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"background",priority:0};t2.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let PU=t2;const rx={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},n2=class BU{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof bn||e instanceof we?{target:e,...t}:{...t,...e}}async image(e){const t=je.get().createImage();return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,BU.defaultImageOptions);const{format:t,quality:r}=e,i=this.canvas(e);if(i.toBlob!==void 0)return new Promise((s,a)=>{i.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>s(c.result),c.onerror=a,c.readAsDataURL(l)},rx[t],r)});if(i.toDataURL!==void 0)return i.toDataURL(rx[t],r);if(i.convertToBlob!==void 0){const s=await i.convertToBlob({type:rx[t],quality:r});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);const t=e.target,r=this._renderer;if(t instanceof we)return r.texture.generateCanvas(t);const i=r.textureGenerator.generateTexture(e),s=r.texture.generateCanvas(i);return i.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);const t=e.target,r=this._renderer,i=t instanceof we?t:r.textureGenerator.generateTexture(e),s=r.texture.getPixels(i);return t instanceof bn&&i.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof we?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);const t=this.canvas(e),r=document.createElement("a");r.download=e.filename??"image.png",r.href=t.toDataURL("image/png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}log(e){const t=e.width??200;e=this._normalizeOptions(e);const r=this.canvas(e),i=r.toDataURL();console.log(`[Pixi Texture] ${r.width}px ${r.height}px`);const s=["font-size: 1px;",`padding: ${t}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}destroy(){this._renderer=null}};n2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"extract"};n2.defaultImageOptions={format:"png",quality:1};let DU=n2;class Gy extends we{static create(e){const{dynamic:t,...r}=e;return new Gy({source:new yn(r),dynamic:t??!1})}resize(e,t,r){return this.source.resize(e,t,r),this}}const w$=new Rt,C$=new Qn,T$=[0,0,0,0];class r2{constructor(e){this._renderer=e}generateTexture(e){e instanceof bn&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});const t=e.resolution||this._renderer.resolution,r=e.antialias||this._renderer.view.antialias,i=e.target;let s=e.clearColor;s?s=Array.isArray(s)&&s.length===4?s:yt.shared.setValue(s).toArray():s=T$;const a=e.frame?.copyTo(w$)||ey(i,C$).rectangle;a.width=Math.max(a.width,1/t)|0,a.height=Math.max(a.height,1/t)|0;const l=Gy.create({...e.textureSourceOptions,width:a.width,height:a.height,resolution:t,antialias:r}),c=Ce.shared.translate(-a.x,-a.y);return this._renderer.render({container:i,transform:c,target:l,clearColor:s}),l.source.updateMipmaps(),l}destroy(){this._renderer=null}}r2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"textureGenerator"};function kU(n){let e=!1;for(const r in n)if(n[r]==null){e=!0;break}if(!e)return n;const t=Object.create(null);for(const r in n){const i=n[r];i&&(t[r]=i)}return t}function OU(n){let e=0;for(let t=0;t<n.length;t++)n[t]==null?e++:n[t-e]=n[t];return n.length-=e,n}const i2=class IU{constructor(e){this._managedResources=[],this._managedResourceHashes=[],this._managedCollections=[],this._ready=!1,this._renderer=e}init(e){e={...IU.defaultOptions,...e},this.maxUnusedTime=e.gcMaxUnusedTime,this._frequency=e.gcFrequency,this.enabled=e.gcActive,this.now=performance.now()}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>{this._ready=!0},this._frequency,!1),this._collectionsHandler=this._renderer.scheduler.repeat(()=>{for(const t of this._managedCollections){const{context:r,collection:i,type:s}=t;s==="hash"?r[i]=kU(r[i]):r[i]=OU(r[i])}},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._collectionsHandler),this._handler=0,this._collectionsHandler=0))}prerender({container:e}){this.now=performance.now(),e.renderGroup.gcTick=this._renderer.tick++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}postrender(){!this._ready||!this.enabled||(this.run(),this._ready=!1)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t,e.gcTick=t;for(const r of e.renderGroupChildren)this._updateInstructionGCTick(r,t)}addCollection(e,t,r){this._managedCollections.push({context:e,collection:t,type:r})}addResource(e,t){if(e._gcLastUsed!==-1){e._gcLastUsed=this.now,e._onTouch?.(this.now);return}const r=this._managedResources.length;e._gcData={index:r,type:t},e._gcLastUsed=this.now,e._onTouch?.(this.now),e.once("unload",this.removeResource,this),this._managedResources.push(e)}removeResource(e){const t=e._gcData;if(!t)return;const r=t.index,i=this._managedResources.length-1;if(r!==i){const s=this._managedResources[i];this._managedResources[r]=s,s._gcData.index=r}this._managedResources.length--,e._gcData=null,e._gcLastUsed=-1}addResourceHash(e,t,r,i=0){this._managedResourceHashes.push({context:e,hash:t,type:r,priority:i}),this._managedResourceHashes.sort((s,a)=>s.priority-a.priority)}run(){const e=performance.now(),t=this._managedResourceHashes;for(const i of t)this.runOnHash(i,e);let r=0;for(let i=0;i<this._managedResources.length;i++){const s=this._managedResources[i];r=this.runOnResource(s,e,r)}this._managedResources.length=r}updateRenderableGCTick(e,t){const r=e.renderGroup??e.parentRenderGroup,i=r?.instructionSet?.gcTick??-1;(r?.gcTick??0)===i&&(e._gcLastUsed=t,e._onTouch?.(t))}runOnResource(e,t,r){const i=e._gcData;return i.type==="renderable"&&this.updateRenderableGCTick(e,t),t-e._gcLastUsed<this.maxUnusedTime||!e.autoGarbageCollect?(this._managedResources[r]=e,i.index=r,r++):(e.unload(),e._gcData=null,e._gcLastUsed=-1,e.off("unload",this.removeResource,this)),r}_createHashClone(e,t){const r=Object.create(null);for(const i in e){if(i===t)break;e[i]!==null&&(r[i]=e[i])}return r}runOnHash(e,t){const{context:r,hash:i,type:s}=e,a=r[i];let l=null,c=0;for(const h in a){const d=a[h];if(d===null){c++,c===1e4&&!l&&(l=this._createHashClone(a,h));continue}if(d._gcLastUsed===-1){d._gcLastUsed=t,d._onTouch?.(t),l&&(l[h]=d);continue}if(s==="renderable"&&this.updateRenderableGCTick(d,t),!(t-d._gcLastUsed<this.maxUnusedTime)&&d.autoGarbageCollect){if(l||(c+1!==1e4?(a[h]=null,c++):l=this._createHashClone(a,h)),s==="renderable"){const g=d,y=g.renderGroup??g.parentRenderGroup;y&&(y.structureDidChange=!0)}d.unload(),d._gcData=null,d._gcLastUsed=-1}else l&&(l[h]=d)}l&&(r[i]=l)}destroy(){this.enabled=!1,this._managedResources.forEach(e=>{e.off("unload",this.removeResource,this)}),this._managedResources.length=0,this._managedResourceHashes.length=0,this._managedCollections.length=0,this._renderer=null}};i2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"gc",priority:0};i2.defaultOptions={gcActive:!0,gcMaxUnusedTime:6e4,gcFrequency:3e4};let NU=i2;class s2{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:r,worldColor:i,offset:s}){const a=this._renderer.renderTarget.renderTarget,l=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Ce,worldColor:4294967295,offset:new Bt},c={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||a.size,worldTransformMatrix:r||l.worldTransformMatrix,worldColor:i||l.worldColor,offset:s||l.offset,bindGroup:null},h=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(h);const d=h.uniforms;d.uProjectionMatrix=c.projectionMatrix,d.uResolution=c.resolution,d.uWorldTransformMatrix.copyFrom(c.worldTransformMatrix),d.uWorldTransformMatrix.tx-=c.offset.x,d.uWorldTransformMatrix.ty-=c.offset.y,Tc(c.worldColor,d.uWorldColorAlpha,0),h.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(h,!1):(p=this._bindGroupPool.pop()||new js,this._activeBindGroups.push(p),p.setResource(h,0)),c.bindGroup=p,this._currentGlobalUniformData=c}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===xr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new zn({uProjectionMatrix:{value:new Ce,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}}s2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"globalUniforms"};let A$=1;class a2{constructor(){this._tasks=[],this._offset=0}init(){Zn.system.add(this._update,this)}repeat(e,t,r=!0){const i=A$++;let s=0;return r&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:i}),i}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){const e=performance.now();for(let t=0;t<this._tasks.length;t++){const r=this._tasks[t];if(e-r.offset-r.last>=r.duration){const i=e-r.start;r.func(i),r.last=e}}}destroy(){Zn.system.remove(this._update,this),this._tasks.length=0}}a2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"scheduler",priority:0};let HP=!1;function LU(n){if(!HP){if(je.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${uc} (${n}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${uc} - ${n} - http://www.pixijs.com/`);HP=!0}}class zy{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===xr.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),LU(t)}}}zy.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"hello",priority:-2};zy.defaultOptions={hello:!1};const o2=class FU{constructor(e){this._renderer=e}init(e){e={...FU.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime}get enabled(){return Ae("8.15.0","RenderableGCSystem.enabled is deprecated, please use the GCSystem.enabled instead."),this._renderer.gc.enabled}set enabled(e){Ae("8.15.0","RenderableGCSystem.enabled is deprecated, please use the GCSystem.enabled instead."),this._renderer.gc.enabled=e}addManagedHash(e,t){Ae("8.15.0","RenderableGCSystem.addManagedHash is deprecated, please use the GCSystem.addCollection instead."),this._renderer.gc.addCollection(e,t,"hash")}addManagedArray(e,t){Ae("8.15.0","RenderableGCSystem.addManagedArray is deprecated, please use the GCSystem.addCollection instead."),this._renderer.gc.addCollection(e,t,"array")}addRenderable(e){Ae("8.15.0","RenderableGCSystem.addRenderable is deprecated, please use the GCSystem instead."),this._renderer.gc.addResource(e,"renderable")}run(){Ae("8.15.0","RenderableGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.run()}destroy(){this._renderer=null}};o2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"renderableGC",priority:0};o2.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let UU=o2;const l2=class jm{get count(){return this._renderer.tick}get checkCount(){return this._checkCount}set checkCount(e){Ae("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._checkCount=e}get maxIdle(){return this._renderer.gc.maxUnusedTime/1e3*60}set maxIdle(e){Ae("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.maxUnusedTime=e/60*1e3}get checkCountMax(){return Math.floor(this._renderer.gc._frequency/1e3)}set checkCountMax(e){Ae("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead.")}get active(){return this._renderer.gc.enabled}set active(e){Ae("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.enabled=e}constructor(e){this._renderer=e,this._checkCount=0}init(e){e.textureGCActive!==jm.defaultOptions.textureGCActive&&(this.active=e.textureGCActive),e.textureGCMaxIdle!==jm.defaultOptions.textureGCMaxIdle&&(this.maxIdle=e.textureGCMaxIdle),e.textureGCCheckCountMax!==jm.defaultOptions.textureGCCheckCountMax&&(this.checkCountMax=e.textureGCCheckCountMax)}run(){Ae("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.run()}destroy(){this._renderer=null}};l2.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"textureGC"};l2.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};let GU=l2;const zU=class VU{constructor(e={}){if(this.uid=Zt("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...VU.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new yn({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(r=>r.source)];const t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof we||e.depthStencilTexture instanceof yn?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new yn({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,r=this.resolution,i=!1){this.dirtyId++,this.colorTextures.forEach((s,a)=>{i&&a===0||s.source.resize(e,t,r)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,r)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};zU.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let wg=zU;const pl=new Map;Il.register(pl);function u2(n,e){if(!pl.has(n)){const t=new we({source:new ms({resource:n,...e})}),r=()=>{pl.get(n)===t&&pl.delete(n)};t.once("destroy",r),t.source.once("destroy",r),pl.set(n,t)}return pl.get(n)}function M$(n){return pl.has(n)}const c2=class HU{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...HU.defaultOptions,...e},e.view&&(Ae(nt,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new Rt(0,0,e.width,e.height),this.canvas=e.canvas||je.get().createCanvas(),this.antialias=!!e.antialias,this.texture=u2(this.canvas,e),this.renderTarget=new wg({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,r){this.texture.source.resize(e,t,r),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.texture.destroy()}};c2.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"view",priority:0};c2.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let jU=c2;const Vy=[PU,s2,zy,jU,e2,NU,GU,r2,DU,F1,UU,a2],h2=[Uy,Oy,Fy,Ly,Iy,$E,XE,Ny];function XU(n,e,t,r,i,s){const a=s?1:-1;return n.identity(),n.a=1/r*2,n.d=a*(1/i*2),n.tx=-1-e*n.a,n.ty=-a-t*n.d,n}function WU(n){const e=n.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}class Hy{constructor(e){this.rootViewPort=new Rt,this.viewport=new Rt,this.mipLevel=0,this.layer=0,this.onRenderTargetChange=new N1("onRenderTargetChange"),this.projectionMatrix=new Ce,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.gc.addCollection(this,"_gpuRenderTargetHash","hash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:r,frame:i,mipLevel:s,layer:a}){this._renderTargetStack.length=0,this.push(e,t,r,i,s??0,a??0),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=WU(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(e,t=!0,r,i,s=0,a=0){const l=this.getRenderTarget(e),c=this.renderTarget!==l;this.renderTarget=l,this.renderSurface=e;const h=this.getGpuRenderTarget(l);(l.pixelWidth!==h.width||l.pixelHeight!==h.height)&&(this.adaptor.resizeGpuRenderTarget(l),h.width=l.pixelWidth,h.height=l.pixelHeight);const d=l.colorTexture,p=this.viewport,g=d.arrayLayerCount||1;if((a|0)!==a&&(a|=0),a<0||a>=g)throw new Error(`[RenderTargetSystem] layer ${a} is out of bounds (arrayLayerCount=${g}).`);this.mipLevel=s|0,this.layer=a|0;const y=Math.max(d.pixelWidth>>s,1),_=Math.max(d.pixelHeight>>s,1);if(!i&&e instanceof we&&(i=e.frame),i){const S=d._resolution,x=1<<Math.max(s|0,0),E=i.x*S+.5|0,w=i.y*S+.5|0,C=i.width*S+.5|0,A=i.height*S+.5|0;let P=Math.floor(E/x),M=Math.floor(w/x),I=Math.ceil(C/x),V=Math.ceil(A/x);P=Math.min(Math.max(P,0),y-1),M=Math.min(Math.max(M,0),_-1),I=Math.min(Math.max(I,1),y-P),V=Math.min(Math.max(V,1),_-M),p.x=P,p.y=M,p.width=I,p.height=V}else p.x=0,p.y=0,p.width=y,p.height=_;return XU(this.projectionMatrix,0,0,p.width/d.resolution,p.height/d.resolution,!l.isRoot),this.adaptor.startRenderPass(l,t,r,p,s,a),c&&this.onRenderTargetChange.emit(l),l}clear(e,t=ui.ALL,r,i=this.mipLevel,s=this.layer){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,r,this.viewport,i,s))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=ui.ALL,r,i,s=0,a=0){const l=this.bind(e,t,r,i,s,a);return this._renderTargetStack.push({renderTarget:l,frame:i,mipLevel:s,layer:a}),l}pop(){this._renderTargetStack.pop();const e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame,e.mipLevel,e.layer)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,t,r,i,s){r.x<0&&(i.width+=r.x,s.x-=r.x,r.x=0),r.y<0&&(i.height+=r.y,s.y-=r.y,r.y=0);const{pixelWidth:a,pixelHeight:l}=e;return i.width=Math.min(i.width,a-r.x),i.height=Math.min(i.height,l-r.y),this.adaptor.copyToTexture(e,t,r,i,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport,0,this.layer))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return ms.test(e)&&(e=u2(e).source),e instanceof wg?t=e:e instanceof yn&&(t=new wg({colorTextures:[e]}),e.source instanceof ms&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);const r=this._gpuRenderTargetHash[t.uid];r&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(r))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}}class $U{init(e,t){this._renderer=e,this._renderTargetSystem=t}initGpuRenderTarget(e){const t=e.colorTexture,{canvas:r,context:i}=this._ensureCanvas(t);return{canvas:r,context:i,width:r.width,height:r.height}}resizeGpuRenderTarget(e){const t=e.colorTexture,{canvas:r}=this._ensureCanvas(t);r.width=e.pixelWidth,r.height=e.pixelHeight}startRenderPass(e,t,r,i){const s=this._renderTargetSystem.getGpuRenderTarget(e);this._renderer.canvasContext.activeContext=s.context,this._renderer.canvasContext.activeResolution=e.resolution,t&&this.clear(e,t,r,i)}clear(e,t,r,i){const a=this._renderTargetSystem.getGpuRenderTarget(e).context,l=i||{x:0,y:0,width:e.pixelWidth,height:e.pixelHeight};if(a.setTransform(1,0,0,1,0,0),a.clearRect(l.x,l.y,l.width,l.height),r){const c=yt.shared.setValue(r);c.alpha>0&&(a.globalAlpha=c.alpha,a.fillStyle=c.toHex(),a.fillRect(l.x,l.y,l.width,l.height),a.globalAlpha=1)}}finishRenderPass(){}copyToTexture(e,t,r,i,s){const l=this._renderTargetSystem.getGpuRenderTarget(e).canvas,c=t.source,{context:h}=this._ensureCanvas(c),d=s?.x??0,p=s?.y??0;return h.drawImage(l,r.x,r.y,i.width,i.height,d,p,i.width,i.height),c.update(),t}destroyGpuRenderTarget(e){}_ensureCanvas(e){let t=e.resource;(!t||!ms.test(t))&&(t=je.get().createCanvas(e.pixelWidth,e.pixelHeight),e.resource=t),(t.width!==e.pixelWidth||t.height!==e.pixelHeight)&&(t.width=e.pixelWidth,t.height=e.pixelHeight);const r=t.getContext("2d");return{canvas:t,context:r}}}class d2 extends Hy{constructor(e){super(e),this.adaptor=new $U,this.adaptor.init(e,this)}}d2.extension={type:[q.CanvasSystem],name:"renderTarget"};class f2{constructor(e){}init(){}initSource(e){}generateCanvas(e){const t=je.get().createCanvas(),r=t.getContext("2d"),i=lt.getCanvasSource(e);if(!i)return t;const s=e.frame,a=e.source._resolution??e.source.resolution??1,l=s.x*a,c=s.y*a,h=s.width*a,d=s.height*a;return t.width=Math.ceil(h),t.height=Math.ceil(d),r.drawImage(i,l,c,h,d,0,0,h,d),t}getPixels(e){const t=this.generateCanvas(e);return{pixels:t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t.width,t.height).data,width:t.width,height:t.height}}destroy(){}}f2.extension={type:[q.CanvasSystem],name:"texture"};const R$=[...Vy,qE,KE,f2,d2],P$=[Uy,Oy,Fy,Ly,Iy,WE,jE,Ny],B$=[vU,ZE],qU=[],YU=[],KU=[];ze.handleByNamedList(q.CanvasSystem,qU);ze.handleByNamedList(q.CanvasPipes,YU);ze.handleByNamedList(q.CanvasPipesAdaptor,KU);ze.add(...R$,...P$,...B$);class ZU extends xc{constructor(){const e={name:"canvas",type:xr.CANVAS,systems:qU,renderPipes:YU,renderPipeAdaptors:KU};super(e)}}const D$=Object.freeze(Object.defineProperty({__proto__:null,CanvasRenderer:ZU},Symbol.toStringTag,{value:"Module"}));var gd=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(gd||{});class QU{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}destroy(){this.buffer=null,this.updateID=-1,this.byteLength=-1,this.type=-1,this._lastBindBaseLocation=-1,this._lastBindCallId=-1}}class p2{constructor(e){this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._managedBuffers=new Br({renderer:e,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"glBuffer"})}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gl=null,this._boundBufferBases={}}contextChange(){this._gl=this._renderer.gl,this.destroyAll(!0),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this.createGLBuffer(e)}bind(e){const{_gl:t}=this,r=this.getGlBuffer(e);t.bindBuffer(r.type,r.buffer)}bindBufferBase(e,t){const{_gl:r}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,r.bindBufferBase(r.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let r=0,i=this._nextBindBaseIndex;for(;r<2;){i>=this._maxBindings&&(i=this._minBaseLocation,r++);const s=this._boundBufferBases[i];if(s&&s._lastBindCallId===this._bindCallId){i++;continue}break}return t=i,this._nextBindBaseIndex=i+1,r>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){const t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,r,i){const{_gl:s}=this;r||(r=0),t||(t=0),this._boundBufferBases[t]=null,s.bindBufferRange(s.UNIFORM_BUFFER,t||0,e.buffer,r*256,i||256)}updateBuffer(e){const{_gl:t}=this,r=this.getGlBuffer(e);if(e._updateID===r.updateID)return r;r.updateID=e._updateID,t.bindBuffer(r.type,r.buffer);const i=e.data,s=e.descriptor.usage&Mt.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return i?r.byteLength>=i.byteLength?t.bufferSubData(r.type,0,i,0,e._updateSize/i.BYTES_PER_ELEMENT):(r.byteLength=i.byteLength,t.bufferData(r.type,i,s)):(r.byteLength=e.descriptor.size,t.bufferData(r.type,r.byteLength,s)),r}destroyAll(e=!1){this._managedBuffers.removeAll(e)}onBufferUnload(e,t=!1){const r=e._gpuData[this._renderer.uid];r&&(t||this._gl.deleteBuffer(r.buffer))}createGLBuffer(e){const{_gl:t}=this;let r=gd.ARRAY_BUFFER;e.descriptor.usage&Mt.INDEX?r=gd.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&Mt.UNIFORM&&(r=gd.UNIFORM_BUFFER);const i=new QU(t.createBuffer(),r);return e._gpuData[this._renderer.uid]=i,this._managedBuffers.add(e),i}resetState(){this._boundBufferBases=Object.create(null)}}p2.extension={type:[q.WebGLSystem],name:"buffer"};const m2=class JU{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...JU.defaultOptions,...e};let t=this.multiView=e.multiView;if(e.context&&t&&(Ue("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),t=!1),t?this.canvas=je.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const r=this._renderer.background.alpha<1,i=e.premultipliedAlpha??!0,s=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:r,premultipliedAlpha:i,antialias:s,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Ue("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof je.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);const t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let r;const i=this.canvas;if(e===2&&(r=i.getContext("webgl2",t)),!r&&(r=i.getContext("webgl",t),!r))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=r,this.initFromContext(this.gl)}getExtensions(){const{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...t,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...t,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};const r=e.getExtension("WEBGL_provoking_vertex");r&&r.provokingVertexWEBGL(r.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){const t=e.getContextAttributes();t&&!t.stencil&&Ue("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=this.supports,i=this.webGLVersion===2,s=this.extensions;r.uint32Indices=i||!!s.uint32ElementIndex,r.uniformBufferObject=i,r.vertexArrayObject=i||!!s.vertexArrayObject,r.srgbTextures=i||!!s.srgb,r.nonPowOf2wrapping=i,r.nonPowOf2mipmaps=i,r.msaa=i,r.uint32Indices||Ue("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};m2.extension={type:[q.WebGLSystem],name:"context"};m2.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let e4=m2;function g2(n,e){for(const t in n.attributes){const r=n.attributes[t],i=e[t];i?(r.format??(r.format=i.format),r.offset??(r.offset=i.offset),r.instance??(r.instance=i.instance)):Ue(`Attribute ${t} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}k$(n)}function k$(n){const{buffers:e,attributes:t}=n,r={},i={};for(const s in e){const a=e[s];r[a.uid]=0,i[a.uid]=0}for(const s in t){const a=t[s];r[a.buffer.uid]+=Ma(a.format).stride}for(const s in t){const a=t[s];a.stride??(a.stride=r[a.buffer.uid]),a.start??(a.start=i[a.buffer.uid]),i[a.buffer.uid]+=Ma(a.format).stride}}var Cg=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(Cg||{}),jy=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(jy||{}),t4=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(t4||{}),Ot=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Ot||{});const jP={uint8x2:Ot.UNSIGNED_BYTE,uint8x4:Ot.UNSIGNED_BYTE,sint8x2:Ot.BYTE,sint8x4:Ot.BYTE,unorm8x2:Ot.UNSIGNED_BYTE,unorm8x4:Ot.UNSIGNED_BYTE,snorm8x2:Ot.BYTE,snorm8x4:Ot.BYTE,uint16x2:Ot.UNSIGNED_SHORT,uint16x4:Ot.UNSIGNED_SHORT,sint16x2:Ot.SHORT,sint16x4:Ot.SHORT,unorm16x2:Ot.UNSIGNED_SHORT,unorm16x4:Ot.UNSIGNED_SHORT,snorm16x2:Ot.SHORT,snorm16x4:Ot.SHORT,float16x2:Ot.HALF_FLOAT,float16x4:Ot.HALF_FLOAT,float32:Ot.FLOAT,float32x2:Ot.FLOAT,float32x3:Ot.FLOAT,float32x4:Ot.FLOAT,uint32:Ot.UNSIGNED_INT,uint32x2:Ot.UNSIGNED_INT,uint32x3:Ot.UNSIGNED_INT,uint32x4:Ot.UNSIGNED_INT,sint32:Ot.INT,sint32x2:Ot.INT,sint32x3:Ot.INT,sint32x4:Ot.INT};function n4(n){return jP[n]??jP.float32}const O$={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class r4{constructor(){this.vaoCache=Object.create(null)}destroy(){this.vaoCache=Object.create(null)}}class y2{constructor(e){this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._managedGeometries=new Br({renderer:e,type:"resource",onUnload:this.onGeometryUnload.bind(this),name:"glGeometry"})}contextChange(){const e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");this.destroyAll(!0);const t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=i=>t.bindVertexArrayOES(i),e.deleteVertexArray=i=>t.deleteVertexArrayOES(i));const r=this._renderer.context.extensions.vertexAttribDivisorANGLE;r&&(e.drawArraysInstanced=(i,s,a,l)=>{r.drawArraysInstancedANGLE(i,s,a,l)},e.drawElementsInstanced=(i,s,a,l,c)=>{r.drawElementsInstancedANGLE(i,s,a,l,c)},e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s)),this._activeGeometry=null,this._activeVao=null}bind(e,t){const r=this.gl;this._activeGeometry=e;const i=this.getVao(e,t);this._activeVao!==i&&(this._activeVao=i,r.bindVertexArray(i)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this._renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];t.updateBuffer(i)}e._gcLastUsed=this._renderer.gc.now}checkCompatibility(e,t){const r=e.attributes,i=t._attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const r=e.attributes,i=t._attributeData,s=["g",e.uid];for(const a in r)i[a]&&s.push(a,i[a].location);return s.join("-")}getVao(e,t){return e._gpuData[this._renderer.uid]?.vaoCache[t._key]||this.initGeometryVao(e,t)}initGeometryVao(e,t,r=!0){const i=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);const a=this.getSignature(e,t);let l=e._gpuData[this._renderer.uid];l||(l=new r4,e._gpuData[this._renderer.uid]=l,this._managedGeometries.add(e));const c=l.vaoCache;let h=c[a];if(h)return c[t._key]=h,h;g2(e,t._attributeData);const d=e.buffers;h=i.createVertexArray(),i.bindVertexArray(h);for(let p=0;p<d.length;p++){const g=d[p];s.bind(g)}return this.activateVao(e,t),c[t._key]=h,c[a]=h,i.bindVertexArray(null),h}onGeometryUnload(e,t=!1){const r=e._gpuData[this._renderer.uid];if(!r)return;const i=r.vaoCache;if(!t)for(const s in i)this._activeVao!==i[s]&&this.resetState(),this.gl.deleteVertexArray(i[s])}destroyAll(e=!1){this._managedGeometries.removeAll(e)}activateVao(e,t){const r=this._renderer.gl,i=this._renderer.buffer,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let a=null;for(const l in s){const c=s[l],h=c.buffer,d=i.getGlBuffer(h),p=t._attributeData[l];if(p){a!==d&&(i.bind(h),a=d);const g=p.location;r.enableVertexAttribArray(g);const y=Ma(c.format),_=n4(c.format);if(p.format?.substring(1,4)==="int"?r.vertexAttribIPointer(g,y.size,_,c.stride,c.offset):r.vertexAttribPointer(g,y.size,_,y.normalised,c.stride,c.offset),c.instance)if(this.hasInstance){const S=c.divisor??1;r.vertexAttribDivisor(g,S)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,i){const{gl:s}=this._renderer,a=this._activeGeometry,l=O$[e||a.topology];if(i??(i=a.instanceCount),a.indexBuffer){const c=a.indexBuffer.data.BYTES_PER_ELEMENT,h=c===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;i!==1?s.drawElementsInstanced(l,t||a.indexBuffer.data.length,h,(r||0)*c,i):s.drawElements(l,t||a.indexBuffer.data.length,h,(r||0)*c)}else i!==1?s.drawArraysInstanced(l,r||0,t||a.getSize(),i):s.drawArrays(l,r||0,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._managedGeometries.destroy(),this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}y2.extension={type:[q.WebGLSystem],name:"geometry"};const I$=new Ll({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),_2=class i4{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){const{useBackBuffer:t,antialias:r}={...i4.defaultOptions,...e};this.useBackBuffer=t,this._antialias=r,this._renderer.context.supports.msaa||(Ue("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=pi.for2d();const i=new mi({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Ii({glProgram:i,resources:{uTexture:we.WHITE.source}})}renderStart(e){const t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){const r=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=r.colorTexture,e.target=this._getBackBufferTexture(r.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:I$,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new we({source:new yn({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};_2.extension={type:[q.WebGLSystem],name:"backBuffer",priority:1};_2.defaultOptions={useBackBuffer:!1};let s4=_2;class b2{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}}b2.extension={type:[q.WebGLSystem],name:"colorMask"};class x2{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){const t=this._renderer,{geometry:r,shader:i,state:s,skipSync:a,topology:l,size:c,start:h,instanceCount:d}=e;t.shader.bind(i,a),t.geometry.bind(r,t.shader._activeProgram),s&&t.state.set(s),t.geometry.draw(l,c,h,d??r.instanceCount)}destroy(){this._renderer=null}}x2.extension={type:[q.WebGLSystem],name:"encoder"};class v2{constructor(e){this._renderer=e}contextChange(){const e=this._renderer.gl;this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=V1(this.maxTextures,e);const t=this._renderer.context.webGLVersion===2;this.maxUniformBindings=t?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}}v2.extension={type:[q.WebGLSystem],name:"limits"};class a4{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this._attachedMipLevel=0,this._attachedLayer=0,this.msaaRenderBuffer=[]}}const Da=[];Da[kn.NONE]=void 0;Da[kn.DISABLED]={stencilWriteMask:0,stencilReadMask:0};Da[kn.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};Da[kn.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};Da[kn.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};Da[kn.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class S2{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:kn.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:kn.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=kn.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,t){const r=this._renderTargetStencilState[this._activeRenderTarget.uid],i=this._gl,s=Da[e],a=this._stencilCache;if(r.stencilMode=e,r.stencilReference=t,e===kn.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,i.disable(i.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,i.enable(i.STENCIL_TEST)),(e!==a.stencilMode||a.stencilReference!==t)&&(a.stencilMode=e,a.stencilReference=t,i.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],t,255),i.stencilOp(i.KEEP,i.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}}S2.extension={type:[q.WebGLSystem],name:"stencil"};class E2{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!I1())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){const t=this.getUniformGroupData(e);e.buffer||(e.buffer=new hi({data:new Float32Array(t.layout.size/4),usage:Mt.UNIFORM|Mt.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){const t=e._signature;let r=this._syncFunctionHash[t];if(!r){const i=Object.keys(e.uniformStructures).map(l=>e.uniformStructures[l]),s=this._adaptor.createUboElements(i),a=this._generateUboSync(s.uboElements);r=this._syncFunctionHash[t]={layout:s,syncFunction:a}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,r){const i=this.getUniformGroupData(e);e.buffer||(e.buffer=new hi({data:new Float32Array(i.layout.size/4),usage:Mt.UNIFORM|Mt.COPY_DST}));let s=null;return t||(t=e.buffer.data,s=e.buffer.dataInt32),r||(r=0),i.syncFunction(e.uniforms,t,s,r),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;const t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}}const w2={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function o4(n){const e=n.map(s=>({data:s,offset:0,size:0})),t=16;let r=0,i=0;for(let s=0;s<e.length;s++){const a=e[s];if(r=w2[a.data.type],!r)throw new Error(`Unknown type ${a.data.type}`);a.data.size>1&&(r=Math.max(r,t)*a.data.size);const l=r===12?16:r;a.size=r;const c=i%t;c>0&&t-c<l?i+=(t-c)%16:i+=(r-c%r)%r,a.offset=i,i+=r}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}const _o=[{type:"mat3x3<f32>",test:n=>n.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:n=>n.type==="vec2<f32>"&&n.size===1&&n.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:n=>n.type==="vec3<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function C2(n,e,t,r){const i=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let s=0;for(let l=0;l<n.length;l++){const c=n[l],h=c.data.name;let d=!1,p=0;for(let g=0;g<_o.length;g++)if(_o[g].test(c.data)){p=c.offset/4,i.push(`name = "${h}";`,`offset += ${p-s};`,_o[g][e]||_o[g].ubo),d=!0;break}if(!d)if(c.data.size>1)p=c.offset/4,i.push(t(c,p-s));else{const g=r[c.data.type];p=c.offset/4,i.push(`
                    v = uv.${h};
                    offset += ${p-s};
                    ${g};
                `)}s=p}const a=i.join(`
`);return new Function("uv","data","dataInt32","offset",a)}function wu(n,e){return`
        for (let i = 0; i < ${n*e}; i++) {
            data[offset + (((i / ${n})|0) * 4) + (i % ${n})] = v[i];
        }
    `}const T2={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":wu(3,2),"mat4x2<f32>":wu(4,2),"mat2x3<f32>":wu(2,3),"mat4x3<f32>":wu(4,3),"mat2x4<f32>":wu(2,4),"mat3x4<f32>":wu(3,4)},l4={...T2,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function u4(n,e){const t=Math.max(w2[n.data.type]/16,1),r=n.data.value.length/n.data.size,i=(4-r%4)%4,s=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${n.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${n.data.size*t}; i++)
        {
            for(var j = 0; j < ${r}; j++)
            {
                ${s}[arrayOffset++] = v[t++];
            }
            ${i!==0?`arrayOffset += ${i};`:""}
        }
    `}function c4(n){return C2(n,"uboStd40",u4,T2)}class A2 extends E2{constructor(){super({createUboElements:o4,generateUboSync:c4})}}A2.extension={type:[q.WebGLSystem],name:"ubo"};class h4{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Rt}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Rt;const e=this._renderer.gl;this._drawBuffersCache=[];for(let t=1;t<=16;t++)this._drawBuffersCache[t]=Array.from({length:t},(r,i)=>e.COLOR_ATTACHMENT0+i)}copyToTexture(e,t,r,i,s){const a=this._renderTargetSystem,l=this._renderer,c=a.getGpuRenderTarget(e),h=l.gl;return this.finishRenderPass(e),h.bindFramebuffer(h.FRAMEBUFFER,c.resolveTargetFramebuffer),l.texture.bind(t,0),h.copyTexSubImage2D(h.TEXTURE_2D,0,s.x,s.y,r.x,r.y,i.width,i.height),t}startRenderPass(e,t=!0,r,i,s=0,a=0){const l=this._renderTargetSystem,c=e.colorTexture,h=l.getGpuRenderTarget(e);if(a!==0&&this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to array layers requires WebGL2.");if(s>0){if(h.msaa)throw new Error("[RenderTargetSystem] Rendering to mip levels is not supported with MSAA render targets.");if(this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to mip levels requires WebGL2.")}let d=i.y;e.isRoot&&(d=c.pixelHeight-i.height-i.y),e.colorTextures.forEach(y=>{this._renderer.texture.unbind(y)});const p=this._renderer.gl;p.bindFramebuffer(p.FRAMEBUFFER,h.framebuffer),!e.isRoot&&(h._attachedMipLevel!==s||h._attachedLayer!==a)&&(e.colorTextures.forEach((y,_)=>{const S=this._renderer.texture.getGlSource(y);if(S.target===p.TEXTURE_2D){if(a!==0)throw new Error("[RenderTargetSystem] layer must be 0 when rendering to 2D textures in WebGL.");p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0+_,p.TEXTURE_2D,S.texture,s)}else if(S.target===p.TEXTURE_2D_ARRAY){if(this._renderer.context.webGLVersion<2)throw new Error("[RenderTargetSystem] Rendering to 2D array textures requires WebGL2.");p.framebufferTextureLayer(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0+_,S.texture,s,a)}else if(S.target===p.TEXTURE_CUBE_MAP){if(a<0||a>5)throw new Error("[RenderTargetSystem] Cube map layer must be between 0 and 5.");p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0+_,p.TEXTURE_CUBE_MAP_POSITIVE_X+a,S.texture,s)}else throw new Error("[RenderTargetSystem] Unsupported texture target for render-to-layer in WebGL.")}),h._attachedMipLevel=s,h._attachedLayer=a),e.colorTextures.length>1&&this._setDrawBuffers(e,p);const g=this._viewPortCache;(g.x!==i.x||g.y!==d||g.width!==i.width||g.height!==i.height)&&(g.x=i.x,g.y=d,g.width=i.width,g.height=i.height,p.viewport(i.x,d,i.width,i.height)),!h.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(h),this.clear(e,t,r)}finishRenderPass(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);if(!r.msaa)return;const i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,r.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,r.framebuffer),i.blitFramebuffer(0,0,r.width,r.height,0,0,r.width,r.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)}initGpuRenderTarget(e){const r=this._renderer.gl,i=new a4;return i._attachedMipLevel=0,i._attachedLayer=0,e.colorTexture instanceof ms?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),i.framebuffer=null,i):(this._initColor(e,i),r.bindFramebuffer(r.FRAMEBUFFER,null),i)}destroyGpuRenderTarget(e){const t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(r=>{t.deleteRenderbuffer(r)}),e.msaaRenderBuffer=null}clear(e,t,r,i,s=0,a=0){if(!t)return;if(a!==0)throw new Error("[RenderTargetSystem] Clearing array layers is not supported in WebGL renderer.");const l=this._renderTargetSystem;typeof t=="boolean"&&(t=t?ui.ALL:ui.NONE);const c=this._renderer.gl;if(t&ui.COLOR){r??(r=l.defaultClearColor);const h=this._clearColorCache,d=r;(h[0]!==d[0]||h[1]!==d[1]||h[2]!==d[2]||h[3]!==d[3])&&(h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],c.clearColor(d[0],d[1],d[2],d[3]))}c.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;const r=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,r),(e.stencil||e.depth)&&this._resizeStencil(r)}_initColor(e,t){const r=this._renderer,i=r.gl,s=i.createFramebuffer();if(t.resolveTargetFramebuffer=s,i.bindFramebuffer(i.FRAMEBUFFER,s),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((l,c)=>{const h=l.source;h.antialias&&(r.context.supports.msaa?t.msaa=!0:Ue("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),r.texture.bindSource(h,0);const d=r.texture.getGlSource(h),p=d.texture;if(d.target===i.TEXTURE_2D)i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,i.TEXTURE_2D,p,0);else if(d.target===i.TEXTURE_2D_ARRAY){if(r.context.webGLVersion<2)throw new Error("[RenderTargetSystem] TEXTURE_2D_ARRAY requires WebGL2.");i.framebufferTextureLayer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,p,0,0)}else if(d.target===i.TEXTURE_CUBE_MAP)i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,i.TEXTURE_CUBE_MAP_POSITIVE_X,p,0);else throw new Error("[RenderTargetSystem] Unsupported texture target for framebuffer attachment.")}),t.msaa){const l=i.createFramebuffer();t.framebuffer=l,i.bindFramebuffer(i.FRAMEBUFFER,l),e.colorTextures.forEach((c,h)=>{const d=i.createRenderbuffer();t.msaaRenderBuffer[h]=d})}else t.framebuffer=s;this._resizeColor(e,t)}_resizeColor(e,t){const r=e.colorTexture.source;if(t.width=r.pixelWidth,t.height=r.pixelHeight,t._attachedMipLevel=0,t._attachedLayer=0,e.colorTextures.forEach((i,s)=>{s!==0&&i.source.resize(r.width,r.height,r._resolution)}),t.msaa){const i=this._renderer,s=i.gl,a=t.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,a),e.colorTextures.forEach((l,c)=>{const h=l.source;i.texture.bindSource(h,0);const p=i.texture.getGlSource(h).internalFormat,g=t.msaaRenderBuffer[c];s.bindRenderbuffer(s.RENDERBUFFER,g),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,p,h.pixelWidth,h.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+c,s.RENDERBUFFER,g)})}}_initStencil(e){if(e.framebuffer===null)return;const t=this._renderer.gl,r=t.createRenderbuffer();e.depthStencilRenderBuffer=r,t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r),this._resizeStencil(e)}_resizeStencil(e){const t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){const t=e.colorTexture.resource;this._renderer.context.multiView&&ms.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&ms.test(e.colorTexture.resource)){const t=this._renderer.context.canvas,r=e.colorTexture;r.context2D.drawImage(t,0,r.pixelHeight-t.height)}}_setDrawBuffers(e,t){const r=e.colorTextures.length,i=this._drawBuffersCache[r];if(this._renderer.context.webGLVersion===1){const s=this._renderer.context.extensions.drawBuffers;s?s.drawBuffersWEBGL(i):Ue("[RenderTexture] This WebGL1 context does not support rendering to multiple targets")}else t.drawBuffers(i)}}class M2 extends Hy{constructor(e){super(e),this.adaptor=new h4,this.adaptor.init(e,this)}}M2.extension={type:[q.WebGLSystem],name:"renderTarget"};class Xy extends hr{constructor({buffer:e,offset:t,size:r}){super(),this.uid=Zt("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Zt("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=r,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Zt("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null,this.removeAllListeners()}}function d4(n,e){const t=[],r=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let i=!1,s=0;const a=e._getProgramData(n.glProgram);for(const c in n.groups){const h=n.groups[c];t.push(`
            resources = g[${c}].resources;
        `);for(const d in h.resources){const p=h.resources[d];if(p instanceof zn)if(p.ubo){const g=n._uniformBindMap[c][Number(d)];t.push(`
                        sS.bindUniformBlock(
                            resources[${d}],
                            '${g}',
                            ${n.glProgram._uniformBlockData[g].index}
                        );
                    `)}else t.push(`
                        ugS.updateUniformGroup(resources[${d}], p, sD);
                    `);else if(p instanceof Xy){const g=n._uniformBindMap[c][Number(d)];t.push(`
                    sS.bindUniformBlock(
                        resources[${d}],
                        '${g}',
                        ${n.glProgram._uniformBlockData[g].index}
                    );
                `)}else if(p instanceof yn){const g=n._uniformBindMap[c][d],y=a.uniformData[g];y&&(i||(i=!0,r.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(y.location,s),t.push(`
                        tS.bind(resources[${d}], ${s});
                    `),s++)}}}const l=[...r,...t].join(`
`);return new Function("r","s","sD",l)}class N${}class f4{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function aS(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function ix(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function R2(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ix(2*e);case"bvec3":return ix(3*e);case"bvec4":return ix(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let lm=null;const XP={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},L$={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function P2(n,e){if(!lm){const t=Object.keys(XP);lm={};for(let r=0;r<t.length;++r){const i=t[r];lm[n[i]]=XP[i]}}return lm[e]}function p4(n,e){const t=P2(n,e);return L$[t]||"float32"}function m4(n,e,t=!1){const r={},i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const l=e.getActiveAttrib(n,a);if(l.name.startsWith("gl_"))continue;const c=p4(e,l.type);r[l.name]={location:0,format:c,stride:Ma(c).stride,offset:0,instance:!1,start:0}}const s=Object.keys(r);if(t){s.sort((a,l)=>a>l?1:-1);for(let a=0;a<s.length;a++)r[s[a]].location=a,e.bindAttribLocation(n,a,s[a]);e.linkProgram(n)}else for(let a=0;a<s.length;a++)r[s[a]].location=e.getAttribLocation(n,s[a]);return r}function g4(n,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<r;i++){const s=e.getActiveUniformBlockName(n,i),a=e.getUniformBlockIndex(n,s),l=e.getActiveUniformBlockParameter(n,i,e.UNIFORM_BLOCK_DATA_SIZE);t[s]={name:s,index:a,size:l}}return t}function y4(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(n,i),a=s.name.replace(/\[.*?\]$/,""),l=!!s.name.match(/\[.*?\]$/),c=P2(e,s.type);t[a]={name:a,index:i,type:c,size:s.size,isArray:l,value:R2(c,s.size)}}return t}function WP(n,e){const t=n.getShaderSource(e).split(`
`).map((h,d)=>`${d}: ${h}`),r=n.getShaderInfoLog(e),i=r.split(`
`),s={},a=i.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),l=[""];a.forEach(h=>{t[h-1]=`%c${t[h-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const c=t.join(`
`);l[0]=c,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function _4(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||WP(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||WP(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}function b4(n,e){const t=aS(n,n.VERTEX_SHADER,e.vertex),r=aS(n,n.FRAGMENT_SHADER,e.fragment),i=n.createProgram();n.attachShader(i,t),n.attachShader(i,r);const s=e.transformFeedbackVaryings;s&&(typeof n.transformFeedbackVaryings!="function"?Ue("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||_4(n,i,t,r),e._attributeData=m4(i,n,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=y4(i,n),e._uniformBlockData=g4(i,n),n.deleteShader(t),n.deleteShader(r);const a={};for(const c in e._uniformData){const h=e._uniformData[c];a[c]={location:n.getUniformLocation(i,c),value:R2(h.type,h.size)}}return new f4(i,a)}const um={textureCount:0,blockIndex:0};class B2{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(e,t){if(this._setProgram(e.glProgram),t)return;um.textureCount=0,um.blockIndex=0;let r=this._shaderSyncFunctions[e.glProgram._key];r||(r=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),r(this._renderer,e,um)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,um)}bindUniformBlock(e,t,r=0){const i=this._renderer.buffer,s=this._getProgramData(this._activeProgram),a=e._bufferResource;a||this._renderer.ubo.updateUniformGroup(e);const l=e.buffer,c=i.updateBuffer(l),h=i.freeLocationForBufferBase(c);if(a){const{offset:p,size:g}=e;p===0&&g===l.data.byteLength?i.bindBufferBase(c,h):i.bindBufferRange(c,h,p)}else i.getLastBindBaseLocation(c)!==h&&i.bindBufferBase(c,h);const d=this._activeProgram._uniformBlockData[t].index;s.uniformBlockBindings[r]!==h&&(s.uniformBlockBindings[r]=h,this._renderer.gl.uniformBlockBinding(s.program,d,h))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;const t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){const t=e._key;return this._programDataHash[t]=b4(this._gl,e),this._programDataHash[t]}destroy(){for(const e of Object.keys(this._programDataHash))this._programDataHash[e].destroy();this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(e,t){return d4(e,t)}resetState(){this._activeProgram=null}}B2.extension={type:[q.WebGLSystem],name:"shader"};const x4={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},v4={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function S4(n,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const r in n.uniforms){if(!e[r]){n.uniforms[r]instanceof zn?n.uniforms[r].ubo?t.push(`
                        renderer.shader.bindUniformBlock(uv.${r}, "${r}");
                    `):t.push(`
                        renderer.shader.updateUniformGroup(uv.${r});
                    `):n.uniforms[r]instanceof Xy&&t.push(`
                        renderer.shader.bindBufferResource(uv.${r}, "${r}");
                    `);continue}const i=n.uniformStructures[r];let s=!1;for(let a=0;a<_o.length;a++){const l=_o[a];if(i.type===l.type&&l.test(i)){t.push(`name = "${r}";`,_o[a].uniform),s=!0;break}}if(!s){const l=(i.size===1?x4:v4)[i.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}class D2{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,r){const i=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==i.uniformDirtyGroups[e.uid])&&(i.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(i.uniformData,e.uniforms,this._renderer,r))}_getUniformSyncFunction(e,t){return this._uniformGroupSyncHash[e._signature]?.[t._key]||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){const r=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),i=this._getSignature(e,t._uniformData,"u");return this._cache[i]||(this._cache[i]=this._generateUniformsSync(e,t._uniformData)),r[t._key]=this._cache[i],r[t._key]}_generateUniformsSync(e,t){return S4(e,t)}_getSignature(e,t,r){const i=e.uniforms,s=[`${r}-`];for(const a in i)s.push(a),t[a]&&s.push(t[a].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}}D2.extension={type:[q.WebGLSystem],name:"uniformGroup"};function F$(n){return n=n.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),n=`
        out vec4 finalColor;
    ${n}
    `,n}const U$={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function G$(n){return U$[n]}function E4(n){const e={};if(e.normal=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e.add=[n.ONE,n.ONE],e.multiply=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e.screen=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e["screen-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e.erase=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],!(n instanceof je.get().getWebGLRenderingContext()))e.min=[n.ONE,n.ONE,n.ONE,n.ONE,n.MIN,n.MIN],e.max=[n.ONE,n.ONE,n.ONE,n.ONE,n.MAX,n.MAX];else{const r=n.getExtension("EXT_blend_minmax");r&&(e.min=[n.ONE,n.ONE,n.ONE,n.ONE,r.MIN_EXT,r.MIN_EXT],e.max=[n.ONE,n.ONE,n.ONE,n.ONE,r.MAX_EXT,r.MAX_EXT])}return e}const z$=0,V$=1,H$=2,j$=3,X$=4,W$=5,w4=class oS{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[z$]=this.setBlend,this.map[V$]=this.setOffset,this.map[H$]=this.setCullFace,this.map[j$]=this.setDepthTest,this.map[X$]=this.setFrontFace,this.map[W$]=this.setDepthMask,this.checks=[],this.defaultState=pi.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=E4(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(oS._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(oS._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;const t=this._invertFrontFace?!e:e;this._glFrontFace!==t&&(this._glFrontFace=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;const t=this.blendModesMap[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};w4.extension={type:[q.WebGLSystem],name:"state"};let C4=w4;class k2{constructor(e){this.target=jy.TEXTURE_2D,this._layerInitMask=0,this.texture=e,this.width=-1,this.height=-1,this.type=Ot.UNSIGNED_BYTE,this.internalFormat=Cg.RGBA,this.format=Cg.RGBA,this.samplerType=0}destroy(){}}const T4={id:"buffer",upload(n,e,t,r,i,s=!1){const a=i||e.target;!s&&e.width===n.width&&e.height===n.height?t.texSubImage2D(a,0,0,0,n.width,n.height,e.format,e.type,n.resource):t.texImage2D(a,0,e.internalFormat,n.width,n.height,0,e.format,e.type,n.resource),e.width=n.width,e.height=n.height}},$$={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},A4={id:"compressed",upload(n,e,t,r,i,s){const a=i??e.target;t.pixelStorei(t.UNPACK_ALIGNMENT,4);let l=n.pixelWidth,c=n.pixelHeight;const h=!!$$[n.format];for(let d=0;d<n.resource.length;d++){const p=n.resource[d];h?t.compressedTexImage2D(a,d,e.internalFormat,l,c,0,p):t.texImage2D(a,d,e.internalFormat,l,c,0,e.format,e.type,p),l=Math.max(l>>1,1),c=Math.max(c>>1,1)}}},$P=["right","left","top","bottom","front","back"];function M4(n){return{id:"cube",upload(e,t,r,i){const s=e.faces;for(let a=0;a<$P.length;a++){const l=$P[a],c=s[l];(n[c.uploadMethodId]||n.image).upload(c,t,r,i,jy.TEXTURE_CUBE_MAP_POSITIVE_X+a,(t._layerInitMask&1<<a)===0),t._layerInitMask|=1<<a}t.width=e.pixelWidth,t.height=e.pixelHeight}}}const O2={id:"image",upload(n,e,t,r,i,s=!1){const a=i||e.target,l=n.pixelWidth,c=n.pixelHeight,h=n.resourceWidth,d=n.resourceHeight,p=r===2,g=s||e.width!==l||e.height!==c,y=h>=l&&d>=c,_=n.resource;(p?q$:Y$)(t,a,e,l,c,h,d,_,g,y),e.width=l,e.height=c}};function q$(n,e,t,r,i,s,a,l,c,h){if(!h){c&&n.texImage2D(e,0,t.internalFormat,r,i,0,t.format,t.type,null),n.texSubImage2D(e,0,0,0,s,a,t.format,t.type,l);return}if(!c){n.texSubImage2D(e,0,0,0,t.format,t.type,l);return}n.texImage2D(e,0,t.internalFormat,r,i,0,t.format,t.type,l)}function Y$(n,e,t,r,i,s,a,l,c,h){if(!h){c&&n.texImage2D(e,0,t.internalFormat,r,i,0,t.format,t.type,null),n.texSubImage2D(e,0,0,0,t.format,t.type,l);return}if(!c){n.texSubImage2D(e,0,0,0,t.format,t.type,l);return}n.texImage2D(e,0,t.internalFormat,t.format,t.type,l)}const K$=FE(),R4={id:"video",upload(n,e,t,r,i,s=K$){if(!n.isValid){const a=i??e.target;t.texImage2D(a,0,e.internalFormat,1,1,0,e.format,e.type,null);return}O2.upload(n,e,t,r,i,s)}},lS={linear:9729,nearest:9728},P4={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},Xm={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},B4={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function uS(n,e,t,r,i,s,a,l){const c=s;if(!l||n.addressModeU!=="repeat"||n.addressModeV!=="repeat"||n.addressModeW!=="repeat"){const h=Xm[a?"clamp-to-edge":n.addressModeU],d=Xm[a?"clamp-to-edge":n.addressModeV],p=Xm[a?"clamp-to-edge":n.addressModeW];e[i](c,e.TEXTURE_WRAP_S,h),e[i](c,e.TEXTURE_WRAP_T,d),e.TEXTURE_WRAP_R&&e[i](c,e.TEXTURE_WRAP_R,p)}if((!l||n.magFilter!=="linear")&&e[i](c,e.TEXTURE_MAG_FILTER,lS[n.magFilter]),t){if(!l||n.mipmapFilter!=="linear"){const h=P4[n.minFilter][n.mipmapFilter];e[i](c,e.TEXTURE_MIN_FILTER,h)}}else e[i](c,e.TEXTURE_MIN_FILTER,lS[n.minFilter]);if(r&&n.maxAnisotropy>1){const h=Math.min(n.maxAnisotropy,e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[i](c,r.TEXTURE_MAX_ANISOTROPY_EXT,h)}n.compare&&e[i](c,e.TEXTURE_COMPARE_FUNC,B4[n.compare])}function D4(n){return{r8unorm:n.RED,r8snorm:n.RED,r8uint:n.RED,r8sint:n.RED,r16uint:n.RED,r16sint:n.RED,r16float:n.RED,rg8unorm:n.RG,rg8snorm:n.RG,rg8uint:n.RG,rg8sint:n.RG,r32uint:n.RED,r32sint:n.RED,r32float:n.RED,rg16uint:n.RG,rg16sint:n.RG,rg16float:n.RG,rgba8unorm:n.RGBA,"rgba8unorm-srgb":n.RGBA,rgba8snorm:n.RGBA,rgba8uint:n.RGBA,rgba8sint:n.RGBA,bgra8unorm:n.RGBA,"bgra8unorm-srgb":n.RGBA,rgb9e5ufloat:n.RGB,rgb10a2unorm:n.RGBA,rg11b10ufloat:n.RGB,rg32uint:n.RG,rg32sint:n.RG,rg32float:n.RG,rgba16uint:n.RGBA,rgba16sint:n.RGBA,rgba16float:n.RGBA,rgba32uint:n.RGBA,rgba32sint:n.RGBA,rgba32float:n.RGBA,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT,depth24plus:n.DEPTH_COMPONENT,"depth24plus-stencil8":n.DEPTH_STENCIL,depth32float:n.DEPTH_COMPONENT,"depth32float-stencil8":n.DEPTH_STENCIL}}function k4(n,e){let t={},r=n.RGBA;return n instanceof je.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":n.SRGB8_ALPHA8,"bgra8unorm-srgb":n.SRGB8_ALPHA8},r=n.RGBA8),{r8unorm:n.R8,r8snorm:n.R8_SNORM,r8uint:n.R8UI,r8sint:n.R8I,r16uint:n.R16UI,r16sint:n.R16I,r16float:n.R16F,rg8unorm:n.RG8,rg8snorm:n.RG8_SNORM,rg8uint:n.RG8UI,rg8sint:n.RG8I,r32uint:n.R32UI,r32sint:n.R32I,r32float:n.R32F,rg16uint:n.RG16UI,rg16sint:n.RG16I,rg16float:n.RG16F,rgba8unorm:n.RGBA,...t,rgba8snorm:n.RGBA8_SNORM,rgba8uint:n.RGBA8UI,rgba8sint:n.RGBA8I,bgra8unorm:r,rgb9e5ufloat:n.RGB9_E5,rgb10a2unorm:n.RGB10_A2,rg11b10ufloat:n.R11F_G11F_B10F,rg32uint:n.RG32UI,rg32sint:n.RG32I,rg32float:n.RG32F,rgba16uint:n.RGBA16UI,rgba16sint:n.RGBA16I,rgba16float:n.RGBA16F,rgba32uint:n.RGBA32UI,rgba32sint:n.RGBA32I,rgba32float:n.RGBA32F,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT16,depth24plus:n.DEPTH_COMPONENT24,"depth24plus-stencil8":n.DEPTH24_STENCIL8,depth32float:n.DEPTH_COMPONENT32F,"depth32float-stencil8":n.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function O4(n){return{r8unorm:n.UNSIGNED_BYTE,r8snorm:n.BYTE,r8uint:n.UNSIGNED_BYTE,r8sint:n.BYTE,r16uint:n.UNSIGNED_SHORT,r16sint:n.SHORT,r16float:n.HALF_FLOAT,rg8unorm:n.UNSIGNED_BYTE,rg8snorm:n.BYTE,rg8uint:n.UNSIGNED_BYTE,rg8sint:n.BYTE,r32uint:n.UNSIGNED_INT,r32sint:n.INT,r32float:n.FLOAT,rg16uint:n.UNSIGNED_SHORT,rg16sint:n.SHORT,rg16float:n.HALF_FLOAT,rgba8unorm:n.UNSIGNED_BYTE,"rgba8unorm-srgb":n.UNSIGNED_BYTE,rgba8snorm:n.BYTE,rgba8uint:n.UNSIGNED_BYTE,rgba8sint:n.BYTE,bgra8unorm:n.UNSIGNED_BYTE,"bgra8unorm-srgb":n.UNSIGNED_BYTE,rgb9e5ufloat:n.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:n.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:n.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:n.UNSIGNED_INT,rg32sint:n.INT,rg32float:n.FLOAT,rgba16uint:n.UNSIGNED_SHORT,rgba16sint:n.SHORT,rgba16float:n.HALF_FLOAT,rgba32uint:n.UNSIGNED_INT,rgba32sint:n.INT,rgba32float:n.FLOAT,stencil8:n.UNSIGNED_BYTE,depth16unorm:n.UNSIGNED_SHORT,depth24plus:n.UNSIGNED_INT,"depth24plus-stencil8":n.UNSIGNED_INT_24_8,depth32float:n.FLOAT,"depth32float-stencil8":n.FLOAT_32_UNSIGNED_INT_24_8_REV}}function I4(n){return{"2d":n.TEXTURE_2D,cube:n.TEXTURE_CUBE_MAP,"1d":null,"3d":n?.TEXTURE_3D||null,"2d-array":n?.TEXTURE_2D_ARRAY||null,"cube-array":n?.TEXTURE_CUBE_MAP_ARRAY||null}}function Z$(n){n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));const e=n.length;for(let t=0;t<e;t+=4){const r=n[t+3];if(r!==0){const i=255.001/r;n[t]=n[t]*i+.5,n[t+1]=n[t+1]*i+.5,n[t+2]=n[t+2]*i+.5}}}const Q$=4;class I2{constructor(e){this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._managedTextures=new Br({renderer:e,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"glTexture"});const t={image:O2,buffer:T4,video:R4,compressed:A4};this._uploads={...t,cube:M4(t)}}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=k4(e,this._renderer.context.extensions),this._mapFormatToType=O4(e),this._mapFormatToFormat=D4(e),this._mapViewDimensionToGlTarget=I4(e)),this._managedTextures.removeAll(!0),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(we.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){const r=e.source;e?(this.bindSource(r,t),this._useSeparateSamplers&&this._bindSampler(r.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){const r=this._gl;if(e._gcLastUsed=this._renderer.gc.now,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=we.EMPTY.source);const i=this.getGlSource(e);r.bindTexture(i.target,i.texture)}}_bindSampler(e,t=0){const r=this._gl;if(!e){this._boundSamplers[t]=null,r.bindSampler(t,null);return}const i=this._getGlSampler(e);this._boundSamplers[t]!==i&&(this._boundSamplers[t]=i,r.bindSampler(t,i))}unbind(e){const t=e.source,r=this._boundTextures,i=this._gl;for(let s=0;s<r.length;s++)if(r[s]===t){this._activateLocation(s);const a=this.getGlSource(t);i.bindTexture(a.target,null),r[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){const t=this._gl,r=new k2(t.createTexture());if(r.type=this._mapFormatToType[e.format],r.internalFormat=this._mapFormatToInternalFormat[e.format],r.format=this._mapFormatToFormat[e.format],r.target=this._mapViewDimensionToGlTarget[e.viewDimension],r.target===null)throw new Error(`Unsupported view dimension: ${e.viewDimension} with this webgl version: ${this._renderer.context.webGLVersion}`);if(e.uploadMethodId==="cube"&&(r.target=t.TEXTURE_CUBE_MAP),e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){const s=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(s))+1}return e._gpuData[this._renderer.uid]=r,this._managedTextures.add(e)&&(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("updateMipmaps",this.onUpdateMipmaps,this)),this.onSourceUpdate(e),this.updateStyle(e,!1),r}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){const r=this._gl,i=this.getGlSource(e);r.bindTexture(i.target,i.texture),this._boundTextures[this._activeTextureLocation]=e,uS(e.style,r,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.target,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e,t=!1){const r=e._gpuData[this._renderer.uid];r&&(t||(this.unbind(e),this._gl.deleteTexture(r.texture)),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this))}onSourceUpdate(e){const t=this._gl,r=this.getGlSource(e);t.bindTexture(r.target,r.texture),this._boundTextures[this._activeTextureLocation]=e;const i=e.alphaMode==="premultiply-alpha-on-upload";if(this._premultiplyAlpha!==i&&(this._premultiplyAlpha=i,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i)),this._uploads[e.uploadMethodId])this._uploads[e.uploadMethodId].upload(e,r,t,this._renderer.context.webGLVersion);else if(r.target===t.TEXTURE_2D)this._initEmptyTexture2D(r,e);else if(r.target===t.TEXTURE_2D_ARRAY)this._initEmptyTexture2DArray(r,e);else if(r.target===t.TEXTURE_CUBE_MAP)this._initEmptyTextureCube(r,e);else throw new Error("[GlTextureSystem] Unsupported texture target for empty allocation.");this._applyMipRange(r,e),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);const r=this.getGlSource(e);this._gl.generateMipmap(r.target)}_initEmptyTexture2D(e,t){const r=this._gl;r.texImage2D(r.TEXTURE_2D,0,e.internalFormat,t.pixelWidth,t.pixelHeight,0,e.format,e.type,null);let i=Math.max(t.pixelWidth>>1,1),s=Math.max(t.pixelHeight>>1,1);for(let a=1;a<t.mipLevelCount;a++)r.texImage2D(r.TEXTURE_2D,a,e.internalFormat,i,s,0,e.format,e.type,null),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}_initEmptyTexture2DArray(e,t){if(this._renderer.context.webGLVersion!==2)throw new Error("[GlTextureSystem] TEXTURE_2D_ARRAY requires WebGL2.");const r=this._gl,i=Math.max(t.arrayLayerCount|0,1);r.texImage3D(r.TEXTURE_2D_ARRAY,0,e.internalFormat,t.pixelWidth,t.pixelHeight,i,0,e.format,e.type,null);let s=Math.max(t.pixelWidth>>1,1),a=Math.max(t.pixelHeight>>1,1);for(let l=1;l<t.mipLevelCount;l++)r.texImage3D(r.TEXTURE_2D_ARRAY,l,e.internalFormat,s,a,i,0,e.format,e.type,null),s=Math.max(s>>1,1),a=Math.max(a>>1,1)}_initEmptyTextureCube(e,t){const r=this._gl,i=6;for(let l=0;l<i;l++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,e.internalFormat,t.pixelWidth,t.pixelHeight,0,e.format,e.type,null);let s=Math.max(t.pixelWidth>>1,1),a=Math.max(t.pixelHeight>>1,1);for(let l=1;l<t.mipLevelCount;l++){for(let c=0;c<i;c++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+c,l,e.internalFormat,s,a,0,e.format,e.type,null);s=Math.max(s>>1,1),a=Math.max(a>>1,1)}}_applyMipRange(e,t){if(this._renderer.context.webGLVersion!==2)return;const r=this._gl,i=Math.max((t.mipLevelCount|0)-1,0);r.texParameteri(e.target,r.TEXTURE_BASE_LEVEL,0),r.texParameteri(e.target,r.TEXTURE_MAX_LEVEL,i)}_initSampler(e){const t=this._gl,r=this._gl.createSampler();return this._glSamplers[e._resourceId]=r,uS(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",r,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this._initSource(e)}generateCanvas(e){const{pixels:t,width:r,height:i}=this.getPixels(e),s=je.get().createCanvas();s.width=r,s.height=i;const a=s.getContext("2d");if(a){const l=a.createImageData(r,i);l.data.set(t),a.putImageData(l,0,0)}return s}getPixels(e){const t=e.source.resolution,r=e.frame,i=Math.max(Math.round(r.width*t),1),s=Math.max(Math.round(r.height*t),1),a=new Uint8Array(Q$*i*s),l=this._renderer,c=l.renderTarget.getRenderTarget(e),h=l.renderTarget.getGpuRenderTarget(c),d=l.gl;return d.bindFramebuffer(d.FRAMEBUFFER,h.resolveTargetFramebuffer),d.readPixels(Math.round(r.x*t),Math.round(r.y*t),i,s,d.RGBA,d.UNSIGNED_BYTE,a),{pixels:new Uint8ClampedArray(a.buffer),width:i,height:s}}destroy(){this._managedTextures.destroy(),this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(we.EMPTY.source),this._boundSamplers=Object.create(null);const e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}I2.extension={type:[q.WebGLSystem],name:"texture"};class N2{contextChange(e){const t=new zn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),r=e.limits.maxBatchableTextures,i=Sc({name:"graphics",bits:[fy,my(r),wy,wc]});this.shader=new Ii({glProgram:i,resources:{localUniforms:t,batchSamplers:gy(r)}})}execute(e,t){const r=t.context,i=r.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:l,instructions:c}=a.getContextRenderData(r);i.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(i),s.geometry.bind(l.geometry,i.glProgram);const h=c.instructions;for(let d=0;d<c.instructionSize;d++){const p=h[d];if(p.size){for(let g=0;g<p.textures.count;g++)s.texture.bind(p.textures.textures[g],g);s.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}N2.extension={type:[q.WebGLPipesAdaptor],name:"graphics"};class L2{init(){const e=Sc({name:"mesh",bits:[wy,wU,wc]});this._shader=new Ii({glProgram:e,resources:{uTexture:we.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Ce}}}})}execute(e,t){const r=e.renderer;let i=t._shader;if(i){if(!i.glProgram){Ue("Mesh shader has no glProgram",t.shader);return}}else{i=this._shader;const s=t.texture,a=s.source;i.resources.uTexture=a,i.resources.uSampler=a.style,i.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}i.groups[100]=r.globalUniforms.bindGroup,i.groups[101]=e.localUniformsBindGroup,r.encoder.draw({geometry:t._geometry,shader:i,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}}L2.extension={type:[q.WebGLPipesAdaptor],name:"mesh"};const J$=[...Vy,A2,s4,e4,v2,p2,I2,M2,y2,D2,B2,x2,C4,S2,b2],eq=[...h2],tq=[zE,L2,N2],N4=[],L4=[],F4=[];ze.handleByNamedList(q.WebGLSystem,N4);ze.handleByNamedList(q.WebGLPipes,L4);ze.handleByNamedList(q.WebGLPipesAdaptor,F4);ze.add(...J$,...eq,...tq);class U4 extends xc{constructor(){const e={name:"webgl",type:xr.WEBGL,systems:N4,renderPipes:L4,renderPipeAdaptors:F4};super(e)}}const nq=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:U4},Symbol.toStringTag,{value:"Module"}));class F2{constructor(e){this._hash=Object.create(null),this._renderer=e}contextChange(e){this._gpu=e}getBindGroup(e,t,r){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,r)}_createBindGroup(e,t,r){const i=this._gpu.device,s=t.layout[r],a=[],l=this._renderer;for(const d in s){const p=e.resources[d]??e.resources[s[d]];let g;if(p._resourceType==="uniformGroup"){const y=p;l.ubo.updateUniformGroup(y);const _=y.buffer;g={buffer:l.buffer.getGPUBuffer(_),offset:0,size:_.descriptor.size}}else if(p._resourceType==="buffer"){const y=p;g={buffer:l.buffer.getGPUBuffer(y),offset:0,size:y.descriptor.size}}else if(p._resourceType==="bufferResource"){const y=p;g={buffer:l.buffer.getGPUBuffer(y.buffer),offset:y.offset,size:y.size}}else if(p._resourceType==="textureSampler"){const y=p;g=l.texture.getGpuSampler(y)}else if(p._resourceType==="textureSource"){const y=p;g=l.texture.getTextureView(y)}a.push({binding:s[d],resource:g})}const c=l.shader.getProgramData(t).bindGroups[r],h=i.createBindGroup({layout:c,entries:a});return this._hash[e._key]=h,h}destroy(){this._hash=null,this._renderer=null}}F2.extension={type:[q.WebGPUSystem],name:"bindGroup"};class G4{constructor(e){this.gpuBuffer=e}destroy(){this.gpuBuffer.destroy(),this.gpuBuffer=null}}class U2{constructor(e){this._renderer=e,this._managedBuffers=new Br({renderer:e,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"gpuBuffer"})}contextChange(e){this._gpu=e}getGPUBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuBuffer||this.createGPUBuffer(e)}updateBuffer(e){const t=this.getGPUBuffer(e),r=e.data;return e._updateID&&r&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,r.buffer,0,(e._updateSize||r.byteLength)+3&-4)),t}destroyAll(){this._managedBuffers.removeAll()}onBufferUnload(e){e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this)}createGPUBuffer(e){const t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e._resourceId=Zt("resource"),e.data&&(gg(e.data.buffer,t.getMappedRange(),e.data.byteOffset,e.data.byteLength),t.unmap()),e._gpuData[this._renderer.uid]=new G4(t),this._managedBuffers.add(e)&&(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this)),t}onBufferChange(e){this._managedBuffers.remove(e),e._updateID=0,this.createGPUBuffer(e)}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gpu=null}}U2.extension={type:[q.WebGPUSystem],name:"buffer"};class z4{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);const t=this.byteIndex;let r=t+e*4;if(r=Math.ceil(r/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,r>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=r,t}addGroup(e){const t=this.addEmptyGroup(e.length);for(let r=0;r<e.length;r++)this.data[t/4+r]=e[r];return t}destroy(){this.data=null}}class G2{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}}G2.extension={type:[q.WebGPUSystem],name:"colorMask"};class Wy{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=(e.gpu?Promise.resolve(e.gpu):this._createDeviceAndAdaptor(e)).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){const t=await je.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),r=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>t.features.has(s)),i=await t.requestDevice({requiredFeatures:r});return{adapter:t,device:i}}destroy(){this.gpu=null,this._renderer=null}}Wy.extension={type:[q.WebGPUSystem],name:"device"};Wy.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class z2{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,r,i){const s=this._renderer.pipeline.getPipeline(e,t,r,i);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;const t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,r){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.gc.now,this._renderer.tick);const i=this._renderer.bindGroup.getBindGroup(t,r,e);this.renderPassEncoder.setBindGroup(e,i)}setGeometry(e,t){const r=this._renderer.pipeline.getBufferNamesToBind(e,t);for(const i in r)this._setVertexBuffer(parseInt(i,10),e.attributes[r[i]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(const r in e.groups){const i=e.groups[r];t||this._syncBindGroup(i),this.setBindGroup(r,i,e.gpuProgram)}}_syncBindGroup(e){for(const t in e.resources){const r=e.resources[t];r.isUniformGroup&&this._renderer.ubo.updateUniformGroup(r)}}draw(e){const{geometry:t,shader:r,state:i,topology:s,size:a,start:l,instanceCount:c,skipSync:h}=e;this.setPipelineFromGeometryProgramAndState(t,r.gpuProgram,i,s),this.setGeometry(t,r.gpuProgram),this._setShaderBindGroups(r,h),t.indexBuffer?this.renderPassEncoder.drawIndexed(a||t.indexBuffer.data.length,c??t.instanceCount,l||0):this.renderPassEncoder.draw(a||t.getSize(),c??t.instanceCount,l||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1],this._renderer.renderTarget.mipLevel,this._renderer.renderTarget.layer);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);const t=this._boundPipeline,r={...this._boundVertexBuffer},i=this._boundIndexBuffer,s={...this._boundBindGroup};this._clearCache();const a=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(a.x,a.y,a.width,a.height,0,1),this.setPipeline(t);for(const l in r)this._setVertexBuffer(l,r[l]);for(const l in s)this.setBindGroup(l,s[l],null);this._setIndexBuffer(i)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}}z2.extension={type:[q.WebGPUSystem],name:"encoder",priority:1};class V2{constructor(e){this._renderer=e}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}V2.extension={type:[q.WebGPUSystem],name:"limits"};class H2{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:kn.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){const r=this._renderTargetStencilState[this._activeRenderTarget.uid];r.stencilMode=e,r.stencilReference=t;const i=this._renderer;i.pipeline.setStencilMode(e),i.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}H2.extension={type:[q.WebGPUSystem],name:"stencil"};const yd={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function V4(n){const e=n.map(r=>({data:r,offset:0,size:0}));let t=0;for(let r=0;r<e.length;r++){const i=e[r];let s=yd[i.data.type].size;const a=yd[i.data.type].align;if(!yd[i.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${i.data.type}`);i.data.size>1&&(s=Math.max(s,a)*i.data.size),t=Math.ceil(t/a)*a,i.size=s,i.offset=t,t+=s}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function H4(n,e){const{size:t,align:r}=yd[n.data.type],i=(r-t)/4,s=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${n.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${n.data.size*(t/4)}; i++)
         {
             for(var j = 0; j < ${t/4}; j++)
             {
                 ${s}[arrayOffset++] = v[t++];
             }
             ${i!==0?`arrayOffset += ${i};`:""}
         }
     `}function j4(n){return C2(n,"uboWgsl",H4,l4)}class j2 extends E2{constructor(){super({createUboElements:V4,generateUboSync:j4})}}j2.extension={type:[q.WebGPUSystem],name:"ubo"};const lo=128;class X2{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._batchBuffer=new z4({minUniformOffsetAlignment:lo});const t=256/lo;for(let r=0;r<t;r++){let i=Mt.UNIFORM|Mt.COPY_DST;r===0&&(i|=Mt.COPY_SRC),this._buffers.push(new hi({data:this._batchBuffer.data,usage:i}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){this._bindGroupHash=Object.create(null),this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);const r=e.buffer.data,i=this._batchBuffer.addEmptyGroup(r.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,i/4),this._bindGroupHash[e.uid]=this._getBindGroup(i/lo),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);const t=e.buffer.data,r=this._batchBuffer.addGroup(t);return this._getBufferResource(r/lo)}getArrayBindGroup(e){const t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/lo)}getArrayBufferResource(e){const r=this._batchBuffer.addGroup(e)/lo;return this._getBufferResource(r)}_getBufferResource(e){if(!this._bufferResources[e]){const t=this._buffers[e%2];this._bufferResources[e]=new Xy({buffer:t,offset:(e/2|0)*256,size:lo})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){const t=new js({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){const e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);const r=this._renderer.gpu.device.createCommandEncoder();for(let i=1;i<this._buffers.length;i++){const s=this._buffers[i];r.copyBufferToBuffer(e.getGPUBuffer(t),lo,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([r.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._renderer=null}}X2.extension={type:[q.WebGPUPipes],name:"uniformBatch"};const rq={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function iq(n,e,t,r,i){return n<<24|e<<16|t<<10|r<<5|i}function sq(n,e,t,r,i){return t<<8|n<<5|r<<3|i<<1|e}class W2{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._colorTargetCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(kn.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._colorTargetCount=e.colorTargetCount,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=Da[e],this._updatePipeHash())}setPipeline(e,t,r,i){const s=this.getPipeline(e,t,r);i.setPipeline(s)}getPipeline(e,t,r,i){e._layoutKey||(g2(e,t.attributeData),this._generateBufferKey(e)),i||(i=e.topology);const s=iq(e._layoutKey,t._layoutKey,r.data,r._blendModeId,rq[i]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,t,r,i),this._pipeCache[s])}_createPipeline(e,t,r,i){const s=this._gpu.device,a=this._createVertexBufferLayouts(e,t),l=this._renderer.state.getColorTargets(r,this._colorTargetCount),c=this._stencilMode===kn.RENDERING_MASK_ADD?0:this._colorMask;for(let g=0;g<l.length;g++)l[g].writeMask=c;const h=this._renderer.shader.getProgramData(t).pipeline,d={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:a},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:l},primitive:{topology:i,cullMode:r.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(d.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:r.depthTest,depthCompare:r.depthTest?"less":"always"}),s.createRenderPipeline(d)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){const t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){const t=[];let r=0;const i=Object.keys(e.attributes).sort();for(let a=0;a<i.length;a++){const l=e.attributes[i[a]];t[r++]=l.offset,t[r++]=l.format,t[r++]=l.stride,t[r++]=l.instance}const s=t.join("|");return e._layoutKey=oc(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){const t=[];let r=0;const i=Object.keys(e.attributeData).sort();for(let a=0;a<i.length;a++){const l=e.attributeData[i[a]];t[r++]=l.location}const s=t.join("|");return e._attributeLocationsKey=oc(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){const r=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[r])return this._bindingNamesCache[r];const i=this._createVertexBufferLayouts(e,t),s=Object.create(null),a=t.attributeData;for(let l=0;l<i.length;l++){const h=Object.values(i[l].attributes)[0].shaderLocation;for(const d in a)if(a[d].location===h){s[l]=d;break}}return this._bindingNamesCache[r]=s,s}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);const r=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[r])return this._bufferLayoutsCache[r];const i=[];return e.buffers.forEach(s=>{const a={arrayStride:0,stepMode:"vertex",attributes:[]},l=a.attributes;for(const c in t.attributeData){const h=e.attributes[c];(h.divisor??1)!==1&&Ue(`Attribute ${c} has an invalid divisor value of '${h.divisor}'. WebGPU only supports a divisor value of 1`),h.buffer===s&&(a.arrayStride=h.stride,a.stepMode=h.instance?"instance":"vertex",l.push({shaderLocation:t.attributeData[c].location,offset:h.offset,format:h.format}))}l.length&&i.push(a)}),this._bufferLayoutsCache[r]=i,i}_updatePipeHash(){const e=sq(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment,this._colorTargetCount);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}W2.extension={type:[q.WebGPUSystem],name:"pipeline"};class X4{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class W4{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,r,i,s){const a=this._renderer,l=this._getGpuColorTexture(e),c=a.texture.getGpuSource(t.source);return a.encoder.commandEncoder.copyTextureToTexture({texture:l,origin:r},{texture:c,origin:s},i),t}startRenderPass(e,t=!0,r,i,s=0,a=0){const c=this._renderTargetSystem.getGpuRenderTarget(e);if(a!==0&&c.msaaTextures?.length)throw new Error("[RenderTargetSystem] Rendering to array layers is not supported with MSAA render targets.");if(s>0&&c.msaaTextures?.length)throw new Error("[RenderTargetSystem] Rendering to mip levels is not supported with MSAA render targets.");const h=this.getDescriptor(e,t,r,s,a);c.descriptor=h,this._renderer.pipeline.setRenderTarget(c),this._renderer.encoder.beginRenderPass(c),this._renderer.encoder.setViewport(i)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,r,i=0,s=0){typeof t=="boolean"&&(t=t?ui.ALL:ui.NONE);const a=this._renderTargetSystem,l=a.getGpuRenderTarget(e),c=e.colorTextures.map((p,g)=>{const y=l.contexts[g];let _,S;if(y){if(s!==0)throw new Error("[RenderTargetSystem] Rendering to array layers is not supported for canvas targets.");_=y.getCurrentTexture().createView()}else _=this._renderer.texture.getGpuSource(p).createView({dimension:"2d",baseMipLevel:i,mipLevelCount:1,baseArrayLayer:s,arrayLayerCount:1});l.msaaTextures[g]&&(S=_,_=this._renderer.texture.getTextureView(l.msaaTextures[g]));const x=t&ui.COLOR?"clear":"load";return r??(r=a.defaultClearColor),{view:_,resolveTarget:S,clearValue:r,storeOp:"store",loadOp:x}});let h;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=l.msaa?4:1),e.depthStencilTexture){const p=t&ui.STENCIL?"clear":"load",g=t&ui.DEPTH?"clear":"load";h={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView({dimension:"2d",baseMipLevel:i,mipLevelCount:1,baseArrayLayer:s,arrayLayerCount:1}),stencilStoreOp:"store",stencilLoadOp:p,depthClearValue:1,depthLoadOp:g,depthStoreOp:"store"}}return{colorAttachments:c,depthStencilAttachment:h}}clear(e,t=!0,r,i,s=0,a=0){if(!t)return;const{gpu:l,encoder:c}=this._renderer,h=l.device;if(c.commandEncoder===null){const p=h.createCommandEncoder(),g=this.getDescriptor(e,t,r,s,a),y=p.beginRenderPass(g);y.setViewport(i.x,i.y,i.width,i.height,0,1),y.end();const _=p.finish();h.queue.submit([_])}else this.startRenderPass(e,t,r,i,s,a)}initGpuRenderTarget(e){e.isRoot=!0;const t=new X4;return t.colorTargetCount=e.colorTextures.length,e.colorTextures.forEach((r,i)=>{if(r instanceof ms){const s=r.resource.getContext("webgpu"),a=r.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:a})}catch(l){console.error(l)}t.contexts[i]=s}if(t.msaa=r.source.antialias,r.source.antialias){const s=new yn({width:0,height:0,sampleCount:4,arrayLayerCount:r.source.arrayLayerCount});t.msaaTextures[i]=s}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((r,i)=>{t.msaaTextures[i]?.resize(r.source.width,r.source.height,r.source._resolution)})}}class $2 extends Hy{constructor(e){super(e),this.adaptor=new W4,this.adaptor.init(e,this)}}$2.extension={type:[q.WebGPUSystem],name:"renderTarget"};class q2{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){const t=this._gpu.device,r=e.gpuLayout.map(s=>t.createBindGroupLayout({entries:s})),i={bindGroupLayouts:r};return this._gpuProgramData[e._layoutKey]={bindGroups:r,pipeline:t.createPipelineLayout(i)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}q2.extension={type:[q.WebGPUSystem],name:"shader"};const Hr={};Hr.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};Hr.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};Hr.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};Hr.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Hr.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Hr.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};Hr["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};Hr["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};Hr["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};Hr.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};Hr.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};Hr.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class Y2{constructor(){this.defaultState=new pi,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e,t){const r=Hr[e.blendMode]||Hr.normal,i=[],s={format:"bgra8unorm",writeMask:0,blend:r};for(let a=0;a<t;a++)i[a]=s;return i}destroy(){this.gpu=null}}Y2.extension={type:[q.WebGPUSystem],name:"state"};const $4={type:"image",upload(n,e,t,r=0){const i=n.resource,s=(n.pixelWidth|0)*(n.pixelHeight|0),a=i.byteLength/s;t.device.queue.writeTexture({texture:e,origin:{x:0,y:0,z:r}},i,{offset:0,rowsPerImage:n.pixelHeight,bytesPerRow:n.pixelWidth*a},{width:n.pixelWidth,height:n.pixelHeight,depthOrArrayLayers:1})}},K2={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},aq={blockBytes:4,blockWidth:1,blockHeight:1},q4={type:"compressed",upload(n,e,t,r=0){let i=n.pixelWidth,s=n.pixelHeight;const a=K2[n.format]||aq;for(let l=0;l<n.resource.length;l++){const c=n.resource[l],h=Math.ceil(i/a.blockWidth)*a.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:l,origin:{x:0,y:0,z:r}},c,{offset:0,bytesPerRow:h},{width:Math.ceil(i/a.blockWidth)*a.blockWidth,height:Math.ceil(s/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},qP=["right","left","top","bottom","front","back"];function Y4(n){return{type:"cube",upload(e,t,r){const i=e.faces;for(let s=0;s<qP.length;s++){const a=qP[s],l=i[a];(n[l.uploadMethodId]||n.image).upload(l,t,r,s)}}}}const Z2={type:"image",upload(n,e,t,r=0){const i=n.resource;if(!i)return;if(globalThis.HTMLImageElement&&i instanceof HTMLImageElement){const c=je.get().createCanvas(i.width,i.height);c.getContext("2d").drawImage(i,0,0,i.width,i.height),n.resource=c,Ue("ImageSource: Image element passed, converting to canvas and replacing resource.")}const s=Math.min(e.width,n.resourceWidth||n.pixelWidth),a=Math.min(e.height,n.resourceHeight||n.pixelHeight),l=n.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:i},{texture:e,origin:{x:0,y:0,z:r},premultipliedAlpha:l},{width:s,height:a})}},K4={type:"video",upload(n,e,t,r){Z2.upload(n,e,t,r)}};class Z4{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){const t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let r=e;const i=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){const c={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};r=this.device.createTexture(c)}const a=this.device.createCommandEncoder({}),l=t.getBindGroupLayout(0);for(let c=0;c<i;++c){let h=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:c,arrayLayerCount:1}),d=s?1:0;for(let p=1;p<e.mipLevelCount;++p){const g=r.createView({baseMipLevel:d++,mipLevelCount:1,dimension:"2d",baseArrayLayer:c,arrayLayerCount:1}),y=a.beginRenderPass({colorAttachments:[{view:g,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),_=this.device.createBindGroup({layout:l,entries:[{binding:0,resource:this.sampler},{binding:1,resource:h}]});y.setPipeline(t),y.setBindGroup(0,_),y.draw(3,1,0,0),y.end(),h=g}}if(!s){const c={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i};for(let h=1;h<e.mipLevelCount;++h)a.copyTextureToTexture({texture:r,mipLevel:h-1},{texture:e,mipLevel:h},c),c.width=Math.ceil(c.width/2),c.height=Math.ceil(c.height/2)}return this.device.queue.submit([a.finish()]),s||r.destroy(),e}}class Q2{constructor(e){this.textureView=null,this.gpuTexture=e}destroy(){this.gpuTexture.destroy(),this.textureView=null,this.gpuTexture=null}}class J2{constructor(e){this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._renderer=e,e.gc.addCollection(this,"_bindGroupHash","hash"),this._managedTextures=new Br({renderer:e,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"gpuTextureSource"});const t={image:Z2,buffer:$4,video:K4,compressed:q4};this._uploads={...t,cube:Y4(t)}}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gpu=e}initSource(e){return e._gpuData[this._renderer.uid]?.gpuTexture||this._initSource(e)}_initSource(e){if(e.autoGenerateMipmaps){const h=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(h))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);const r=K2[e.format]||{blockWidth:1,blockHeight:1},i=Math.ceil(e.pixelWidth/r.blockWidth)*r.blockWidth,s=Math.ceil(e.pixelHeight/r.blockHeight)*r.blockHeight,a={label:e.label,size:{width:i,height:s,depthOrArrayLayers:e.arrayLayerCount},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},l=this._gpu.device.createTexture(a);return e._gpuData[this._renderer.uid]=new Q2(l),this._managedTextures.add(e)&&(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("updateMipmaps",this.onUpdateMipmaps,this)),this.onSourceUpdate(e),l}onSourceUpdate(e){const t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new Z4(this._gpu.device));const t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceUnload(e){e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this)}onSourceResize(e){e._gcLastUsed=this._renderer.gc.now;const t=e._gpuData[this._renderer.uid],r=t?.gpuTexture;r?(r.width!==e.pixelWidth||r.height!==e.pixelHeight)&&(t.destroy(),this._bindGroupHash[e.uid]=null,e._gpuData[this._renderer.uid]=null,this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuTexture||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]||this._createTextureBindGroup(e)}_createTextureBindGroup(e){const t=e.source;return this._bindGroupHash[e.uid]=new js({0:t,1:t.style,2:new zn({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){const t=e.source;t._gcLastUsed=this._renderer.gc.now;let r=t._gpuData[this._renderer.uid];return r||(this.initSource(t),r=t._gpuData[this._renderer.uid]),r.textureView||(r.textureView=r.gpuTexture.createView({dimension:t.viewDimension})),r.textureView}generateCanvas(e){const t=this._renderer,r=t.gpu.device.createCommandEncoder(),i=je.get().createCanvas();i.width=e.source.pixelWidth,i.height=e.source.pixelHeight;const s=i.getContext("webgpu");return s.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:je.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),r.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:i.width,height:i.height}),t.gpu.device.queue.submit([r.finish()]),i}getPixels(e){const t=this.generateCanvas(e),r=Ss.getOptimalCanvasAndContext(t.width,t.height),i=r.context;i.drawImage(t,0,0);const{width:s,height:a}=t,l=i.getImageData(0,0,s,a),c=new Uint8ClampedArray(l.data.buffer);return Ss.returnCanvasAndContext(r),{pixels:c,width:s,height:a}}destroy(){this._managedTextures.destroy();for(const e of Object.keys(this._bindGroupHash)){const t=Number(e);this._bindGroupHash[t]?.destroy()}this._renderer=null,this._gpu=null,this._mipmapGenerator=null,this._gpuSamplers=null,this._bindGroupHash=null}}J2.extension={type:[q.WebGPUSystem],name:"texture"};class ew{constructor(){this._maxTextures=0}contextChange(e){const t=new zn({uTransformMatrix:{value:new Ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=e.limits.maxBatchableTextures;const r=vc({name:"graphics",bits:[dy,py(this._maxTextures),AF,Ec]});this.shader=new Ii({gpuProgram:r,resources:{localUniforms:t}})}execute(e,t){const r=t.context,i=r.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:l,instructions:c}=a.getContextRenderData(r),h=s.encoder;h.setGeometry(l.geometry,i.gpuProgram);const d=s.globalUniforms.bindGroup;h.setBindGroup(0,d,i.gpuProgram);const p=s.renderPipes.uniformBatch.getUniformBindGroup(i.resources.localUniforms,!0);h.setBindGroup(2,p,i.gpuProgram);const g=c.instructions;let y=null;for(let _=0;_<c.instructionSize;_++){const S=g[_];if(S.topology!==y&&(y=S.topology,h.setPipelineFromGeometryProgramAndState(l.geometry,i.gpuProgram,e.state,S.topology)),i.groups[1]=S.bindGroup,!S.gpuBindGroup){const x=S.textures;S.bindGroup=hy(x.textures,x.count,this._maxTextures),S.gpuBindGroup=s.bindGroup.getBindGroup(S.bindGroup,i.gpuProgram,1)}h.setBindGroup(1,S.bindGroup,i.gpuProgram),h.renderPassEncoder.drawIndexed(S.size,1,S.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}ew.extension={type:[q.WebGPUPipesAdaptor],name:"graphics"};class tw{init(){const e=vc({name:"mesh",bits:[Ju,EU,Ec]});this._shader=new Ii({gpuProgram:e,resources:{uTexture:we.EMPTY._source,uSampler:we.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Ce}}}})}execute(e,t){const r=e.renderer;let i=t._shader;if(!i)i=this._shader,i.groups[2]=r.texture.getTextureBindGroup(t.texture);else if(!i.gpuProgram){Ue("Mesh shader has no gpuProgram",t.shader);return}const s=i.gpuProgram;if(s.autoAssignGlobalUniforms&&(i.groups[0]=r.globalUniforms.bindGroup),s.autoAssignLocalUniforms){const a=e.localUniforms;i.groups[1]=r.renderPipes.uniformBatch.getUniformBindGroup(a,!0)}r.encoder.draw({geometry:t._geometry,shader:i,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}}tw.extension={type:[q.WebGPUPipesAdaptor],name:"mesh"};const oq=[...Vy,j2,z2,Wy,V2,U2,J2,$2,q2,Y2,W2,G2,H2,F2],lq=[...h2,X2],uq=[VE,tw,ew],Q4=[],J4=[],e5=[];ze.handleByNamedList(q.WebGPUSystem,Q4);ze.handleByNamedList(q.WebGPUPipes,J4);ze.handleByNamedList(q.WebGPUPipesAdaptor,e5);ze.add(...oq,...lq,...uq);class t5 extends xc{constructor(){const e={name:"webgpu",type:xr.WEBGPU,systems:Q4,renderPipes:J4,renderPipeAdaptors:e5};super(e)}}const cq=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:t5},Symbol.toStringTag,{value:"Module"})),YP={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},hq=new Proxy(YP,{get(n,e){return Ae(nt,`DRAW_MODES.${e} is deprecated, use '${YP[e]}' instead`),n[e]}});var Tg=(n=>(n.CLAMP="clamp-to-edge",n.REPEAT="repeat",n.MIRRORED_REPEAT="mirror-repeat",n))(Tg||{});const dq=new Proxy(Tg,{get(n,e){return Ae(nt,`DRAW_MODES.${e} is deprecated, use '${Tg[e]}' instead`),n[e]}});var Ag=(n=>(n.NEAREST="nearest",n.LINEAR="linear",n))(Ag||{});const fq=new Proxy(Ag,{get(n,e){return Ae(nt,`DRAW_MODES.${e} is deprecated, use '${Ag[e]}' instead`),n[e]}});class pc extends yn{constructor(e){const{faces:t,...r}=e;pc._validateFaces(t);const i=t.right,s=i.resolution,a=i.format,l=i.alphaMode,c=["resolution","format","alphaMode","dimensions","viewDimension"].filter(h=>r[h]!==void 0);c.length&&Ue(`[CubeTextureSource] Ignoring option(s) [${c.join(", ")}]; these are derived from face sources.`),super({...r,resource:t,width:i.width,height:i.height,dimensions:"2d",viewDimension:"cube",arrayLayerCount:6,resolution:s,format:a,alphaMode:l}),this.uploadMethodId="cube",this.faces=t;for(const h of Object.keys(t)){const d=t[h];d.on("update",this._onFaceUpdate,this),d.on("resize",this._onFaceResize,this),d.on("unload",this._onFaceUpdate,this)}}destroy(){const e=this.faces;if(e)for(const t of Object.keys(e)){const r=e[t];r.off("update",this._onFaceUpdate,this),r.off("resize",this._onFaceResize,this),r.off("unload",this._onFaceUpdate,this)}super.destroy()}_onFaceUpdate(){this.emit("update",this)}_onFaceResize(e){pc._validateFaces(this.faces),this.resize(e.width,e.height,e.resolution)}static _validateFaces(e){if(!e.right||!e.left||!e.top||!e.bottom||!e.front||!e.back)throw new Error("[CubeTextureSource] Requires { left, right, top, bottom, front, back } faces.");const t=e.right,r=t.pixelWidth,i=t.pixelHeight,s=t.format,a=t.alphaMode,l=t.resolution;for(const c of Object.keys(e)){const h=e[c];if(h.pixelWidth!==r||h.pixelHeight!==i)throw new Error(`[CubeTextureSource] Face '${String(c)}' has a different size. All faces must match.`);if(h.format!==s)throw new Error(`[CubeTextureSource] Face '${String(c)}' has a different format. All faces must match.`);if(h.alphaMode!==a)throw new Error(`[CubeTextureSource] Face '${String(c)}' has a different alphaMode. All faces must match.`);if(h.resolution!==l)throw new Error(`[CubeTextureSource] Face '${String(c)}' has a different resolution. All faces must match.`)}}}const cS=["left","right","top","bottom","front","back"];function pq(n,e){const t=e?{...e}:{};delete t.label;const r=Object.keys(t).sort(),i=r.length?`|${r.map(a=>`${a}=${String(t[a])}`).join("&")}`:"";return`cube:${cS.map(a=>n[a]).join(",")}${i}`}class Mg extends hr{constructor(e){super(),this.uid=Zt("cubeTexture"),this.destroyed=!1;const{label:t,source:r}=e;this.label=t,this.source=r,this.source.label=this.label??this.source.label}static from(e,t=!1){if(e instanceof pc)return new Mg({source:e});const{faces:r,...i}=e;let s=null;const a=cS.every(d=>typeof r[d]=="string");if(!t&&a&&(s=pq(r,i),At.has(s)))return At.get(s);const l=d=>d.isTexture?d:we.from(d),c={};for(const d of cS)c[d]=l(r[d]).source;const h=new Mg({source:new pc({...i,faces:c}),label:i.label});return s&&(At.set(s,h),h.once("destroy",()=>{At.has(s)&&At.remove(s)})),h}destroy(e=!1){this.destroyed||(this.destroyed=!0,e&&this.source.destroy(),this.emit("destroy",this),this.removeAllListeners())}}const sx=Object.create(null),ax=Object.create(null);function mq(n){var e;if(n.type===xr.WEBGPU)return ax[e=n.uid]||(ax[e]=n.gpu.device.createTexture({label:"ExternalSource placeholder",size:{width:1,height:1},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST})),ax[n.uid];if(!sx[n.uid]){const t=n.gl,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),sx[n.uid]=r}return sx[n.uid]}class gq extends yn{constructor({resource:e,renderer:t,label:r,width:i,height:s}){e||(e=mq(t)),i||(i=i??e?.width??1),s||(s=s??e?.height??1),super({resource:e,width:i,height:s,label:r,autoGarbageCollect:!1}),this._renderer=t,this._initGpuData(e)}static test(e){return globalThis.GPUTexture&&e instanceof GPUTexture||globalThis.WebGLTexture&&e instanceof WebGLTexture}_validateTexture(e){const t=this._renderer,r=!!t.gpu,i=globalThis.GPUTexture&&e instanceof GPUTexture,s=globalThis.WebGLTexture&&e instanceof WebGLTexture;if(r&&s)throw new Error("Cannot use WebGLTexture with a WebGPU renderer");if(!r&&i)throw new Error("Cannot use GPUTexture with a WebGL renderer");if(!r){const a=t.gl;if(a&&!a.isTexture(e))throw new Error("WebGLTexture does not belong to this renderer's WebGL context")}}_initGpuData(e){const t=this._renderer;this._validateTexture(e),t.gpu?this._gpuData[t.uid]=new Q2(e):this._gpuData[t.uid]=new k2(e)}updateGPUTexture(e,t,r){const i=this._renderer,s=this._gpuData[i.uid];if(this.resource=e,i.gpu){this._validateTexture(e);const a=s;if(a.gpuTexture!==e){a.gpuTexture=e,a.textureView=null;const h=i.texture;h?._bindGroupHash&&(h._bindGroupHash[this.uid]=null)}const l=t??e.width,c=r??e.height;this.resize(l,c)}else{this._validateTexture(e);const a=s;a.texture=e,t!==void 0&&r!==void 0&&this.resize(t,r)}this.emit("update",this)}destroy(){const e=this._renderer;delete this._gpuData[e.uid],super.destroy()}}class yq{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const i=t.width,s=t.height;if(r){const a=e.width/2/i,l=e.height/2/s,c=e.x/i+a,h=e.y/s+l;r=Xe.add(r,Xe.NW),this.x0=c+a*Xe.uX(r),this.y0=h+l*Xe.uY(r),r=Xe.add(r,2),this.x1=c+a*Xe.uX(r),this.y1=h+l*Xe.uY(r),r=Xe.add(r,2),this.x2=c+a*Xe.uX(r),this.y2=h+l*Xe.uY(r),r=Xe.add(r,2),this.x3=c+a*Xe.uX(r),this.y3=h+l*Xe.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function _q(n){const e=n.toString(),t=e.indexOf("{"),r=e.lastIndexOf("}");if(t===-1||r===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(t+1,r).trim()}function bq(n,e){return Ae("8.7.0","Use container.getFastGlobalBounds() instead"),n.getFastGlobalBounds(!0,e)}class xq extends qs{constructor(e){typeof e=="function"&&(e={render:e});const{render:t,...r}=e;super({label:"RenderContainer",...r}),this.renderPipeId="customRender",this.batched=!1,t&&(this.render=t),this.containsPoint=e.containsPoint??(()=>!1),this.addBounds=e.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(e){}}function vq(n,e,t){Ae("8.7.0","Please use container.collectRenderables instead.");const r=t.renderPipes?t:t.batch.renderer;return n.collectRenderables(e,r,null)}function Sq(n,e){const t=e._scale,r=e._pivot,i=e._position,s=t._x,a=t._y,l=r._x,c=r._y;n.a=e._cx*s,n.b=e._sx*s,n.c=e._cy*a,n.d=e._sy*a,n.tx=i._x-(l*n.a+c*n.c),n.ty=i._y-(l*n.b+c*n.d)}function Eq(n,e,t){const r=n.a,i=n.b,s=n.c,a=n.d,l=n.tx,c=n.ty,h=e.a,d=e.b,p=e.c,g=e.d;t.a=r*h+i*p,t.b=r*d+i*g,t.c=s*h+a*p,t.d=s*d+a*g,t.tx=l*h+c*p+e.tx,t.ty=l*d+c*g+e.ty}function wq(n){n instanceof gs&&(n={path:n,textureMatrix:null,out:null});const e=[],t=[],r=[],i=n.path.shapePath,s=n.textureMatrix;i.shapePrimitives.forEach(({shape:c,transform:h})=>{const d=r.length,p=e.length/2,g=[],y=Fl[c.type];y.build(c,g),h&&_y(g,h),y.triangulate(g,e,2,p,r,d);const _=t.length/2;s?(h&&s.append(h.clone().invert()),j1(e,2,p,t,_,2,e.length/2-p,s)):X1(t,_,2,e.length/2-p)});const a=n.out;return a?(a.positions=new Float32Array(e),a.uvs=new Float32Array(t),a.indices=new Uint32Array(r),a):new Ro({positions:new Float32Array(e),uvs:new Float32Array(t),indices:new Uint32Array(r)})}const n5=class r5 extends bn{constructor(e={}){e={...r5.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let t=0;t<e.length;t++){const r=e[t];if(r.parentRenderLayer){if(r.parentRenderLayer===this)continue;r.parentRenderLayer.detach(r)}this.renderLayerChildren.push(r),r.parentRenderLayer=this;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)}return e[0]}detach(...e){for(let t=0;t<e.length;t++){const r=e[t],i=this.renderLayerChildren.indexOf(r);i!==-1&&this.renderLayerChildren.splice(i,1),r.parentRenderLayer=null;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){const e=this.renderLayerChildren;for(let t=0;t<e.length;t++)e[t].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,t,r){const i=this.renderLayerChildren,s=i.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let a=0;a<s;a++)i[a].parent||Ue("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",i[a]),i[a].collectRenderables(e,t,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,t,r){if(!e)return;const i=this.renderLayerChildren;for(let s=0;s<i.length;s++)i[s]._getGlobalBoundsRecursive(!0,t,this)}getFastGlobalBounds(e,t){return super.getFastGlobalBounds(e,t)}addChild(...e){throw new Error("RenderLayer.addChild() is not available. Please use RenderLayer.attach()")}removeChild(...e){throw new Error("RenderLayer.removeChild() is not available. Please use RenderLayer.detach()")}removeChildren(e,t){throw new Error("RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()")}removeChildAt(e){throw new Error("RenderLayer.removeChildAt() is not available")}getChildAt(e){throw new Error("RenderLayer.getChildAt() is not available")}setChildIndex(e,t){throw new Error("RenderLayer.setChildIndex() is not available")}getChildIndex(e){throw new Error("RenderLayer.getChildIndex() is not available")}addChildAt(e,t){throw new Error("RenderLayer.addChildAt() is not available")}swapChildren(e,t){throw new Error("RenderLayer.swapChildren() is not available")}reparentChild(...e){throw new Error("RenderLayer.reparentChild() is not available with the render layer")}reparentChildAt(e,t){throw new Error("RenderLayer.reparentChildAt() is not available with the render layer")}};n5.defaultOptions={sortableChildren:!1,sortFunction:(n,e)=>n.zIndex-e.zIndex};let Cq=n5;const i5=class s5 extends Ro{constructor(...e){super({});let t=e[0]??{};typeof t=="number"&&(Ae(nt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),t={width:t,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(t)}build(e){e={...s5.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const t=this.verticesX*this.verticesY,r=[],i=[],s=[],a=this.verticesX-1,l=this.verticesY-1,c=this.width/a,h=this.height/l;for(let p=0;p<t;p++){const g=p%this.verticesX,y=p/this.verticesX|0;r.push(g*c,y*h),i.push(g/a,y/l)}const d=a*l;for(let p=0;p<d;p++){const g=p%a,y=p/a|0,_=y*this.verticesX+g,S=y*this.verticesX+g+1,x=(y+1)*this.verticesX+g,E=(y+1)*this.verticesX+g+1;s.push(_,S,x,S,E,x)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};i5.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let $y=i5;function a5(n,e,t,r){const i=t.buffers[0],s=i.data,{verticesX:a,verticesY:l}=t,c=n/(a-1),h=e/(l-1);let d=0;const p=r[0],g=r[1],y=r[2],_=r[3],S=r[4],x=r[5],E=r[6],w=r[7],C=r[8];for(let A=0;A<s.length;A+=2){const P=d%a*c,M=(d/a|0)*h,I=p*P+g*M+y,V=_*P+S*M+x,O=E*P+w*M+C;s[A]=I/O,s[A+1]=V/O,d++}i.update()}function o5(n,e){const t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=e[7],d=e[8];return n[0]=a*d-l*h,n[1]=i*h-r*d,n[2]=r*l-i*a,n[3]=l*c-s*d,n[4]=t*d-i*c,n[5]=i*s-t*l,n[6]=s*h-a*c,n[7]=r*c-t*h,n[8]=t*a-r*s,n}function l5(n,e,t){const r=e[0],i=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8],g=t[0],y=t[1],_=t[2],S=t[3],x=t[4],E=t[5],w=t[6],C=t[7],A=t[8];return n[0]=g*r+y*a+_*h,n[1]=g*i+y*l+_*d,n[2]=g*s+y*c+_*p,n[3]=S*r+x*a+E*h,n[4]=S*i+x*l+E*d,n[5]=S*s+x*c+E*p,n[6]=w*r+C*a+A*h,n[7]=w*i+C*l+A*d,n[8]=w*s+C*c+A*p,n}function Tq(n,e,t){const r=t[0],i=t[1],s=t[2];return n[0]=e[0]*r+e[1]*i+e[2]*s,n[1]=e[3]*r+e[4]*i+e[5]*s,n[2]=e[6]*r+e[7]*i+e[8]*s,n}const Aq=[0,0,0,0,0,0,0,0,0],Mq=[0,0,0],cm=[0,0,0];function KP(n,e,t,r,i,s,a,l,c){const h=Aq;h[0]=e,h[1]=r,h[2]=s,h[3]=t,h[4]=i,h[5]=a,h[6]=1,h[7]=1,h[8]=1;const d=o5(n,h);cm[0]=l,cm[1]=c,cm[2]=1;const p=Tq(Mq,d,cm),g=n;return n[0]=p[0],n[1]=0,n[2]=0,n[3]=0,n[4]=p[1],n[5]=0,n[6]=0,n[7]=0,n[8]=p[2],l5(n,g,h)}const Rq=[0,0,0,0,0,0,0,0,0],Pq=[0,0,0,0,0,0,0,0,0];function u5(n,e,t,r,i,s,a,l,c,h,d,p,g,y,_,S,x){const E=KP(Rq,e,t,s,a,h,d,y,_),w=KP(Pq,r,i,l,c,p,g,S,x);return l5(n,o5(E,E),w)}class c5 extends $y{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:t,height:r}=e;this.corners=[0,0,t,0,t,r,0,r]}setCorners(e,t,r,i,s,a,l,c){const h=this.corners;h[0]=e,h[1]=t,h[2]=r,h[3]=i,h[4]=s,h[5]=a,h[6]=l,h[7]=c,this.updateProjection()}updateProjection(){const{width:e,height:t}=this,r=this.corners,i=u5(this._projectionMatrix,0,0,r[0],r[1],e,0,r[2],r[3],e,t,r[4],r[5],0,t,r[6],r[7]);a5(e,t,this,i)}}const h5=class d5 extends Ac{constructor(e){e={...d5.defaultOptions,...e};const{texture:t,verticesX:r,verticesY:i,...s}=e,a=new c5(xs({width:t.width,height:t.height,verticesX:r,verticesY:i}));super(xs({...s,geometry:a})),this._texture=t,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const e=this.geometry;if(!e)return;const{width:t,height:r}=this.texture;(e.width!==t||e.height!==r)&&(e.width=t,e.height=r,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,t,r,i,s,a,l,c){this.geometry.setCorners(e,t,r,i,s,a,l,c)}};h5.defaultOptions={texture:we.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let Bq=h5;class Dq extends Ac{constructor(e){const{texture:t,verticesX:r,verticesY:i,...s}=e,a=new $y(xs({width:t.width,height:t.height,verticesX:r,verticesY:i}));super(xs({...s,geometry:a,texture:t})),this.texture=t,this.autoResize=!0}textureUpdated(){const e=this.geometry,{width:t,height:r}=this.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=t,e.height=r,e.build({}))}set texture(e){this._texture?.off("update",this.textureUpdated,this),super.texture=e,e.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(e){this.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const f5=class p5 extends Ro{constructor(e){const{width:t,points:r,textureScale:i}={...p5.defaultOptions,...e};super({positions:new Float32Array(r.length*4),uvs:new Float32Array(r.length*4),indices:new Uint32Array((r.length-1)*6)}),this.points=r,this._width=t,this.textureScale=i,this._build()}get width(){return this._width}_build(){const e=this.points;if(!e)return;const t=this.getBuffer("aPosition"),r=this.getBuffer("aUV"),i=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,a=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let l=0,c=e[0];const h=this._width*this.textureScale,d=e.length;for(let g=0;g<d;g++){const y=g*4;if(this.textureScale>0){const _=c.x-e[g].x,S=c.y-e[g].y,x=Math.sqrt(_*_+S*S);c=e[g],l+=x/h}else l=g/(d-1);s[y]=l,s[y+1]=0,s[y+2]=l,s[y+3]=1}let p=0;for(let g=0;g<d-1;g++){const y=g*2;a[p++]=y,a[p++]=y+1,a[p++]=y+2,a[p++]=y+2,a[p++]=y+1,a[p++]=y+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],r,i=0,s=0;const a=this.buffers[0].data,l=e.length,c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<l;h++){const d=e[h],p=h*4;h<e.length-1?r=e[h+1]:r=d,s=-(r.x-t.x),i=r.y-t.y;const g=Math.sqrt(i*i+s*s);g<1e-6?(i=0,s=0):(i/=g,s/=g,i*=c,s*=c),a[p]=d.x+i,a[p+1]=d.y+s,a[p+2]=d.x-i,a[p+3]=d.y-s,t=d}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};f5.defaultOptions={width:200,points:[],textureScale:0};let m5=f5;const g5=class y5 extends Ac{constructor(e){const{texture:t,points:r,textureScale:i,...s}={...y5.defaultOptions,...e},a=new m5(xs({width:t.height,points:r,textureScale:i}));i>0&&(t.source.style.addressMode="repeat"),super(xs({...s,texture:t,geometry:a})),this.autoUpdate=!0,this.onRender=this._render}_render(){const e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};g5.defaultOptions={textureScale:0};let kq=g5;class Oq extends Ac{constructor(e){const{texture:t,vertices:r,uvs:i,indices:s,topology:a,...l}=e,c=new Ro(xs({positions:r,uvs:i,indices:s,topology:a}));super(xs({...l,texture:t,geometry:c})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(e){this.geometry.getBuffer("aPosition").data=e}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}function Iq(n,e){const{width:t,height:r}=n.frame;return e.scale(1/t,1/r),e}class _5{execute(e,t){const r=e.renderer,i=r.canvasContext.activeContext,s=t.particleChildren,a=t.texture;i.save(),r.canvasContext.setContextTransform(t.worldTransform,t.roundPixels),r.canvasContext.setBlendMode(t.groupBlendMode);const l=t.groupColorAlpha,c=r.filter?.alphaMultiplier??1,h=(l>>>24&255)/255*c;for(let d=0;d<s.length;d++){const p=s[d],g=p.texture||a;if(!g?.source?.resource)continue;const y=p.color,_=(y>>>24&255)/255*h;if(_<=0)continue;const S=y&16777215,x=((S&255)<<16)+(S&65280)+(S>>16&255);let E=g.source.resource;x!==16777215&&(E=lt.getTintedCanvas({texture:g},x));const w=g.frame,C=g.source.resolution,A=w.x*C,P=w.y*C,M=w.width*C,I=w.height*C;i.globalAlpha=_;const V=-p.anchorX*w.width,O=-p.anchorY*w.height;p.rotation!==0||p.scaleX!==1||p.scaleY!==1?(i.save(),i.translate(p.x,p.y),i.rotate(p.rotation),i.scale(p.scaleX,p.scaleY),i.drawImage(E,A,P,M,I,V,O,w.width,w.height),i.restore()):i.drawImage(E,A,P,M,I,p.x+V,p.y+O,w.width,w.height)}i.restore()}}function hS(n,e=null){const t=n*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function b5(n){return{dynamicUpdate:ZP(n,!0),staticUpdate:ZP(n,!1)}}function ZP(n,e){const t=[];t.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let r=0;for(const s in n){const a=n[s];if(e!==a.dynamic)continue;t.push(`offset = index + ${r}`),t.push(a.code);const l=Ma(a.format);r+=l.stride/4}t.push(`
            index += stride * 4;
        }
    `),t.unshift(`
        var stride = ${r};
    `);const i=t.join(`
`);return new Function("ps","f32v","u32v",i)}class x5{constructor(e){this._size=0,this._generateParticleUpdateCache={};const t=this._size=e.size??1e3,r=e.properties;let i=0,s=0;for(const d in r){const p=r[d],g=Ma(p.format);p.dynamic?s+=g.stride:i+=g.stride}this._dynamicStride=s/4,this._staticStride=i/4,this.staticAttributeBuffer=new yl(t*4*i),this.dynamicAttributeBuffer=new yl(t*4*s),this.indexBuffer=hS(t);const a=new Ll;let l=0,c=0;this._staticBuffer=new hi({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:Mt.VERTEX|Mt.COPY_DST}),this._dynamicBuffer=new hi({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:Mt.VERTEX|Mt.COPY_DST});for(const d in r){const p=r[d],g=Ma(p.format);p.dynamic?(a.addAttribute(p.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:l*4,format:p.format}),l+=g.size):(a.addAttribute(p.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:c*4,format:p.format}),c+=g.size)}a.addIndex(this.indexBuffer);const h=this.getParticleUpdate(r);this._dynamicUpload=h.dynamicUpdate,this._staticUpload=h.staticUpdate,this.geometry=a}getParticleUpdate(e){const t=Nq(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return b5(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new yl(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new yl(this._size*this._dynamicStride*4*4),this.indexBuffer=hS(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const r=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,r.float32View,r.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){const i=this.staticAttributeBuffer;this._staticUpload(e,i.float32View,i.uint32View),this._staticBuffer.setDataWithSize(i.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function Nq(n){const e=[];for(const t in n){const r=n[t];e.push(t,r.code,r.dynamic?"d":"s")}return e.join("_")}var v5=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,S5=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,dS=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class E5 extends Ii{constructor(){const e=mi.from({vertex:S5,fragment:v5}),t=jr.from({fragment:{source:dS,entryPoint:"mainFragment"},vertex:{source:dS,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:we.WHITE.source,uSampler:new Di({}),uniforms:{uTranslationMatrix:{value:new Ce,type:"mat3x3<f32>"},uColor:{value:new yt(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class sf{constructor(e,t){this.state=pi.for2d(),this.localUniforms=new zn({uTranslationMatrix:{value:new Ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new E5,this.state=pi.for2d(),this._managedContainers=new Br({renderer:e,type:"renderable",name:"particleContainer"})}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return e._gpuData[this.renderer.uid]||this._initBuffer(e)}_initBuffer(e){return e._gpuData[this.renderer.uid]=new x5({size:e.particleChildren.length,properties:e._properties}),this._managedContainers.add(e),e._gpuData[this.renderer.uid]}updateRenderable(e){}execute(e){const t=e.particleChildren;if(t.length===0)return;const r=this.renderer,i=this.getBuffers(e);e.texture||(e.texture=t[0].texture);const s=this.state;i.update(t,e._childrenDirty),e._childrenDirty=!1,s.blendMode=cc(e.blendMode,e.texture._source);const a=this.localUniforms.uniforms,l=a.uTranslationMatrix;e.worldTransform.copyTo(l),l.prepend(r.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=r.globalUniforms.globalUniformData.resolution,a.uRound=r._roundPixels|e._roundPixels,Tc(e.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,e)}destroy(){this._managedContainers.destroy(),this.renderer=null,this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}sf.extension={type:[q.CanvasPipes],name:"particle"};class nw extends sf{constructor(e){super(e,new _5)}}nw.extension={type:[q.CanvasPipes],name:"particle"};class w5{execute(e,t){const r=e.state,i=e.renderer,s=t.shader||e.defaultShader;s.resources.uTexture=t.texture._source,s.resources.uniforms=e.localUniforms;const a=i.gl,l=e.getBuffers(t);i.shader.bind(s),i.state.set(r),i.geometry.bind(l.geometry,s.glProgram);const h=l.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,t.particleChildren.length*6,h,0)}}class rw extends sf{constructor(e){super(e,new w5)}}rw.extension={type:[q.WebGLPipes],name:"particle"};class C5{execute(e,t){const r=e.renderer,i=t.shader||e.defaultShader;i.groups[0]=r.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),i.groups[1]=r.texture.getTextureBindGroup(t.texture);const s=e.state,a=e.getBuffers(t);r.encoder.draw({geometry:a.geometry,shader:t.shader||e.defaultShader,state:s,size:t.particleChildren.length*6})}}class iw extends sf{constructor(e){super(e,new C5)}}iw.extension={type:[q.WebGPUPipes],name:"particle"};const T5=class fS{constructor(e){if(e instanceof we)this.texture=e,pg(this,fS.defaultOptions,{});else{const t={...fS.defaultOptions,...e};pg(this,t,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return Hs(this._tint)}set tint(e){this._tint=yt.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};T5.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let Lq=T5;const pS={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}};ze.add(rw);ze.add(iw);ze.add(nw);const Fq=new Qn(0,0,0,0),A5=class mS extends qs{constructor(e={}){e={...mS.defaultOptions,...e,dynamicProperties:{...mS.defaultOptions.dynamicProperties,...e?.dynamicProperties}};const{dynamicProperties:t,shader:r,roundPixels:i,texture:s,particles:a,...l}=e;super({label:"ParticleContainer",...l}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=s||null,this.shader=r,this._properties={};for(const c in pS){const h=pS[c],d=t[c];this._properties[c]={...h,dynamic:d}}this.allowChildren=!0,this.roundPixels=i??!1,this.particleChildren=a??[]}addParticle(...e){for(let t=0;t<e.length;t++)this.particleChildren.push(e[t]);return this.onViewUpdate(),e[0]}removeParticle(...e){let t=!1;for(let r=0;r<e.length;r++){const i=this.particleChildren.indexOf(e[r]);i>-1&&(this.particleChildren.splice(i,1),t=!0)}return t&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Fq}updateBounds(){}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource,i=this.texture??this.particleChildren[0]?.texture;i&&i.destroy(r)}this.texture=null,this.shader?.destroy()}removeParticles(e,t){e??(e=0),t??(t=this.particleChildren.length);const r=this.particleChildren.splice(e,t-e);return this.onViewUpdate(),r}removeParticleAt(e){const t=this.particleChildren.splice(e,1);return this.onViewUpdate(),t[0]}addParticleAt(e,t){return this.particleChildren.splice(t,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,t){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,t){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,t){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,t){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,t){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};A5.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let Uq=A5;class sw{constructor(e){this._renderer=e}validateRenderable(e){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){const t=this._renderer,r=t.canvasContext,i=r.activeContext;i.save();const s=e.groupTransform,a=t._roundPixels|e._roundPixels;r.setContextTransform(s,a===1),r.setBlendMode(e.groupBlendMode);const l=t.globalUniforms.globalUniformData?.worldColor??4294967295,c=e.groupColorAlpha,h=(l>>>24&255)/255,d=(c>>>24&255)/255,p=t.filter?.alphaMultiplier??1,g=h*d*p;if(g<=0){i.restore();return}i.globalAlpha=g;const y=l&16777215,_=c&16777215,S=Hs(Ta(_,y)),x=e.texture,E=lt.getCanvasSource(x);if(!E){i.restore();return}const w=r.smoothProperty,C=x.source.style.scaleMode!=="nearest";i[w]!==C&&(i[w]=C);const A=S!==16777215||x.rotate!==0,P=A?lt.getTintedCanvas({texture:x},S):E,{leftWidth:M,topHeight:I,rightWidth:V,bottomHeight:O,width:D,height:H}=e,$=M+V,ne=I+O,Z=Math.min($>D?D/$:1,ne>H?H/ne:1,1),te=M*Z,z=V*Z,X=I*Z,K=O*Z,J=Math.max(0,D-te-z),U=Math.max(0,H-X-K),G=e.anchor,Q=x.source._resolution??x.source.resolution??1;let L=x.frame.x*Q,he=x.frame.y*Q;const fe=-G.x*D,ve=-G.y*H,Be=M*Q,ke=I*Q,Ne=V*Q,rt=O*Q;let st=x.frame.width*Q,at=x.frame.height*Q;A&&(L=0,he=0,st=P.width,at=P.height),i.drawImage(P,L,he,Be,ke,fe,ve,te,X),i.drawImage(P,L+Be,he,st-Be-Ne,ke,fe+te,ve,J,X),i.drawImage(P,L+st-Ne,he,Ne,ke,fe+D-z,ve,z,X),i.drawImage(P,L,he+ke,Be,at-ke-rt,fe,ve+X,te,U),i.drawImage(P,L+Be,he+ke,st-Be-Ne,at-ke-rt,fe+te,ve+X,J,U),i.drawImage(P,L+st-Ne,he+ke,Ne,at-ke-rt,fe+D-z,ve+X,z,U),i.drawImage(P,L,he+at-rt,Be,rt,fe,ve+H-K,te,K),i.drawImage(P,L+Be,he+at-rt,st-Be-Ne,rt,fe+te,ve+H-K,J,K),i.drawImage(P,L+st-Ne,he+at-rt,Ne,rt,fe+D-z,ve+H-K,z,K),i.restore()}destroy(){this._renderer=null}}sw.extension={type:[q.CanvasPipes],name:"nineSliceSprite"};const M5=class R5 extends $y{constructor(e={}){e={...R5.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:t,height:r,_leftWidth:i,_rightWidth:s,_topHeight:a,_bottomHeight:l,_anchorX:c,_anchorY:h}=this,d=i+s,p=t>d?1:t/d,g=a+l,y=r>g?1:r/g,_=Math.min(p,y),S=c*t,x=h*r;e[0]=e[8]=e[16]=e[24]=-S,e[2]=e[10]=e[18]=e[26]=i*_-S,e[4]=e[12]=e[20]=e[28]=t-s*_-S,e[6]=e[14]=e[22]=e[30]=t-S,e[1]=e[3]=e[5]=e[7]=-x,e[9]=e[11]=e[13]=e[15]=a*_-x,e[17]=e[19]=e[21]=e[23]=r-l*_-x,e[25]=e[27]=e[29]=e[31]=r-x,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const t=1/this._originalWidth,r=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.getBuffer("aUV").update()}};M5.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let po=M5;class P5 extends Ey{constructor(){super(),this.geometry=new po}destroy(){this.geometry.destroy()}}class aw{constructor(e){this._renderer=e,this._managedSprites=new Br({renderer:e,type:"renderable",name:"nineSliceSprite"})}addRenderable(e,t){const r=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,r),this._renderer.renderPipes.batch.addToBatch(r,t)}updateRenderable(e){const t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=e._gpuData[this._renderer.uid]=new P5,r=t;return r.renderable=e,r.transform=e.groupTransform,r.texture=e._texture,r.roundPixels=this._renderer._roundPixels|e._roundPixels,this._managedSprites.add(e),e.didViewUpdate||this._updateBatchableSprite(e,r),t}destroy(){this._managedSprites.destroy(),this._renderer=null}}aw.extension={type:[q.WebGLPipes,q.WebGPUPipes],name:"nineSliceSprite"};ze.add(sw);ze.add(aw);const B5=class D5 extends qs{constructor(e){e instanceof we&&(e={texture:e});const{width:t,height:r,anchor:i,leftWidth:s,rightWidth:a,topHeight:l,bottomHeight:c,texture:h,roundPixels:d,...p}=e;super({label:"NineSliceSprite",...p}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=s??h?.defaultBorders?.left??po.defaultOptions.leftWidth,this._topHeight=l??h?.defaultBorders?.top??po.defaultOptions.topHeight,this._rightWidth=a??h?.defaultBorders?.right??po.defaultOptions.rightWidth,this._bottomHeight=c??h?.defaultBorders?.bottom??po.defaultOptions.bottomHeight,this._width=t??h.width??po.defaultOptions.width,this._height=r??h.height??po.defaultOptions.height,this.allowChildren=!1,this.texture=h??D5.defaultOptions.texture,this.roundPixels=d??!1,this._anchor=new gn({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,t){typeof e=="object"&&(t=e.height??e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=we.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null}updateBounds(){const e=this._bounds,t=this._anchor,r=this._width,i=this._height;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*i,e.maxY=e.minY+i}};B5.defaultOptions={texture:we.EMPTY};let k5=B5;class Gq extends k5{constructor(...e){let t=e[0];t instanceof we&&(Ae(nt,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),t={texture:t,leftWidth:e[1],topHeight:e[2],rightWidth:e[3],bottomHeight:e[4]}),Ae(nt,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(t)}}class O5 extends PE{constructor(e,t){super();const{textures:r,data:i}=e;Object.keys(i.pages).forEach(s=>{const a=i.pages[parseInt(s,10)],l=r[a.id];this.pages.push({texture:l})}),Object.keys(i.chars).forEach(s=>{const a=i.chars[s],{frame:l,source:c,rotate:h}=r[a.page],d=Xe.transformRectCoords(a,l,h,new Rt),p=new we({frame:d,orig:new Rt(0,0,a.width,a.height),source:c,rotate:h});this.chars[s]={id:s.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:p}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){fc.install(e)}static uninstall(e){fc.uninstall(e)}}const zq=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:O5},Symbol.toStringTag,{value:"Module"}));function I5(n){const{text:e,style:t,chars:r}=n,i=t,s=fc.getFont(e,i),a=ur.graphemeSegmenter(e),l=Dy(a,i,s,!0),c=l.scale,h=[],d=[],p=[],g=t.lineHeight?t.lineHeight:s.lineHeight*c;let y=0;for(const _ of l.lines){if(_.chars.length===0)continue;const S=new bn({label:"line"});S.y=y,p.push(S);let x=new bn({label:"word"}),E=0;for(let w=0;w<_.chars.length;w++){const C=_.chars[w];if(!C||!s.chars[C])continue;const P=C===" ",M=w===_.chars.length-1;let I;r.length>0?(I=r.shift(),I.text=C,I.style=i,I.label=`char-${C}`,I.x=_.charPositions[w]*c-_.charPositions[E]*c):I=new OE({text:C,style:i,label:`char-${C}`,x:_.charPositions[w]*c-_.charPositions[E]*c}),P||(h.push(I),x.addChild(I)),(P||M)&&x.children.length>0&&(x.x=_.charPositions[E]*c,d.push(x),S.addChild(x),x=new bn({label:"word"}),E=w+1)}y+=g}return{chars:h,lines:p,words:d}}class ow extends bn{constructor(e){const{text:t,style:r,autoSplit:i,lineAnchor:s,wordAnchor:a,charAnchor:l,...c}=e;super(c),this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=t,this._autoSplit=i,this._lineAnchor=s,this._wordAnchor=a,this._charAnchor=l,this.style=r}split(){const e=this.splitFn();this.chars=e.chars,this.words=e.words,this.lines=e.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(e){this._originalText=e,this.lines.forEach(t=>t.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(e,t,r){let i;typeof e=="number"?i={x:e,y:e}:i={x:e.x,y:e.y},t.forEach(s=>{const a=s.getLocalBounds(),l=a.minX+a.width*i.x,c=a.minY+a.height*i.y;s.origin.set(l,c)}),this[r]=e}get lineAnchor(){return this._lineAnchor}set lineAnchor(e){this._setOrigin(e,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(e){this._setOrigin(e,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(e){this._setOrigin(e,this.chars,"_charAnchor")}get style(){return this._style}set style(e){e||(e={}),this._style=new Vr(e),this.styleChanged()}styleChanged(){this.words.forEach(e=>e.destroy()),this.words.length=0,this.lines.forEach(e=>e.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){this._dirty=!0,this._autoSplit&&this.split()}destroy(e){super.destroy(e),this.chars=[],this.words=[],this.lines=[],(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._originalText=""}}const N5=class Wm extends ow{constructor(e){var t;const r={...Wm.defaultOptions,...e};r.style??(r.style={}),(t=r.style).fill??(t.fill=16777215),super(r)}static from(e,t){const r={...Wm.defaultOptions,...t,text:e.text,style:new Vr(e.style)},i=new Wm({...r}),s=e.anchor;return(s.x!==0||s.y!==0)&&i.pivot.set(i.width*s.x,i.height*s.y),i}splitFn(){return I5({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};N5.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let Vq=N5;function Hq(n,e,t){switch(n){case"center":return(t-e)/2;case"right":return t-e;default:return 0}}function L5(n){return n==="\r"||n===`
`||n===`\r
`}function jq(n,e,t){const r=[];let i=e.lines[0],s="",a=[],l=0;return t.wordWrap=!1,n.forEach(c=>{const h=/^\s*$/.test(c),d=L5(c),p=s.length===0&&h;if(h&&!d&&p)return;d||(s+=c);const g=ur.measureText(c,t);a.push({char:c,metric:g}),s.length>=i.length&&(r.push({line:s,chars:a,width:a.reduce((y,_)=>y+_.metric.width,0)}),a=[],s="",l++,i=e.lines[l])}),r}function F5(n){const{text:e,style:t,chars:r}=n,i=t,s=ur.measureText(e,i),a=ur.graphemeSegmenter(e),l=jq(a,s,i.clone()),c=i.align,h=s.lineWidths.reduce((Z,te)=>Math.max(Z,te),0),g=!(s.lines.length===1)&&i.wordWrap?i.wordWrapWidth:h,y=i._fill?.fill,_=i._stroke?.fill,S=y instanceof ki,x=_ instanceof ki,E=S||x,w=S&&y.textureSpace==="local"||x&&_.textureSpace==="local",C=s.width,A=s.height,P=i.clone();P.align="left";let M=0,I=0;if(P.trim){const{frame:Z,canvasAndContext:te}=wa.getCanvasAndContext({text:e,style:i,resolution:1});wa.returnCanvasAndContext(te),M=-Z.x,I=-Z.y,P.trim=!1}const V=[],O=[],D=[];let H=0;const $=i._stroke?.width||0,ne=i.dropShadow?.distance||0;return l.forEach((Z,te)=>{const z=new bn({label:`line-${te}`});z.y=H+I,O.push(z);const X=s.lineWidths[te];let K=Hq(c,X,g),J=new bn({label:"word"});J.x=K+M,Z.chars.forEach((U,G)=>{if(U.metric.width!==0){if(L5(U.char)){K+=U.metric.width-$;return}if(U.char===" ")J.children.length>0&&(D.push(J),z.addChild(J)),K+=U.metric.width+i.letterSpacing-$,J=new bn({label:"word"}),J.x=K+M;else{let Q=P;E&&(Q=P.clone(),Q._gradientOffset={x:-K,y:-H},w&&(Q._gradientBounds={width:C,height:A}));let L;r.length>0?(L=r.shift(),L.text=U.char,L.style=Q,L.setFromMatrix(Ce.IDENTITY),L.x=K-J.x+M-ne*G):L=new By({text:U.char,style:Q,x:K-J.x+M-ne*G}),V.push(L),J.addChild(L),K+=U.metric.width+i.letterSpacing-$}}}),J.children.length>0&&(D.push(J),z.addChild(J)),H+=s.lineHeight}),{chars:V,lines:O,words:D}}const U5=class $m extends ow{constructor(e){const t={...$m.defaultOptions,...e};super(t)}static from(e,t){const r={...$m.defaultOptions,...t,text:e.text,style:new Vr(e.style)},i=new $m({...r}),s=e.anchor;return(s.x!==0||s.y!==0)&&i.pivot.set(i.width*s.x,i.height*s.y),i}splitFn(){return F5({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};U5.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let Xq=U5;const QP=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function Wq(n){const e=[];let t=0;for(let r=0;r<QP.length;r++){const i=`_${QP[r]}`;e[t++]=n[i]}return t=G5(n._fill,e,t),t=qq(n._stroke,e,t),t=Yq(n.dropShadow,e,t),t=$q(n.filters,e,t),e.join("-")}function $q(n,e,t){if(!n)return t;for(const r of n)e[t++]=r.uid;return t}function G5(n,e,t){return n&&(e[t++]=n.color,e[t++]=n.alpha,e[t++]=n.fill?.styleKey),t}function qq(n,e,t){return n&&(t=G5(n,e,t),e[t++]=n.width,e[t++]=n.alignment,e[t++]=n.cap,e[t++]=n.join,e[t++]=n.miterLimit),t}function Yq(n,e,t){return n&&(e[t++]=n.alpha,e[t++]=n.angle,e[t++]=n.blur,e[t++]=n.distance,e[t++]=yt.shared.setValue(n.color).toNumber()),t}async function Kq(n,e,t=200){const r=await e.extract.base64(n);e.type!==xr.CANVAS&&await e.encoder.commandFinished;const i=t;console.log(`logging texture ${n.source.width}px ${n.source.height}px`);const s=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}const Zq=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let Qq=0;function z5(n,e=0,t={color:"#000000"}){n.renderGroup&&(t.color=Zq[Qq++]);let r="";for(let a=0;a<e;a++)r+="    ";let i=n.label;!i&&n instanceof vs&&(i=`sprite:${n.texture.label}`);let s=`%c ${r}|- ${i} (worldX:${n.worldTransform.tx}, relativeRenderX:${n.relativeGroupTransform.tx}, renderX:${n.groupTransform.tx}, localX:${n.x})`;n.renderGroup&&(s+=" (RenderGroup)"),n.filters&&(s+="(*filters)"),console.log(s,`color:${t.color}; font-weight:bold;`),e++;for(let a=0;a<n.children.length;a++){const l=n.children[a];z5(l,e,{...t})}}function V5(n,e=0,t={index:0,color:"#000000"}){let r="";for(let s=0;s<e;s++)r+="    ";const i=`%c ${r}- ${t.index}: ${n.root.label} worldX:${n.worldTransform.tx}`;console.log(i,`color:${t.color}; font-weight:bold;`),e++;for(let s=0;s<n.renderGroupChildren.length;s++){const a=n.renderGroupChildren[s];V5(a,e,{...t,index:s})}}ze.add(CO,TO);const Jq=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:PE,AbstractBitmapTextPipe:BE,AbstractRenderer:xc,AbstractSplitText:ow,AbstractText:Cy,AbstractTextSystem:AE,AccessibilitySystem:Fj,AlphaFilter:BW,AlphaMask:C1,AlphaMaskPipe:Iy,AnimatedSprite:Od,Application:fN,ApplicationInitHook:L1,Assets:Gu,AssetsClass:PL,BLEND_TO_NPM:DN,BREAKING_SPACES:HF,BREAKING_SPACES_SET:jF,BUFFER_TYPE:gd,BackgroundLoader:gN,BackgroundSystem:PU,Batch:IN,BatchGeometry:GN,BatchTextureArray:ON,BatchableGraphics:by,BatchableHTMLText:cU,BatchableMesh:Ey,BatchableSprite:rf,BatchableText:ZF,Batcher:FN,BatcherPipe:Oy,BigPool:Gn,BindGroup:js,BindGroupSystem:F2,BitmapFont:O5,BitmapFontManager:fc,BitmapText:OE,BitmapTextGraphics:nU,BitmapTextPipe:kE,BlendModeFilter:On,BlendModePipe:Uy,BlurFilter:aF,BlurFilterPass:Um,Bounds:Qn,BrowserAdapter:iI,Buffer:hi,BufferImageSource:Qg,BufferResource:Xy,BufferUsage:Mt,CLEAR:ui,Cache:At,CanvasBatchAdaptor:vU,CanvasBitmapTextPipe:DE,CanvasColorMaskPipe:jE,CanvasContextSystem:qE,CanvasFilterSystem:YE,CanvasGraphicsAdaptor:ZE,CanvasGraphicsContextSystem:EF,CanvasGraphicsPipe:fE,CanvasLimitsSystem:KE,CanvasNineSliceSpritePipe:sw,CanvasObserver:P1,CanvasParticleContainerAdaptor:_5,CanvasParticleContainerPipe:nw,CanvasPool:Ss,CanvasPoolClass:FF,CanvasRenderTargetAdaptor:$U,CanvasRenderTargetSystem:d2,CanvasRenderer:ZU,CanvasRendererTextSystem:ME,CanvasSource:ms,CanvasStencilMaskPipe:WE,CanvasTextGenerator:wa,CanvasTextMetrics:ur,CanvasTextPipe:TE,CanvasTextSystem:RE,CanvasTextureSystem:f2,CanvasTilingSpritePipe:_E,Circle:ly,Color:yt,ColorBlend:LI,ColorBurnBlend:FI,ColorDodgeBlend:UI,ColorMask:T1,ColorMaskPipe:XE,ColorMatrixFilter:OW,CompressedSource:ef,Container:bn,CubeTexture:Mg,CubeTextureSource:pc,Culler:XL,CullerPlugin:WL,CustomRenderPipe:Ny,D3D10_RESOURCE_DIMENSION:aE,D3DFMT:ri,DATA_URI:u7,DDS:tt,DEG_TO_RAD:RO,DEPRECATED_SCALE_MODES:Ag,DEPRECATED_WRAP_MODES:Tg,DOMAdapter:je,DOMContainer:_W,DOMPipe:oE,DRAW_MODES:hq,DXGI_FORMAT:sE,DXGI_TO_TEXTURE_FORMAT:ii,DarkenBlend:GI,DefaultBatcher:yy,DefaultShader:Dv,DifferenceBlend:zI,DisplacementFilter:IW,DivideBlend:VI,DynamicBitmapFont:rS,Ellipse:uy,EventBoundary:qL,EventEmitter:hr,EventSystem:YL,EventsTicker:Gs,ExclusionBlend:HI,ExtensionType:q,ExternalSource:gq,ExtractSystem:DU,FOURCC_TO_TEXTURE_FORMAT:Xv,FederatedContainer:PW,FederatedEvent:bc,FederatedMouseEvent:kd,FederatedPointerEvent:qi,FederatedWheelEvent:Pl,FillGradient:ki,FillPattern:Cc,Filter:Ys,FilterEffect:Cd,FilterPipe:mF,FilterSystem:gF,FontStylePromiseCache:Vm,GAUSSIAN_VALUES:uE,GCManagedHash:Br,GCSystem:NU,GL_FORMATS:Cg,GL_INTERNAL_FORMAT:LL,GL_TARGETS:jy,GL_TYPES:Ot,GL_WRAP_MODES:t4,GPUTextureGpuData:Q2,GenerateTextureSystem:r2,Geometry:Ll,GlBackBufferSystem:s4,GlBatchAdaptor:zE,GlBuffer:QU,GlBufferSystem:p2,GlColorMaskSystem:b2,GlContextSystem:e4,GlEncoderSystem:x2,GlGeometryGpuData:r4,GlGeometrySystem:y2,GlGraphicsAdaptor:N2,GlLimitsSystem:v2,GlMeshAdaptor:L2,GlParticleContainerAdaptor:w5,GlParticleContainerPipe:rw,GlProgram:mi,GlProgramData:f4,GlRenderTarget:a4,GlRenderTargetAdaptor:h4,GlRenderTargetSystem:M2,GlShaderSystem:B2,GlStateSystem:C4,GlStencilSystem:S2,GlTexture:k2,GlTextureSystem:I2,GlUboSystem:A2,GlUniformGroupSystem:D2,GlobalResourceRegistry:Il,GlobalUniformSystem:s2,GpuBatchAdaptor:VE,GpuBlendModesToPixi:Hr,GpuBufferData:G4,GpuBufferSystem:U2,GpuColorMaskSystem:G2,GpuDeviceSystem:Wy,GpuEncoderSystem:z2,GpuGraphicsAdaptor:ew,GpuGraphicsContext:lL,GpuLimitsSystem:V2,GpuMeshAdapter:tw,GpuMipmapGenerator:Z4,GpuParticleContainerAdaptor:C5,GpuParticleContainerPipe:iw,GpuProgram:jr,GpuRenderTarget:X4,GpuRenderTargetAdaptor:W4,GpuRenderTargetSystem:$2,GpuShaderSystem:q2,GpuStateSystem:Y2,GpuStencilModesToPixi:Da,GpuStencilSystem:H2,GpuTextureSystem:J2,GpuUboSystem:j2,GpuUniformBatchPipe:X2,Graphics:Bl,GraphicsContext:Lr,GraphicsContextRenderData:uL,GraphicsContextSystem:xy,GraphicsGpuData:wF,GraphicsPath:gs,GraphicsPipe:pE,HTMLText:_U,HTMLTextPipe:LE,HTMLTextRenderData:IE,HTMLTextStyle:ky,HTMLTextSystem:UE,HardLightBlend:jI,HardMixBlend:XI,HelloSystem:zy,IGLUniformData:N$,ImageSource:So,InstructionSet:ty,KTX:Pn,LightenBlend:WI,LinearBurnBlend:$I,LinearDodgeBlend:qI,LinearLightBlend:YI,Loader:CN,LoaderParserPriority:Oi,LuminosityBlend:KI,MaskEffectManager:dg,MaskEffectManagerClass:XO,MaskFilter:bF,Matrix:Ce,Mesh:Ac,MeshGeometry:Ro,MeshGpuData:nS,MeshPipe:mE,MeshPlane:Dq,MeshRope:kq,MeshSimple:Oq,NEWLINES:zF,NEWLINES_SET:VF,NEWLINE_MATCH_REGEX:WF,NEWLINE_SPLIT_REGEX:XF,NOOP:x1,NegationBlend:ZI,NineSliceGeometry:po,NineSlicePlane:Gq,NineSliceSprite:k5,NineSliceSpriteGpuData:P5,NineSliceSpritePipe:aw,NoiseFilter:NW,ObservablePoint:gn,OverlayBlend:QI,PI_2:AO,Particle:Lq,ParticleBuffer:x5,ParticleContainer:Uq,ParticleContainerPipe:sf,ParticleShader:E5,PassthroughFilter:pF,PerspectiveMesh:Bq,PerspectivePlaneGeometry:c5,PinLightBlend:JI,PipelineSystem:W2,PlaneGeometry:$y,Point:Bt,Polygon:qu,Pool:GO,PoolGroupClass:zO,PrepareBase:SF,PrepareQueue:QF,PrepareSystem:xU,PrepareUpload:bU,QuadGeometry:BF,RAD_TO_DEG:MO,Rectangle:Rt,RenderContainer:xq,RenderGroup:fg,RenderGroupPipe:Ly,RenderGroupSystem:e2,RenderLayer:Cq,RenderTarget:wg,RenderTargetSystem:Hy,RenderTexture:Gy,RenderableGCSystem:UU,RendererInitHook:F1,RendererType:xr,ResizePlugin:U1,Resolver:Ao,RopeGeometry:m5,RoundedRectangle:cy,SCALE_MODES:fq,STENCIL_MODES:kn,SVGParser:xL,SaturationBlend:eN,SchedulerSystem:a2,ScissorMask:u$,SdfShader:oU,Shader:Ii,ShaderStage:fo,ShapePath:mL,SharedRenderPipes:h2,SharedSystems:Vy,SoftLightBlend:tN,SplitBitmapText:Vq,SplitText:Xq,Sprite:vs,SpritePipe:Fy,Spritesheet:_v,State:pi,StencilMask:A1,StencilMaskPipe:$E,SubtractBlend:nN,SystemRunner:N1,TEXTURE_FORMAT_BLOCK_SIZE:IL,Text:By,TextStyle:Vr,Texture:we,TextureGCSystem:GU,TextureMatrix:v1,TexturePool:Dn,TexturePoolClass:nI,TextureSource:yn,TextureStyle:Di,TextureUvs:yq,Ticker:Zn,TickerListener:Im,TickerPlugin:G1,TilingSprite:LF,TilingSpriteGpuData:IF,TilingSpritePipe:bE,TilingSpriteShader:PF,Transform:gE,Triangle:cE,UNIFORM_TO_ARRAY_SETTERS:v4,UNIFORM_TO_SINGLE_SETTERS:x4,UNIFORM_TYPES_MAP:MI,UNIFORM_TYPES_VALUES:k1,UPDATE_BLEND:ny,UPDATE_COLOR:Ad,UPDATE_PRIORITY:Ws,UPDATE_TRANSFORM:Sj,UPDATE_VISIBLE:Wu,UboBatch:z4,UboSystem:E2,UniformGroup:zn,VERSION:uc,VideoSource:$u,ViewContainer:qs,ViewSystem:jU,ViewableBuffer:yl,VividLightBlend:rN,WGSL_ALIGN_SIZE_DATA:yd,WGSL_TO_STD40_SIZE:w2,WRAP_MODES:dq,WebGLRenderer:U4,WebGPURenderer:t5,WebWorkerAdapter:wW,WorkerManager:Vv,accessibilityTarget:Uj,addBits:Mv,addMaskBounds:ry,addMaskLocalBounds:iy,addProgramDefines:_I,alphaFrag:KL,alphaWgsl:qv,appendSVGPath:Gv,applyMatrix:kF,applyProjectiveTransformationToPlane:a5,applyStyleParams:uS,assignWithIgnore:pg,autoDetectEnvironment:Xj,autoDetectRenderer:hN,autoDetectSource:Cj,basisTranscoderUrls:_g,bgr2rgb:Hs,bitmapFontCachePlugin:pN,bitmapFontTextParser:Lm,bitmapFontXMLParser:Tv,bitmapFontXMLStringParser:Av,bitmapTextSplit:I5,blendTemplateFrag:OI,blendTemplateVert:II,blendTemplateWgsl:NI,blockDataMap:K2,blurTemplateWgsl:nF,boundsPool:Vs,browserExt:CO,buildAdaptiveBezier:Q1,buildAdaptiveQuadratic:cL,buildArc:J1,buildArcTo:hL,buildArcToSvg:dL,buildCircle:hc,buildContextBatches:oL,buildEllipse:eL,buildGeometryFromPath:wq,buildLine:$1,buildPixelLine:rL,buildPolygon:iL,buildRectangle:sL,buildRoundedRectangle:tL,buildSimpleUvs:X1,buildTriangle:aL,buildUvs:j1,cacheAsTextureMixin:VO,cacheTextureArray:yN,calculatePathArea:bL,calculateProjection:XU,canUseNewCanvasBlendModes:yE,canvasTextSplit:F5,canvasUtils:lt,checkChildrenDidChange:w1,checkDataUrl:Nl,checkExtension:rs,checkForNestedPattern:yL,checkMaxIfStatementsInShader:V1,childrenHelperMixin:HO,cleanArray:OU,cleanHash:kU,clearList:Eg,closePointEps:W1,collapseNewlines:SE,collapseSpaces:vE,collectAllRenderables:vq,collectRenderablesMixin:jO,color32BitToUniform:Tc,colorBit:dy,colorBitGl:fy,colorMatrixFilterFrag:oF,colorMatrixFilterWgsl:Yv,colorToUniform:VW,compareModeToGlCompare:B4,compileHighShader:VN,compileHighShaderGl:HN,compileHighShaderGlProgram:Sc,compileHighShaderGpuProgram:vc,compileHooks:Rv,compileInputs:Pv,compileOutputs:zN,compileShader:aS,compute2DProjection:u5,convertFormatIfRequired:aW,convertToList:Zi,copySearchParams:mg,createGlUploadCubeTextureResource:M4,createGpuUploadCubeTextureResource:Y4,createIdFromString:oc,createIndicesForQuads:hS,createLevelBuffers:DX,createLevelBuffersFromKTX:oW,createStringVariations:cI,createTexture:Mo,createUboElementsSTD40:o4,createUboElementsWGSL:V4,createUboSyncFunction:C2,createUboSyncFunctionSTD40:c4,createUboSyncFunctionWGSL:j4,crossOrigin:CL,cullingMixin:UO,curveEps:kv,defaultFilterVert:nf,defaultValue:R2,definedProps:xs,deprecation:Ae,detectAvif:_N,detectBasis:AX,detectCompressed:pW,detectDefaults:bN,detectMp4:xN,detectOgv:vN,detectVideoAlphaMode:M1,detectWebm:SN,detectWebp:EN,determineCrossOrigin:AL,displacementFrag:lF,displacementVert:uF,displacementWgsl:Kv,earcut:lN,effectsMixin:WO,ensureAttributes:g2,ensureIsBuffer:H1,ensurePrecision:bI,ensureTextOptions:Ty,executeInstructions:Sg,extensions:ze,extractAttributesFromGlProgram:m4,extractAttributesFromGpuProgram:wI,extractFontFamilies:hU,extractStructAndGroups:Nm,extractSubpaths:_L,extractSvgUrlId:Fv,fastCopy:gg,findMixin:$O,fontStringFromTextStyle:dc,formatShader:a$,fragmentGPUTemplate:$N,fragmentGlTemplate:YN,generateArraySyncSTD40:u4,generateArraySyncWGSL:H4,generateBlurFragSource:JL,generateBlurGlProgram:tF,generateBlurProgram:rF,generateBlurVertSource:eF,generateGPULayout:i$,generateGpuLayoutGroups:CI,generateLayout:s$,generateLayoutHash:TI,generateParticleUpdateFunction:b5,generateProgram:b4,generateShaderSyncCode:d4,generateTextStyleKey:Wq,generateTextureBatchBit:py,generateTextureBatchBitGl:my,generateTextureMatrix:K1,generateUniformsSync:S4,getAdjustedBlendModeBlend:cc,getAttributeInfoFromFormat:Ma,getBatchSamplersUniformGroup:gy,getBitmapTextLayout:Dy,getCanvasBoundingBox:UF,getCanvasFillStyle:_l,getCanvasTexture:u2,getCharacterGroups:wE,getDefaultUniformValue:RI,getFastGlobalBounds:bq,getFastGlobalBoundsMixin:qO,getFillInstructionData:uX,getFontCss:pU,getFontFamilyName:MN,getGeometryBounds:UN,getGlTypeFromFormat:n4,getGlobalBounds:Kd,getGlobalMixin:KO,getGlobalRenderableBounds:hE,getLocalBounds:ey,getMaxFragmentPrecision:yI,getMaxTexturesPerBatch:kN,getOrientationOfPoints:nL,getPlainText:WW,getPo2TextureFromSource:Py,getResolutionOfUrl:vy,getSVGUrl:mU,getSupportedCompressedTextureFormats:iE,getSupportedGPUCompressedTextureFormats:jv,getSupportedGlCompressedTextureFormats:Hv,getSupportedTextureFormats:tf,getTemporaryCanvasFromImage:gU,getTestContext:D1,getTextureBatchBindGroup:hy,getTextureDefaultMatrix:Iq,getTextureFormatFromKTXTexture:cW,getUboData:g4,getUniformData:y4,getUrlExtension:hI,glFormatToGPUFormat:HL,glUploadBufferImageResource:T4,glUploadCompressedTextureResource:A4,glUploadImageResource:O2,glUploadVideoResource:R4,globalUniformsBit:KN,globalUniformsBitGl:ZN,globalUniformsUBOBitGl:F7,gpuFormatToBasisTranscoderFormat:OX,gpuFormatToKTXBasisTranscoderFormat:dW,gpuUploadBufferImageResource:$4,gpuUploadCompressedTextureResource:q4,gpuUploadImageResource:Z2,gpuUploadVideoResource:K4,groupD8:Xe,hasCachedCanvasTexture:M$,hasTagMarkup:My,hasTagStyles:Ay,hslWgsl:UW,hslgl:ay,hslgpu:oy,injectBits:Bv,insertVersion:xI,isBreakingSpace:Ji,isCanvasFilterCapable:sS,isMobile:mI,isNewline:Ry,isPow2:pv,isRenderingToScreen:WU,isSafari:FE,isSingleItem:Md,isWebGLSupported:Zd,isWebGPUSupported:Qd,ktxTranscoderUrls:bg,loadBasis:BX,loadBasisOnWorker:OL,loadBitmapFont:mN,loadDDS:zX,loadEnvironmentExtensions:O1,loadFontAsBase64:dU,loadFontCSS:fU,loadImageBitmap:wL,loadJson:TN,loadKTX:tW,loadKTX2:sW,loadKTX2onWorker:VL,loadSVGImage:yU,loadSvg:SL,loadTextures:nE,loadTxt:AN,loadVideoTextures:ML,loadWebFont:RN,localUniformBit:Ju,localUniformBitGl:wy,localUniformBitGroup2:AF,localUniformMSDFBit:rU,localUniformMSDFBitGl:iU,log2:oj,logDebugTexture:Kq,logProgramError:_4,logRenderGroupScene:V5,logScene:z5,mSDFBit:sU,mSDFBitGl:aU,mapCanvasBlendModesToPixi:TU,mapFormatToGlFormat:D4,mapFormatToGlInternalFormat:k4,mapFormatToGlType:O4,mapGlToVertexFormat:p4,mapSize:G$,mapType:P2,mapViewDimensionToGlTarget:I4,mapWebGLBlendModesToPixi:E4,maskFrag:yF,maskVert:_F,maskWgsl:eS,matrixPool:Mr,measureHtmlText:NE,measureMixin:QO,measureTaggedText:$F,migrateFragmentFromV7toV8:F$,mipmapScaleModeToGlFilter:P4,multiplyColors:Td,multiplyHexColors:Ta,nextPow2:Ml,noiseFrag:cF,noiseWgsl:Zv,nonCompressedFormats:BL,normalizeExtensionPriority:id,onRenderMixin:JO,parseDDS:NL,parseFunctionBody:_q,parseKTX:FL,parseSVGDefinitions:gL,parseSVGFloatAttribute:wn,parseSVGPath:PN,parseSVGStyle:eE,parseTaggedText:xE,particleData:pS,particlesFrag:v5,particlesVert:S5,particlesWgsl:dS,passthroughFrag:fF,passthroughWgsl:Qv,path:ci,pointInTriangle:Jv,preloadVideo:TL,removeItems:E1,removeStructAndGroupDuplicates:AI,resetUids:aj,resolveCharacters:tU,resolveCompressedTextureUrl:fW,resolveJsonUrl:RL,resolveTextureUrl:rE,resourceToTexture:oI,roundPixelsBit:Ec,roundPixelsBitGl:wc,roundedShapeArc:fL,roundedShapeQuadraticCurve:pL,sayHello:LU,scaleModeToGlFilter:lS,setBasisTranscoderPath:RX,setKTXTranscoderPath:rW,setPositions:DF,setProgramName:vI,setUvs:OF,shapeBuilders:Fl,sortMixin:eI,spritesheetAsset:pI,squaredDistanceToLineSegment:dd,stripVersion:SI,styleAttributes:Uv,testImageFormat:z1,testVideoFormat:Jd,textStyleToCSS:lU,textureBit:EU,textureBitGl:wU,textureFrom:lI,tilingBit:MF,tilingBitGl:RF,toFillStyle:yo,toLocalGlobalMixin:tI,toStrokeStyle:Dd,tokenize:EE,tokenizeTaggedRuns:YF,transformVertices:_y,triangulateWithHoles:q1,trimRight:Fs,uboSyncFunctionsSTD40:T2,uboSyncFunctionsWGSL:l4,uid:Zt,uniformParsers:_o,unpremultiplyAlpha:Z$,unsafeEvalSupported:I1,updateLocalTransform:Sq,updateQuadBounds:S1,updateRenderGroupTransform:AU,updateRenderGroupTransforms:QE,updateTextBounds:vg,updateTransformAndChildren:JE,updateTransformBackwards:Jg,updateWorldTransform:Eq,v8_0_0:nt,v8_3_4:BO,validFormats:xg,validateRenderables:MU,vertexGPUTemplate:WN,vertexGlTemplate:qN,vkFormatToGPUFormat:jL,warn:Ue,webworkerExt:TO,wordWrap:KF,wordWrapTaggedLines:qF,wrapModeToGlAddress:Xm},Symbol.toStringTag,{value:"Module"}));var eY=Object.defineProperty,nl=Math.pow,tY=(n,e,t)=>e in n?eY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,le=(n,e,t)=>tY(n,typeof e!="symbol"?e+"":e,t),Kt=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{l(t.next(c))}catch(h){i(h)}},a=c=>{try{l(t.throw(c))}catch(h){i(h)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,a);l((t=t.apply(n,e)).next())});const JP=2,eB=2,tB={motionFadingDuration:500,idleMotionFadingDuration:2e3},an={log(n,...e){},warn(n,...e){console.warn(`[${n}]`,...e)},error(n,...e){console.error(`[${n}]`,...e)}};function nB(n,e,t){return n<e?e:n>t?t:n}function nY(n,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}function rY(n){let e=n.lastIndexOf("/");return e!=-1&&(n=n.slice(0,e)),e=n.lastIndexOf("/"),e!==-1&&(n=n.slice(e+1)),n}function iY(n,e){const t=n.indexOf(e);t!==-1&&n.splice(t,1)}class rB{constructor(){le(this,"audioContext",null),le(this,"analyzer",null),le(this,"mediaStreamSource",null),le(this,"dataArray",null),le(this,"animationFrameId",null),le(this,"onVolumeChange",null)}initAudioContext(){return Kt(this,null,function*(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyzer=this.audioContext.createAnalyser(),this.analyzer.fftSize=256,this.dataArray=new Uint8Array(this.analyzer.frequencyBinCount))})}startMicrophone(e){return Kt(this,null,function*(){yield this.initAudioContext();try{const t=yield navigator.mediaDevices.getUserMedia({audio:!0});this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),this.mediaStreamSource.connect(this.analyzer),this.onVolumeChange=e,this.startAnalysis()}catch(t){throw new Error(`Failed to access microphone: ${t}`)}})}playAndAnalyze(e,t){return Kt(this,null,function*(){yield this.initAudioContext();try{const r=atob(e.split(",")[1]||e),i=new Uint8Array(r.length);for(let l=0;l<r.length;l++)i[l]=r.charCodeAt(l);const s=yield this.audioContext.decodeAudioData(i.buffer.slice(0)),a=this.audioContext.createBufferSource();a.buffer=s,a.connect(this.analyzer),a.connect(this.audioContext.destination),this.onVolumeChange=t,this.startAnalysis(),a.start(0),a.onended=()=>{this.stopAnalysis(),this.onVolumeChange&&this.onVolumeChange(0)}}catch(r){throw new Error(`Failed to play audio: ${r}`)}})}startAnalysis(){if(!this.analyzer||!this.dataArray)return;const e=()=>{this.analyzer.getByteFrequencyData(this.dataArray);let t=0,r=0;if(this.dataArray&&this.dataArray.length>0){for(let l=0;l<this.dataArray.length;l++)t+=this.dataArray[l];r=t/this.dataArray.length}const i=Math.min(1,r/180);let s=Math.pow(i,.8);s<.05&&(s=0),this.onVolumeChange&&this.onVolumeChange(s),this.animationFrameId=requestAnimationFrame(e)};e()}stopAnalysis(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}stopMicrophone(){if(this.stopAnalysis(),this.mediaStreamSource){const e=this.mediaStreamSource.mediaStream;e&&e.getTracks&&e.getTracks().forEach(t=>t.stop()),this.mediaStreamSource.disconnect(),this.mediaStreamSource=null}this.onVolumeChange=null}destroy(){this.stopMicrophone(),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.analyzer=null,this.dataArray=null}}class H5 extends hr{constructor(e,t){super(),le(this,"tag"),le(this,"settings"),le(this,"expressions",[]),le(this,"defaultExpression"),le(this,"currentExpression"),le(this,"reserveExpressionIndex",-1),le(this,"destroyed",!1),this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return Kt(this,null,function*(){if(!this.definitions[e]){an.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){an.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const t=yield this._loadExpression(e);return this.expressions[e]=t,t})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return Kt(this,null,function*(){if(this.definitions.length){const e=[];for(let t=0;t<this.definitions.length;t++)this.expressions[t]!==null&&this.expressions[t]!==this.currentExpression&&t!==this.reserveExpressionIndex&&e.push(t);if(e.length){const t=Math.floor(Math.random()*e.length);return this.setExpression(t)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return Kt(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const t=yield this.loadExpression(e);return!t||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=t,this._setExpression(t),!0)})}update(e,t){return this.isFinished()?!1:this.updateParameters(e,t)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const iB=.01,sY=40/7.5,aY=1/(.15*1e3);class oY{constructor(){le(this,"targetX",0),le(this,"targetY",0),le(this,"x",0),le(this,"y",0),le(this,"vx",0),le(this,"vy",0)}focus(e,t,r=!1){this.targetX=nB(e,-1,1),this.targetY=nB(t,-1,1),r&&(this.x=this.targetX,this.y=this.targetY)}update(e){const t=this.targetX-this.x,r=this.targetY-this.y;if(Math.abs(t)<iB&&Math.abs(r)<iB)return;const i=Math.sqrt(nl(t,2)+nl(r,2)),s=sY/(1e3/e);let a=s*(t/i)-this.vx,l=s*(r/i)-this.vy;const c=Math.sqrt(nl(a,2)+nl(l,2)),h=s*aY*e;c>h&&(a*=h/c,l*=h/c),this.vx+=a,this.vy+=l;const d=Math.sqrt(nl(this.vx,2)+nl(this.vy,2)),p=.5*(Math.sqrt(nl(h,2)+8*h*i)-h);d>p&&(this.vx*=p/d,this.vy*=p/d),this.x+=this.vx,this.y+=this.vy}}class lw{constructor(e){le(this,"json"),le(this,"name"),le(this,"url"),le(this,"pose"),le(this,"physics"),this.json=e;const t=e.url;if(typeof t!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=t,this.name=rY(this.url)}resolveURL(e){try{return new URL(e,this.url).href}catch{return(this.url.endsWith("/")?this.url:this.url.substring(0,this.url.lastIndexOf("/")+1))+e}}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let t=0;t<this.textures.length;t++)this.textures[t]=e(this.textures[t],`textures[${t}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(t=>(e.push(t),t)),e}validateFiles(e){const t=(s,a)=>{const l=this.resolveURL(s);if(!e.includes(l)){if(a)throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(s=>t(s,!0)),this.getDefinedFiles().filter(s=>t(s,!1))}}var gS=(n=>(n[n.NONE=0]="NONE",n[n.IDLE=1]="IDLE",n[n.NORMAL=2]="NORMAL",n[n.FORCE=3]="FORCE",n))(gS||{});class lY{constructor(){le(this,"tag"),le(this,"debug",!1),le(this,"currentPriority",0),le(this,"reservePriority",0),le(this,"currentGroup"),le(this,"currentIndex"),le(this,"reservedGroup"),le(this,"reservedIndex"),le(this,"reservedIdleGroup"),le(this,"reservedIdleIndex")}reserve(e,t,r){if(r<=0)return an.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&t===this.currentIndex)return an.log(this.tag,"Motion is already playing.",this.dump(e,t)),!1;if(e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex)return an.log(this.tag,"Motion is already reserved.",this.dump(e,t)),!1;if(r===1){if(this.currentPriority!==0)return an.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,t)),!1;if(this.reservedIdleGroup!==void 0)return an.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,t)),!1;this.setReservedIdle(e,t)}else{if(r<3){if(r<=this.currentPriority)return an.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,t)),!1;if(r<=this.reservePriority)return an.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,t)),!1}this.setReserved(e,t,r)}return!0}start(e,t,r,i){if(i===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return an.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,r)),!1}else{if(t!==this.reservedGroup||r!==this.reservedIndex)return an.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(t,r)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(t,r,i),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,t,r){this.currentPriority=r,this.currentGroup=e,this.currentIndex=t}setReserved(e,t,r){this.reservePriority=r,this.reservedGroup=e,this.reservedIndex=t}setReservedIdle(e,t){this.reservedIdleGroup=e,this.reservedIdleIndex=t}isActive(e,t){return e===this.currentGroup&&t===this.currentIndex||e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!1}dump(e,t){if(this.debug){const r=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${t}
`+r.map(i=>"["+i+"] "+this[i]).join(`
`)}return""}}const uY="SoundManager",cY=.5;class ml{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(t=>t.volume=this._volume)}static add(e,t,r){const i=new Audio(e);return i.volume=this._volume,i.preload="auto",i.addEventListener("ended",()=>{this.dispose(i),t?.()}),i.addEventListener("error",s=>{this.dispose(i),an.warn(uY,`Error occurred on "${e}"`,s.error),r?.(s.error)}),this.audios.push(i),i}static play(e){return new Promise((t,r)=>{var i;(i=e.play())==null||i.catch(s=>{e.dispatchEvent(new ErrorEvent("error",{error:s})),r(s)}),e.readyState===e.HAVE_ENOUGH_DATA?t():e.addEventListener("canplaythrough",t)})}static dispose(e){e.pause(),e.removeAttribute("src"),iY(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}le(ml,"audios",[]);le(ml,"_volume",cY);class uw extends hr{constructor(e,t){super(),le(this,"tag"),le(this,"settings"),le(this,"motionGroups",{}),le(this,"state",new lY),le(this,"currentAudio"),le(this,"playing",!1),le(this,"destroyed",!1),this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e?.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const r of Object.keys(this.definitions))this.motionGroups[r]=[];let t;switch(e?.motionPreload){case"NONE":return;case"ALL":t=Object.keys(this.definitions);break;default:t=[this.groups.idle];break}for(const r of t)if(this.definitions[r])for(let i=0;i<this.definitions[r].length;i++)this.loadMotion(r,i).then()}loadMotion(e,t){return Kt(this,null,function*(){var r;if(!((r=this.definitions[e])!=null&&r[t])){an.warn(this.tag,`Undefined motion at "${e}"[${t}]`);return}if(this.motionGroups[e][t]===null){an.warn(this.tag,`Cannot start motion at "${e}"[${t}] because it's already failed in loading.`);return}if(this.motionGroups[e][t])return this.motionGroups[e][t];const i=yield this._loadMotion(e,t);if(!this.destroyed)return this.motionGroups[e][t]=i??null,i})}_loadMotion(e,t){throw new Error("Not implemented.")}startMotion(e,t){return Kt(this,arguments,function*(r,i,s=gS.NORMAL){var a;if(!this.state.reserve(r,i,s))return!1;const l=(a=this.definitions[r])==null?void 0:a[i];if(!l)return!1;this.currentAudio&&ml.dispose(this.currentAudio);let c;{const d=this.getSoundFile(l);if(d)try{c=ml.add(this.settings.resolveURL(d),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=c}catch(p){an.warn(this.tag,"Failed to create audio",d,p)}}const h=yield this.loadMotion(r,i);return c&&(yield ml.play(c).catch(p=>an.warn(this.tag,"Failed to play audio",c.src,p))),this.state.start(h,r,i,s)?(an.log(this.tag,"Start motion:",this.getMotionName(l)),this.emit("motionStart",r,i,c),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(h),!0):(c&&(ml.dispose(c),this.currentAudio=void 0),!1)})}startRandomMotion(e,t){return Kt(this,null,function*(){const r=this.definitions[e];if(r?.length){const i=[];for(let s=0;s<r.length;s++)this.motionGroups[e][s]!==null&&!this.state.isActive(e,s)&&i.push(s);if(i.length){const s=Math.floor(Math.random()*i.length);return this.startMotion(e,i[s],t)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(ml.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,t){var r;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((r=this.expressionManager)==null||r.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,gS.IDLE)),this.updateParameters(e,t)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const t=this;t.definitions=void 0,t.motionGroups=void 0}}const hY={x:0,y:0,width:0,height:0};class dY extends hr{constructor(){super(...arguments),le(this,"focusController",new oY),le(this,"pose"),le(this,"physics"),le(this,"originalWidth",0),le(this,"originalHeight",0),le(this,"width",0),le(this,"height",0),le(this,"localTransform",new Ce),le(this,"drawingMatrix",new Ce),le(this,"hitAreas",{}),le(this,"textureFlipY",!1),le(this,"viewport",[0,0,0,0]),le(this,"destroyed",!1),le(this,"lipSyncEnabled",!1),le(this,"lipSyncValue",0),le(this,"eyesAlwaysLookAtCamera",!1),le(this,"eyeBlinkEnabled",!0)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,t=this.getSize();e.originalWidth=t[0],e.originalHeight=t[1];const r=Object.assign({width:JP,height:eB},this.getLayout());this.localTransform.scale(r.width/JP,r.height/eB),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const i=r.x!==void 0&&r.x-r.width/2||r.centerX!==void 0&&r.centerX||r.left!==void 0&&r.left-r.width/2||r.right!==void 0&&r.right+r.width/2||0,s=r.y!==void 0&&r.y-r.height/2||r.centerY!==void 0&&r.centerY||r.top!==void 0&&r.top-r.height/2||r.bottom!==void 0&&r.bottom+r.height/2||0;this.localTransform.translate(this.width*i,-this.height*s)}setupHitAreas(){const e=this.getHitAreaDefs().filter(t=>t.index>=0);for(const t of e)this.hitAreas[t.name]=t}hitTest(e,t){return Object.keys(this.hitAreas).filter(r=>this.isHit(r,e,t))}isHit(e,t,r){if(!this.hitAreas[e])return!1;const i=this.hitAreas[e].index,s=this.getDrawableBounds(i,hY);return s.x<=t&&t<=s.x+s.width&&s.y<=r&&r<=s.y+s.height}getDrawableBounds(e,t){const r=this.getDrawableVertices(e);let i=r[0],s=r[0],a=r[1],l=r[1];for(let c=0;c<r.length;c+=2){const h=r[c],d=r[c+1];i=Math.min(h,i),s=Math.max(h,s),a=Math.min(d,a),l=Math.max(d,l)}return t??(t={}),t.x=i,t.y=a,t.width=s-i,t.height=l-a,t}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,t){this.focusController.update(e)}setLipSyncValue(e){this.lipSyncValue=Math.max(0,Math.min(1,e))}setLipSyncEnabled(e){this.lipSyncEnabled=e}setEyeBlinkEnabled(e){this.eyeBlinkEnabled=e}isEyeBlinkEnabled(){return this.eyeBlinkEnabled}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const fY="XHRLoader";class sB extends Error{constructor(e,t,r,i=!1){super(e),this.url=t,this.status=r,this.aborted=i}}const Id=class ti{static createXHR(e,t,r,i,s){const a=new XMLHttpRequest;if(ti.allXhrSet.add(a),e){let l=ti.xhrMap.get(e);l?l.add(a):(l=new Set([a]),ti.xhrMap.set(e,l)),e.listeners("destroy").includes(ti.cancelXHRs)||e.once("destroy",ti.cancelXHRs)}return a.open("GET",t),a.responseType=r,a.onload=()=>{(a.status===200||a.status===0)&&a.response?i(a.response):a.onerror()},a.onerror=()=>{an.warn(fY,`Failed to load resource as ${a.responseType} (Status ${a.status}): ${t}`),s(new sB("Network error.",t,a.status))},a.onabort=()=>s(new sB("Aborted.",t,a.status,!0)),a.onloadend=()=>{var l;ti.allXhrSet.delete(a),e&&((l=ti.xhrMap.get(e))==null||l.delete(a))},a}static cancelXHRs(){var e;(e=ti.xhrMap.get(this))==null||e.forEach(t=>{t.abort(),ti.allXhrSet.delete(t)}),ti.xhrMap.delete(this)}static release(){ti.allXhrSet.forEach(e=>e.abort()),ti.allXhrSet.clear(),ti.xhrMap=new WeakMap}};le(Id,"xhrMap",new WeakMap);le(Id,"allXhrSet",new Set);le(Id,"loader",(n,e)=>new Promise((t,r)=>{Id.createXHR(n.target,n.settings?n.settings.resolveURL(n.url):n.url,n.type,s=>{n.result=s,t()},r).send()}));let pY=Id;function j5(n,e){let t=-1;return r(0);function r(i,s){if(s)return Promise.reject(s);if(i<=t)return Promise.reject(new Error("next() called multiple times"));t=i;const a=n[i];if(!a)return Promise.resolve();try{return Promise.resolve(a(e,r.bind(null,i+1)))}catch(l){return Promise.reject(l)}}}class Eo{static load(e){return j5(this.middlewares,e).then(()=>e.result)}}le(Eo,"middlewares",[pY.loader]);function mY(n){return Kt(this,arguments,function*(e,t={}){try{return yield Gu.load(e)}catch(r){if(r instanceof Error)throw r;const i=new Error("Texture loading error");throw i.event=r,i}})}function gY(){}const aB="Live2DFactory",X5=(n,e)=>Kt(null,null,function*(){if(typeof n.source=="string"){const t=yield Eo.load({url:n.source,type:"json",target:n.live2dModel});t.url=n.source,n.source=t,n.live2dModel.emit("settingsJSONLoaded",t)}return e()}),W5=(n,e)=>Kt(null,null,function*(){if(n.source instanceof lw)return n.settings=n.source,e();if(typeof n.source=="object"){const t=ns.findRuntime(n.source);if(t){const r=t.createModelSettings(n.source);return n.settings=r,n.live2dModel.emit("settingsLoaded",r),e()}}throw new TypeError("Unknown settings format.")}),$5=(n,e)=>{if(n.settings){const t=ns.findRuntime(n.settings);if(t)return t.ready().then(e)}return e()},q5=(n,e)=>Kt(null,null,function*(){yield e();const t=n.internalModel;if(t){const r=n.settings,i=ns.findRuntime(r);if(i){const s=[];r.pose&&s.push(Eo.load({settings:r,url:r.pose,type:"json",target:t}).then(a=>{t.pose=i.createPose(t.coreModel,a),n.live2dModel.emit("poseLoaded",t.pose)}).catch(a=>{n.live2dModel.emit("poseLoadError",a),an.warn(aB,"Failed to load pose.",a)})),r.physics&&s.push(Eo.load({settings:r,url:r.physics,type:"json",target:t}).then(a=>{t.physics=i.createPhysics(t.coreModel,a),n.live2dModel.emit("physicsLoaded",t.physics)}).catch(a=>{n.live2dModel.emit("physicsLoadError",a),an.warn(aB,"Failed to load physics.",a)})),s.length&&(yield Promise.all(s))}}}),Y5=(n,e)=>Kt(null,null,function*(){if(n.settings){const t=n.live2dModel,r=Promise.all(n.settings.textures.map(i=>{const s=n.settings.resolveURL(i);return mY(s,{crossOrigin:n.options.crossOrigin})}));if(r.catch(gY),yield e(),n.internalModel)t.internalModel=n.internalModel,t.emit("modelLoaded",n.internalModel);else throw new TypeError("Missing internal model.");t.textures=yield r,t.emit("textureLoaded",t.textures)}else throw new TypeError("Missing settings.")}),K5=(n,e)=>Kt(null,null,function*(){const t=n.settings;if(t instanceof lw){const r=ns.findRuntime(t);if(!r)throw new TypeError("Unknown model settings.");const i=yield Eo.load({settings:t,url:t.moc,type:"arraybuffer",target:n.live2dModel});if(!r.isValidMoc(i))throw new Error("Invalid moc data");const s=r.createCoreModel(i);return n.internalModel=r.createInternalModel(s,t,n.options),e()}throw new TypeError("Missing settings.")}),si=class ku{static unzip(e,t){return Kt(this,null,function*(){const r=yield ku.getFilePaths(e),i=[];for(const a of t.getDefinedFiles()){const l=decodeURI(new URL(a,t.url).href);r.includes(l)&&i.push(l)}const s=yield ku.getFiles(e,i);for(let a=0;a<s.length;a++){const l=i[a],c=s[a];Object.defineProperty(c,"webkitRelativePath",{value:l})}return s})}static createSettings(e){return Kt(this,null,function*(){const r=(yield ku.getFilePaths(e)).find(l=>l.endsWith("model.json")||l.endsWith("model3.json"));if(!r)throw new Error("Settings file not found");const i=yield ku.readText(e,r);if(!i)throw new Error("Empty settings file: "+r);const s=JSON.parse(i);s.url=r;const a=ku.live2dFactory.findRuntime(s);if(!a)throw new Error("Unknown settings JSON");return a.createModelSettings(s)})}static zipReader(e,t){return Kt(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(e){return Kt(this,null,function*(){throw new Error("Not implemented")})}static getFiles(e,t){return Kt(this,null,function*(){throw new Error("Not implemented")})}static readText(e,t){return Kt(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(e){}};le(si,"live2dFactory");le(si,"ZIP_PROTOCOL","zip://");le(si,"uid",0);le(si,"factory",(n,e)=>Kt(null,null,function*(){const t=n.source;let r,i,s;if(typeof t=="string"&&(t.endsWith(".zip")||t.startsWith(si.ZIP_PROTOCOL))?(t.startsWith(si.ZIP_PROTOCOL)?r=t.slice(si.ZIP_PROTOCOL.length):r=t,i=yield Eo.load({url:r,type:"blob",target:n.live2dModel})):Array.isArray(t)&&t.length===1&&t[0]instanceof File&&t[0].name.endsWith(".zip")&&(i=t[0],r=URL.createObjectURL(i),s=t.settings),i){if(!i.size)throw new Error("Empty zip file");const a=yield si.zipReader(i,r);s||(s=yield si.createSettings(a)),s._objectURL=si.ZIP_PROTOCOL+si.uid+"/"+s.url;const l=yield si.unzip(a,s);l.settings=s,n.source=l,r.startsWith("blob:")&&n.live2dModel.once("modelLoaded",c=>{c.once("destroy",function(){URL.revokeObjectURL(r)})}),si.releaseReader(a)}return e()}));let Z5=si;const Us=class qm{static resolveURL(e,t){var r;const i=(r=qm.filesMap[e])==null?void 0:r[t];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+t);return i}static upload(e,t){return Kt(this,null,function*(){const r={};for(const i of t.getDefinedFiles()){const s=decodeURI(new URL(i,t.url).href),a=e.find(l=>l.webkitRelativePath===s);a&&(r[i]=URL.createObjectURL(a))}qm.filesMap[t._objectURL]=r})}static createSettings(e){return Kt(this,null,function*(){const t=e.find(l=>l.name.endsWith("model.json")||l.name.endsWith("model3.json"));if(!t)throw new TypeError("Settings file not found");const r=yield qm.readText(t),i=JSON.parse(r);i.url=t.webkitRelativePath;const s=ns.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");const a=s.createModelSettings(i);return a._objectURL=URL.createObjectURL(t),a})}static readText(e){return Kt(this,null,function*(){return new Promise((t,r)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=r,i.readAsText(e,"utf8")})})}};le(Us,"live2dFactory");le(Us,"filesMap",{});le(Us,"factory",(n,e)=>Kt(null,null,function*(){if(Array.isArray(n.source)&&n.source[0]instanceof File){const t=n.source;let r=t.settings;if(!r)r=yield Us.createSettings(t);else if(!r._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');r.validateFiles(t.map(i=>encodeURI(i.webkitRelativePath))),yield Us.upload(t,r),r.resolveURL=function(i){return Us.resolveURL(this._objectURL,i)},n.source=r,n.live2dModel.once("modelLoaded",i=>{i.once("destroy",function(){const s=this.settings._objectURL;if(URL.revokeObjectURL(s),Us.filesMap[s])for(const a of Object.values(Us.filesMap[s]))URL.revokeObjectURL(a);delete Us.filesMap[s]})})}return e()}));let Q5=Us;const ws=class or{static registerRuntime(e){or.runtimes.push(e),or.runtimes.sort((t,r)=>r.version-t.version)}static findRuntime(e){for(const t of or.runtimes)if(t.test(e))return t}static setupLive2DModel(e,t,r){return Kt(this,null,function*(){const i=new Promise(l=>e.once("textureLoaded",l)),s=new Promise(l=>e.once("modelLoaded",l)),a=Promise.all([i,s]).then(()=>e.emit("ready"));yield j5(or.live2DModelMiddlewares,{live2dModel:e,source:t,options:r||{}}),yield a,e.emit("load")})}static loadMotion(e,t,r){var i,s;const a=l=>e.emit("motionLoadError",t,r,l);try{const l=(i=e.definitions[t])==null?void 0:i[r];if(!l)return Promise.resolve(void 0);e.listeners("destroy").includes(or.releaseTasks)||e.once("destroy",or.releaseTasks);let c=or.motionTasksMap.get(e);c||(c={},or.motionTasksMap.set(e,c));let h=c[t];h||(h=[],c[t]=h);const d=e.getMotionFile(l),p=or.findRuntime(e.settings),g=p?.constructor.name==="Cubism5Runtime"?"text":"json";return(s=h[r])!=null||(h[r]=Eo.load({url:d,settings:e.settings,type:g,target:e}).then(y=>{var _;const S=(_=or.motionTasksMap.get(e))==null?void 0:_[t];S&&delete S[r];const x=e.createMotion(y,t,l);return e.emit("motionLoaded",t,r,x),x}).catch(y=>{an.warn(e.tag,`Failed to load motion: ${d}
`,y),a(y)})),h[r]}catch(l){an.warn(e.tag,`Failed to load motion at "${t}"[${r}]
`,l),a(l)}return Promise.resolve(void 0)}static loadExpression(e,t){var r;const i=s=>e.emit("expressionLoadError",t,s);try{const s=e.definitions[t];if(!s)return Promise.resolve(void 0);e.listeners("destroy").includes(or.releaseTasks)||e.once("destroy",or.releaseTasks);let a=or.expressionTasksMap.get(e);a||(a=[],or.expressionTasksMap.set(e,a));const l=e.getExpressionFile(s);return(r=a[t])!=null||(a[t]=Eo.load({url:l,settings:e.settings,type:"json",target:e}).then(c=>{const h=or.expressionTasksMap.get(e);h&&delete h[t];const d=e.createExpression(c,s);return e.emit("expressionLoaded",t,d),d}).catch(c=>{an.warn(e.tag,`Failed to load expression: ${l}
`,c),i(c)})),a[t]}catch(s){an.warn(e.tag,`Failed to load expression at [${t}]
`,s),i(s)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof uw?or.motionTasksMap.delete(this):or.expressionTasksMap.delete(this)}};le(ws,"runtimes",[]);le(ws,"urlToJSON",X5);le(ws,"jsonToSettings",W5);le(ws,"waitUntilReady",$5);le(ws,"setupOptionals",q5);le(ws,"setupEssentials",Y5);le(ws,"createInternalModel",K5);le(ws,"live2DModelMiddlewares",[Z5.factory,Q5.factory,X5,W5,$5,q5,Y5,K5]);le(ws,"motionTasksMap",new WeakMap);le(ws,"expressionTasksMap",new WeakMap);let ns=ws;uw.prototype._loadMotion=function(n,e){return ns.loadMotion(this,n,e)};H5.prototype._loadExpression=function(n){return ns.loadExpression(this,n)};Q5.live2dFactory=ns;Z5.live2dFactory=ns;const J5=class yS{constructor(e,{autoUpdate:t=!0,autoHitTest:r=!0,autoFocus:i=!0,autoInteract:s,ticker:a}={}){le(this,"model"),le(this,"destroyed",!1),le(this,"_ticker"),le(this,"_autoUpdate",!1),le(this,"_autoHitTest",!1),le(this,"_autoFocus",!1),a||(yS.defaultTicker?a=yS.defaultTicker:typeof PIXI<"u"&&(a=PIXI.Ticker.shared)),s!==void 0&&(r=s,i=s,an.warn(e.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=e,this.ticker=a,this.autoUpdate=t,this.autoHitTest=r,this.autoFocus=i,(r||i)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(e){var t;this._ticker&&this._ticker.remove(hm,this),this._ticker=e,this._autoUpdate&&((t=this._ticker)==null||t.add(hm,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var t;this.destroyed||(e?this._ticker?(this._ticker.add(hm,this),this._autoUpdate=!0):an.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((t=this._ticker)==null||t.remove(hm,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(e){e!==this.autoHitTest&&(e?this.model.on("pointertap",lB,this):this.model.off("pointertap",lB,this),this._autoHitTest=e)}get autoFocus(){return this._autoFocus}set autoFocus(e){e!==this.autoFocus&&(e?this.model.on("globalpointermove",uB,this):this.model.off("globalpointermove",uB,this),this._autoFocus=e)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(e){this.autoHitTest=e,this.autoFocus=e}onTickerUpdate(){const e=this.ticker.deltaMS;this.model.update(e)}onTap(e){this.model.tap(e.global.x,e.global.y)}onPointerMove(e){this.model.focus(e.global.x,e.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};le(J5,"defaultTicker");let oB=J5;function hm(){this.onTickerUpdate()}function lB(n){this.onTap(n)}function uB(n){this.onPointerMove(n)}class yY extends gE{}const Wi=new Bt,_Y=new Ce;class bY extends bn{constructor(e){super(),le(this,"tag","Live2DModel(uninitialized)"),le(this,"internalModel"),le(this,"textures",[]),le(this,"transform",new yY),le(this,"anchor",new gn({_onUpdate:this.onAnchorChange.bind(this)},0,0)),le(this,"glContextID",-1),le(this,"renderer"),le(this,"elapsedTime",0),le(this,"deltaTime",0),le(this,"automator"),le(this,"audioAnalyzer",null),le(this,"isSpeaking",!1),le(this,"_interactionRegistered",!1),this.automator=new oB(this,e),this.onRender=this._onRenderCallback.bind(this),this.once("modelLoaded",()=>this.init(e))}static from(e,t){const r=new this(t);return ns.setupLive2DModel(r,e,t).then(()=>r)}static fromSync(e,t){const r=new this(t);return ns.setupLive2DModel(r,e,t).then(t?.onLoad).catch(t?.onError),r}static registerTicker(e){oB.defaultTicker=e.shared}setRenderer(e){this.isWebGLRenderer(e)&&(this.renderer=e),e.canvas&&this.registerInteraction(e.canvas)}isWebGLRenderer(e){return"gl"in e&&e.gl instanceof WebGL2RenderingContext}init(e){this.isReady()&&(this.tag=`Live2DModel(${this.internalModel.settings.name})`,this.updateBoundsArea())}isReady(){return this.internalModel!==void 0}canRender(){return this.isReady()&&this.textures.length>0}hasValidRenderer(){return this.renderer!==void 0&&this.renderer.gl instanceof WebGL2RenderingContext}isWebGLTexture(e){return e instanceof WebGLTexture}extractWebGLTexture(e,t){if(!e.texture||!t.source)return null;try{const r=e.texture.getGlSource(t.source);if(r&&r.texture)return r.texture;const i=t.source;if(i?._glTextures){const s=i._glTextures[this.glContextID];return s?.texture||s}}catch(r){console.warn("Failed to extract WebGL texture:",r)}return null}onAnchorChange(){this.isReady()&&this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,t,r){return this.isReady()?t===void 0?this.internalModel.motionManager.startRandomMotion(e,r):this.internalModel.motionManager.startMotion(e,t,r):Promise.resolve(!1)}expression(e){return!this.isReady()||!this.internalModel.motionManager.expressionManager?Promise.resolve(!1):e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e)}focus(e,t,r=!1){if(!this.isReady())return;Wi.x=e,Wi.y=t,this.toModelPosition(Wi,Wi,!0);const i=Wi.x/this.internalModel.originalWidth*2-1,s=Wi.y/this.internalModel.originalHeight*2-1,a=Math.atan2(s,i);this.internalModel.focusController.focus(Math.cos(a),-Math.sin(a),r)}tap(e,t){const r=this.hitTest(e,t);r.length&&(an.log(this.tag,"Hit",r),this.emit("hit",r))}hitTest(e,t){return this.isReady()?(Wi.x=e,Wi.y=t,this.toModelPosition(Wi,Wi),this.internalModel.hitTest(Wi.x,Wi.y)):[]}toModelPosition(e,t=e.clone(),r){const i=this.toLocal(e,void 0,t);return this.isReady()&&this.internalModel.localTransform.applyInverse(i,i),i}registerInteraction(e){this._interactionRegistered||(e.addEventListener("pointerdown",t=>{if(this.automator.autoInteract){const r=e.getBoundingClientRect(),i=t.clientX-r.left,s=t.clientY-r.top;this.tap(i,s)}}),this._interactionRegistered=!0)}containsPoint(e){return this.getBounds(!0).rectangle.contains(e.x,e.y)}updateBoundsArea(){this.isReady()&&this.internalModel.width&&this.internalModel.height?this.boundsArea=new Rt(0,0,this.internalModel.width,this.internalModel.height):this.boundsArea||(this.boundsArea=new Rt(0,0,512,512))}_getContextUID(e){const t=e;return t._pixiContextUID||(t._pixiContextUID=Date.now()+Math.random()),t._pixiContextUID}update(e){this.deltaTime+=e,this.elapsedTime+=e}_onRenderCallback(){var e,t,r,i;let s=this.renderer;if(!s){const a=globalThis.app||window.app;if(!a?.renderer)return;const l=a.renderer;if(!this.isWebGLRenderer(l))return;s=l,this.renderer=s}if(this.canRender())try{let a=!1;const l=this._getContextUID(s.gl);this.glContextID!==l&&(this.glContextID=l,this.isReady()&&this.internalModel.updateWebGLContext(s.gl,this.glContextID),a=!0);for(let g=0;g<this.textures.length;g++){const y=this.textures[g];if(!y.source)continue;const _=y.source,S=a||!((e=_?._glTextures)!=null&&e[this.glContextID]),x=this.extractWebGLTexture(s,y);this.isWebGLTexture(x)&&this.internalModel&&(S&&s.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),this.internalModel.bindTexture(g,x)),(t=s.textureGC)!=null&&t.count&&y.source&&(y.source.touched=s.textureGC.count)}a&&this.internalModel&&s.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,!1);const c={x:0,y:0,width:s.width||((r=s.screen)==null?void 0:r.width)||800,height:s.height||((i=s.screen)==null?void 0:i.height)||600};this.internalModel&&(this.internalModel.viewport=[c.x,c.y,c.width,c.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0));const h=this.worldTransform||this.groupTransform||this.localTransform;let d;if(s.globalUniforms&&"projectionMatrix"in s.globalUniforms)d=s.globalUniforms.projectionMatrix;else{d=new Ce;const{width:g,height:y}=s.screen;d.set(2/g,0,0,-2/y,-1,1)}const p=_Y.copyFrom(d).append(h);this.internalModel&&(this.internalModel.updateTransform(p),this.internalModel.draw(s.gl))}catch(a){console.error("Error in Live2D render callback:",a)}}startLipSync(){this.isReady()&&this.internalModel.setLipSyncEnabled(!0)}stopLipSync(){this.isReady()&&(this.internalModel.setLipSyncEnabled(!1),this.internalModel.setLipSyncValue(0))}setLipSyncValue(e){this.isReady()&&this.internalModel.setLipSyncValue(e)}isLipSyncEnabled(){return this.isReady()?this.internalModel.lipSyncEnabled:!1}getLipSyncValue(){return this.isReady()?this.internalModel.lipSyncValue:0}setEyesAlwaysLookAtCamera(e){this.isReady()&&(this.internalModel.eyesAlwaysLookAtCamera=e)}isEyesAlwaysLookAtCamera(){return this.isReady()?this.internalModel.eyesAlwaysLookAtCamera:!1}setEyeBlinkEnabled(e){this.isReady()&&this.internalModel.setEyeBlinkEnabled(e)}isEyeBlinkEnabled(){return this.isReady()?this.internalModel.isEyeBlinkEnabled():!0}speak(e){return Kt(this,arguments,function*(t,r={}){if(!this.isReady())throw new Error("Model is not ready");this.isSpeaking&&this.stopSpeaking();try{this.isSpeaking=!0,this.audioAnalyzer||(this.audioAnalyzer=new rB),this.startLipSync(),yield this.audioAnalyzer.playAndAnalyze(t,i=>{const s=Math.min(1,i*(r.volume||1));this.setLipSyncValue(s)}),this.isSpeaking=!1,this.setLipSyncValue(0),r.onFinish&&r.onFinish()}catch(i){this.isSpeaking=!1,this.setLipSyncValue(0);const s=i instanceof Error?i:new Error(String(i));r.onError?r.onError(s):console.error("Speaking error:",s)}})}stopSpeaking(){this.audioAnalyzer&&(this.audioAnalyzer.destroy(),this.audioAnalyzer=null),this.isSpeaking=!1,this.setLipSyncValue(0)}isSpeakingNow(){return this.isSpeaking}startMicrophoneLipSync(e){return Kt(this,null,function*(){if(!this.isReady())throw new Error("Model is not ready");try{this.audioAnalyzer||(this.audioAnalyzer=new rB),this.startLipSync(),yield this.audioAnalyzer.startMicrophone(t=>{this.setLipSyncValue(t)})}catch(t){const r=t instanceof Error?t:new Error(String(t));e?e(r):console.error("Microphone error:",r)}})}stopMicrophoneLipSync(){this.audioAnalyzer&&this.audioAnalyzer.stopMicrophone(),this.setLipSyncValue(0)}destroy(e){this.emit("destroy"),e?.texture&&this.textures.forEach(t=>t.destroy(e.baseTexture)),this.automator.destroy(),this.audioAnalyzer&&(this.audioAnalyzer.destroy(),this.audioAnalyzer=null),this.isReady()&&this.internalModel.destroy(),super.destroy(e)}}const e8=class _S{constructor(e=0){e<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(e),this._capacity=e,this._size=0)}at(e){return this._ptr[e]}set(e,t){this._ptr[e]=t}get(e=0){const t=new Array;for(let r=e;r<this._size;r++)t.push(this._ptr[r]);return t}pushBack(e){this._size>=this._capacity&&this.prepareCapacity(this._capacity==0?_S.DefaultSize:this._capacity*2),this._ptr[this._size++]=e}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(e,t){this._size<e&&this.prepareCapacity(e);for(let i=0;i<e;i++)this._ptr[i]=t;this._size=e}resize(e,t=null){this.updateSize(e,t,!0)}updateSize(e,t=null,r=!0){if(this._size<e)if(this.prepareCapacity(e),r)for(let s=this._size;s<e;s++)typeof t=="function"?this._ptr[s]=JSON.parse(JSON.stringify(new t)):this._ptr[s]=t;else for(let s=this._size;s<e;s++)this._ptr[s]=t;else{const s=this._size-e;this._ptr.splice(this._size-s,s)}this._size=e}insert(e,t,r){let i=e._index;const s=t._index,a=r._index,l=a-s;this.prepareCapacity(this._size+l);const c=this._size-i;if(c>0)for(let h=0;h<c;h++)this._ptr.splice(i+h,0,null);for(let h=s;h<a;h++,i++)this._ptr[i]=t._vector._ptr[h];this._size=this._size+l}remove(e){return e<0||this._size<=e?!1:(this._ptr.splice(e,1),--this._size,!0)}erase(e){const t=e._index;return t<0||this._size<=t?e:(this._ptr.splice(t,1),--this._size,new Ym(this,t))}prepareCapacity(e){e>this._capacity&&(this._capacity==0?(this._ptr=new Array(e),this._capacity=e):(this._ptr.length=e,this._capacity=e))}begin(){return this._size==0?this.end():new Ym(this,0)}end(){return new Ym(this,this._size)}getOffset(e){const t=new _S;return t._ptr=this.get(e),t._size=this.get(e).length,t._capacity=this.get(e).length,t}};e8.DefaultSize=10;let Ke=e8,Ym=class bS{constructor(e,t){this._vector=e??null,this._index=t??0}set(e){return this._index=e._index,this._vector=e._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new bS(this._vector,this._index++)}decrement(){return new bS(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(e){return this._index=e._index,this._vector=e._vector,this}notEqual(e){return this._index!=e._index||this._vector!=e._vector}};var cB;(n=>{n.csmVector=Ke,n.iterator=Ym})(cB||(cB={}));class ys{append(e,t){return this.s+=t!==void 0?e.substr(0,t):e,this}expansion(e,t){for(let r=0;r<e;r++)this.append(t);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(e){return this.s<e.s}isGreat(e){return this.s>e.s}isEqual(e){return this.s==e}isEmpty(){return this.s.length==0}constructor(e){this.s=e}}var hB;(n=>{n.csmString=ys})(hB||(hB={}));class ec{static createIdInternal(e){return new ec(e)}getString(){return this._id}isEqual(e){return typeof e=="string"?this._id.isEqual(e):e instanceof ys?this._id.isEqual(e.s):e instanceof ec?this._id.isEqual(e._id.s):!1}isNotEqual(e){return typeof e=="string"?!this._id.isEqual(e):e instanceof ys?!this._id.isEqual(e.s):e instanceof ec?!this._id.isEqual(e._id.s):!1}constructor(e){if(typeof e=="string"){this._id=new ys(e);return}this._id=e}}var dB;(n=>{n.CubismId=ec})(dB||(dB={}));class t8{constructor(){this._ids=new Ke}release(){for(let e=0;e<this._ids.getSize();++e)this._ids.set(e,void 0);this._ids=null}registerIds(e){for(let t=0;t<e.length;t++)this.registerId(e[t])}registerId(e){let t=null;if(typeof e=="string"){if((t=this.findId(e))!=null)return t;t=ec.createIdInternal(e),this._ids.pushBack(t)}else return this.registerId(e.s);return t}getId(e){return this.registerId(e)}isExist(e){return typeof e=="string"?this.findId(e)!=null:this.isExist(e.s)}findId(e){for(let t=0;t<this._ids.getSize();++t)if(this._ids.at(t).getString().isEqual(e))return this._ids.at(t);return null}}var fB;(n=>{n.CubismIdManager=t8})(fB||(fB={}));class Pi{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,t,r){const i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=4;for(let a=0;a<s;++a)for(let l=0;l<s;++l)for(let c=0;c<s;++c)i[l+a*4]+=e[c+a*4]*t[l+c*4];for(let a=0;a<16;++a)r[a]=i[a]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let t=0;t<16;++t)this._tr[t]=e[t]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,t){const r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);Pi.multiply(r,this._tr,this._tr)}translate(e,t){this._tr[12]=e,this._tr[13]=t}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,t){const r=new Float32Array([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]);Pi.multiply(r,this._tr,this._tr)}scale(e,t){this._tr[0]=e,this._tr[5]=t}multiplyByMatrix(e){Pi.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new Pi;for(let t=0;t<this._tr.length;t++)e._tr[t]=this._tr[t];return e}}var pB;(n=>{n.CubismMatrix44=Pi})(pB||(pB={}));class Rg{constructor(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,t){this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2}}var mB;(n=>{n.csmRect=Rg})(mB||(mB={}));class qy{static create(){return null}static delete(e){}initialize(e){this._model=e}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,t,r,i){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),this._modelColor.r=e,this._modelColor.g=t,this._modelColor.b=r,this._modelColor.a=i}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}getModelColorWithOpacity(e){const t=this.getModelColor();return t.a*=e,this.isPremultipliedAlpha()&&(t.r*=t.a,t.g*=t.a,t.b*=t.a),t}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisotropy=e}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(e){this._useHighPrecisionMask=e}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new oi,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new Pi,this._mvpMatrix4x4.loadIdentity()}}var vo=(n=>(n[n.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",n[n.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",n[n.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",n))(vo||{});class oi{constructor(e=1,t=1,r=1,i=1){this.r=e,this.g=t,this.b=r,this.a=i}}class xY{constructor(e,t){this._clippingIdList=e,this._clippingIdCount=t,this._allClippedDrawRect=new Rg,this._layoutBounds=new Rg,this._clippedDrawableIndexList=[],this._matrixForMask=new Pi,this._matrixForDraw=new Pi,this._bufferIndex=0}release(){this._layoutBounds!=null&&(this._layoutBounds=null),this._allClippedDrawRect!=null&&(this._allClippedDrawRect=null),this._clippedDrawableIndexList!=null&&(this._clippedDrawableIndexList=null)}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}}var gB;(n=>{n.CubismBlendMode=vo,n.CubismRenderer=qy,n.CubismTextureColor=oi})(gB||(gB={}));const vY=(n,e,t)=>{cw.print(n,"[CSM]"+e,t)},dm=(n,e,t)=>{vY(n,e+`
`,t)},ai=n=>{console.assert(n)};let Nd,gl,It,li;Nd=(n,...e)=>{dm(bl.LogLevel_Debug,"[D]"+n,e)},gl=(n,...e)=>{dm(bl.LogLevel_Info,"[I]"+n,e)},It=(n,...e)=>{dm(bl.LogLevel_Warning,"[W]"+n,e)},li=(n,...e)=>{dm(bl.LogLevel_Error,"[E]"+n,e)};class cw{static print(e,t,r){if(e<gt.getLoggingLevel())return;const i=gt.coreLogFunction;if(!i)return;const s=t.replace(/\{(\d+)\}/g,(a,l)=>r[l]);i(s)}static dumpBytes(e,t,r){for(let i=0;i<r;i++)i%16==0&&i>0?this.print(e,`
`):i%8==0&&i>0&&this.print(e,"  "),this.print(e,"{0} ",[t[i]&255]);this.print(e,`
`)}constructor(){}}var yB;(n=>{n.CubismDebug=cw})(yB||(yB={}));class n8{constructor(e,t){this.first=e??null,this.second=t??null}}const r8=class xS{constructor(e){e!=null?e<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(e),this._size=e):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(e){let t=-1;for(let r=0;r<this._size;r++)if(this._keyValues[r].first==e){t=r;break}if(t!=-1){It("The key `{0}` is already append.",e);return}this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new n8(e),this._size+=1}getValue(e){let t=-1;for(let r=0;r<this._size;r++)if(this._keyValues[r].first==e){t=r;break}return t>=0?this._keyValues[t].second:(this.appendKey(e),this._keyValues[this._size-1].second)}setValue(e,t){let r=-1;for(let i=0;i<this._size;i++)if(this._keyValues[i].first==e){r=i;break}r>=0?this._keyValues[r].second=t:(this.appendKey(e),this._keyValues[this._size-1].second=t)}isExist(e){for(let t=0;t<this._size;t++)if(this._keyValues[t].first==e)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(e,t){e>this._keyValues.length&&(this._keyValues.length==0?(!t&&e<xS.DefaultSize&&(e=xS.DefaultSize),this._keyValues.length=e):(!t&&e<this._keyValues.length*2&&(e=this._keyValues.length*2),this._keyValues.length=e))}begin(){return new wl(this,0)}end(){return new wl(this,this._size)}erase(e){const t=e._index;return t<0||this._size<=t?e:(this._keyValues.splice(t,1),--this._size,new wl(this,t))}dumpAsInt(){for(let e=0;e<this._size;e++)Nd("{0} ,",this._keyValues[e]),Nd(`
`)}};r8.DefaultSize=10;let Ca=r8;class wl{constructor(e,t){this._map=e??new Ca,this._index=t??0}set(e){return this._index=e._index,this._map=e._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new wl(this._map,this._index++)}decrement(){const e=new wl(this._map,this._index);return this._map=e._map,this._index=e._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(e){return this._index!=e._index||this._map!=e._map}}var _B;(n=>{n.csmMap=Ca,n.csmPair=n8,n.iterator=wl})(_B||(_B={}));class Pg{static parseJsonObject(e,t){return Object.keys(e).forEach(r=>{if(typeof e[r]=="boolean"){const i=!!e[r];t.put(r,new ps(i))}else if(typeof e[r]=="string"){const i=String(e[r]);t.put(r,new mc(i))}else if(typeof e[r]=="number"){const i=Number(e[r]);t.put(r,new Dg(i))}else e[r]instanceof Array?t.put(r,Pg.parseJsonArray(e[r])):e[r]instanceof Object?t.put(r,Pg.parseJsonObject(e[r],new nc)):e[r]==null?t.put(r,new tc):t.put(r,e[r])}),t}static parseJsonArray(e){const t=new hw;return Object.keys(e).forEach(r=>{if(typeof Number(r)=="number")if(typeof e[r]=="boolean"){const s=!!e[r];t.add(new ps(s))}else if(typeof e[r]=="string"){const s=String(e[r]);t.add(new mc(s))}else if(typeof e[r]=="number"){const s=Number(e[r]);t.add(new Dg(s))}else e[r]instanceof Array?t.add(this.parseJsonArray(e[r])):e[r]instanceof Object?t.add(this.parseJsonObject(e[r],new nc)):e[r]==null?t.add(new tc):t.add(e[r]);else if(e[r]instanceof Array)t.add(this.parseJsonArray(e[r]));else if(e[r]instanceof Object)t.add(this.parseJsonObject(e[r],new nc));else if(e[r]==null)t.add(new tc);else{const s=Array(e[r]);for(let a=0;a<s.length;a++)t.add(s[a])}}),t}}const Bg="Error: type mismatch",SY="Error: index out of bounds";let Tr=class ks{constructor(){}getRawString(e,t){return this.getString(e,t)}toInt(e=0){return e}toFloat(e=0){return e}toBoolean(e=!1){return e}getSize(){return 0}getArray(e=null){return e}getVector(e=new Ke){return e}getMap(e){return e}getValueByIndex(e){return ks.errorValue.setErrorNotForClientCall(Bg)}getValueByString(e){return ks.nullValue.setErrorNotForClientCall(Bg)}getKeys(){return ks.dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(e){return!1}isStatic(){return!1}setErrorNotForClientCall(e){return Ld.errorValue}static staticInitializeNotForClientCall(){ps.trueValue=new ps(!0),ps.falseValue=new ps(!1),ks.errorValue=new Ld("ERROR",!0),ks.nullValue=new tc,ks.dummyKeys=new Ke}static staticReleaseNotForClientCall(){ps.trueValue=null,ps.falseValue=null,ks.errorValue=null,ks.nullValue=null,ks.dummyKeys=null}};class zr{constructor(e,t){this._parseCallback=Pg.parseJsonObject,this._error=null,this._lineCount=0,this._root=null,e!=null&&this.parseBytes(e,t,this._parseCallback)}static create(e,t){const r=new zr;return r.parseBytes(e,t,r._parseCallback)?r:(zr.delete(r),null)}static delete(e){}getRoot(){return this._root}static arrayBufferToString(e){const t=new Uint8Array(e);let r="";for(let i=0,s=t.length;i<s;++i)r+="%"+this.pad(t[i].toString(16));return r=decodeURIComponent(r),r}static pad(e){return e.length<2?"0"+e:e}parseBytes(e,t,r){const i=new Array(1),s=zr.arrayBufferToString(e);if(r==null?this._root=this.parseValue(s,t,0,i):this._root=r(JSON.parse(s),new nc),this._error){let a="\0";return a="Json parse error : @line "+(this._lineCount+1)+`
`,this._root=new mc(a),gl("{0}",this._root.getRawString()),!1}else if(this._root==null)return this._root=new Ld(new ys(this._error),!1),!1;return!0}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(e,t,r,i){if(this._error)return null;let s=null,a=r,l;for(;a<t;a++)switch(e[a]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const h=new Array(1);return l=EY(e.slice(a),h),i[0]=e.indexOf(h[0]),new Dg(l)}case'"':return new mc(this.parseString(e,t,a+1,i));case"[":return s=this.parseArray(e,t,a+1,i),s;case"{":return s=this.parseObject(e,t,a+1,i),s;case"n":return a+3<t?(s=new tc,i[0]=a+4):this._error="parse null",s;case"t":return a+3<t?(s=ps.trueValue,i[0]=a+4):this._error="parse true",s;case"f":return a+4<t?(s=ps.falseValue,i[0]=a+5):this._error="illegal ',' position",s;case",":return this._error="illegal ',' position",null;case"]":return i[0]=a,null;case`
`:this._lineCount++}return this._error="illegal end of value",null}parseString(e,t,r,i){if(this._error)return null;if(!e)return this._error="string is null",null;let s=r,a,l;const c=new ys("");let h=r;for(;s<t;s++)switch(a=e[s],a){case'"':return i[0]=s+1,c.append(e.slice(h),s-h),c.s;case"//":if(s++,s-1>h&&c.append(e.slice(h),s-h),h=s+1,s<t)switch(l=e[s],l){case"\\":c.expansion(1,"\\");break;case'"':c.expansion(1,'"');break;case"/":c.expansion(1,"/");break;case"b":c.expansion(1,"\b");break;case"f":c.expansion(1,"\f");break;case"n":c.expansion(1,`
`);break;case"r":c.expansion(1,"\r");break;case"t":c.expansion(1,"	");break;case"u":this._error="parse string/unicord escape not supported";break}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}parseObject(e,t,r,i){if(this._error)return null;if(!e)return this._error="buffer is null",null;const s=new nc;let a="",l=r,c="";const h=Array(1);let d=!1;for(;l<t;l++){e:for(;l<t;l++)switch(c=e[l],c){case'"':if(a=this.parseString(e,t,l+1,h),this._error)return null;l=h[0],d=!0;break e;case"}":return i[0]=l+1,s;case":":this._error="illegal ':' position";break;case`
`:this._lineCount++}if(!d)return this._error="key not found",null;d=!1;e:for(;l<t;l++)switch(c=e[l],c){case":":d=!0,l++;break e;case"}":this._error="illegal '}' position";break;case`
`:this._lineCount++}if(!d)return this._error="':' not found",null;const p=this.parseValue(e,t,l,h);if(this._error)return null;l=h[0],s.put(a,p);e:for(;l<t;l++)switch(c=e[l],c){case",":break e;case"}":return i[0]=l+1,s;case`
`:this._lineCount++}}return this._error="illegal end of perseObject",null}parseArray(e,t,r,i){if(this._error)return null;if(!e)return this._error="buffer is null",null;let s=new hw,a=r,l;const c=new Array(1);for(;a<t;a++){const h=this.parseValue(e,t,a,c);if(this._error)return null;a=c[0],h&&s.add(h);e:for(;a<t;a++)switch(l=e[a],l){case",":break e;case"]":return i[0]=a+1,s;case`
`:++this._lineCount}}return s=void 0,this._error="illegal end of parseObject",null}}class Dg extends Tr{constructor(e){super(),this._value=e}isFloat(){return!0}getString(e,t){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer}toInt(e=0){return parseInt(this._value.toString())}toFloat(e=0){return this._value}equals(e){return typeof e=="number"?Math.round(e)?!1:e==this._value:!1}}class ps extends Tr{isBool(){return!0}toBoolean(e=!1){return this._boolValue}getString(e,t){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(e){return typeof e=="boolean"?e==this._boolValue:!1}isStatic(){return!0}constructor(e){super(),this._boolValue=e}}class mc extends Tr{constructor(e){super(),typeof e=="string"&&(this._stringBuffer=e),e instanceof ys&&(this._stringBuffer=e.s)}isString(){return!0}getString(e,t){return this._stringBuffer}equals(e){return typeof e=="string"?this._stringBuffer==e:e instanceof ys?this._stringBuffer==e.s:!1}}class Ld extends mc{isStatic(){return this._isStatic}setErrorNotForClientCall(e){return this._stringBuffer=e,this}constructor(e,t){typeof e=="string"?super(e):super(e),this._isStatic=t}isError(){return!0}}class tc extends Tr{isNull(){return!0}getString(e,t){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(e){return this._stringBuffer=e,Ld.nullValue}constructor(){super(),this._stringBuffer="NullValue"}}class hw extends Tr{constructor(){super(),this._array=new Ke}release(){for(let e=this._array.begin();e.notEqual(this._array.end());e.preIncrement()){let t=e.ptr();t&&!t.isStatic()&&(t=void 0,t=null)}}isArray(){return!0}getValueByIndex(e){if(e<0||this._array.getSize()<=e)return Tr.errorValue.setErrorNotForClientCall(SY);const t=this._array.at(e);return t??Tr.nullValue}getValueByString(e){return Tr.errorValue.setErrorNotForClientCall(Bg)}getString(e,t){const r=t+`[
`;for(let i=this._array.begin();i.notEqual(this._array.end());i.increment()){const s=i.ptr();this._stringBuffer+=t+""+s.getString(t+" ")+`
`}return this._stringBuffer=r+t+`]
`,this._stringBuffer}add(e){this._array.pushBack(e)}getVector(e=null){return this._array}getSize(){return this._array.getSize()}}class nc extends Tr{constructor(){super(),this._map=new Ca}release(){const e=this._map.begin();for(;e.notEqual(this._map.end());){let t=e.ptr().second;t&&!t.isStatic()&&(t=void 0,t=null),e.preIncrement()}}isMap(){return!0}getValueByString(e){if(e instanceof ys){const t=this._map.getValue(e.s);return t??Tr.nullValue}for(let t=this._map.begin();t.notEqual(this._map.end());t.preIncrement())if(t.ptr().first==e)return t.ptr().second==null?Tr.nullValue:t.ptr().second;return Tr.nullValue}getValueByIndex(e){return Tr.errorValue.setErrorNotForClientCall(Bg)}getString(e,t){this._stringBuffer=t+`{
`;const r=this._map.begin();for(;r.notEqual(this._map.end());){const i=r.ptr().first,s=r.ptr().second;this._stringBuffer+=t+" "+i+" : "+s.getString(t+"   ")+` 
`,r.preIncrement()}return this._stringBuffer+=t+`}
`,this._stringBuffer}getMap(e){return this._map}put(e,t){this._map.setValue(e,t)}getKeys(){if(!this._keys){this._keys=new Ke;const e=this._map.begin();for(;e.notEqual(this._map.end());){const t=e.ptr().first;this._keys.pushBack(t),e.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}}var bB;(n=>{n.CubismJson=zr,n.JsonArray=hw,n.JsonBoolean=ps,n.JsonError=Ld,n.JsonFloat=Dg,n.JsonMap=nc,n.JsonNullvalue=tc,n.JsonString=mc,n.Value=Tr})(bB||(bB={}));function EY(n,e){let t=0;for(let i=1;;i++){const s=n.slice(i-1,i);if(s=="e"||s=="-"||s=="E")continue;const a=n.substring(0,i),l=Number(a);if(isNaN(l))break;t=i}let r=parseFloat(n);return isNaN(r)&&(r=NaN),e[0]=n.slice(t),r}let cs=!1,Cu=!1,Tu=null,jh=null;const Km=Object.freeze({vertexOffset:0,vertexStep:2});function i8(n){n&&(n=void 0)}class gt{static startUp(e=null){if(cs)return gl("CubismFramework.startUp() is already done."),cs;if(Tu=e,Tu!=null&&Live2DCubismCore.Logging.csmSetLogFunction(Tu.logFunction),cs=!0,cs){const t=Live2DCubismCore.Version.csmGetVersion(),r=(t&4278190080)>>24,i=(t&16711680)>>16,s=t&65535,a=t;gl("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+r).slice(-2),("00"+i).slice(-2),("0000"+s).slice(-4),a)}return gl("CubismFramework.startUp() is complete."),cs}static cleanUp(){cs=!1,Cu=!1,Tu=null,jh=null}static initialize(e=0){if(ai(cs),!cs){It("CubismFramework is not started.");return}if(Cu){It("CubismFramework.initialize() skipped, already initialized.");return}Tr.staticInitializeNotForClientCall(),jh=new t8,Live2DCubismCore.Memory.initializeAmountOfMemory(e),Cu=!0,gl("CubismFramework.initialize() is complete.")}static dispose(){if(ai(cs),!cs){It("CubismFramework is not started.");return}if(!Cu){It("CubismFramework.dispose() skipped, not initialized.");return}Tr.staticReleaseNotForClientCall(),jh.release(),jh=null,qy.staticRelease(),Cu=!1,gl("CubismFramework.dispose() is complete.")}static isStarted(){return cs}static isInitialized(){return Cu}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return Tu!=null?Tu.loggingLevel:5}static getIdManager(){return jh}constructor(){}}var bl=(n=>(n[n.LogLevel_Verbose=0]="LogLevel_Verbose",n[n.LogLevel_Debug=1]="LogLevel_Debug",n[n.LogLevel_Info=2]="LogLevel_Info",n[n.LogLevel_Warning=3]="LogLevel_Warning",n[n.LogLevel_Error=4]="LogLevel_Error",n[n.LogLevel_Off=5]="LogLevel_Off",n))(bl||{}),xB;(n=>{n.Constant=Km,n.csmDelete=i8,n.CubismFramework=gt})(xB||(xB={}));class He{constructor(e,t){this.x=e,this.y=t,this.x=e??0,this.y=t??0}add(e){const t=new He(0,0);return t.x=this.x+e.x,t.y=this.y+e.y,t}substract(e){const t=new He(0,0);return t.x=this.x-e.x,t.y=this.y-e.y,t}multiply(e){const t=new He(0,0);return t.x=this.x*e.x,t.y=this.y*e.y,t}multiplyByScaler(e){return this.multiply(new He(e,e))}division(e){const t=new He(0,0);return t.x=this.x/e.x,t.y=this.y/e.y,t}divisionByScalar(e){return this.division(new He(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}var vB;(n=>{n.CubismVector2=He})(vB||(vB={}));const s8=class Zm{static range(e,t,r){return e<t?e=t:e>r&&(e=r),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let t=e;const r=t<0;r&&(t=-t);let i;return t===1/0?i=1/0:(i=Math.exp(Math.log(t)/3),i=(t/(i*i)+2*i)/3),r?-i:i}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,t){return e>t?e:t}static min(e,t){return e>t?t:e}static clamp(e,t,r){return e<t?t:r<e?r:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,t){const r=Math.atan2(t.y,t.x),i=Math.atan2(e.y,e.x);let s=r-i;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}static directionToDegrees(e,t){const r=this.directionToRadian(e,t);let i=this.radianToDegrees(r);return t.x-e.x>0&&(i=-i),i}static radianToDirection(e){const t=new He;return t.x=this.sin(e),t.y=this.cos(e),t}static quadraticEquation(e,t,r){return this.abs(e)<Zm.Epsilon?this.abs(t)<Zm.Epsilon?-r:-r/t:-(t+this.sqrt(t*t-4*e*r))/(2*e)}static cardanoAlgorithmForBezier(e,t,r,i){if(this.abs(e)<Zm.Epsilon)return this.range(this.quadraticEquation(t,r,i),0,1);const s=t/e,a=r/e,l=i/e,c=(3*a-s*s)/3,h=c/3,d=(2*s*s*s-9*s*a+27*l)/27,p=d/2,g=p*p+h*h*h,y=.5,_=y+.01;if(g<0){const C=-c/3,A=C*C*C,P=this.sqrt(A),M=-d/(2*P),I=this.range(M,-1,1),V=Math.acos(I),D=2*this.cbrt(P),H=D*this.cos(V/3)-s/3;if(this.abs(H-y)<_)return this.range(H,0,1);const $=D*this.cos((V+2*Math.PI)/3)-s/3;if(this.abs($-y)<_)return this.range($,0,1);const ne=D*this.cos((V+4*Math.PI)/3)-s/3;return this.range(ne,0,1)}if(g==0){let C;p<0?C=this.cbrt(-p):C=-this.cbrt(p);const A=2*C-s/3;if(this.abs(A-y)<_)return this.range(A,0,1);const P=-C-s/3;return this.range(P,0,1)}const S=this.sqrt(g),x=this.cbrt(S-p),E=this.cbrt(S+p),w=x-E-s/3;return this.range(w,0,1)}static mod(e,t){if(!isFinite(e)||t===0||isNaN(e)||isNaN(t))return console.warn(`divided: ${e}, divisor: ${t} mod() returns 'NaN'.`),NaN;const r=Math.abs(e),i=Math.abs(t);let s=r-Math.floor(r/i)*i;return s*=Math.sign(e),s}constructor(){}};s8.Epsilon=1e-5;let pt=s8;var SB;(n=>{n.CubismMath=pt})(SB||(SB={}));class Yy{constructor(){this.setBeganMotionHandler=e=>this._onBeganMotion=e,this.getBeganMotionHandler=()=>this._onBeganMotion,this.setFinishedMotionHandler=e=>this._onFinishedMotion=e,this.getFinishedMotionHandler=()=>this._onFinishedMotion,this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._isLoop=!1,this._isLoopFadeIn=!0,this._previousLoopState=this._isLoop,this._firedEventValues=new Ke}static delete(e){e.release(),e=null}release(){this._weight=0}updateParameters(e,t,r){if(!t.isAvailable()||t.isFinished())return;this.setupMotionQueueEntry(t,r);const i=this.updateFadeWeight(t,r);this.doUpdateParameters(e,r,i,t),t.getEndTime()>0&&t.getEndTime()<r&&t.setIsFinished(!0)}setupMotionQueueEntry(e,t){e==null||e.isStarted()||e.isAvailable()&&(e.setIsStarted(!0),e.setStartTime(t-this._offsetSeconds),e.setFadeInStartTime(t),e.getEndTime()<0&&this.adjustEndTime(e),e._motion._onBeganMotion&&e._motion._onBeganMotion(e._motion))}updateFadeWeight(e,t){e==null&&cw.print(bl.LogLevel_Error,"motionQueueEntry is null.");let r=this._weight;const i=this._fadeInSeconds==0?1:pt.getEasingSine((t-e.getFadeInStartTime())/this._fadeInSeconds),s=this._fadeOutSeconds==0||e.getEndTime()<0?1:pt.getEasingSine((e.getEndTime()-t)/this._fadeOutSeconds);return r=r*i*s,e.setState(t,r),ai(0<=r&&r<=1),r}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}setLoop(e){this._isLoop=e}getLoop(){return this._isLoop}setLoopFadeIn(e){this._isLoopFadeIn=e}getLoopFadeIn(){return this._isLoopFadeIn}getFiredEvent(e,t){return this._firedEventValues}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(e){return null}getModelOpacityValue(){return 1}adjustEndTime(e){const t=this.getDuration(),r=t<=0?-1:e.getStartTime()+t;e.setEndTime(r)}}var EB;(n=>{n.ACubismMotion=Yy})(EB||(EB={}));var ds=(n=>(n[n.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",n[n.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",n[n.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",n))(ds||{}),ir=(n=>(n[n.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",n[n.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",n[n.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",n[n.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",n))(ir||{});class Fd{constructor(){this.time=0,this.value=0}}class a8{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}}class o8{constructor(){this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class l8{constructor(){this.fireTime=0}}class u8{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new Ke,this.segments=new Ke,this.points=new Ke,this.events=new Ke}}var wB;(n=>{n.CubismMotionCurve=o8,n.CubismMotionCurveTarget=ds,n.CubismMotionData=u8,n.CubismMotionEvent=l8,n.CubismMotionPoint=Fd,n.CubismMotionSegment=a8,n.CubismMotionSegmentType=ir})(wB||(wB={}));if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 5 runtime. This plugin requires live2dcubismcore.js to be loaded.");const wY="FadeInTime",CY="FadeOutTime",CB="Parameters",TY="Id",AY="Value",fm="Blend",MY="Add",RY="Multiply",PY="Overwrite",TB=1,dw=class Os extends Yy{static create(e,t){const r=new Os;return r.parse(e,t),r}doUpdateParameters(e,t,r,i){for(let s=0;s<this._parameters.getSize();++s){const a=this._parameters.at(s);switch(a.blendType){case 0:{e.addParameterValueById(a.parameterId,a.value,r);break}case 1:{e.multiplyParameterValueById(a.parameterId,a.value,r);break}case 2:{e.setParameterValueById(a.parameterId,a.value,r);break}}}}calculateExpressionParameters(e,t,r,i,s,a){if(!(r==null||i==null)&&r.isAvailable()){this._fadeWeight=this.updateFadeWeight(r,t);for(let l=0;l<i.getSize();++l){const c=i.at(l);if(c.parameterId==null)continue;const h=c.overwriteValue=e.getParameterValueById(c.parameterId),d=this.getExpressionParameters();let p=-1;for(let x=0;x<d.getSize();++x)if(c.parameterId==d.at(x).parameterId){p=x;break}if(p<0){s==0?(c.additiveValue=Os.DefaultAdditiveValue,c.multiplyValue=Os.DefaultMultiplyValue,c.overwriteValue=h):(c.additiveValue=this.calculateValue(c.additiveValue,Os.DefaultAdditiveValue,a),c.multiplyValue=this.calculateValue(c.multiplyValue,Os.DefaultMultiplyValue,a),c.overwriteValue=this.calculateValue(c.overwriteValue,h,a));continue}const g=d.at(p).value;let y,_,S;switch(d.at(p).blendType){case 0:y=g,_=Os.DefaultMultiplyValue,S=h;break;case 1:y=Os.DefaultAdditiveValue,_=g,S=h;break;case 2:y=Os.DefaultAdditiveValue,_=Os.DefaultMultiplyValue,S=g;break;default:return}s==0?(c.additiveValue=y,c.multiplyValue=_,c.overwriteValue=S):(c.additiveValue=c.additiveValue*(1-a)+y*a,c.multiplyValue=c.multiplyValue*(1-a)+_*a,c.overwriteValue=c.overwriteValue*(1-a)+S*a)}}}getExpressionParameters(){return this._parameters}getFadeWeight(){return this._fadeWeight}parse(e,t){const r=zr.create(e,t);if(!r)return;const i=r.getRoot();this.setFadeInTime(i.getValueByString(wY).toFloat(TB)),this.setFadeOutTime(i.getValueByString(CY).toFloat(TB));const s=i.getValueByString(CB).getSize();this._parameters.prepareCapacity(s);for(let a=0;a<s;++a){const l=i.getValueByString(CB).getValueByIndex(a),c=gt.getIdManager().getId(l.getValueByString(TY).getRawString()),h=l.getValueByString(AY).toFloat();let d;l.getValueByString(fm).isNull()||l.getValueByString(fm).getString()==MY?d=0:l.getValueByString(fm).getString()==RY?d=1:l.getValueByString(fm).getString()==PY?d=2:d=0;const p=new h8;p.parameterId=c,p.blendType=d,p.value=h,this._parameters.pushBack(p)}zr.delete(r)}calculateValue(e,t,r){return e*(1-r)+t*r}constructor(){super(),this._parameters=new Ke,this._fadeWeight=0}};dw.DefaultAdditiveValue=0;dw.DefaultMultiplyValue=1;let vS=dw;var c8=(n=>(n[n.Additive=0]="Additive",n[n.Multiply=1]="Multiply",n[n.Overwrite=2]="Overwrite",n))(c8||{});class h8{}var AB;(n=>{n.CubismExpressionMotion=vS,n.ExpressionBlendType=c8,n.ExpressionParameter=h8})(AB||(AB={}));class d8{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&Yy.delete(this._motion)}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,t){const r=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,t){this._stateTimeSeconds=e,this._stateWeight=t}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}getCubismMotion(){return this._motion}}var MB;(n=>{n.CubismMotionQueueEntry=d8})(MB||(MB={}));class fw{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new Ke}release(){for(let e=0;e<this._motions.getSize();++e)this._motions.at(e)&&(this._motions.at(e).release(),this._motions.set(e,null));this._motions=null}startMotion(e,t,r){if(e==null)return f8;let i=null;for(let s=0;s<this._motions.getSize();++s)i=this._motions.at(s),i?.setFadeOut(i._motion.getFadeOutTime());return i=new d8,i._autoDelete=t,i._motion=e,this._motions.pushBack(i),i._motionQueueEntryHandle}isFinished(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let t=e.ptr();if(t==null){e=this._motions.erase(e);continue}if(t._motion==null){t.release(),t=null,e=this._motions.erase(e);continue}if(t.isFinished())e.preIncrement();else return!1}return!0}isFinishedByHandle(e){for(let t=this._motions.begin();t.notEqual(this._motions.end());t.increment()){const r=t.ptr();if(r!=null&&r._motionQueueEntryHandle==e&&!r.isFinished())return!1}return!0}stopAllMotions(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let t=e.ptr();if(t==null){e=this._motions.erase(e);continue}t.release(),t=null,e=this._motions.erase(e)}}getCubismMotionQueueEntries(){return this._motions}getCubismMotionQueueEntry(e){for(let t=this._motions.begin();t.notEqual(this._motions.end());t.preIncrement()){const r=t.ptr();if(r!=null&&r._motionQueueEntryHandle==e)return r}return null}setEventCallback(e,t=null){this._eventCallBack=e,this._eventCustomData=t}doUpdateMotion(e,t){let r=!1;for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(s==null){i=this._motions.erase(i);continue}const a=s._motion;if(a==null){s.release(),s=null,i=this._motions.erase(i);continue}a.updateParameters(e,s,t),r=!0;const l=a.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),t-s.getStartTime());for(let c=0;c<l.getSize();++c)this._eventCallBack(this,l.at(c),this._eventCustomData);s.setLastCheckEventSeconds(t),s.isFinished()?(s.release(),s=null,i=this._motions.erase(i)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),t),i.preIncrement())}return r}}const f8=-1;var RB;(n=>{n.CubismMotionQueueManager=fw,n.InvalidMotionQueueEntryHandleValue=f8})(RB||(RB={}));class BY extends H5{constructor(e,t){var r;super(e,t),le(this,"queueManager",new fw),le(this,"definitions"),this.definitions=(r=e.expressions)!=null?r:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.Name===e)}getExpressionFile(e){return e.File}createExpression(e,t){if(typeof e=="string"){const s=new TextEncoder().encode(e);return vS.create(s.buffer,s.byteLength)}const r=JSON.stringify(e),i=new TextEncoder().encode(r);return vS.create(i.buffer,i.byteLength)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}}const Ai="Meta",DY="Duration",kY="Loop",OY="AreBeziersRestricted",IY="CurveCount",NY="Fps",LY="TotalSegmentCount",FY="TotalPointCount",xa="Curves",UY="Target",GY="Id",pm="FadeInTime",mm="FadeOutTime",PB="Segments",BB="UserData",zY="UserDataCount",VY="TotalUserDataSize",HY="Time",jY="Value";class pw{constructor(e,t){this._json=zr.create(e,t)}release(){zr.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(Ai).getValueByString(DY).toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(Ai).getValueByString(kY).toBoolean()}hasConsistency(){let e=!0;if(!this._json||!this._json.getRoot())return!1;const t=this._json.getRoot().getValueByString(xa).getVector().getSize();let r=0,i=0;for(let s=0;s<t;++s)for(let a=0;a<this.getMotionCurveSegmentCount(s);){switch(a==0&&(i+=1,a+=2),this.getMotionCurveSegment(s,a)){case ir.CubismMotionSegmentType_Linear:i+=1,a+=3;break;case ir.CubismMotionSegmentType_Bezier:i+=3,a+=7;break;case ir.CubismMotionSegmentType_Stepped:i+=1,a+=3;break;case ir.CubismMotionSegmentType_InverseStepped:i+=1,a+=3;break;default:ai(0);break}++r}return t!=this.getMotionCurveCount()&&(It("The number of curves does not match the metadata."),e=!1),r!=this.getMotionTotalSegmentCount()&&(It("The number of segment does not match the metadata."),e=!1),i!=this.getMotionTotalPointCount()&&(It("The number of point does not match the metadata."),e=!1),e}getEvaluationOptionFlag(e){return e==0?this._json.getRoot().getValueByString(Ai).getValueByString(OY).toBoolean():!1}getMotionCurveCount(){return this._json.getRoot().getValueByString(Ai).getValueByString(IY).toInt()}getMotionFps(){return this._json.getRoot().getValueByString(Ai).getValueByString(NY).toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(Ai).getValueByString(LY).toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(Ai).getValueByString(FY).toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(Ai).getValueByString(pm).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(Ai).getValueByString(mm).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(Ai).getValueByString(pm).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(Ai).getValueByString(mm).toFloat()}getMotionCurveTarget(e){return this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(UY).getRawString()}getMotionCurveId(e){return gt.getIdManager().getId(this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(GY).getRawString())}isExistMotionCurveFadeInTime(e){return!this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(pm).isNull()}isExistMotionCurveFadeOutTime(e){return!this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(mm).isNull()}getMotionCurveFadeInTime(e){return this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(pm).toFloat()}getMotionCurveFadeOutTime(e){return this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(mm).toFloat()}getMotionCurveSegmentCount(e){return this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(PB).getVector().getSize()}getMotionCurveSegment(e,t){return this._json.getRoot().getValueByString(xa).getValueByIndex(e).getValueByString(PB).getValueByIndex(t).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(Ai).getValueByString(zY).toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(Ai).getValueByString(VY).toInt()}getEventTime(e){return this._json.getRoot().getValueByString(BB).getValueByIndex(e).getValueByString(HY).toFloat()}getEventValue(e){return new ys(this._json.getRoot().getValueByString(BB).getValueByIndex(e).getValueByString(jY).getRawString())}}var p8=(n=>(n[n.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",n))(p8||{}),DB;(n=>{n.CubismMotionJson=pw})(DB||(DB={}));const XY="EyeBlink",WY="LipSync",$Y="Model",qY="Parameter",YY="PartOpacity",gm="Opacity",KY=!1;function Yi(n,e,t){const r=new Fd;return r.time=n.time+(e.time-n.time)*t,r.value=n.value+(e.value-n.value)*t,r}function m8(n,e){let t=(e-n[0].time)/(n[1].time-n[0].time);return t<0&&(t=0),n[0].value+(n[1].value-n[0].value)*t}function ZY(n,e){let t=(e-n[0].time)/(n[3].time-n[0].time);t<0&&(t=0);const r=Yi(n[0],n[1],t),i=Yi(n[1],n[2],t),s=Yi(n[2],n[3],t),a=Yi(r,i,t),l=Yi(i,s,t);return Yi(a,l,t).value}function QY(n,e){const t=e,r=n[0].time,i=n[3].time,s=n[1].time,a=n[2].time,l=i-3*a+3*s-r,c=3*a-6*s+3*r,h=3*s-3*r,d=r-t,p=pt.cardanoAlgorithmForBezier(l,c,h,d),g=Yi(n[0],n[1],p),y=Yi(n[1],n[2],p),_=Yi(n[2],n[3],p),S=Yi(g,y,p),x=Yi(y,_,p);return Yi(S,x,p).value}function g8(n,e){return n[0].value}function y8(n,e){return n[1].value}function ox(n,e,t,r,i){const s=n.curves.at(e);let a=-1;const l=s.baseSegmentIndex+s.segmentCount;let c=0;for(let d=s.baseSegmentIndex;d<l;++d)if(c=n.segments.at(d).basePointIndex+(n.segments.at(d).segmentType==ir.CubismMotionSegmentType_Bezier?3:1),n.points.at(c).time>t){a=d;break}if(a==-1)return r&&t<i?JY(n,l-1,n.segments.at(s.baseSegmentIndex).basePointIndex,c,t,i):n.points.at(c).value;const h=n.segments.at(a);return h.evaluate(n.points.get(h.basePointIndex),t)}function JY(n,e,t,r,i,s){const a=[new Fd,new Fd];{const l=n.points.at(r);a[0].time=l.time,a[0].value=l.value}{const l=n.points.at(t);a[1].time=s,a[1].value=l.value}switch(n.segments.at(e).segmentType){case ir.CubismMotionSegmentType_Linear:case ir.CubismMotionSegmentType_Bezier:default:return m8(a,i);case ir.CubismMotionSegmentType_Stepped:return g8(a);case ir.CubismMotionSegmentType_InverseStepped:return y8(a)}}class Ky extends Yy{constructor(){super(),this._motionBehavior=1,this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._modelCurveIdOpacity=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null,this._modelOpacity=1,this._debugMode=!1}static create(e,t,r,i,s=!1){const a=new Ky;if(a.parse(e,t,s),a._motionData)a._sourceFrameRate=a._motionData.fps,a._loopDurationSeconds=a._motionData.duration,a._onFinishedMotion=r,a._onBeganMotion=i;else return i8(a),null;return a}doUpdateParameters(e,t,r,i){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=gt.getIdManager().getId(XY)),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=gt.getIdManager().getId(WY)),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=gt.getIdManager().getId(gm)),this._motionBehavior===1&&this._previousLoopState!==this._isLoop&&(this.adjustEndTime(i),this._previousLoopState=this._isLoop);let s=t-i.getStartTime();s<0&&(s=0);let a=Number.MAX_VALUE,l=Number.MAX_VALUE;const c=64;let h=0,d=0;this._eyeBlinkParameterIds.getSize()>c&&Nd("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>c&&Nd("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());const p=this._fadeInSeconds<=0?1:pt.getEasingSine((t-i.getFadeInStartTime())/this._fadeInSeconds),g=this._fadeOutSeconds<=0||i.getEndTime()<0?1:pt.getEasingSine((i.getEndTime()-t)/this._fadeOutSeconds);let y,_,S,x=s,E=this._motionData.duration;const w=this._motionBehavior===1&&this._isLoop;if(this._isLoop)for(this._motionBehavior===1&&(E+=1/this._motionData.fps);x>E;)x-=E;const C=this._motionData.curves;for(_=0;_<this._motionData.curveCount&&C.at(_).type==ds.CubismMotionCurveTarget_Model;++_)y=ox(this._motionData,_,x,w,E),C.at(_).id==this._modelCurveIdEyeBlink?l=y:C.at(_).id==this._modelCurveIdLipSync?a=y:C.at(_).id==this._modelCurveIdOpacity&&(this._modelOpacity=y,e.setModelOapcity(this.getModelOpacityValue()));for(;_<this._motionData.curveCount&&C.at(_).type==ds.CubismMotionCurveTarget_Parameter;++_){if(S=e.getParameterIndex(C.at(_).id),S==-1)continue;const A=e.getParameterValueByIndex(S);if(y=ox(this._motionData,_,x,w,E),l!=Number.MAX_VALUE){for(let M=0;M<this._eyeBlinkParameterIds.getSize()&&M<c;++M)if(this._eyeBlinkParameterIds.at(M)==C.at(_).id){y*=l,d|=1<<M;break}}if(a!=Number.MAX_VALUE){for(let M=0;M<this._lipSyncParameterIds.getSize()&&M<c;++M)if(this._lipSyncParameterIds.at(M)==C.at(_).id){y+=a,h|=1<<M;break}}e.isRepeat(S)&&(y=e.getParameterRepeatValue(S,y));let P;if(C.at(_).fadeInTime<0&&C.at(_).fadeOutTime<0)P=A+(y-A)*r;else{let M,I;C.at(_).fadeInTime<0?M=p:M=C.at(_).fadeInTime==0?1:pt.getEasingSine((t-i.getFadeInStartTime())/C.at(_).fadeInTime),C.at(_).fadeOutTime<0?I=g:I=C.at(_).fadeOutTime==0||i.getEndTime()<0?1:pt.getEasingSine((i.getEndTime()-t)/C.at(_).fadeOutTime);const V=this._weight*M*I;P=A+(y-A)*V}e.setParameterValueByIndex(S,P,1)}{if(l!=Number.MAX_VALUE)for(let A=0;A<this._eyeBlinkParameterIds.getSize()&&A<c;++A){const P=e.getParameterValueById(this._eyeBlinkParameterIds.at(A));if(d>>A&1)continue;const M=P+(l-P)*r;e.setParameterValueById(this._eyeBlinkParameterIds.at(A),M)}if(a!=Number.MAX_VALUE)for(let A=0;A<this._lipSyncParameterIds.getSize()&&A<c;++A){const P=e.getParameterValueById(this._lipSyncParameterIds.at(A));if(h>>A&1)continue;const M=P+(a-P)*r;e.setParameterValueById(this._lipSyncParameterIds.at(A),M)}}for(;_<this._motionData.curveCount&&C.at(_).type==ds.CubismMotionCurveTarget_PartOpacity;++_)S=e.getParameterIndex(C.at(_).id),S!=-1&&(y=ox(this._motionData,_,x,w,E),e.setParameterValueByIndex(S,y));s>=E&&(this._isLoop?this.updateForNextLoop(i,t,x):(this._onFinishedMotion&&this._onFinishedMotion(this),i.setIsFinished(!0))),this._lastWeight=r}setIsLoop(e){It("setIsLoop() is a deprecated function. Please use setLoop()."),this._isLoop=e}isLoop(){return It("isLoop() is a deprecated function. Please use getLoop()."),this._isLoop}setIsLoopFadeIn(e){It("setIsLoopFadeIn() is a deprecated function. Please use setLoopFadeIn()."),this._isLoopFadeIn=e}isLoopFadeIn(){return It("isLoopFadeIn() is a deprecated function. Please use getLoopFadeIn()."),this._isLoopFadeIn}setMotionBehavior(e){this._motionBehavior=e}getMotionBehavior(){return this._motionBehavior}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,t){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r.at(i).id){r.at(i).fadeInTime=t;return}}setParameterFadeOutTime(e,t){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r.at(i).id){r.at(i).fadeOutTime=t;return}}getParameterFadeInTime(e){const t=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==t.at(r).id)return t.at(r).fadeInTime;return-1}getParameterFadeOutTime(e){const t=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==t.at(r).id)return t.at(r).fadeOutTime;return-1}setEffectIds(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}release(){this._motionData=void 0,this._motionData=null}updateForNextLoop(e,t,r){switch(this._motionBehavior){case 1:default:e.setStartTime(t-r),this._isLoopFadeIn&&e.setFadeInStartTime(t-r),this._onFinishedMotion!=null&&this._onFinishedMotion(this);break;case 0:e.setStartTime(t),this._isLoopFadeIn&&e.setFadeInStartTime(t);break}}parse(e,t,r=!1){let i=new pw(e,t);if(!i){i.release(),i=void 0;return}if(r&&!i.hasConsistency()){i.release(),li("Inconsistent motion3.json.");return}this._motionData=new u8,this._motionData.duration=i.getMotionDuration(),this._motionData.loop=i.isMotionLoop(),this._motionData.curveCount=i.getMotionCurveCount(),this._motionData.fps=i.getMotionFps(),this._motionData.eventCount=i.getEventCount();const s=i.getEvaluationOptionFlag(p8.EvaluationOptionFlag_AreBeziersRistricted);i.isExistMotionFadeInTime()?this._fadeInSeconds=i.getMotionFadeInTime()<0?1:i.getMotionFadeInTime():this._fadeInSeconds=1,i.isExistMotionFadeOutTime()?this._fadeOutSeconds=i.getMotionFadeOutTime()<0?1:i.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,o8,!0),this._motionData.segments.updateSize(i.getMotionTotalSegmentCount(),a8,!0),this._motionData.points.updateSize(i.getMotionTotalPointCount(),Fd,!0),this._motionData.events.updateSize(this._motionData.eventCount,l8,!0);let a=0,l=0;for(let c=0;c<this._motionData.curveCount;++c){i.getMotionCurveTarget(c)==$Y?this._motionData.curves.at(c).type=ds.CubismMotionCurveTarget_Model:i.getMotionCurveTarget(c)==qY?this._motionData.curves.at(c).type=ds.CubismMotionCurveTarget_Parameter:i.getMotionCurveTarget(c)==YY?this._motionData.curves.at(c).type=ds.CubismMotionCurveTarget_PartOpacity:It('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(c).id=i.getMotionCurveId(c),this._motionData.curves.at(c).baseSegmentIndex=l,this._motionData.curves.at(c).fadeInTime=i.isExistMotionCurveFadeInTime(c)?i.getMotionCurveFadeInTime(c):-1,this._motionData.curves.at(c).fadeOutTime=i.isExistMotionCurveFadeOutTime(c)?i.getMotionCurveFadeOutTime(c):-1;for(let h=0;h<i.getMotionCurveSegmentCount(c);){switch(h==0?(this._motionData.segments.at(l).basePointIndex=a,this._motionData.points.at(a).time=i.getMotionCurveSegment(c,h),this._motionData.points.at(a).value=i.getMotionCurveSegment(c,h+1),a+=1,h+=2):this._motionData.segments.at(l).basePointIndex=a-1,i.getMotionCurveSegment(c,h)){case ir.CubismMotionSegmentType_Linear:{this._motionData.segments.at(l).segmentType=ir.CubismMotionSegmentType_Linear,this._motionData.segments.at(l).evaluate=m8,this._motionData.points.at(a).time=i.getMotionCurveSegment(c,h+1),this._motionData.points.at(a).value=i.getMotionCurveSegment(c,h+2),a+=1,h+=3;break}case ir.CubismMotionSegmentType_Bezier:{this._motionData.segments.at(l).segmentType=ir.CubismMotionSegmentType_Bezier,s||KY?this._motionData.segments.at(l).evaluate=ZY:this._motionData.segments.at(l).evaluate=QY,this._motionData.points.at(a).time=i.getMotionCurveSegment(c,h+1),this._motionData.points.at(a).value=i.getMotionCurveSegment(c,h+2),this._motionData.points.at(a+1).time=i.getMotionCurveSegment(c,h+3),this._motionData.points.at(a+1).value=i.getMotionCurveSegment(c,h+4),this._motionData.points.at(a+2).time=i.getMotionCurveSegment(c,h+5),this._motionData.points.at(a+2).value=i.getMotionCurveSegment(c,h+6),a+=3,h+=7;break}case ir.CubismMotionSegmentType_Stepped:{this._motionData.segments.at(l).segmentType=ir.CubismMotionSegmentType_Stepped,this._motionData.segments.at(l).evaluate=g8,this._motionData.points.at(a).time=i.getMotionCurveSegment(c,h+1),this._motionData.points.at(a).value=i.getMotionCurveSegment(c,h+2),a+=1,h+=3;break}case ir.CubismMotionSegmentType_InverseStepped:{this._motionData.segments.at(l).segmentType=ir.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(l).evaluate=y8,this._motionData.points.at(a).time=i.getMotionCurveSegment(c,h+1),this._motionData.points.at(a).value=i.getMotionCurveSegment(c,h+2),a+=1,h+=3;break}default:{ai(0);break}}++this._motionData.curves.at(c).segmentCount,++l}}for(let c=0;c<i.getEventCount();++c)this._motionData.events.at(c).fireTime=i.getEventTime(c),this._motionData.events.at(c).value=i.getEventValue(c);i.release(),i=void 0,i=null}getFiredEvent(e,t){this._firedEventValues.updateSize(0);for(let r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>e&&this._motionData.events.at(r).fireTime<=t&&this._firedEventValues.pushBack(new ys(this._motionData.events.at(r).value.s));return this._firedEventValues}isExistModelOpacity(){for(let e=0;e<this._motionData.curveCount;e++){const t=this._motionData.curves.at(e);if(t.type==ds.CubismMotionCurveTarget_Model&&t.id.getString().s.localeCompare(gm)==0)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let e=0;e<this._motionData.curveCount;e++){const t=this._motionData.curves.at(e);if(t.type==ds.CubismMotionCurveTarget_Model&&t.id.getString().s.localeCompare(gm)==0)return e}return-1}getModelOpacityId(e){if(e!=-1){const t=this._motionData.curves.at(e);if(t.type==ds.CubismMotionCurveTarget_Model&&t.id.getString().s.localeCompare(gm)==0)return gt.getIdManager().getId(t.id.getString().s)}return null}getModelOpacityValue(){return this._modelOpacity}setDebugMode(e){this._debugMode=e}}var kB;(n=>{n.CubismMotion=Ky})(kB||(kB={}));class eK extends uw{constructor(e,t){var r;super(e,t),le(this,"definitions"),le(this,"groups",{idle:"Idle"}),le(this,"motionDataType","json"),le(this,"queueManager",new fw),le(this,"expressionManager"),le(this,"eyeBlinkIds"),le(this,"lipSyncIds"),le(this,"_seconds",0),this.definitions=(r=e.motions)!=null?r:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new BY(this.settings,e)),this.queueManager.setEventCallback((t,r,i)=>{this.emit("motion:"+r)})}isFinished(){return this.queueManager.isFinished()}update(e,t){return this._seconds=t,super.update(e,t)}_startMotion(e,t){return e.setFinishedMotionHandler(t),this.queueManager.startMotion(e,!1,this._seconds)}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,t,r){let i,s;if(typeof e=="string"){const g=new TextEncoder().encode(e);i=g.buffer,s=g.byteLength}else{const g=JSON.stringify(e),y=new TextEncoder().encode(g);i=y.buffer,s=y.byteLength}const a=Ky.create(i,s),l=new pw(i,s),c=l.isMotionLoop();a.setLoop(c);const h=(t===this.groups.idle?tB.idleMotionFadingDuration:tB.motionFadingDuration)/1e3;l.getMotionFadeInTime()===void 0&&a.setFadeInTime(r.FadeInTime!==void 0?r.FadeInTime:h),l.getMotionFadeOutTime()===void 0&&a.setFadeOutTime(r.FadeOutTime!==void 0?r.FadeOutTime:h),c&&r.FadeInTime===0&&a.setLoopFadeIn(!1);const d=new Ke,p=new Ke;return a.setEffectIds(d,p),a}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const Ze=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"});var OB;(n=>{n.HitAreaBody=Ze.HitAreaBody,n.HitAreaHead=Ze.HitAreaHead,n.HitAreaPrefix=Ze.HitAreaPrefix,n.ParamAngleX=Ze.ParamAngleX,n.ParamAngleY=Ze.ParamAngleY,n.ParamAngleZ=Ze.ParamAngleZ,n.ParamArmLA=Ze.ParamArmLA,n.ParamArmLB=Ze.ParamArmLB,n.ParamArmRA=Ze.ParamArmRA,n.ParamArmRB=Ze.ParamArmRB,n.ParamBaseX=Ze.ParamBaseX,n.ParamBaseY=Ze.ParamBaseY,n.ParamBodyAngleX=Ze.ParamBodyAngleX,n.ParamBodyAngleY=Ze.ParamBodyAngleY,n.ParamBodyAngleZ=Ze.ParamBodyAngleZ,n.ParamBreath=Ze.ParamBreath,n.ParamBrowLAngle=Ze.ParamBrowLAngle,n.ParamBrowLForm=Ze.ParamBrowLForm,n.ParamBrowLX=Ze.ParamBrowLX,n.ParamBrowLY=Ze.ParamBrowLY,n.ParamBrowRAngle=Ze.ParamBrowRAngle,n.ParamBrowRForm=Ze.ParamBrowRForm,n.ParamBrowRX=Ze.ParamBrowRX,n.ParamBrowRY=Ze.ParamBrowRY,n.ParamBustX=Ze.ParamBustX,n.ParamBustY=Ze.ParamBustY,n.ParamCheek=Ze.ParamCheek,n.ParamEyeBallForm=Ze.ParamEyeBallForm,n.ParamEyeBallX=Ze.ParamEyeBallX,n.ParamEyeBallY=Ze.ParamEyeBallY,n.ParamEyeLOpen=Ze.ParamEyeLOpen,n.ParamEyeLSmile=Ze.ParamEyeLSmile,n.ParamEyeROpen=Ze.ParamEyeROpen,n.ParamEyeRSmile=Ze.ParamEyeRSmile,n.ParamHairBack=Ze.ParamHairBack,n.ParamHairFluffy=Ze.ParamHairFluffy,n.ParamHairFront=Ze.ParamHairFront,n.ParamHairSide=Ze.ParamHairSide,n.ParamHandL=Ze.ParamHandL,n.ParamHandR=Ze.ParamHandR,n.ParamMouthForm=Ze.ParamMouthForm,n.ParamMouthOpenY=Ze.ParamMouthOpenY,n.ParamNONE=Ze.ParamNONE,n.ParamShoulderY=Ze.ParamShoulderY,n.PartsArmLPrefix=Ze.PartsArmLPrefix,n.PartsArmPrefix=Ze.PartsArmPrefix,n.PartsArmRPrefix=Ze.PartsArmRPrefix,n.PartsIdCore=Ze.PartsIdCore})(OB||(OB={}));class Zy{static create(){return new Zy}static delete(e){}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,t){this._currentTime+=t;const r=this._currentTime*2*Math.PI;for(let i=0;i<this._breathParameters.getSize();++i){const s=this._breathParameters.at(i);e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(r/s.cycle),s.weight)}}constructor(){this._currentTime=0}}class Ou{constructor(e,t,r,i,s){this.parameterId=e??null,this.offset=t??0,this.peak=r??0,this.cycle=i??0,this.weight=s??0}}var IB;(n=>{n.BreathParameterData=Ou,n.CubismBreath=Zy})(IB||(IB={}));const _8=class SS{static create(e=null){return new SS(e)}static delete(e){}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,r){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=r}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,t){this._userTimeSeconds+=t;let r,i=0;switch(this._blinkingState){case 2:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-i;break;case 3:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case 4:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=i;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1;break}SS.CloseIfZero||(r=-r);for(let a=0;a<this._parameterIds.getSize();++a)e.setParameterValueById(this._parameterIds.at(a),r)}constructor(e){if(this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new Ke,e!=null)for(let t=0;t<e.getEyeBlinkParameterCount();++t)this._parameterIds.pushBack(e.getEyeBlinkParameterId(t))}determinNextBlinkingTiming(){const e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}};_8.CloseIfZero=!0;let b8=_8;var x8=(n=>(n[n.EyeState_First=0]="EyeState_First",n[n.EyeState_Interval=1]="EyeState_Interval",n[n.EyeState_Closing=2]="EyeState_Closing",n[n.EyeState_Closed=3]="EyeState_Closed",n[n.EyeState_Opening=4]="EyeState_Opening",n))(x8||{}),NB;(n=>{n.CubismEyeBlink=b8,n.EyeState=x8})(NB||(NB={}));const lx=4,tK=36,nK=32;class rK{constructor(e){this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new Ke,this._clippingContextListForDraw=new Ke,this._channelColors=new Ke,this._tmpBoundsOnModel=new Rg,this._tmpMatrix=new Pi,this._tmpMatrixForMask=new Pi,this._tmpMatrixForDraw=new Pi,this._clippingContexttConstructor=e;let t=new oi;t.r=1,t.g=0,t.b=0,t.a=0,this._channelColors.pushBack(t),t=new oi,t.r=0,t.g=1,t.b=0,t.a=0,this._channelColors.pushBack(t),t=new oi,t.r=0,t.g=0,t.b=1,t.a=0,this._channelColors.pushBack(t),t=new oi,t.r=0,t.g=0,t.b=0,t.a=1,this._channelColors.pushBack(t)}release(){for(let e=0;e<this._clippingContextListForMask.getSize();e++)this._clippingContextListForMask.at(e)&&(this._clippingContextListForMask.at(e).release(),this._clippingContextListForMask.set(e,void 0)),this._clippingContextListForMask.set(e,null);this._clippingContextListForMask=null;for(let e=0;e<this._clippingContextListForDraw.getSize();e++)this._clippingContextListForDraw.set(e,null);this._clippingContextListForDraw=null;for(let e=0;e<this._channelColors.getSize();e++)this._channelColors.set(e,null);this._channelColors=null,this._clearedFrameBufferFlags!=null&&this._clearedFrameBufferFlags.clear(),this._clearedFrameBufferFlags=null}initialize(e,t){t%1!=0&&(It("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),t=~~t),t<1&&It("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=t<1?1:t,this._clearedFrameBufferFlags=new Ke(this._renderTextureCount);for(let r=0;r<e.getDrawableCount();r++){if(e.getDrawableMaskCounts()[r]<=0){this._clippingContextListForDraw.pushBack(null);continue}let i=this.findSameClip(e.getDrawableMasks()[r],e.getDrawableMaskCounts()[r]);i==null&&(i=new this._clippingContexttConstructor(this,e.getDrawableMasks()[r],e.getDrawableMaskCounts()[r]),this._clippingContextListForMask.pushBack(i)),i.addClippedDrawable(r),this._clippingContextListForDraw.pushBack(i)}}findSameClip(e,t){for(let r=0;r<this._clippingContextListForMask.getSize();r++){const i=this._clippingContextListForMask.at(r),s=i._clippingIdCount;if(s!=t)continue;let a=0;for(let l=0;l<s;l++){const c=i._clippingIdList[l];for(let h=0;h<s;h++)if(e[h]==c){a++;break}}if(a==s)return i}return null}setupMatrixForHighPrecision(e,t){let r=0;for(let i=0;i<this._clippingContextListForMask.getSize();i++){const s=this._clippingContextListForMask.at(i);this.calcClippedDrawTotalBounds(e,s),s._isUsing&&r++}if(r>0){if(this.setupLayoutBounds(0),this._clearedFrameBufferFlags.getSize()!=this._renderTextureCount){this._clearedFrameBufferFlags.clear();for(let i=0;i<this._renderTextureCount;i++)this._clearedFrameBufferFlags.pushBack(!1)}else for(let i=0;i<this._renderTextureCount;i++)this._clearedFrameBufferFlags.set(i,!1);for(let i=0;i<this._clippingContextListForMask.getSize();i++){const s=this._clippingContextListForMask.at(i),a=s._allClippedDrawRect,l=s._layoutBounds,c=.05;let h=0,d=0;const p=e.getPixelsPerUnit(),g=s.getClippingManager().getClippingMaskBufferSize(),y=l.width*g,_=l.height*g;this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.width*p>y?(this._tmpBoundsOnModel.expand(a.width*c,0),h=l.width/this._tmpBoundsOnModel.width):h=p/y,this._tmpBoundsOnModel.height*p>_?(this._tmpBoundsOnModel.expand(0,a.height*c),d=l.height/this._tmpBoundsOnModel.height):d=p/_,this.createMatrixForMask(t,l,h,d),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray())}}}createMatrixForMask(e,t,r,i){this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(t.x,t.y),this._tmpMatrix.scaleRelative(r,i),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(t.x,t.y*(e?-1:1)),this._tmpMatrix.scaleRelative(r,i*(e?-1:1)),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray())}setupLayoutBounds(e){const t=this._renderTextureCount<=1?tK:nK*this._renderTextureCount;if(e<=0||e>t){e>t&&li(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,e-t,this._renderTextureCount,e);for(let h=0;h<this._clippingContextListForMask.getSize();h++){const d=this._clippingContextListForMask.at(h);d._layoutChannelIndex=0,d._layoutBounds.x=0,d._layoutBounds.y=0,d._layoutBounds.width=1,d._layoutBounds.height=1,d._bufferIndex=0}return}const r=this._renderTextureCount<=1?9:8;let i=e/this._renderTextureCount;const s=e%this._renderTextureCount;i=Math.ceil(i);let a=i/lx;const l=i%lx;a=~~a;let c=0;for(let h=0;h<this._renderTextureCount;h++)for(let d=0;d<lx;d++){let p=a+(d<l?1:0);const g=l+(a<1?-1:0);if(d==g&&s>0&&(p-=h<s?0:1),p!=0)if(p==1){const y=this._clippingContextListForMask.at(c++);y._layoutChannelIndex=d,y._layoutBounds.x=0,y._layoutBounds.y=0,y._layoutBounds.width=1,y._layoutBounds.height=1,y._bufferIndex=h}else if(p==2)for(let y=0;y<p;y++){let _=y%2;_=~~_;const S=this._clippingContextListForMask.at(c++);S._layoutChannelIndex=d,S._layoutBounds.x=_*.5,S._layoutBounds.y=0,S._layoutBounds.width=.5,S._layoutBounds.height=1,S._bufferIndex=h}else if(p<=4)for(let y=0;y<p;y++){let _=y%2,S=y/2;_=~~_,S=~~S;const x=this._clippingContextListForMask.at(c++);x._layoutChannelIndex=d,x._layoutBounds.x=_*.5,x._layoutBounds.y=S*.5,x._layoutBounds.width=.5,x._layoutBounds.height=.5,x._bufferIndex=h}else if(p<=r)for(let y=0;y<p;y++){let _=y%3,S=y/3;_=~~_,S=~~S;const x=this._clippingContextListForMask.at(c++);x._layoutChannelIndex=d,x._layoutBounds.x=_/3,x._layoutBounds.y=S/3,x._layoutBounds.width=1/3,x._layoutBounds.height=1/3,x._bufferIndex=h}else{li(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,e-t,this._renderTextureCount,e);for(let y=0;y<p;y++){const _=this._clippingContextListForMask.at(c++);_._layoutChannelIndex=0,_._layoutBounds.x=0,_._layoutBounds.y=0,_._layoutBounds.width=1,_._layoutBounds.height=1,_._bufferIndex=0}}}}calcClippedDrawTotalBounds(e,t){let r=Number.MAX_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,a=Number.MIN_VALUE;const l=t._clippedDrawableIndexList.length;for(let c=0;c<l;c++){const h=t._clippedDrawableIndexList[c],d=e.getDrawableVertexCount(h),p=e.getDrawableVertices(h);let g=Number.MAX_VALUE,y=Number.MAX_VALUE,_=-Number.MAX_VALUE,S=-Number.MAX_VALUE;const x=d*Km.vertexStep;for(let E=Km.vertexOffset;E<x;E+=Km.vertexStep){const w=p[E],C=p[E+1];w<g&&(g=w),w>_&&(_=w),C<y&&(y=C),C>S&&(S=C)}if(g!=Number.MAX_VALUE)if(g<r&&(r=g),y<i&&(i=y),_>s&&(s=_),S>a&&(a=S),r==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;const E=s-r,w=a-i;t._allClippedDrawRect.x=r,t._allClippedDrawRect.y=i,t._allClippedDrawRect.width=E,t._allClippedDrawRect.height=w}}}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}getChannelFlagAsColor(e){return this._channelColors.at(e)}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}}let Au;const iK=10;class v8{constructor(){this._shaderSets=new Ke}release(){this.releaseShaderProgram()}setupShaderProgramForDraw(e,t,r){e.isPremultipliedAlpha()||li("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();let i,s,a,l;const c=e.getClippingContextBufferForDraw()!=null,h=t.getDrawableInvertedMaskBit(r),d=c?h?2:1:0;let p;switch(t.getDrawableBlendMode(r)){case vo.CubismBlendMode_Normal:default:p=this._shaderSets.at(1+d),i=this.gl.ONE,s=this.gl.ONE_MINUS_SRC_ALPHA,a=this.gl.ONE,l=this.gl.ONE_MINUS_SRC_ALPHA;break;case vo.CubismBlendMode_Additive:p=this._shaderSets.at(4+d),i=this.gl.ONE,s=this.gl.ONE,a=this.gl.ZERO,l=this.gl.ONE;break;case vo.CubismBlendMode_Multiplicative:p=this._shaderSets.at(7+d),i=this.gl.DST_COLOR,s=this.gl.ONE_MINUS_SRC_ALPHA,a=this.gl.ZERO,l=this.gl.ONE;break}this.gl.useProgram(p.shaderProgram),e._bufferData.vertex==null&&(e._bufferData.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e._bufferData.vertex);const g=t.getDrawableVertices(r);this.gl.bufferData(this.gl.ARRAY_BUFFER,g,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(p.attributePositionLocation),this.gl.vertexAttribPointer(p.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),e._bufferData.uv==null&&(e._bufferData.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e._bufferData.uv);const y=t.getDrawableVertexUvs(r);if(this.gl.bufferData(this.gl.ARRAY_BUFFER,y,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(p.attributeTexCoordLocation),this.gl.vertexAttribPointer(p.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),c){this.gl.activeTexture(this.gl.TEXTURE1);const P=e.getClippingContextBufferForDraw().getClippingManager().getColorBuffer().at(e.getClippingContextBufferForDraw()._bufferIndex);this.gl.bindTexture(this.gl.TEXTURE_2D,P),this.gl.uniform1i(p.samplerTexture1Location,1),this.gl.uniformMatrix4fv(p.uniformClipMatrixLocation,!1,e.getClippingContextBufferForDraw()._matrixForDraw.getArray());const M=e.getClippingContextBufferForDraw()._layoutChannelIndex,I=e.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(M);this.gl.uniform4f(p.uniformChannelFlagLocation,I.r,I.g,I.b,I.a)}const _=t.getDrawableTextureIndex(r),S=e.getBindedTextures().getValue(_);this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,S),this.gl.uniform1i(p.samplerTexture0Location,0);const x=e.getMvpMatrix();this.gl.uniformMatrix4fv(p.uniformMatrixLocation,!1,x.getArray());const E=e.getModelColorWithOpacity(t.getDrawableOpacity(r)),w=t.getMultiplyColor(r),C=t.getScreenColor(r);this.gl.uniform4f(p.uniformBaseColorLocation,E.r,E.g,E.b,E.a),this.gl.uniform4f(p.uniformMultiplyColorLocation,w.r,w.g,w.b,w.a),this.gl.uniform4f(p.uniformScreenColorLocation,C.r,C.g,C.b,C.a),e._bufferData.index==null&&(e._bufferData.index=this.gl.createBuffer());const A=t.getDrawableVertexIndices(r);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e._bufferData.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,A,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(i,s,a,l)}setupShaderProgramForMask(e,t,r){e.isPremultipliedAlpha()||li("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();const i=this._shaderSets.at(0);this.gl.useProgram(i.shaderProgram),e._bufferData.vertex==null&&(e._bufferData.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e._bufferData.vertex);const s=t.getDrawableVertices(r);this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(i.attributePositionLocation),this.gl.vertexAttribPointer(i.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),e._bufferData.uv==null&&(e._bufferData.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e._bufferData.uv);const a=t.getDrawableTextureIndex(r),l=e.getBindedTextures().getValue(a);this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.uniform1i(i.samplerTexture0Location,0),e._bufferData.uv==null&&(e._bufferData.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e._bufferData.uv);const c=t.getDrawableVertexUvs(r);this.gl.bufferData(this.gl.ARRAY_BUFFER,c,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(i.attributeTexCoordLocation),this.gl.vertexAttribPointer(i.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),e.getClippingContextBufferForMask();const h=e.getClippingContextBufferForMask()._layoutChannelIndex,d=e.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(h);this.gl.uniform4f(i.uniformChannelFlagLocation,d.r,d.g,d.b,d.a),this.gl.uniformMatrix4fv(i.uniformClipMatrixLocation,!1,e.getClippingContextBufferForMask()._matrixForMask.getArray());const p=e.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(i.uniformBaseColorLocation,p.x*2-1,p.y*2-1,p.getRight()*2-1,p.getBottom()*2-1);const g=t.getMultiplyColor(r),y=t.getScreenColor(r);this.gl.uniform4f(i.uniformMultiplyColorLocation,g.r,g.g,g.b,g.a),this.gl.uniform4f(i.uniformScreenColorLocation,y.r,y.g,y.b,y.a);const _=this.gl.ZERO,S=this.gl.ONE_MINUS_SRC_COLOR,x=this.gl.ZERO,E=this.gl.ONE_MINUS_SRC_ALPHA;e._bufferData.index==null&&(e._bufferData.index=this.gl.createBuffer());const w=t.getDrawableVertexIndices(r);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e._bufferData.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,w,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(_,S,x,E)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.getSize();e++)this.gl.deleteProgram(this._shaderSets.at(e).shaderProgram),this._shaderSets.at(e).shaderProgram=0,this._shaderSets.set(e,void 0),this._shaderSets.set(e,null)}generateShaders(){for(let e=0;e<iK;e++)this._shaderSets.pushBack(new S8);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(sK,aK),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(oK,lK),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(LB,uK),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(LB,cK),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(0).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_multiplyColor"),this._shaderSets.at(0).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_screenColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(1).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_multiplyColor"),this._shaderSets.at(1).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_screenColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(2).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_multiplyColor"),this._shaderSets.at(2).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_screenColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(3).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_multiplyColor"),this._shaderSets.at(3).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_screenColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(4).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_multiplyColor"),this._shaderSets.at(4).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_screenColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(5).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_multiplyColor"),this._shaderSets.at(5).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_screenColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(6).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_multiplyColor"),this._shaderSets.at(6).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_screenColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(7).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_multiplyColor"),this._shaderSets.at(7).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_screenColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(8).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_multiplyColor"),this._shaderSets.at(8).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_screenColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor"),this._shaderSets.at(9).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_multiplyColor"),this._shaderSets.at(9).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_screenColor")}loadShaderProgram(e,t){let r=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!i)return li("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return s?(this.gl.attachShader(r,i),this.gl.attachShader(r,s),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(s),r):(li("Failed to link program: {0}",r),this.gl.deleteShader(i),i=0,this.gl.deleteShader(s),s=0,r&&(this.gl.deleteProgram(r),r=0),0)):(li("Vertex shader compile error!"),0)}compileShaderSource(e,t){const r=t,i=this.gl.createShader(e);if(this.gl.shaderSource(i,r),this.gl.compileShader(i),!i){const a=this.gl.getShaderInfoLog(i);li("Shader compile log: {0} ",a)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)}setGl(e){this.gl=e}}class bo{static getInstance(){return Au==null&&(Au=new bo),Au}static deleteInstance(){Au&&(Au.release(),Au=null)}constructor(){this._shaderMap=new Ca}release(){for(const e=this._shaderMap.begin();e.notEqual(this._shaderMap.end());e.preIncrement())e.ptr().second.release();this._shaderMap.clear()}getShader(e){return this._shaderMap.getValue(e)}setGlContext(e){if(!this._shaderMap.isExist(e)){const t=new v8;t.setGl(e),this._shaderMap.setValue(e,t)}}}class S8{}var E8=(n=>(n[n.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",n[n.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",n[n.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",n[n.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",n[n.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",n[n.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",n[n.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",n[n.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",n[n.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",n[n.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",n))(E8||{});const sK="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",aK="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",oK="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",LB="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",lK="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",uK="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",cK="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";var FB;(n=>{n.CubismShaderSet=S8,n.CubismShader_WebGL=v8,n.CubismShaderManager_WebGL=bo,n.ShaderNames=E8})(FB||(FB={}));let Ea,kg;class ES extends rK{getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures!=null&&this._maskRenderTextures.clear(),this._maskRenderTextures=new Ke,this._maskColorBuffers!=null&&this._maskColorBuffers.clear(),this._maskColorBuffers=new Ke;const e=this._clippingMaskBufferSize;for(let t=0;t<this._renderTextureCount;t++)this._maskColorBuffers.pushBack(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers.at(t)),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.pushBack(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures.at(t)),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers.at(t),0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,kg),this._maskTexture=new w8(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(e){this.gl=e}constructor(){super(C8)}setupClippingContext(e,t){this._currentFrameNo++;let r=0;for(let i=0;i<this._clippingContextListForMask.getSize();i++){const s=this._clippingContextListForMask.at(i);this.calcClippedDrawTotalBounds(e,s),s._isUsing&&r++}if(r>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture().at(0),t.preDraw(),this.setupLayoutBounds(r),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture),this._clearedFrameBufferFlags.getSize()!=this._renderTextureCount&&(this._clearedFrameBufferFlags.clear(),this._clearedFrameBufferFlags=new Ke(this._renderTextureCount));for(let i=0;i<this._clearedFrameBufferFlags.getSize();i++)this._clearedFrameBufferFlags.set(i,!1);for(let i=0;i<this._clippingContextListForMask.getSize();i++){const s=this._clippingContextListForMask.at(i),a=s._allClippedDrawRect,l=s._layoutBounds,c=.05;let h=0,d=0;const p=this.getMaskRenderTexture().at(s._bufferIndex);this._currentMaskRenderTexture!=p&&(this._currentMaskRenderTexture=p,t.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.expand(a.width*c,a.height*c),h=l.width/this._tmpBoundsOnModel.width,d=l.height/this._tmpBoundsOnModel.height,this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(h,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(h,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const g=s._clippingIdCount;for(let y=0;y<g;y++){const _=s._clippingIdList[y];e.getDrawableDynamicFlagVertexPositionsDidChange(_)&&(t.setIsCulling(e.getDrawableCulling(_)!=!1),this._clearedFrameBufferFlags.at(s._bufferIndex)||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferFlags.set(s._bufferIndex,!0)),t.setClippingContextBufferForMask(s),t.drawMeshWebGL(e,_))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,kg),t.setClippingContextBufferForMask(null),this.gl.viewport(Ea[0],Ea[1],Ea[2],Ea[3])}}getColorBuffer(){return this._maskColorBuffers}getClippingMaskCount(){return this._clippingContextListForMask.getSize()}}class w8{constructor(e,t){this.frameNo=e,this.textures=t}}class C8 extends xY{constructor(e,t,r){super(t,r),this._owner=e}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class hK{setGlEnable(e,t){t?this.gl.enable(e):this.gl.disable(e)}setGlEnableVertexAttribArray(e,t){t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)}save(){if(this.gl==null){li(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastElementArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){li(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(e){this.gl=e}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class mw extends qy{initialize(e,t=1){e.isUsingMasking()&&(this._clippingManager=new ES,this._clippingManager.initialize(e,t)),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),super.initialize(e)}bindTexture(e,t){this._textures.setValue(e,t)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){if(!this._model.isUsingMasking())return;const t=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new ES,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),t)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new hK,this.firstDraw=!0,this._textures=new Ca,this._sortedDrawableIndexList=new Ke,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}release(){this._clippingManager&&(this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null),this.gl!=null&&(this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null)}doDrawModel(){if(this.gl==null){li(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this.isUsingHighPrecisionMask()?this._clippingManager.setupMatrixForHighPrecision(this.getModel(),!1):this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders();for(let r=0;r<e;++r){const i=t[r];this._sortedDrawableIndexList.set(i,r)}for(let r=0;r<e;++r){const i=this._sortedDrawableIndexList.at(r);if(!this.getModel().getDrawableDynamicFlagIsVisible(i))continue;const s=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(i):null;if(s!=null&&this.isUsingHighPrecisionMask()){s._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s.getClippingManager().getMaskRenderTexture().at(s._bufferIndex)),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const a=s._clippingIdCount;for(let l=0;l<a;l++){const c=s._clippingIdList[l];this._model.getDrawableDynamicFlagVertexPositionsDidChange(c)&&(this.setIsCulling(this._model.getDrawableCulling(c)!=!1),this.setClippingContextBufferForMask(s),this.drawMeshWebGL(this._model,c))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,kg),this.setClippingContextBufferForMask(null),this.gl.viewport(Ea[0],Ea[1],Ea[2],Ea[3]),this.preDraw()}this.setClippingContextBufferForDraw(s),this.setIsCulling(this.getModel().getDrawableCulling(i)),this.drawMeshWebGL(this._model,i)}}drawMeshWebGL(e,t){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW),this.isGeneratingMask()?bo.getInstance().getShader(this.gl).setupShaderProgramForMask(this,e,t):bo.getInstance().getShader(this.gl).setupShaderProgramForDraw(this,e,t);{const r=e.getDrawableVertexIndexCount(t);this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0)}this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){bo.deleteInstance()}setRenderState(e,t){kg=e,Ea=t}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(let e=0;e<this._textures.getSize();++e)this.gl.bindTexture(this.gl.TEXTURE_2D,this._textures.getValue(e)),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}isGeneratingMask(){return this.getClippingContextBufferForMask()!=null}startUp(e){this.gl=e,this._clippingManager&&this._clippingManager.setGL(e),bo.getInstance().setGlContext(e),this._rendererProfile.setGl(e),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}qy.staticRelease=()=>{mw.doStaticRelease()};var UB;(n=>{n.CubismClippingContext=C8,n.CubismClippingManager_WebGL=ES,n.CubismRenderTextureResource=w8,n.CubismRenderer_WebGL=mw})(UB||(UB={}));const GB=new Pi;class dK extends dY{constructor(e,t,r){super(),le(this,"settings"),le(this,"coreModel"),le(this,"motionManager"),le(this,"lipSync",!0),le(this,"breath",Zy.create()),le(this,"eyeBlink"),le(this,"userData"),le(this,"renderer",new mw),le(this,"idParamAngleX","ParamAngleX"),le(this,"idParamAngleY","ParamAngleY"),le(this,"idParamAngleZ","ParamAngleZ"),le(this,"idParamEyeBallX","ParamEyeBallX"),le(this,"idParamEyeBallY","ParamEyeBallY"),le(this,"idParamBodyAngleX","ParamBodyAngleX"),le(this,"idParamBreath",Ze.ParamBreath||"ParamBreath"),le(this,"eyeballXParamIndex"),le(this,"eyeballYParamIndex"),le(this,"angleXParamIndex"),le(this,"angleYParamIndex"),le(this,"angleZParamIndex"),le(this,"bodyAngleXParamIndex"),le(this,"breathParamIndex"),le(this,"pixelsPerUnit",1),le(this,"centeringTransform",new Ce),this.coreModel=e,this.settings=t,this.motionManager=new eK(t,r),this.eyeballXParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamEyeBallX)),this.eyeballYParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamEyeBallY)),this.angleXParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamAngleX)),this.angleYParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamAngleY)),this.angleZParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamAngleZ)),this.bodyAngleXParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamBodyAngleX)),this.breathParamIndex=this.coreModel.getParameterIndex(gt.getIdManager().getId(this.idParamBreath)),this.init()}init(){var e;super.init(),(e=this.settings.getEyeBlinkParameters())!=null&&e.length&&(this.eyeBlink=b8.create(this.settings));const t=new Ke;t.pushBack(new Ou(gt.getIdManager().getId(this.idParamAngleX),0,15,6.5345,.5)),t.pushBack(new Ou(gt.getIdManager().getId(this.idParamAngleY),0,8,3.5345,.5)),t.pushBack(new Ou(gt.getIdManager().getId(this.idParamAngleZ),0,10,5.5345,.5)),t.pushBack(new Ou(gt.getIdManager().getId(this.idParamBodyAngleX),0,4,15.5345,.5)),t.pushBack(new Ou(gt.getIdManager().getId(this.idParamBreath),0,.5,3.2345,.5)),this.breath.setParameters(t),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const[t,r]of Object.entries(this.settings.layout)){const i=t.charAt(0).toLowerCase()+t.slice(1);e[i]=r}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,t){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=t,this.renderer._clippingManager._maskTexture=void 0,bo.getInstance()._shaderSets=[]}bindTexture(e,t){this.renderer.bindTexture(e,t)}getHitAreaDefs(){var e,t;const r=this.getDrawableIDs();return(t=(e=this.settings.hitAreas)==null?void 0:e.map(i=>{const s=r.indexOf(i.Id);return{id:i.Id,name:i.Name,index:s}}))!=null?t:[]}getDrawableIDs(){return this.coreModel.getModel().drawables.ids}getDrawableIndex(e){return this.coreModel.getDrawableIndex(gt.getIdManager().getId(e))}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(gt.getIdManager().getId(e)),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const t=this.coreModel.getDrawableVertices(e).slice();for(let r=0;r<t.length;r+=2)t[r]=t[r]*this.pixelsPerUnit+this.originalWidth/2,t[r+1]=-t[r+1]*this.pixelsPerUnit+this.originalHeight/2;return t}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,t){var r,i,s,a;super.update(e,t),e/=1e3,t/=1e3;const l=this.coreModel;this.emit("beforeMotionUpdate");const c=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),(r=this.motionManager.expressionManager)==null||r.update(l,t),c||(i=this.eyeBlink)==null||i.updateParameters(l,e),l.saveParameters(),this.updateNaturalMovements(e*1e3,t*1e3),(s=this.physics)==null||s.evaluate(l,e),(a=this.pose)==null||a.updateParameters(l,e),this.updateFocus(),this.emit("beforeModelUpdate"),l.update()}updateFocus(){if(this.eyeballXParamIndex<0||this.angleXParamIndex<0){console.log("Invalid parameter indices, skipping focus update");return}const e=this.focusController.x,t=this.focusController.y,r=this.focusController.x*30,i=this.focusController.y*30;this.coreModel.setParameterValueByIndex(this.eyeballXParamIndex,e),this.coreModel.setParameterValueByIndex(this.eyeballYParamIndex,t),this.coreModel.setParameterValueByIndex(this.angleXParamIndex,r),this.coreModel.setParameterValueByIndex(this.angleYParamIndex,i),this.coreModel.setParameterValueByIndex(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.setParameterValueByIndex(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,t){var r;(r=this.breath)==null||r.updateParameters(this.coreModel,e/1e3)}draw(e){const t=this.drawingMatrix,r=GB.getArray();r[0]=t.a,r[1]=t.b,r[4]=-t.c,r[5]=-t.d,r[12]=t.tx,r[13]=t.ty,this.renderer.setMvpMatrix(GB),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class T8{}var zB;(n=>{n.ICubismModelSetting=T8})(zB||(zB={}));var A8=(n=>(n[n.FrequestNode_Groups=0]="FrequestNode_Groups",n[n.FrequestNode_Moc=1]="FrequestNode_Moc",n[n.FrequestNode_Motions=2]="FrequestNode_Motions",n[n.FrequestNode_Expressions=3]="FrequestNode_Expressions",n[n.FrequestNode_Textures=4]="FrequestNode_Textures",n[n.FrequestNode_Physics=5]="FrequestNode_Physics",n[n.FrequestNode_Pose=6]="FrequestNode_Pose",n[n.FrequestNode_HitAreas=7]="FrequestNode_HitAreas",n))(A8||{});class gw extends T8{constructor(e,t){super(),this.version="Version",this.fileReferences="FileReferences",this.groups="Groups",this.layout="Layout",this.hitAreas="HitAreas",this.moc="Moc",this.textures="Textures",this.physics="Physics",this.pose="Pose",this.expressions="Expressions",this.motions="Motions",this.userData="UserData",this.name="Name",this.filePath="File",this.id="Id",this.ids="Ids",this.target="Target",this.idle="Idle",this.tapBody="TapBody",this.pinchIn="PinchIn",this.pinchOut="PinchOut",this.shake="Shake",this.flickHead="FlickHead",this.parameter="Parameter",this.soundPath="Sound",this.fadeInTime="FadeInTime",this.fadeOutTime="FadeOutTime",this.centerX="CenterX",this.centerY="CenterY",this.x="X",this.y="Y",this.width="Width",this.height="Height",this.lipSync="LipSync",this.eyeBlink="EyeBlink",this.initParameter="init_param",this.initPartsVisible="init_parts_visible",this.val="val",this._json=zr.create(e,t),this.getJson()&&(this._jsonValue=new Ke,this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.groups)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.moc)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.motions)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.expressions)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.textures)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.physics)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.pose)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.hitAreas)))}release(){zr.delete(this._json),this._jsonValue=null}getJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(1).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(4).getSize():0}getTextureDirectory(){const t=this._jsonValue.at(4).getValueByIndex(0).getRawString().split("/"),r=t.length-1;let i="";for(let s=0;s<r;s++)i+=t[s],s<r-1&&(i+="/");return i}getTextureFileName(e){return this._jsonValue.at(4).getValueByIndex(e).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(7).getSize():0}getHitAreaId(e){return gt.getIdManager().getId(this._jsonValue.at(7).getValueByIndex(e).getValueByString(this.id).getRawString())}getHitAreaName(e){return this._jsonValue.at(7).getValueByIndex(e).getValueByString(this.name).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(5).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(6).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(3).getSize():0}getExpressionName(e){return this._jsonValue.at(3).getValueByIndex(e).getValueByString(this.name).getRawString()}getExpressionFileName(e){return this._jsonValue.at(3).getValueByIndex(e).getValueByString(this.filePath).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().getSize():0}getMotionGroupName(e){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().at(e):null}getMotionCount(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(2).getValueByString(e).getSize():0}getMotionFileName(e,t){return this.isExistMotionGroupName(e)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.filePath).getRawString():""}getMotionSoundFileName(e,t){return this.isExistMotionSoundFile(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.soundPath).getRawString():""}getMotionFadeInTimeValue(e,t){return this.isExistMotionFadeIn(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeInTime).toFloat():-1}getMotionFadeOutTimeValue(e,t){return this.isExistMotionFadeOut(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeOutTime).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.userData).getRawString():""}getLayoutMap(e){const t=this.getJson().getRoot().getValueByString(this.layout).getMap();if(t==null)return!1;let r=!1;for(const i=t.begin();i.notEqual(t.end());i.preIncrement())e.setValue(i.ptr().first,i.ptr().second.toFloat()),r=!0;return r}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let e=0;for(let t=0;t<this._jsonValue.at(0).getSize();t++){const r=this._jsonValue.at(0).getValueByIndex(t);if(!(r.isNull()||r.isError())&&r.getValueByString(this.name).getRawString()==this.eyeBlink){e=r.getValueByString(this.ids).getVector().getSize();break}}return e}getEyeBlinkParameterId(e){if(!this.isExistEyeBlinkParameters())return null;for(let t=0;t<this._jsonValue.at(0).getSize();t++){const r=this._jsonValue.at(0).getValueByIndex(t);if(!(r.isNull()||r.isError())&&r.getValueByString(this.name).getRawString()==this.eyeBlink)return gt.getIdManager().getId(r.getValueByString(this.ids).getValueByIndex(e).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let e=0;for(let t=0;t<this._jsonValue.at(0).getSize();t++){const r=this._jsonValue.at(0).getValueByIndex(t);if(!(r.isNull()||r.isError())&&r.getValueByString(this.name).getRawString()==this.lipSync){e=r.getValueByString(this.ids).getVector().getSize();break}}return e}getLipSyncParameterId(e){if(!this.isExistLipSyncParameters())return null;for(let t=0;t<this._jsonValue.at(0).getSize();t++){const r=this._jsonValue.at(0).getValueByIndex(t);if(!(r.isNull()||r.isError())&&r.getValueByString(this.name).getRawString()==this.lipSync)return gt.getIdManager().getId(r.getValueByString(this.ids).getValueByIndex(e).getRawString())}return null}isExistModelFile(){const e=this._jsonValue.at(1);return!e.isNull()&&!e.isError()}isExistTextureFiles(){const e=this._jsonValue.at(4);return!e.isNull()&&!e.isError()}isExistHitAreas(){const e=this._jsonValue.at(7);return!e.isNull()&&!e.isError()}isExistPhysicsFile(){const e=this._jsonValue.at(5);return!e.isNull()&&!e.isError()}isExistPoseFile(){const e=this._jsonValue.at(6);return!e.isNull()&&!e.isError()}isExistExpressionFile(){const e=this._jsonValue.at(3);return!e.isNull()&&!e.isError()}isExistMotionGroups(){const e=this._jsonValue.at(2);return!e.isNull()&&!e.isError()}isExistMotionGroupName(e){const t=this._jsonValue.at(2).getValueByString(e);return!t.isNull()&&!t.isError()}isExistMotionSoundFile(e,t){const r=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.soundPath);return!r.isNull()&&!r.isError()}isExistMotionFadeIn(e,t){const r=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeInTime);return!r.isNull()&&!r.isError()}isExistMotionFadeOut(e,t){const r=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeOutTime);return!r.isNull()&&!r.isError()}isExistUserDataFile(){const e=this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.userData);return!e.isNull()&&!e.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let e=0;e<this._jsonValue.at(0).getSize();++e)if(this._jsonValue.at(0).getValueByIndex(e).getValueByString(this.name).getRawString()==this.eyeBlink)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let e=0;e<this._jsonValue.at(0).getSize();++e)if(this._jsonValue.at(0).getValueByIndex(e).getValueByString(this.name).getRawString()==this.lipSync)return!0;return!1}}var VB;(n=>{n.CubismModelSettingJson=gw,n.FrequestNode=A8})(VB||(VB={}));class rc extends lw{constructor(e){if(super(e),le(this,"moc"),le(this,"textures"),le(this,"hitAreas"),le(this,"motions"),le(this,"expressions"),le(this,"layout"),!rc.isValidJSON(e))throw new TypeError("Invalid JSON.");const t=JSON.stringify(e),r=new TextEncoder().encode(t);Object.assign(this,new gw(r.buffer,r.byteLength)),this.moc=e.FileReferences.Moc,this.textures=e.FileReferences.Textures,e.FileReferences.Physics&&(this.physics=e.FileReferences.Physics),e.FileReferences.Pose&&(this.pose=e.FileReferences.Pose),e.Layout&&(this.layout=e.Layout),e.HitAreas&&(this.hitAreas=e.HitAreas),e.FileReferences.Motions&&(this.motions=e.FileReferences.Motions),e.FileReferences.Expressions&&(this.expressions=e.FileReferences.Expressions)}static isValidJSON(e){var t;return!!e?.FileReferences&&typeof e.FileReferences.Moc=="string"&&((t=e.FileReferences.Textures)==null?void 0:t.length)>0&&e.FileReferences.Textures.every(r=>typeof r=="string")}getEyeBlinkParameters(){const e=this.getEyeBlinkParameterCount(),t=[];for(let r=0;r<e;r++)t.push(this.getEyeBlinkParameterId(r));return t}getLipSyncParameters(){const e=this.getLipSyncParameterCount(),t=[];for(let r=0;r<e;r++)t.push(this.getLipSyncParameterId(r));return t}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[t,r]of Object.entries(this.motions))for(let i=0;i<r.length;i++)r[i].File=e(r[i].File,`motions.${t}[${i}].File`),r[i].Sound!==void 0&&(r[i].Sound=e(r[i].Sound,`motions.${t}[${i}].Sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].File=e(this.expressions[t].File,`expressions[${t}].File`)}}nY(rc,[gw]);let ym,HB=20;function fK(){return gt.isStarted()?Promise.resolve():(ym??(ym=new Promise((n,e)=>{function t(){try{pK(),n()}catch(r){if(HB--,HB<0){const i=new Error("Failed to start up Cubism 5 framework.");i.cause=r,e(i);return}setTimeout(t,10)}}t()})),ym)}function pK(n){n=Object.assign({logFunction:console.log,loggingLevel:bl.LogLevel_Verbose},n),gt.startUp(n),gt.initialize()}const mK=.001,ux=.5,jB="FadeInTime",XB="Link",gK="Groups",yK="Id";class Ud{static create(e,t){const r=zr.create(e,t);if(!r)return null;const i=new Ud,s=r.getRoot();s.getValueByString(jB).isNull()||(i._fadeTimeSeconds=s.getValueByString(jB).toFloat(ux),i._fadeTimeSeconds<0&&(i._fadeTimeSeconds=ux));const a=s.getValueByString(gK),l=a.getSize();for(let c=0;c<l;++c){const h=a.getValueByIndex(c),d=h.getSize();let p=0;for(let g=0;g<d;++g){const y=h.getValueByIndex(g),_=new Gd,S=gt.getIdManager().getId(y.getValueByString(yK).getRawString());if(_.partId=S,!y.getValueByString(XB).isNull()){const x=y.getValueByString(XB),E=x.getSize();for(let w=0;w<E;++w){const C=new Gd,A=gt.getIdManager().getId(x.getValueByIndex(w).getString());C.partId=A,_.link.pushBack(C)}}i._partGroups.pushBack(_.clone()),++p}i._partGroupCounts.pushBack(p)}return zr.delete(r),i}static delete(e){}updateParameters(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);let r=0;for(let i=0;i<this._partGroupCounts.getSize();i++){const s=this._partGroupCounts.at(i);this.doFade(e,t,r,s),r+=s}this.copyPartOpacities(e)}reset(e){let t=0;for(let r=0;r<this._partGroupCounts.getSize();++r){const i=this._partGroupCounts.at(r);for(let s=t;s<t+i;++s){this._partGroups.at(s).initialize(e);const a=this._partGroups.at(s).partIndex,l=this._partGroups.at(s).parameterIndex;if(!(a<0)){e.setPartOpacityByIndex(a,s==t?1:0),e.setParameterValueByIndex(l,s==t?1:0);for(let c=0;c<this._partGroups.at(s).link.getSize();++c)this._partGroups.at(s).link.at(c).initialize(e)}}t+=i}}copyPartOpacities(e){for(let t=0;t<this._partGroups.getSize();++t){const r=this._partGroups.at(t);if(r.link.getSize()==0)continue;const i=this._partGroups.at(t).partIndex,s=e.getPartOpacityByIndex(i);for(let a=0;a<r.link.getSize();++a){const c=r.link.at(a).partIndex;c<0||e.setPartOpacityByIndex(c,s)}}}doFade(e,t,r,i){let s=-1,a=1;const l=.5,c=.15;for(let h=r;h<r+i;++h){const d=this._partGroups.at(h).partIndex,p=this._partGroups.at(h).parameterIndex;if(e.getParameterValueByIndex(p)>mK){if(s>=0)break;if(s=h,this._fadeTimeSeconds==0){a=1;continue}a=e.getPartOpacityByIndex(d),a+=t/this._fadeTimeSeconds,a>1&&(a=1)}}s<0&&(s=0,a=1);for(let h=r;h<r+i;++h){const d=this._partGroups.at(h).partIndex;if(s==h)e.setPartOpacityByIndex(d,a);else{let p=e.getPartOpacityByIndex(d),g;a<l?g=a*(l-1)/l+1:g=(1-a)*l/(1-l),(1-g)*(1-a)>c&&(g=1-c/(1-a)),p>g&&(p=g),e.setPartOpacityByIndex(d,p)}}}constructor(){this._fadeTimeSeconds=ux,this._lastModel=null,this._partGroups=new Ke,this._partGroupCounts=new Ke}}class Gd{constructor(e){if(this.parameterIndex=0,this.partIndex=0,this.link=new Ke,e!=null){this.partId=e.partId;for(const t=e.link.begin();t.notEqual(e.link.end());t.preIncrement())this.link.pushBack(t.ptr().clone())}}assignment(e){this.partId=e.partId;for(const t=e.link.begin();t.notEqual(e.link.end());t.preIncrement())this.link.pushBack(t.ptr().clone());return this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Gd;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new Ke;for(let t=this.link.begin();t.notEqual(this.link.end());t.increment())e.link.pushBack(t.ptr().clone());return e}}var WB;(n=>{n.CubismPose=Ud,n.PartData=Gd})(WB||(WB={}));class _K{constructor(e=!1,t=!1){this.isOverridden=e,this.isParameterRepeated=t}}class $B{constructor(e=!1,t=new oi){this.isOverridden=e,this.color=t}get isOverwritten(){return this.isOverridden}}class qB{constructor(e=!1,t=new oi){this.isOverridden=e,this.color=t}get isOverwritten(){return this.isOverridden}}class bK{constructor(e=!1,t=!1){this.isOverridden=e,this.isCulling=t}get isOverwritten(){return this.isOverridden}}class M8{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,t=this._savedParameters.getSize();for(let r=0;r<e;++r)r<t?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])}getMultiplyColor(e){return this.getOverrideFlagForModelMultiplyColors()||this.getOverrideFlagForDrawableMultiplyColors(e)?this._userMultiplyColors.at(e).color:this.getDrawableMultiplyColor(e)}getScreenColor(e){return this.getOverrideFlagForModelScreenColors()||this.getOverrideFlagForDrawableScreenColors(e)?this._userScreenColors.at(e).color:this.getDrawableScreenColor(e)}setMultiplyColorByTextureColor(e,t){this.setMultiplyColorByRGBA(e,t.r,t.g,t.b,t.a)}setMultiplyColorByRGBA(e,t,r,i,s=1){this._userMultiplyColors.at(e).color.r=t,this._userMultiplyColors.at(e).color.g=r,this._userMultiplyColors.at(e).color.b=i,this._userMultiplyColors.at(e).color.a=s}setScreenColorByTextureColor(e,t){this.setScreenColorByRGBA(e,t.r,t.g,t.b,t.a)}setScreenColorByRGBA(e,t,r,i,s=1){this._userScreenColors.at(e).color.r=t,this._userScreenColors.at(e).color.g=r,this._userScreenColors.at(e).color.b=i,this._userScreenColors.at(e).color.a=s}getPartMultiplyColor(e){return this._userPartMultiplyColors.at(e).color}getPartScreenColor(e){return this._userPartScreenColors.at(e).color}setPartColor(e,t,r,i,s,a,l){if(a.at(e).color.r=t,a.at(e).color.g=r,a.at(e).color.b=i,a.at(e).color.a=s,a.at(e).isOverridden)for(let c=0;c<this._partChildDrawables.at(e).getSize();++c){const h=this._partChildDrawables.at(e).at(c);l.at(h).color.r=t,l.at(h).color.g=r,l.at(h).color.b=i,l.at(h).color.a=s}}setPartMultiplyColorByTextureColor(e,t){this.setPartMultiplyColorByRGBA(e,t.r,t.g,t.b,t.a)}setPartMultiplyColorByRGBA(e,t,r,i,s){this.setPartColor(e,t,r,i,s,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(e,t){this.setPartScreenColorByRGBA(e,t.r,t.g,t.b,t.a)}setPartScreenColorByRGBA(e,t,r,i,s){this.setPartColor(e,t,r,i,s,this._userPartScreenColors,this._userScreenColors)}getOverrideFlagForModelParameterRepeat(){return this._isOverriddenParameterRepeat}setOverrideFlagForModelParameterRepeat(e){this._isOverriddenParameterRepeat=e}getOverrideFlagForParameterRepeat(e){return this._userParameterRepeatDataList.at(e).isOverridden}setOverrideFlagForParameterRepeat(e,t){this._userParameterRepeatDataList.at(e).isOverridden=t}getRepeatFlagForParameterRepeat(e){return this._userParameterRepeatDataList.at(e).isParameterRepeated}setRepeatFlagForParameterRepeat(e,t){this._userParameterRepeatDataList.at(e).isParameterRepeated=t}getOverwriteFlagForModelMultiplyColors(){return It("getOverwriteFlagForModelMultiplyColors() is a deprecated function. Please use getOverrideFlagForModelMultiplyColors()."),this.getOverrideFlagForModelMultiplyColors()}getOverrideFlagForModelMultiplyColors(){return this._isOverriddenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return It("getOverwriteFlagForModelScreenColors() is a deprecated function. Please use getOverrideFlagForModelScreenColors()."),this.getOverrideFlagForModelScreenColors()}getOverrideFlagForModelScreenColors(){return this._isOverriddenModelScreenColors}setOverwriteFlagForModelMultiplyColors(e){It("setOverwriteFlagForModelMultiplyColors(value: boolean) is a deprecated function. Please use setOverrideFlagForModelMultiplyColors(value: boolean)."),this.setOverrideFlagForModelMultiplyColors(e)}setOverrideFlagForModelMultiplyColors(e){this._isOverriddenModelMultiplyColors=e}setOverwriteFlagForModelScreenColors(e){It("setOverwriteFlagForModelScreenColors(value: boolean) is a deprecated function. Please use setOverrideFlagForModelScreenColors(value: boolean)."),this.setOverrideFlagForModelScreenColors(e)}setOverrideFlagForModelScreenColors(e){this._isOverriddenModelScreenColors=e}getOverwriteFlagForDrawableMultiplyColors(e){return It("getOverwriteFlagForDrawableMultiplyColors(drawableindex: number) is a deprecated function. Please use getOverrideFlagForDrawableMultiplyColors(drawableindex: number)."),this.getOverrideFlagForDrawableMultiplyColors(e)}getOverrideFlagForDrawableMultiplyColors(e){return this._userMultiplyColors.at(e).isOverridden}getOverwriteFlagForDrawableScreenColors(e){return It("getOverwriteFlagForDrawableScreenColors(drawableindex: number) is a deprecated function. Please use getOverrideFlagForDrawableScreenColors(drawableindex: number)."),this.getOverrideFlagForDrawableScreenColors(e)}getOverrideFlagForDrawableScreenColors(e){return this._userScreenColors.at(e).isOverridden}setOverwriteFlagForDrawableMultiplyColors(e,t){It("setOverwriteFlagForDrawableMultiplyColors(drawableindex: number, value: boolean) is a deprecated function. Please use setOverrideFlagForDrawableMultiplyColors(drawableindex: number, value: boolean)."),this.setOverrideFlagForDrawableMultiplyColors(e,t)}setOverrideFlagForDrawableMultiplyColors(e,t){this._userMultiplyColors.at(e).isOverridden=t}setOverwriteFlagForDrawableScreenColors(e,t){It("setOverwriteFlagForDrawableScreenColors(drawableindex: number, value: boolean) is a deprecated function. Please use setOverrideFlagForDrawableScreenColors(drawableindex: number, value: boolean)."),this.setOverrideFlagForDrawableScreenColors(e,t)}setOverrideFlagForDrawableScreenColors(e,t){this._userScreenColors.at(e).isOverridden=t}getOverwriteColorForPartMultiplyColors(e){return It("getOverwriteColorForPartMultiplyColors(partIndex: number) is a deprecated function. Please use getOverrideColorForPartMultiplyColors(partIndex: number)."),this.getOverrideColorForPartMultiplyColors(e)}getOverrideColorForPartMultiplyColors(e){return this._userPartMultiplyColors.at(e).isOverridden}getOverwriteColorForPartScreenColors(e){return It("getOverwriteColorForPartScreenColors(partIndex: number) is a deprecated function. Please use getOverrideColorForPartScreenColors(partIndex: number)."),this.getOverrideColorForPartScreenColors(e)}getOverrideColorForPartScreenColors(e){return this._userPartScreenColors.at(e).isOverridden}setOverwriteColorForPartColors(e,t,r,i){It("setOverwriteColorForPartColors(partIndex: number, value: boolean, partColors: csmVector<PartColorData>, drawableColors: csmVector<DrawableColorData>) is a deprecated function. Please use setOverrideColorForPartColors(partIndex: number, value: boolean, partColors: csmVector<PartColorData>, drawableColors: csmVector<DrawableColorData>)."),this.setOverrideColorForPartColors(e,t,r,i)}setOverrideColorForPartColors(e,t,r,i){r.at(e).isOverridden=t;for(let s=0;s<this._partChildDrawables.at(e).getSize();++s){const a=this._partChildDrawables.at(e).at(s);i.at(a).isOverridden=t,t&&(i.at(a).color.r=r.at(e).color.r,i.at(a).color.g=r.at(e).color.g,i.at(a).color.b=r.at(e).color.b,i.at(a).color.a=r.at(e).color.a)}}setOverwriteColorForPartMultiplyColors(e,t){It("setOverwriteColorForPartMultiplyColors(partIndex: number, value: boolean) is a deprecated function. Please use setOverrideColorForPartMultiplyColors(partIndex: number, value: boolean)."),this.setOverrideColorForPartMultiplyColors(e,t)}setOverrideColorForPartMultiplyColors(e,t){this._userPartMultiplyColors.at(e).isOverridden=t,this.setOverrideColorForPartColors(e,t,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(e,t){It("setOverwriteColorForPartScreenColors(partIndex: number, value: boolean) is a deprecated function. Please use setOverrideColorForPartScreenColors(partIndex: number, value: boolean)."),this.setOverrideColorForPartScreenColors(e,t)}setOverrideColorForPartScreenColors(e,t){this._userPartScreenColors.at(e).isOverridden=t,this.setOverrideColorForPartColors(e,t,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(e){if(this.getOverrideFlagForModelCullings()||this.getOverrideFlagForDrawableCullings(e))return this._userCullings.at(e).isCulling;const t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}setDrawableCulling(e,t){this._userCullings.at(e).isCulling=t}getOverwriteFlagForModelCullings(){return It("getOverwriteFlagForModelCullings() is a deprecated function. Please use getOverrideFlagForModelCullings()."),this.getOverrideFlagForModelCullings()}getOverrideFlagForModelCullings(){return this._isOverriddenCullings}setOverwriteFlagForModelCullings(e){It("setOverwriteFlagForModelCullings(isOverriddenCullings: boolean) is a deprecated function. Please use setOverrideFlagForModelCullings(isOverriddenCullings: boolean)."),this.setOverrideFlagForModelCullings(e)}setOverrideFlagForModelCullings(e){this._isOverriddenCullings=e}getOverwriteFlagForDrawableCullings(e){return It("getOverwriteFlagForDrawableCullings(drawableIndex: number) is a deprecated function. Please use getOverrideFlagForDrawableCullings(drawableIndex: number)."),this.getOverrideFlagForDrawableCullings(e)}getOverrideFlagForDrawableCullings(e){return this._userCullings.at(e).isOverridden}setOverwriteFlagForDrawableCullings(e,t){It("setOverwriteFlagForDrawableCullings(drawableIndex: number, isOverriddenCullings: boolean) is a deprecated function. Please use setOverrideFlagForDrawableCullings(drawableIndex: number, isOverriddenCullings: boolean)."),this.setOverrideFlagForDrawableCullings(e,t)}setOverrideFlagForDrawableCullings(e,t){this._userCullings.at(e).isOverridden=t}getModelOapcity(){return this._modelOpacity}setModelOapcity(e){this._modelOpacity=e}getModel(){return this._model}getPartIndex(e){let t;const r=this._model.parts.count;for(t=0;t<r;++t)if(e==this._partIds.at(t))return t;return this._notExistPartId.isExist(e)?this._notExistPartId.getValue(e):(t=r+this._notExistPartId.getSize(),this._notExistPartId.setValue(e,t),this._notExistPartOpacities.appendKey(t),t)}getPartId(e){const t=this._model.parts.ids[e];return gt.getIdManager().getId(t)}getPartCount(){return this._model.parts.count}getPartParentPartIndices(){return this._model.parts.parentIndices}setPartOpacityByIndex(e,t){if(this._notExistPartOpacities.isExist(e)){this._notExistPartOpacities.setValue(e,t);return}ai(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t}setPartOpacityById(e,t){const r=this.getPartIndex(e);r<0||this.setPartOpacityByIndex(r,t)}getPartOpacityByIndex(e){return this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.getValue(e):(ai(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}getParameterIndex(e){let t;const r=this._model.parameters.count;for(t=0;t<r;++t)if(e==this._parameterIds.at(t))return t;return this._notExistParameterId.isExist(e)?this._notExistParameterId.getValue(e):(t=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(e,t),this._notExistParameterValues.appendKey(t),t)}getParameterCount(){return this._model.parameters.count}getParameterType(e){return this._model.parameters.types[e]}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterId(e){return gt.getIdManager().getId(this._model.parameters.ids[e])}getParameterValueByIndex(e){return this._notExistParameterValues.isExist(e)?this._notExistParameterValues.getValue(e):(ai(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}setParameterValueByIndex(e,t,r=1){if(this._notExistParameterValues.isExist(e)){this._notExistParameterValues.setValue(e,r==1?t:this._notExistParameterValues.getValue(e)*(1-r)+t*r);return}ai(0<=e&&e<this.getParameterCount()),this.isRepeat(e)?t=this.getParameterRepeatValue(e,t):t=this.getParameterClampValue(e,t),this._parameterValues[e]=r==1?t:this._parameterValues[e]=this._parameterValues[e]*(1-r)+t*r}setParameterValueById(e,t,r=1){const i=this.getParameterIndex(e);this.setParameterValueByIndex(i,t,r)}addParameterValueByIndex(e,t,r=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*r)}addParameterValueById(e,t,r=1){const i=this.getParameterIndex(e);this.addParameterValueByIndex(i,t,r)}isRepeat(e){if(this._notExistParameterValues.isExist(e))return!1;ai(0<=e&&e<this.getParameterCount());let t;return this._isOverriddenParameterRepeat||this._userParameterRepeatDataList.at(e).isOverridden?t=this._userParameterRepeatDataList.at(e).isParameterRepeated:t=this._model.parameters.repeats[e]!=0,t}getParameterRepeatValue(e,t){if(this._notExistParameterValues.isExist(e))return t;ai(0<=e&&e<this.getParameterCount());const r=this._model.parameters.maximumValues[e],i=this._model.parameters.minimumValues[e],s=r-i;if(r<t){const a=pt.mod(t-r,s);Number.isNaN(a)?t=r:t=i+a}if(t<i){const a=pt.mod(i-t,s);Number.isNaN(a)?t=i:t=r-a}return t}getParameterClampValue(e,t){if(this._notExistParameterValues.isExist(e))return t;ai(0<=e&&e<this.getParameterCount());const r=this._model.parameters.maximumValues[e],i=this._model.parameters.minimumValues[e];return pt.clamp(t,i,r)}getParameterRepeats(e){return this._model.parameters.repeats[e]!=0}multiplyParameterValueById(e,t,r=1){const i=this.getParameterIndex(e);this.multiplyParameterValueByIndex(i,t,r)}multiplyParameterValueByIndex(e,t,r=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*r))}getDrawableIndex(e){const t=this._model.drawables.count;for(let r=0;r<t;++r)if(this._drawableIds.at(r)==e)return r;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){const t=this._model.drawables.ids;return gt.getIdManager().getId(t[e])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this.getDrawableTextureIndex(e)}getDrawableTextureIndex(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableMultiplyColor(e){const t=this._model.drawables.multiplyColors,r=e*4,i=new oi;return i.r=t[r],i.g=t[r+1],i.b=t[r+2],i.a=t[r+3],i}getDrawableScreenColor(e){const t=this._model.drawables.screenColors,r=e*4,i=new oi;return i.r=t[r],i.g=t[r+1],i.b=t[r+2],i.a=t[r+3],i}getDrawableParentPartIndex(e){return this._model.drawables.parentPartIndices[e]}getDrawableBlendMode(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?vo.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?vo.CubismBlendMode_Multiplicative:vo.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}getDrawableDynamicFlagVisibilityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}getDrawableDynamicFlagOpacityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}getDrawableDynamicFlagBlendColorDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(t[e])}loadParameters(){let e=this._model.parameters.count;const t=this._savedParameters.getSize();e>t&&(e=t);for(let r=0;r<e;++r)this._parameterValues[r]=this._savedParameters.at(r)}initialize(){ai(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const t=this._model.parameters.ids,r=this._model.parameters.count;this._parameterIds.prepareCapacity(r),this._userParameterRepeatDataList.prepareCapacity(r);for(let i=0;i<r;++i)this._parameterIds.pushBack(gt.getIdManager().getId(t[i])),this._userParameterRepeatDataList.pushBack(new _K(!1,!1))}const e=this._model.parts.count;{const t=this._model.parts.ids;this._partIds.prepareCapacity(e);for(let r=0;r<e;++r)this._partIds.pushBack(gt.getIdManager().getId(t[r]));this._userPartMultiplyColors.prepareCapacity(e),this._userPartScreenColors.prepareCapacity(e),this._partChildDrawables.prepareCapacity(e)}{const t=this._model.drawables.ids,r=this._model.drawables.count;this._userMultiplyColors.prepareCapacity(r),this._userScreenColors.prepareCapacity(r),this._userCullings.prepareCapacity(r);const i=new bK(!1,!1);for(let s=0;s<e;++s){const a=new oi(1,1,1,1),l=new oi(0,0,0,1),c=new qB(!1,a),h=new qB(!1,l);this._userPartMultiplyColors.pushBack(c),this._userPartScreenColors.pushBack(h),this._partChildDrawables.pushBack(new Ke),this._partChildDrawables.at(s).prepareCapacity(r)}for(let s=0;s<r;++s){const a=new oi(1,1,1,1),l=new oi(0,0,0,1),c=new $B(!1,a),h=new $B(!1,l);this._drawableIds.pushBack(gt.getIdManager().getId(t[s])),this._userMultiplyColors.pushBack(c),this._userScreenColors.pushBack(h),this._userCullings.pushBack(i);const d=this.getDrawableParentPartIndex(s);d>=0&&this._partChildDrawables.at(d).pushBack(s)}}}constructor(e){this._model=e,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new Ke,this._parameterIds=new Ke,this._drawableIds=new Ke,this._partIds=new Ke,this._isOverriddenParameterRepeat=!0,this._isOverriddenModelMultiplyColors=!1,this._isOverriddenModelScreenColors=!1,this._isOverriddenCullings=!1,this._modelOpacity=1,this._userParameterRepeatDataList=new Ke,this._userMultiplyColors=new Ke,this._userScreenColors=new Ke,this._userCullings=new Ke,this._userPartMultiplyColors=new Ke,this._userPartScreenColors=new Ke,this._partChildDrawables=new Ke,this._notExistPartId=new Ca,this._notExistParameterId=new Ca,this._notExistParameterValues=new Ca,this._notExistPartOpacities=new Ca}release(){this._model.release(),this._model=null}}var YB;(n=>{n.CubismModel=M8})(YB||(YB={}));class Qy{static create(e,t){let r=null;if(t&&!this.hasMocConsistency(e))return li("Inconsistent MOC3."),r;const i=Live2DCubismCore.Moc.fromArrayBuffer(e);return i&&(r=new Qy(i),r._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(i,e)),r}static delete(e){e._moc._release(),e._moc=null,e=null}createModel(){let e=null;const t=Live2DCubismCore.Model.fromMoc(this._moc);return t&&(e=new M8(t),e.initialize(),++this._modelCount),e}deleteModel(e){e!=null&&(e.release(),e=null,--this._modelCount)}constructor(e){this._moc=e,this._modelCount=0,this._mocVersion=0}release(){ai(this._modelCount==0),this._moc._release(),this._moc=null}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(e){return Live2DCubismCore.Moc.prototype.hasMocConsistency(e)===1}}var KB;(n=>{n.CubismMoc=Qy})(KB||(KB={}));var Og=(n=>(n[n.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",n))(Og||{}),mo=(n=>(n[n.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",n[n.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",n[n.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",n))(mo||{});class xK{constructor(){this.gravity=new He(0,0),this.wind=new He(0,0)}}class yw{}class wS{}class R8{constructor(){this.initialPosition=new He(0,0),this.position=new He(0,0),this.lastPosition=new He(0,0),this.lastGravity=new He(0,0),this.force=new He(0,0),this.velocity=new He(0,0)}}class P8{constructor(){this.normalizationPosition=new wS,this.normalizationAngle=new wS}}class B8{constructor(){this.source=new yw}}class D8{constructor(){this.destination=new yw,this.translationScale=new He(0,0)}}class k8{constructor(){this.settings=new Ke,this.inputs=new Ke,this.outputs=new Ke,this.particles=new Ke,this.gravity=new He(0,0),this.wind=new He(0,0),this.fps=0}}var ZB;(n=>{n.CubismPhysicsInput=B8,n.CubismPhysicsNormalization=wS,n.CubismPhysicsOutput=D8,n.CubismPhysicsParameter=yw,n.CubismPhysicsParticle=R8,n.CubismPhysicsRig=k8,n.CubismPhysicsSource=mo,n.CubismPhysicsSubRig=P8,n.CubismPhysicsTargetType=Og,n.PhysicsJsonEffectiveForces=xK})(ZB||(ZB={}));const Xh="Position",cx="X",hx="Y",dx="Angle",QB="Type",JB="Id",va="Meta",_m="EffectiveForces",vK="TotalInputCount",SK="TotalOutputCount",EK="PhysicsSettingCount",eD="Gravity",tD="Wind",wK="VertexCount",CK="Fps",mn="PhysicsSettings",Mu="Normalization",nD="Minimum",rD="Maximum",iD="Default",sD="Reflect",aD="Weight",Wh="Input",TK="Source",rl="Output",AK="Scale",MK="VertexIndex",RK="Destination",il="Vertices",PK="Mobility",BK="Delay",DK="Radius",kK="Acceleration";class O8{constructor(e,t){this._json=zr.create(e,t)}release(){zr.delete(this._json)}getGravity(){const e=new He(0,0);return e.x=this._json.getRoot().getValueByString(va).getValueByString(_m).getValueByString(eD).getValueByString(cx).toFloat(),e.y=this._json.getRoot().getValueByString(va).getValueByString(_m).getValueByString(eD).getValueByString(hx).toFloat(),e}getWind(){const e=new He(0,0);return e.x=this._json.getRoot().getValueByString(va).getValueByString(_m).getValueByString(tD).getValueByString(cx).toFloat(),e.y=this._json.getRoot().getValueByString(va).getValueByString(_m).getValueByString(tD).getValueByString(hx).toFloat(),e}getFps(){return this._json.getRoot().getValueByString(va).getValueByString(CK).toFloat(0)}getSubRigCount(){return this._json.getRoot().getValueByString(va).getValueByString(EK).toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(va).getValueByString(vK).toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(va).getValueByString(SK).toInt()}getVertexCount(){return this._json.getRoot().getValueByString(va).getValueByString(wK).toInt()}getNormalizationPositionMinimumValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(Xh).getValueByString(nD).toFloat()}getNormalizationPositionMaximumValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(Xh).getValueByString(rD).toFloat()}getNormalizationPositionDefaultValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(Xh).getValueByString(iD).toFloat()}getNormalizationAngleMinimumValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(dx).getValueByString(nD).toFloat()}getNormalizationAngleMaximumValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(dx).getValueByString(rD).toFloat()}getNormalizationAngleDefaultValue(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Mu).getValueByString(dx).getValueByString(iD).toFloat()}getInputCount(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Wh).getVector().getSize()}getInputWeight(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Wh).getValueByIndex(t).getValueByString(aD).toFloat()}getInputReflect(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Wh).getValueByIndex(t).getValueByString(sD).toBoolean()}getInputType(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Wh).getValueByIndex(t).getValueByString(QB).getRawString()}getInputSourceId(e,t){return gt.getIdManager().getId(this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(Wh).getValueByIndex(t).getValueByString(TK).getValueByString(JB).getRawString())}getOutputCount(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getVector().getSize()}getOutputVertexIndex(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(MK).toInt()}getOutputAngleScale(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(AK).toFloat()}getOutputWeight(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(aD).toFloat()}getOutputDestinationId(e,t){return gt.getIdManager().getId(this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(RK).getValueByString(JB).getRawString())}getOutputType(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(QB).getRawString()}getOutputReflect(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(rl).getValueByIndex(t).getValueByString(sD).toBoolean()}getParticleCount(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getVector().getSize()}getParticleMobility(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(PK).toFloat()}getParticleDelay(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(BK).toFloat()}getParticleAcceleration(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(kK).toFloat()}getParticleRadius(e,t){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(DK).toFloat()}getParticlePosition(e,t){const r=new He(0,0);return r.x=this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(Xh).getValueByString(cx).toFloat(),r.y=this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString(il).getValueByIndex(t).getValueByString(Xh).getValueByString(hx).toFloat(),r}}var oD;(n=>{n.CubismPhysicsJson=O8})(oD||(oD={}));const lD="X",uD="Y",cD="Angle",OK=5,CS=100,hD=.001,IK=5;class zd{static create(e,t){const r=new zd;return r.parse(e,t),r._physicsRig.gravity.y=0,r}static delete(e){e!=null&&(e.release(),e=null)}parse(e,t){this._physicsRig=new k8;let r=new O8(e,t);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.fps=r.getFps(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,P8,!0),this._physicsRig.inputs.updateSize(r.getTotalInputCount(),B8,!0),this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),D8,!0),this._physicsRig.particles.updateSize(r.getVertexCount(),R8,!0),this._currentRigOutputs.clear(),this._previousRigOutputs.clear();let i=0,s=0,a=0;for(let l=0;l<this._physicsRig.settings.getSize();++l){this._physicsRig.settings.at(l).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(l),this._physicsRig.settings.at(l).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(l),this._physicsRig.settings.at(l).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(l),this._physicsRig.settings.at(l).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(l),this._physicsRig.settings.at(l).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(l),this._physicsRig.settings.at(l).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(l),this._physicsRig.settings.at(l).inputCount=r.getInputCount(l),this._physicsRig.settings.at(l).baseInputIndex=i;for(let d=0;d<this._physicsRig.settings.at(l).inputCount;++d)this._physicsRig.inputs.at(i+d).sourceParameterIndex=-1,this._physicsRig.inputs.at(i+d).weight=r.getInputWeight(l,d),this._physicsRig.inputs.at(i+d).reflect=r.getInputReflect(l,d),r.getInputType(l,d)==lD?(this._physicsRig.inputs.at(i+d).type=mo.CubismPhysicsSource_X,this._physicsRig.inputs.at(i+d).getNormalizedParameterValue=LK):r.getInputType(l,d)==uD?(this._physicsRig.inputs.at(i+d).type=mo.CubismPhysicsSource_Y,this._physicsRig.inputs.at(i+d).getNormalizedParameterValue=FK):r.getInputType(l,d)==cD&&(this._physicsRig.inputs.at(i+d).type=mo.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(i+d).getNormalizedParameterValue=UK),this._physicsRig.inputs.at(i+d).source.targetType=Og.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(i+d).source.id=r.getInputSourceId(l,d);i+=this._physicsRig.settings.at(l).inputCount,this._physicsRig.settings.at(l).outputCount=r.getOutputCount(l),this._physicsRig.settings.at(l).baseOutputIndex=s;const c=new dD;c.outputs.resize(this._physicsRig.settings.at(l).outputCount);const h=new dD;h.outputs.resize(this._physicsRig.settings.at(l).outputCount);for(let d=0;d<this._physicsRig.settings.at(l).outputCount;++d)c.outputs.set(d,0),h.outputs.set(d,0),this._physicsRig.outputs.at(s+d).destinationParameterIndex=-1,this._physicsRig.outputs.at(s+d).vertexIndex=r.getOutputVertexIndex(l,d),this._physicsRig.outputs.at(s+d).angleScale=r.getOutputAngleScale(l,d),this._physicsRig.outputs.at(s+d).weight=r.getOutputWeight(l,d),this._physicsRig.outputs.at(s+d).destination.targetType=Og.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(s+d).destination.id=r.getOutputDestinationId(l,d),r.getOutputType(l,d)==lD?(this._physicsRig.outputs.at(s+d).type=mo.CubismPhysicsSource_X,this._physicsRig.outputs.at(s+d).getValue=GK,this._physicsRig.outputs.at(s+d).getScale=XK):r.getOutputType(l,d)==uD?(this._physicsRig.outputs.at(s+d).type=mo.CubismPhysicsSource_Y,this._physicsRig.outputs.at(s+d).getValue=zK,this._physicsRig.outputs.at(s+d).getScale=WK):r.getOutputType(l,d)==cD&&(this._physicsRig.outputs.at(s+d).type=mo.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(s+d).getValue=VK,this._physicsRig.outputs.at(s+d).getScale=$K),this._physicsRig.outputs.at(s+d).reflect=r.getOutputReflect(l,d);this._currentRigOutputs.pushBack(c),this._previousRigOutputs.pushBack(h),s+=this._physicsRig.settings.at(l).outputCount,this._physicsRig.settings.at(l).particleCount=r.getParticleCount(l),this._physicsRig.settings.at(l).baseParticleIndex=a;for(let d=0;d<this._physicsRig.settings.at(l).particleCount;++d)this._physicsRig.particles.at(a+d).mobility=r.getParticleMobility(l,d),this._physicsRig.particles.at(a+d).delay=r.getParticleDelay(l,d),this._physicsRig.particles.at(a+d).acceleration=r.getParticleAcceleration(l,d),this._physicsRig.particles.at(a+d).radius=r.getParticleRadius(l,d),this._physicsRig.particles.at(a+d).position=r.getParticlePosition(l,d);a+=this._physicsRig.settings.at(l).particleCount}this.initialize(),r.release(),r=void 0,r=null}stabilization(e){var t,r,i,s;let a,l,c,h;const d=new He;let p,g,y,_;const S=e.getModel().parameters.values,x=e.getModel().parameters.maximumValues,E=e.getModel().parameters.minimumValues,w=e.getModel().parameters.defaultValues;((r=(t=this._parameterCaches)==null?void 0:t.length)!=null?r:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),((s=(i=this._parameterInputCaches)==null?void 0:i.length)!=null?s:0)<e.getParameterCount()&&(this._parameterInputCaches=new Float32Array(e.getParameterCount()));for(let C=0;C<e.getParameterCount();++C)this._parameterCaches[C]=S[C],this._parameterInputCaches[C]=S[C];for(let C=0;C<this._physicsRig.subRigCount;++C){a={angle:0},d.x=0,d.y=0,p=this._physicsRig.settings.at(C),g=this._physicsRig.inputs.get(p.baseInputIndex),y=this._physicsRig.outputs.get(p.baseOutputIndex),_=this._physicsRig.particles.get(p.baseParticleIndex);for(let A=0;A<p.inputCount;++A)l=g[A].weight/CS,g[A].sourceParameterIndex==-1&&(g[A].sourceParameterIndex=e.getParameterIndex(g[A].source.id)),g[A].getNormalizedParameterValue(d,a,S[g[A].sourceParameterIndex],E[g[A].sourceParameterIndex],x[g[A].sourceParameterIndex],w[g[A].sourceParameterIndex],p.normalizationPosition,p.normalizationAngle,g[A].reflect,l),this._parameterCaches[g[A].sourceParameterIndex]=S[g[A].sourceParameterIndex];c=pt.degreesToRadian(-a.angle),d.x=d.x*pt.cos(c)-d.y*pt.sin(c),d.y=d.x*pt.sin(c)+d.y*pt.cos(c),YK(_,p.particleCount,d,a.angle,this._options.wind,hD*p.normalizationPosition.maximum);for(let A=0;A<p.outputCount;++A){const P=y[A].vertexIndex;if(y[A].destinationParameterIndex==-1&&(y[A].destinationParameterIndex=e.getParameterIndex(y[A].destination.id)),P<1||P>=p.particleCount)continue;let M=new He;M=_[P].position.substract(_[P-1].position),h=y[A].getValue(M,_,P,y[A].reflect,this._options.gravity),this._currentRigOutputs.at(C).outputs.set(A,h),this._previousRigOutputs.at(C).outputs.set(A,h);const I=y[A].destinationParameterIndex,V=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(S.subarray(I))):S.slice(I);fx(V,E[I],x[I],h,y[A]);for(let O=I,D=0;O<this._parameterCaches.length;O++,D++)S[O]=this._parameterCaches[O]=V[D]}}}evaluate(e,t){var r,i,s,a;let l,c,h,d;const p=new He;let g,y,_,S;if(0>=t)return;const x=e.getModel().parameters.values,E=e.getModel().parameters.maximumValues,w=e.getModel().parameters.minimumValues,C=e.getModel().parameters.defaultValues;let A;if(this._currentRemainTime+=t,this._currentRemainTime>IK&&(this._currentRemainTime=0),((i=(r=this._parameterCaches)==null?void 0:r.length)!=null?i:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),((a=(s=this._parameterInputCaches)==null?void 0:s.length)!=null?a:0)<e.getParameterCount()){this._parameterInputCaches=new Float32Array(e.getParameterCount());for(let M=0;M<e.getParameterCount();++M)this._parameterInputCaches[M]=x[M]}for(this._physicsRig.fps>0?A=1/this._physicsRig.fps:A=t;this._currentRemainTime>=A;){for(let I=0;I<this._physicsRig.subRigCount;++I){g=this._physicsRig.settings.at(I),_=this._physicsRig.outputs.get(g.baseOutputIndex);for(let V=0;V<g.outputCount;++V)this._previousRigOutputs.at(I).outputs.set(V,this._currentRigOutputs.at(I).outputs.at(V))}const M=A/this._currentRemainTime;for(let I=0;I<e.getParameterCount();++I)this._parameterCaches[I]=this._parameterInputCaches[I]*(1-M)+x[I]*M,this._parameterInputCaches[I]=this._parameterCaches[I];for(let I=0;I<this._physicsRig.subRigCount;++I){l={angle:0},p.x=0,p.y=0,g=this._physicsRig.settings.at(I),y=this._physicsRig.inputs.get(g.baseInputIndex),_=this._physicsRig.outputs.get(g.baseOutputIndex),S=this._physicsRig.particles.get(g.baseParticleIndex);for(let V=0;V<g.inputCount;++V)c=y[V].weight/CS,y[V].sourceParameterIndex==-1&&(y[V].sourceParameterIndex=e.getParameterIndex(y[V].source.id)),y[V].getNormalizedParameterValue(p,l,this._parameterCaches[y[V].sourceParameterIndex],w[y[V].sourceParameterIndex],E[y[V].sourceParameterIndex],C[y[V].sourceParameterIndex],g.normalizationPosition,g.normalizationAngle,y[V].reflect,c);h=pt.degreesToRadian(-l.angle),p.x=p.x*pt.cos(h)-p.y*pt.sin(h),p.y=p.x*pt.sin(h)+p.y*pt.cos(h),qK(S,g.particleCount,p,l.angle,this._options.wind,hD*g.normalizationPosition.maximum,A,OK);for(let V=0;V<g.outputCount;++V){const O=_[V].vertexIndex;if(_[V].destinationParameterIndex==-1&&(_[V].destinationParameterIndex=e.getParameterIndex(_[V].destination.id)),O<1||O>=g.particleCount)continue;const D=new He;D.x=S[O].position.x-S[O-1].position.x,D.y=S[O].position.y-S[O-1].position.y,d=_[V].getValue(D,S,O,_[V].reflect,this._options.gravity),this._currentRigOutputs.at(I).outputs.set(V,d);const H=_[V].destinationParameterIndex,$=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(H))):this._parameterCaches.slice(H);fx($,w[H],E[H],d,_[V]);for(let ne=H,Z=0;ne<this._parameterCaches.length;ne++,Z++)this._parameterCaches[ne]=$[Z]}}this._currentRemainTime-=A}const P=this._currentRemainTime/A;this.interpolate(e,P)}interpolate(e,t){let r,i;const s=e.getModel().parameters.values,a=e.getModel().parameters.maximumValues,l=e.getModel().parameters.minimumValues;for(let c=0;c<this._physicsRig.subRigCount;++c){i=this._physicsRig.settings.at(c),r=this._physicsRig.outputs.get(i.baseOutputIndex);for(let h=0;h<i.outputCount;++h){if(r[h].destinationParameterIndex==-1)continue;const d=r[h].destinationParameterIndex,p=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(s.subarray(d))):s.slice(d);fx(p,l[d],a[d],this._previousRigOutputs.at(c).outputs.at(h)*(1-t)+this._currentRigOutputs.at(c).outputs.at(h)*t,r[h]);for(let g=d,y=0;g<s.length;g++,y++)s[g]=p[y]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._physicsRig=null,this._options=new I8,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=new Ke,this._previousRigOutputs=new Ke,this._currentRemainTime=0,this._parameterCaches=null,this._parameterInputCaches=null}release(){this._physicsRig=void 0,this._physicsRig=null}initialize(){let e,t,r;for(let i=0;i<this._physicsRig.subRigCount;++i){t=this._physicsRig.settings.at(i),e=this._physicsRig.particles.get(t.baseParticleIndex),e[0].initialPosition=new He(0,0),e[0].lastPosition=new He(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new He(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new He(0,0),e[0].force=new He(0,0);for(let s=1;s<t.particleCount;++s)r=new He(0,0),r.y=e[s].radius,e[s].initialPosition=new He(e[s-1].initialPosition.x+r.x,e[s-1].initialPosition.y+r.y),e[s].position=new He(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new He(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new He(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new He(0,0),e[s].force=new He(0,0)}}}class I8{constructor(){this.gravity=new He(0,0),this.wind=new He(0,0)}}class dD{constructor(){this.outputs=new Ke(0)}}function NK(n){let e=0;return n>0?e=1:n<0&&(e=-1),e}function LK(n,e,t,r,i,s,a,l,c,h){n.x+=_w(t,r,i,s,a.minimum,a.maximum,a.defalut,c)*h}function FK(n,e,t,r,i,s,a,l,c,h){n.y+=_w(t,r,i,s,a.minimum,a.maximum,a.defalut,c)*h}function UK(n,e,t,r,i,s,a,l,c,h){e.angle+=_w(t,r,i,s,l.minimum,l.maximum,l.defalut,c)*h}function GK(n,e,t,r,i){let s=n.x;return r&&(s*=-1),s}function zK(n,e,t,r,i){let s=n.y;return r&&(s*=-1),s}function VK(n,e,t,r,i){let s;return t>=2?i=e[t-1].position.substract(e[t-2].position):i=i.multiplyByScaler(-1),s=pt.directionToRadian(i,n),r&&(s*=-1),s}function HK(n,e){const t=pt.max(n,e),r=pt.min(n,e);return pt.abs(t-r)}function jK(n,e){return pt.min(n,e)+HK(n,e)/2}function XK(n,e){return JSON.parse(JSON.stringify(n.x))}function WK(n,e){return JSON.parse(JSON.stringify(n.y))}function $K(n,e){return JSON.parse(JSON.stringify(e))}function qK(n,e,t,r,i,s,a,l){let c,h,d=new He(0,0),p=new He(0,0),g=new He(0,0),y=new He(0,0);n[0].position=new He(t.x,t.y);const _=pt.degreesToRadian(r),S=pt.radianToDirection(_);S.normalize();for(let x=1;x<e;++x)n[x].force=S.multiplyByScaler(n[x].acceleration).add(i),n[x].lastPosition=new He(n[x].position.x,n[x].position.y),c=n[x].delay*a*30,d=n[x].position.substract(n[x-1].position),h=pt.directionToRadian(n[x].lastGravity,S)/l,d.x=pt.cos(h)*d.x-d.y*pt.sin(h),d.y=pt.sin(h)*d.x+d.y*pt.cos(h),n[x].position=n[x-1].position.add(d),p=n[x].velocity.multiplyByScaler(c),g=n[x].force.multiplyByScaler(c).multiplyByScaler(c),n[x].position=n[x].position.add(p).add(g),y=n[x].position.substract(n[x-1].position),y.normalize(),n[x].position=n[x-1].position.add(y.multiplyByScaler(n[x].radius)),pt.abs(n[x].position.x)<s&&(n[x].position.x=0),c!=0&&(n[x].velocity=n[x].position.substract(n[x].lastPosition),n[x].velocity=n[x].velocity.divisionByScalar(c),n[x].velocity=n[x].velocity.multiplyByScaler(n[x].mobility)),n[x].force=new He(0,0),n[x].lastGravity=new He(S.x,S.y)}function YK(n,e,t,r,i,s){let a=new He(0,0);n[0].position=new He(t.x,t.y);const l=pt.degreesToRadian(r),c=pt.radianToDirection(l);c.normalize();for(let h=1;h<e;++h)n[h].force=c.multiplyByScaler(n[h].acceleration).add(i),n[h].lastPosition=new He(n[h].position.x,n[h].position.y),n[h].velocity=new He(0,0),a=n[h].force,a.normalize(),a=a.multiplyByScaler(n[h].radius),n[h].position=n[h-1].position.add(a),pt.abs(n[h].position.x)<s&&(n[h].position.x=0),n[h].force=new He(0,0),n[h].lastGravity=new He(c.x,c.y)}function fx(n,e,t,r,i){let s;const a=i.getScale(i.translationScale,i.angleScale);s=r*a,s<e?(s<i.valueBelowMinimum&&(i.valueBelowMinimum=s),s=e):s>t&&(s>i.valueExceededMaximum&&(i.valueExceededMaximum=s),s=t);const l=i.weight/CS;l>=1||(s=n[0]*(1-l)+s*l),n[0]=s}function _w(n,e,t,r,i,s,a,l){let c=0;const h=pt.max(t,e);h<n&&(n=h);const d=pt.min(t,e);d>n&&(n=d);const p=pt.min(i,s),g=pt.max(i,s),y=a,_=jK(d,h),S=n-_;switch(NK(S)){case 1:{const x=g-y,E=h-_;E!=0&&(c=S*(x/E),c+=y);break}case-1:{const x=p-y,E=d-_;E!=0&&(c=S*(x/E),c+=y);break}case 0:{c=y;break}}return l?c:c*-1}var fD;(n=>{n.CubismPhysics=zd,n.Options=I8})(fD||(fD={}));ns.registerRuntime({version:5,ready:fK,test(n){return n instanceof rc||rc.isValidJSON(n)},isValidMoc(n){if(n.byteLength<4)return!1;const e=new Int8Array(n,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(n){return new rc(n)},createCoreModel(n,e){const t=Qy.create(n,!!e?.checkMocConsistency);try{const r=t.createModel();return r.__moc=t,r}catch(r){try{t.release()}catch{}throw r}},createInternalModel(n,e,t){const r=new dK(n,e,t),i=n;return i.__moc&&(r.__moc=i.__moc,delete i.__moc,r.once("destroy",KK)),r},createPhysics(n,e){try{if(typeof e=="object"){const t=JSON.stringify(e),r=new TextEncoder().encode(t);return zd.create(r.buffer,r.byteLength)}return zd.create(e,e.length)}catch(t){throw t}},createPose(n,e){try{if(typeof e=="object"){const t=JSON.stringify(e),r=new TextEncoder().encode(t);return Ud.create(r.buffer,r.byteLength)}return Ud.create(e,e.length)}catch(t){throw t}}});function KK(){var n;(n=this.__moc)==null||n.release()}window.PIXI=Jq;bY.registerTicker(Zn);console.log("[Live2D] Setup complete. PIXI version:",uc);var px={exports:{}},it={};var pD;function ZK(){if(pD)return it;pD=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(G,Q,L){this.props=G,this.context=Q,this.refs=x,this.updater=L||_}E.prototype.isReactComponent={},E.prototype.setState=function(G,Q){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Q,"setState")},E.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function w(){}w.prototype=E.prototype;function C(G,Q,L){this.props=G,this.context=Q,this.refs=x,this.updater=L||_}var A=C.prototype=new w;A.constructor=C,S(A,E.prototype),A.isPureReactComponent=!0;var P=Array.isArray;function M(){}var I={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function O(G,Q,L){var he=L.ref;return{$$typeof:n,type:G,key:Q,ref:he!==void 0?he:null,props:L}}function D(G,Q){return O(G.type,Q,G.props)}function H(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function $(G){var Q={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(L){return Q[L]})}var ne=/\/+/g;function Z(G,Q){return typeof G=="object"&&G!==null&&G.key!=null?$(""+G.key):Q.toString(36)}function te(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(M,M):(G.status="pending",G.then(function(Q){G.status==="pending"&&(G.status="fulfilled",G.value=Q)},function(Q){G.status==="pending"&&(G.status="rejected",G.reason=Q)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function z(G,Q,L,he,fe){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var Be=!1;if(G===null)Be=!0;else switch(ve){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(G.$$typeof){case n:case e:Be=!0;break;case d:return Be=G._init,z(Be(G._payload),Q,L,he,fe)}}if(Be)return fe=fe(G),Be=he===""?"."+Z(G,0):he,P(fe)?(L="",Be!=null&&(L=Be.replace(ne,"$&/")+"/"),z(fe,Q,L,"",function(rt){return rt})):fe!=null&&(H(fe)&&(fe=D(fe,L+(fe.key==null||G&&G.key===fe.key?"":(""+fe.key).replace(ne,"$&/")+"/")+Be)),Q.push(fe)),1;Be=0;var ke=he===""?".":he+":";if(P(G))for(var Ne=0;Ne<G.length;Ne++)he=G[Ne],ve=ke+Z(he,Ne),Be+=z(he,Q,L,ve,fe);else if(Ne=y(G),typeof Ne=="function")for(G=Ne.call(G),Ne=0;!(he=G.next()).done;)he=he.value,ve=ke+Z(he,Ne++),Be+=z(he,Q,L,ve,fe);else if(ve==="object"){if(typeof G.then=="function")return z(te(G),Q,L,he,fe);throw Q=String(G),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Be}function X(G,Q,L){if(G==null)return G;var he=[],fe=0;return z(G,he,"","",function(ve){return Q.call(L,ve,fe++)}),he}function K(G){if(G._status===-1){var Q=G._result;Q=Q(),Q.then(function(L){(G._status===0||G._status===-1)&&(G._status=1,G._result=L)},function(L){(G._status===0||G._status===-1)&&(G._status=2,G._result=L)}),G._status===-1&&(G._status=0,G._result=Q)}if(G._status===1)return G._result.default;throw G._result}var J=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},U={map:X,forEach:function(G,Q,L){X(G,function(){Q.apply(this,arguments)},L)},count:function(G){var Q=0;return X(G,function(){Q++}),Q},toArray:function(G){return X(G,function(Q){return Q})||[]},only:function(G){if(!H(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return it.Activity=p,it.Children=U,it.Component=E,it.Fragment=t,it.Profiler=i,it.PureComponent=C,it.StrictMode=r,it.Suspense=c,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,it.__COMPILER_RUNTIME={__proto__:null,c:function(G){return I.H.useMemoCache(G)}},it.cache=function(G){return function(){return G.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(G,Q,L){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var he=S({},G.props),fe=G.key;if(Q!=null)for(ve in Q.key!==void 0&&(fe=""+Q.key),Q)!V.call(Q,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Q.ref===void 0||(he[ve]=Q[ve]);var ve=arguments.length-2;if(ve===1)he.children=L;else if(1<ve){for(var Be=Array(ve),ke=0;ke<ve;ke++)Be[ke]=arguments[ke+2];he.children=Be}return O(G.type,fe,he)},it.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},it.createElement=function(G,Q,L){var he,fe={},ve=null;if(Q!=null)for(he in Q.key!==void 0&&(ve=""+Q.key),Q)V.call(Q,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(fe[he]=Q[he]);var Be=arguments.length-2;if(Be===1)fe.children=L;else if(1<Be){for(var ke=Array(Be),Ne=0;Ne<Be;Ne++)ke[Ne]=arguments[Ne+2];fe.children=ke}if(G&&G.defaultProps)for(he in Be=G.defaultProps,Be)fe[he]===void 0&&(fe[he]=Be[he]);return O(G,ve,fe)},it.createRef=function(){return{current:null}},it.forwardRef=function(G){return{$$typeof:l,render:G}},it.isValidElement=H,it.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:K}},it.memo=function(G,Q){return{$$typeof:h,type:G,compare:Q===void 0?null:Q}},it.startTransition=function(G){var Q=I.T,L={};I.T=L;try{var he=G(),fe=I.S;fe!==null&&fe(L,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(M,J)}catch(ve){J(ve)}finally{Q!==null&&L.types!==null&&(Q.types=L.types),I.T=Q}},it.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},it.use=function(G){return I.H.use(G)},it.useActionState=function(G,Q,L){return I.H.useActionState(G,Q,L)},it.useCallback=function(G,Q){return I.H.useCallback(G,Q)},it.useContext=function(G){return I.H.useContext(G)},it.useDebugValue=function(){},it.useDeferredValue=function(G,Q){return I.H.useDeferredValue(G,Q)},it.useEffect=function(G,Q){return I.H.useEffect(G,Q)},it.useEffectEvent=function(G){return I.H.useEffectEvent(G)},it.useId=function(){return I.H.useId()},it.useImperativeHandle=function(G,Q,L){return I.H.useImperativeHandle(G,Q,L)},it.useInsertionEffect=function(G,Q){return I.H.useInsertionEffect(G,Q)},it.useLayoutEffect=function(G,Q){return I.H.useLayoutEffect(G,Q)},it.useMemo=function(G,Q){return I.H.useMemo(G,Q)},it.useOptimistic=function(G,Q){return I.H.useOptimistic(G,Q)},it.useReducer=function(G,Q,L){return I.H.useReducer(G,Q,L)},it.useRef=function(G){return I.H.useRef(G)},it.useState=function(G){return I.H.useState(G)},it.useSyncExternalStore=function(G,Q,L){return I.H.useSyncExternalStore(G,Q,L)},it.useTransition=function(){return I.H.useTransition()},it.version="19.2.4",it}var mD;function bw(){return mD||(mD=1,px.exports=ZK()),px.exports}var W=bw();const xl=Ol(W);var mx={exports:{}},$h={},gx={exports:{}},yx={};var gD;function QK(){return gD||(gD=1,(function(n){function e(z,X){var K=z.length;z.push(X);e:for(;0<K;){var J=K-1>>>1,U=z[J];if(0<i(U,X))z[J]=X,z[K]=U,K=J;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],K=z.pop();if(K!==X){z[0]=K;e:for(var J=0,U=z.length,G=U>>>1;J<G;){var Q=2*(J+1)-1,L=z[Q],he=Q+1,fe=z[he];if(0>i(L,K))he<U&&0>i(fe,L)?(z[J]=fe,z[he]=K,J=he):(z[J]=L,z[Q]=K,J=Q);else if(he<U&&0>i(fe,K))z[J]=fe,z[he]=K,J=he;else break e}}return X}function i(z,X){var K=z.sortIndex-X.sortIndex;return K!==0?K:z.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],h=[],d=1,p=null,g=3,y=!1,_=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var X=t(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=z)r(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=t(h)}}function P(z){if(S=!1,A(z),!_)if(t(c)!==null)_=!0,M||(M=!0,$());else{var X=t(h);X!==null&&te(P,X.startTime-z)}}var M=!1,I=-1,V=5,O=-1;function D(){return x?!0:!(n.unstable_now()-O<V)}function H(){if(x=!1,M){var z=n.unstable_now();O=z;var X=!0;try{e:{_=!1,S&&(S=!1,w(I),I=-1),y=!0;var K=g;try{t:{for(A(z),p=t(c);p!==null&&!(p.expirationTime>z&&D());){var J=p.callback;if(typeof J=="function"){p.callback=null,g=p.priorityLevel;var U=J(p.expirationTime<=z);if(z=n.unstable_now(),typeof U=="function"){p.callback=U,A(z),X=!0;break t}p===t(c)&&r(c),A(z)}else r(c);p=t(c)}if(p!==null)X=!0;else{var G=t(h);G!==null&&te(P,G.startTime-z),X=!1}}break e}finally{p=null,g=K,y=!1}X=void 0}}finally{X?$():M=!1}}}var $;if(typeof C=="function")$=function(){C(H)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Z=ne.port2;ne.port1.onmessage=H,$=function(){Z.postMessage(null)}}else $=function(){E(H,0)};function te(z,X){I=E(function(){z(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(z){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var K=g;g=X;try{return z()}finally{g=K}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=g;g=z;try{return X()}finally{g=K}},n.unstable_scheduleCallback=function(z,X,K){var J=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?J+K:J):K=J,z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,z={id:d++,callback:X,priorityLevel:z,startTime:K,expirationTime:U,sortIndex:-1},K>J?(z.sortIndex=K,e(h,z),t(c)===null&&z===t(h)&&(S?(w(I),I=-1):S=!0,te(P,K-J))):(z.sortIndex=U,e(c,z),_||y||(_=!0,M||(M=!0,$()))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var X=g;return function(){var K=g;g=X;try{return z.apply(this,arguments)}finally{g=K}}}})(yx)),yx}var yD;function JK(){return yD||(yD=1,gx.exports=QK()),gx.exports}var _x={exports:{}},Cr={};var _D;function eZ(){if(_D)return Cr;_D=1;var n=bw();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cr.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,d)},Cr.flushSync=function(c){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=h,r.p=d,r.d.f()}},Cr.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},Cr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Cr.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,p=l(d,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Cr.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},Cr.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,p=l(d,h.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Cr.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},Cr.requestFormReset=function(c){r.d.r(c)},Cr.unstable_batchedUpdates=function(c,h){return c(h)},Cr.useFormState=function(c,h,d){return a.H.useFormState(c,h,d)},Cr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Cr.version="19.2.4",Cr}var bD;function N8(){if(bD)return _x.exports;bD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_x.exports=eZ(),_x.exports}var xD;function tZ(){if(xD)return $h;xD=1;var n=JK(),e=bw(),t=N8();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,f=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(f=u.return),o=u.return;while(o)}return u.tag===3?f:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(r(188))}function h(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(r(188));return u!==o?null:o}for(var f=o,m=u;;){var b=f.return;if(b===null)break;var v=b.alternate;if(v===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===v.child){for(v=b.child;v;){if(v===f)return c(b),o;if(v===m)return c(b),u;v=v.sibling}throw Error(r(188))}if(f.return!==m.return)f=b,m=v;else{for(var T=!1,N=b.child;N;){if(N===f){T=!0,f=b,m=v;break}if(N===m){T=!0,m=b,f=v;break}N=N.sibling}if(!T){for(N=v.child;N;){if(N===f){T=!0,f=v,m=b;break}if(N===m){T=!0,m=v,f=b;break}N=N.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:u}function d(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=d(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Symbol.for("react.client.reference");function Z(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ne?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList";case O:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case C:return o.displayName||"Context";case w:return(o._context.displayName||"Context")+".Consumer";case A:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return u=o.displayName||null,u!==null?u:Z(o.type)||"Memo";case V:u=o._payload,o=o._init;try{return Z(o(u))}catch{}}return null}var te=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},J=[],U=-1;function G(o){return{current:o}}function Q(o){0>U||(o.current=J[U],J[U]=null,U--)}function L(o,u){U++,J[U]=o.current,o.current=u}var he=G(null),fe=G(null),ve=G(null),Be=G(null);function ke(o,u){switch(L(ve,u),L(fe,o),L(he,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?OM(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=OM(u),o=IM(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Q(he),L(he,o)}function Ne(){Q(he),Q(fe),Q(ve)}function rt(o){o.memoizedState!==null&&L(Be,o);var u=he.current,f=IM(u,o.type);u!==f&&(L(fe,o),L(he,f))}function st(o){fe.current===o&&(Q(he),Q(fe)),Be.current===o&&(Q(Be),Ch._currentValue=K)}var at,nn;function ut(o){if(at===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);at=u&&u[1]||"",nn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+o+nn}var Vt=!1;function De(o,u){if(!o||Vt)return"";Vt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ce){var oe=ce}Reflect.construct(o,[],ge)}else{try{ge.call()}catch(ce){oe=ce}o.call(ge.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(ge=o())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=m.DetermineComponentFrameRoot(),T=v[0],N=v[1];if(T&&N){var Y=T.split(`
`),ae=N.split(`
`);for(b=m=0;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ae.length&&!ae[b].includes("DetermineComponentFrameRoot");)b++;if(m===Y.length||b===ae.length)for(m=Y.length-1,b=ae.length-1;1<=m&&0<=b&&Y[m]!==ae[b];)b--;for(;1<=m&&0<=b;m--,b--)if(Y[m]!==ae[b]){if(m!==1||b!==1)do if(m--,b--,0>b||Y[m]!==ae[b]){var pe=`
`+Y[m].replace(" at new "," at ");return o.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",o.displayName)),pe}while(1<=m&&0<=b);break}}}finally{Vt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?ut(f):""}function ln(o,u){switch(o.tag){case 26:case 27:case 5:return ut(o.type);case 16:return ut("Lazy");case 13:return o.child!==u&&u!==null?ut("Suspense Fallback"):ut("Suspense");case 19:return ut("SuspenseList");case 0:case 15:return De(o.type,!1);case 11:return De(o.type.render,!1);case 1:return De(o.type,!0);case 31:return ut("Activity");default:return""}}function vn(o){try{var u="",f=null;do u+=ln(o,f),f=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Sn=Object.prototype.hasOwnProperty,In=n.unstable_scheduleCallback,Pt=n.unstable_cancelCallback,Ht=n.unstable_shouldYield,vr=n.unstable_requestPaint,Nt=n.unstable_now,yi=n.unstable_getCurrentPriorityLevel,de=n.unstable_ImmediatePriority,be=n.unstable_UserBlockingPriority,Fe=n.unstable_NormalPriority,et=n.unstable_LowPriority,mt=n.unstable_IdlePriority,Jn=n.log,Sr=n.unstable_setDisableYieldValue,Nn=null,dn=null;function er(o){if(typeof Jn=="function"&&Sr(o),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Nn,o)}catch{}}var Lt=Math.clz32?Math.clz32:ko,Xr=Math.log,An=Math.LN2;function ko(o){return o>>>=0,o===0?32:31-(Xr(o)/An|0)|0}var ss=256,Zs=262144,k=4194304;function F(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function R(o,u,f){var m=o.pendingLanes;if(m===0)return 0;var b=0,v=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var N=m&134217727;return N!==0?(m=N&~v,m!==0?b=F(m):(T&=N,T!==0?b=F(T):f||(f=N&~o,f!==0&&(b=F(f))))):(N=m&~v,N!==0?b=F(N):T!==0?b=F(T):f||(f=m&~o,f!==0&&(b=F(f)))),b===0?0:u!==0&&u!==b&&(u&v)===0&&(v=b&-b,f=u&-u,v>=f||v===32&&(f&4194048)!==0)?u:b}function j(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function ie(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var o=k;return k<<=1,(k&62914560)===0&&(k=4194304),o}function $e(o){for(var u=[],f=0;31>f;f++)u.push(o);return u}function ct(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Me(o,u,f,m,b,v){var T=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var N=o.entanglements,Y=o.expirationTimes,ae=o.hiddenUpdates;for(f=T&~f;0<f;){var pe=31-Lt(f),ge=1<<pe;N[pe]=0,Y[pe]=-1;var oe=ae[pe];if(oe!==null)for(ae[pe]=null,pe=0;pe<oe.length;pe++){var ce=oe[pe];ce!==null&&(ce.lane&=-536870913)}f&=~ge}m!==0&&Te(o,m,0),v!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=v&~(T&~u))}function Te(o,u,f){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-Lt(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|f&261930}function Le(o,u){var f=o.entangledLanes|=u;for(o=o.entanglements;f;){var m=31-Lt(f),b=1<<m;b&u|o[m]&u&&(o[m]|=u),f&=~b}}function jt(o,u){var f=u&-u;return f=(f&42)!==0?1:Ft(f),(f&(o.suspendedLanes|u))!==0?0:f}function Ft(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function dr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function fr(){var o=X.p;return o!==0?o:(o=window.event,o===void 0?32:iR(o.type))}function Wr(o,u){var f=X.p;try{return X.p=o,u()}finally{X.p=f}}var Er=Math.random().toString(36).slice(2),_t="__reactFiber$"+Er,tr="__reactProps$"+Er,kr="__reactContainer$"+Er,Oa="__reactEvents$"+Er,Ef="__reactListeners$"+Er,zl="__reactHandles$"+Er,wf="__reactResources$"+Er,Oo="__reactMarker$"+Er;function Lc(o){delete o[_t],delete o[tr],delete o[Oa],delete o[Ef],delete o[zl]}function Or(o){var u=o[_t];if(u)return u;for(var f=o.parentNode;f;){if(u=f[kr]||f[_t]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(o=VM(o);o!==null;){if(f=o[_t])return f;o=VM(o)}return u}o=f,f=o.parentNode}return null}function Qs(o){if(o=o[_t]||o[kr]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Ia(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function Na(o){var u=o[wf];return u||(u=o[wf]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Hn(o){o[Oo]=!0}var Cf=new Set,Io={};function Js(o,u){_e(o,u),_e(o+"Capture",u)}function _e(o,u){for(Io[o]=u,o=0;o<u.length;o++)Cf.add(u[o])}var Ge=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bt={},Xt={};function Ln(o){return Sn.call(Xt,o)?!0:Sn.call(bt,o)?!1:Ge.test(o)?Xt[o]=!0:(bt[o]=!0,!1)}function wr(o,u,f){if(Ln(u))if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+f)}}function _i(o,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+f)}}function $r(o,u,f,m){if(m===null)o.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(u,f,""+m)}}function un(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bi(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Tf(o,u,f){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,v=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return b.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Vl(o){if(!o._valueTracker){var u=bi(o)?"checked":"value";o._valueTracker=Tf(o,u,""+o[u])}}function Fc(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var f=u.getValue(),m="";return o&&(m=bi(o)?o.checked?"true":"false":o.value),o=m,o!==f?(u.setValue(o),!0):!1}function Hl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var x_=/[\n"\\]/g;function qr(o){return o.replace(x_,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Uc(o,u,f,m,b,v,T,N){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),u!=null?T==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+un(u)):o.value!==""+un(u)&&(o.value=""+un(u)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),u!=null?jl(o,T,un(u)):f!=null?jl(o,T,un(f)):m!=null&&o.removeAttribute("value"),b==null&&v!=null&&(o.defaultChecked=!!v),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+un(N):o.removeAttribute("name")}function No(o,u,f,m,b,v,T,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),u!=null||f!=null){if(!(v!=="submit"&&v!=="reset"||u!=null)){Vl(o);return}f=f!=null?""+un(f):"",u=u!=null?""+un(u):f,N||u===o.value||(o.value=u),o.defaultValue=u}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=N?o.checked:!!m,o.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T),Vl(o)}function jl(o,u,f){u==="number"&&Hl(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function pr(o,u,f,m){if(o=o.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<o.length;f++)b=u.hasOwnProperty("$"+o[f].value),o[f].selected!==b&&(o[f].selected=b),b&&m&&(o[f].defaultSelected=!0)}else{for(f=""+un(f),u=null,b=0;b<o.length;b++){if(o[b].value===f){o[b].selected=!0,m&&(o[b].defaultSelected=!0);return}u!==null||o[b].disabled||(u=o[b])}u!==null&&(u.selected=!0)}}function Af(o,u,f){if(u!=null&&(u=""+un(u),u!==o.value&&(o.value=u),f==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=f!=null?""+un(f):""}function Xl(o,u,f,m){if(u==null){if(m!=null){if(f!=null)throw Error(r(92));if(te(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),u=f}f=un(u),o.defaultValue=f,m=o.textContent,m===f&&m!==""&&m!==null&&(o.value=m),Vl(o)}function Ye(o,u){if(u){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=u;return}}o.textContent=u}var Mf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jn(o,u,f){var m=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,f):typeof f!="number"||f===0||Mf.has(u)?u==="float"?o.cssFloat=f:o[u]=(""+f).trim():o[u]=f+"px"}function Wt(o,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var b in u)m=u[b],u.hasOwnProperty(b)&&f[b]!==m&&jn(o,b,m)}else for(var v in u)u.hasOwnProperty(v)&&jn(o,v,u[v])}function La(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(o){return Gc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Ee(){}var Oe=null;function ot(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Et=null,En=null;function Li(o){var u=Qs(o);if(u&&(o=u.stateNode)){var f=o[tr]||null;e:switch(o=u.stateNode,u.type){case"input":if(Uc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+qr(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var m=f[u];if(m!==o&&m.form===o.form){var b=m[tr]||null;if(!b)throw Error(r(90));Uc(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)m=f[u],m.form===o.form&&Fc(m)}break e;case"textarea":Af(o,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&pr(o,!!f.multiple,u,!1)}}}var zc=!1;function Rf(o,u,f){if(zc)return o(u,f);zc=!0;try{var m=o(u);return m}finally{if(zc=!1,(Et!==null||En!==null)&&(gp(),Et&&(u=Et,o=En,En=Et=null,Li(u),o)))for(u=0;u<o.length;u++)Li(o[u])}}function Vc(o,u){var f=o.stateNode;if(f===null)return null;var m=f[tr]||null;if(m===null)return null;f=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v_=!1;if(ta)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){v_=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{v_=!1}var Ua=null,S_=null,Pf=null;function IC(){if(Pf)return Pf;var o,u=S_,f=u.length,m,b="value"in Ua?Ua.value:Ua.textContent,v=b.length;for(o=0;o<f&&u[o]===b[o];o++);var T=f-o;for(m=1;m<=T&&u[f-m]===b[v-m];m++);return Pf=b.slice(o,1<m?1-m:void 0)}function Bf(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Df(){return!0}function NC(){return!1}function Yr(o){function u(f,m,b,v,T){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(f=o[N],this[N]=f?f(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Df:NC,this.isPropagationStopped=NC,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Df)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Df)},persist:function(){},isPersistent:Df}),u}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=Yr(Lo),jc=p({},Lo,{view:0,detail:0}),YV=Yr(jc),E_,w_,Xc,Of=p({},jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Xc&&(Xc&&o.type==="mousemove"?(E_=o.screenX-Xc.screenX,w_=o.screenY-Xc.screenY):w_=E_=0,Xc=o),E_)},movementY:function(o){return"movementY"in o?o.movementY:w_}}),LC=Yr(Of),KV=p({},Of,{dataTransfer:0}),ZV=Yr(KV),QV=p({},jc,{relatedTarget:0}),C_=Yr(QV),JV=p({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),e9=Yr(JV),t9=p({},Lo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),n9=Yr(t9),r9=p({},Lo,{data:0}),FC=Yr(r9),i9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o9(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=a9[o])?!!u[o]:!1}function T_(){return o9}var l9=p({},jc,{key:function(o){if(o.key){var u=i9[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Bf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?s9[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(o){return o.type==="keypress"?Bf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Bf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),u9=Yr(l9),c9=p({},Of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UC=Yr(c9),h9=p({},jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),d9=Yr(h9),f9=p({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),p9=Yr(f9),m9=p({},Of,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),g9=Yr(m9),y9=p({},Lo,{newState:0,oldState:0}),_9=Yr(y9),b9=[9,13,27,32],A_=ta&&"CompositionEvent"in window,Wc=null;ta&&"documentMode"in document&&(Wc=document.documentMode);var x9=ta&&"TextEvent"in window&&!Wc,GC=ta&&(!A_||Wc&&8<Wc&&11>=Wc),zC=" ",VC=!1;function HC(o,u){switch(o){case"keyup":return b9.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jC(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Wl=!1;function v9(o,u){switch(o){case"compositionend":return jC(u);case"keypress":return u.which!==32?null:(VC=!0,zC);case"textInput":return o=u.data,o===zC&&VC?null:o;default:return null}}function S9(o,u){if(Wl)return o==="compositionend"||!A_&&HC(o,u)?(o=IC(),Pf=S_=Ua=null,Wl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return GC&&u.locale!=="ko"?null:u.data;default:return null}}var E9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XC(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!E9[o.type]:u==="textarea"}function WC(o,u,f,m){Et?En?En.push(m):En=[m]:Et=m,u=Ep(u,"onChange"),0<u.length&&(f=new kf("onChange","change",null,f,m),o.push({event:f,listeners:u}))}var $c=null,qc=null;function w9(o){MM(o,0)}function If(o){var u=Ia(o);if(Fc(u))return o}function $C(o,u){if(o==="change")return u}var qC=!1;if(ta){var M_;if(ta){var R_="oninput"in document;if(!R_){var YC=document.createElement("div");YC.setAttribute("oninput","return;"),R_=typeof YC.oninput=="function"}M_=R_}else M_=!1;qC=M_&&(!document.documentMode||9<document.documentMode)}function KC(){$c&&($c.detachEvent("onpropertychange",ZC),qc=$c=null)}function ZC(o){if(o.propertyName==="value"&&If(qc)){var u=[];WC(u,qc,o,ot(o)),Rf(w9,u)}}function C9(o,u,f){o==="focusin"?(KC(),$c=u,qc=f,$c.attachEvent("onpropertychange",ZC)):o==="focusout"&&KC()}function T9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return If(qc)}function A9(o,u){if(o==="click")return If(u)}function M9(o,u){if(o==="input"||o==="change")return If(u)}function R9(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var xi=typeof Object.is=="function"?Object.is:R9;function Yc(o,u){if(xi(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var f=Object.keys(o),m=Object.keys(u);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!Sn.call(u,b)||!xi(o[b],u[b]))return!1}return!0}function QC(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function JC(o,u){var f=QC(o);o=0;for(var m;f;){if(f.nodeType===3){if(m=o+f.textContent.length,o<=u&&m>=u)return{node:f,offset:u-o};o=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=QC(f)}}function eT(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?eT(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function tT(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Hl(o.document);u instanceof o.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)o=u.contentWindow;else break;u=Hl(o.document)}return u}function P_(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var P9=ta&&"documentMode"in document&&11>=document.documentMode,$l=null,B_=null,Kc=null,D_=!1;function nT(o,u,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;D_||$l==null||$l!==Hl(m)||(m=$l,"selectionStart"in m&&P_(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Kc&&Yc(Kc,m)||(Kc=m,m=Ep(B_,"onSelect"),0<m.length&&(u=new kf("onSelect","select",null,u,f),o.push({event:u,listeners:m}),u.target=$l)))}function Fo(o,u){var f={};return f[o.toLowerCase()]=u.toLowerCase(),f["Webkit"+o]="webkit"+u,f["Moz"+o]="moz"+u,f}var ql={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},k_={},rT={};ta&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Uo(o){if(k_[o])return k_[o];if(!ql[o])return o;var u=ql[o],f;for(f in u)if(u.hasOwnProperty(f)&&f in rT)return k_[o]=u[f];return o}var iT=Uo("animationend"),sT=Uo("animationiteration"),aT=Uo("animationstart"),B9=Uo("transitionrun"),D9=Uo("transitionstart"),k9=Uo("transitioncancel"),oT=Uo("transitionend"),lT=new Map,O_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");O_.push("scrollEnd");function as(o,u){lT.set(o,u),Js(u,[o])}var Nf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Fi=[],Yl=0,I_=0;function Lf(){for(var o=Yl,u=I_=Yl=0;u<o;){var f=Fi[u];Fi[u++]=null;var m=Fi[u];Fi[u++]=null;var b=Fi[u];Fi[u++]=null;var v=Fi[u];if(Fi[u++]=null,m!==null&&b!==null){var T=m.pending;T===null?b.next=b:(b.next=T.next,T.next=b),m.pending=b}v!==0&&uT(f,b,v)}}function Ff(o,u,f,m){Fi[Yl++]=o,Fi[Yl++]=u,Fi[Yl++]=f,Fi[Yl++]=m,I_|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function N_(o,u,f,m){return Ff(o,u,f,m),Uf(o)}function Go(o,u){return Ff(o,null,null,u),Uf(o)}function uT(o,u,f){o.lanes|=f;var m=o.alternate;m!==null&&(m.lanes|=f);for(var b=!1,v=o.return;v!==null;)v.childLanes|=f,m=v.alternate,m!==null&&(m.childLanes|=f),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(b=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,b&&u!==null&&(b=31-Lt(f),o=v.hiddenUpdates,m=o[b],m===null?o[b]=[u]:m.push(u),u.lane=f|536870912),v):null}function Uf(o){if(50<_h)throw _h=0,Xb=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Kl={};function O9(o,u,f,m){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(o,u,f,m){return new O9(o,u,f,m)}function L_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function na(o,u){var f=o.alternate;return f===null?(f=vi(o.tag,u,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=u,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,u=o.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function cT(o,u){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,u=f.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Gf(o,u,f,m,b,v){var T=0;if(m=o,typeof o=="function")L_(o)&&(T=1);else if(typeof o=="string")T=UH(o,f,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case O:return o=vi(31,f,u,b),o.elementType=O,o.lanes=v,o;case S:return zo(f.children,b,v,u);case x:T=8,b|=24;break;case E:return o=vi(12,f,u,b|2),o.elementType=E,o.lanes=v,o;case P:return o=vi(13,f,u,b),o.elementType=P,o.lanes=v,o;case M:return o=vi(19,f,u,b),o.elementType=M,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:T=10;break e;case w:T=9;break e;case A:T=11;break e;case I:T=14;break e;case V:T=16,m=null;break e}T=29,f=Error(r(130,o===null?"null":typeof o,"")),m=null}return u=vi(T,f,u,b),u.elementType=o,u.type=m,u.lanes=v,u}function zo(o,u,f,m){return o=vi(7,o,m,u),o.lanes=f,o}function F_(o,u,f){return o=vi(6,o,null,u),o.lanes=f,o}function hT(o){var u=vi(18,null,null,0);return u.stateNode=o,u}function U_(o,u,f){return u=vi(4,o.children!==null?o.children:[],o.key,u),u.lanes=f,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var dT=new WeakMap;function Ui(o,u){if(typeof o=="object"&&o!==null){var f=dT.get(o);return f!==void 0?f:(u={value:o,source:u,stack:vn(u)},dT.set(o,u),u)}return{value:o,source:u,stack:vn(u)}}var Zl=[],Ql=0,zf=null,Zc=0,Gi=[],zi=0,Ga=null,Ts=1,As="";function ra(o,u){Zl[Ql++]=Zc,Zl[Ql++]=zf,zf=o,Zc=u}function fT(o,u,f){Gi[zi++]=Ts,Gi[zi++]=As,Gi[zi++]=Ga,Ga=o;var m=Ts;o=As;var b=32-Lt(m)-1;m&=~(1<<b),f+=1;var v=32-Lt(u)+b;if(30<v){var T=b-b%5;v=(m&(1<<T)-1).toString(32),m>>=T,b-=T,Ts=1<<32-Lt(u)+b|f<<b|m,As=v+o}else Ts=1<<v|f<<b|m,As=o}function G_(o){o.return!==null&&(ra(o,1),fT(o,1,0))}function z_(o){for(;o===zf;)zf=Zl[--Ql],Zl[Ql]=null,Zc=Zl[--Ql],Zl[Ql]=null;for(;o===Ga;)Ga=Gi[--zi],Gi[zi]=null,As=Gi[--zi],Gi[zi]=null,Ts=Gi[--zi],Gi[zi]=null}function pT(o,u){Gi[zi++]=Ts,Gi[zi++]=As,Gi[zi++]=Ga,Ts=u.id,As=u.overflow,Ga=o}var mr=null,fn=null,Tt=!1,za=null,Vi=!1,V_=Error(r(519));function Va(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qc(Ui(u,o)),V_}function mT(o){var u=o.stateNode,f=o.type,m=o.memoizedProps;switch(u[_t]=o,u[tr]=m,f){case"dialog":vt("cancel",u),vt("close",u);break;case"iframe":case"object":case"embed":vt("load",u);break;case"video":case"audio":for(f=0;f<xh.length;f++)vt(xh[f],u);break;case"source":vt("error",u);break;case"img":case"image":case"link":vt("error",u),vt("load",u);break;case"details":vt("toggle",u);break;case"input":vt("invalid",u),No(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":vt("invalid",u);break;case"textarea":vt("invalid",u),Xl(u,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||m.suppressHydrationWarning===!0||DM(u.textContent,f)?(m.popover!=null&&(vt("beforetoggle",u),vt("toggle",u)),m.onScroll!=null&&vt("scroll",u),m.onScrollEnd!=null&&vt("scrollend",u),m.onClick!=null&&(u.onclick=Ee),u=!0):u=!1,u||Va(o,!0)}function gT(o){for(mr=o.return;mr;)switch(mr.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:mr=mr.return}}function Jl(o){if(o!==mr)return!1;if(!Tt)return gT(o),Tt=!0,!1;var u=o.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||a0(o.type,o.memoizedProps)),f=!f),f&&fn&&Va(o),gT(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));fn=zM(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));fn=zM(o)}else u===27?(u=fn,no(o.type)?(o=h0,h0=null,fn=o):fn=u):fn=mr?ji(o.stateNode.nextSibling):null;return!0}function Vo(){fn=mr=null,Tt=!1}function H_(){var o=za;return o!==null&&(Jr===null?Jr=o:Jr.push.apply(Jr,o),za=null),o}function Qc(o){za===null?za=[o]:za.push(o)}var j_=G(null),Ho=null,ia=null;function Ha(o,u,f){L(j_,u._currentValue),u._currentValue=f}function sa(o){o._currentValue=j_.current,Q(j_)}function X_(o,u,f){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===f)break;o=o.return}}function W_(o,u,f,m){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var v=b.dependencies;if(v!==null){var T=b.child;v=v.firstContext;e:for(;v!==null;){var N=v;v=b;for(var Y=0;Y<u.length;Y++)if(N.context===u[Y]){v.lanes|=f,N=v.alternate,N!==null&&(N.lanes|=f),X_(v.return,f,o),m||(T=null);break e}v=N.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=f,v=T.alternate,v!==null&&(v.lanes|=f),X_(T,f,o),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===o){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function eu(o,u,f,m){o=null;for(var b=u,v=!1;b!==null;){if(!v){if((b.flags&524288)!==0)v=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var N=b.type;xi(b.pendingProps.value,T.value)||(o!==null?o.push(N):o=[N])}}else if(b===Be.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(Ch):o=[Ch])}b=b.return}o!==null&&W_(u,o,f,m),u.flags|=262144}function Vf(o){for(o=o.firstContext;o!==null;){if(!xi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function jo(o){Ho=o,ia=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function gr(o){return yT(Ho,o)}function Hf(o,u){return Ho===null&&jo(o),yT(o,u)}function yT(o,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ia===null){if(o===null)throw Error(r(308));ia=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else ia=ia.next=u;return f}var I9=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(f,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(f){return f()})}},N9=n.unstable_scheduleCallback,L9=n.unstable_NormalPriority,Xn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $_(){return{controller:new I9,data:new Map,refCount:0}}function Jc(o){o.refCount--,o.refCount===0&&N9(L9,function(){o.controller.abort()})}var eh=null,q_=0,tu=0,nu=null;function F9(o,u){if(eh===null){var f=eh=[];q_=0,tu=Zb(),nu={status:"pending",value:void 0,then:function(m){f.push(m)}}}return q_++,u.then(_T,_T),u}function _T(){if(--q_===0&&eh!==null){nu!==null&&(nu.status="fulfilled");var o=eh;eh=null,tu=0,nu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function U9(o,u){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var bT=z.S;z.S=function(o,u){nM=Nt(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&F9(o,u),bT!==null&&bT(o,u)};var Xo=G(null);function Y_(){var o=Xo.current;return o!==null?o:rn.pooledCache}function jf(o,u){u===null?L(Xo,Xo.current):L(Xo,u.pool)}function xT(){var o=Y_();return o===null?null:{parent:Xn._currentValue,pool:o}}var ru=Error(r(460)),K_=Error(r(474)),Xf=Error(r(542)),Wf={then:function(){}};function vT(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ST(o,u,f){switch(f=o[f],f===void 0?o.push(u):f!==u&&(u.then(Ee,Ee),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,wT(o),o;default:if(typeof u.status=="string")u.then(Ee,Ee);else{if(o=rn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=m}},function(m){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,wT(o),o}throw $o=u,ru}}function Wo(o){try{var u=o._init;return u(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?($o=f,ru):f}}var $o=null;function ET(){if($o===null)throw Error(r(459));var o=$o;return $o=null,o}function wT(o){if(o===ru||o===Xf)throw Error(r(483))}var iu=null,th=0;function $f(o){var u=th;return th+=1,iu===null&&(iu=[]),ST(iu,o,u)}function nh(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function qf(o,u){throw u.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function CT(o){function u(re,ee){if(o){var se=re.deletions;se===null?(re.deletions=[ee],re.flags|=16):se.push(ee)}}function f(re,ee){if(!o)return null;for(;ee!==null;)u(re,ee),ee=ee.sibling;return null}function m(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function b(re,ee){return re=na(re,ee),re.index=0,re.sibling=null,re}function v(re,ee,se){return re.index=se,o?(se=re.alternate,se!==null?(se=se.index,se<ee?(re.flags|=67108866,ee):se):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function T(re){return o&&re.alternate===null&&(re.flags|=67108866),re}function N(re,ee,se,me){return ee===null||ee.tag!==6?(ee=F_(se,re.mode,me),ee.return=re,ee):(ee=b(ee,se),ee.return=re,ee)}function Y(re,ee,se,me){var Ve=se.type;return Ve===S?pe(re,ee,se.props.children,me,se.key):ee!==null&&(ee.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===V&&Wo(Ve)===ee.type)?(ee=b(ee,se.props),nh(ee,se),ee.return=re,ee):(ee=Gf(se.type,se.key,se.props,null,re.mode,me),nh(ee,se),ee.return=re,ee)}function ae(re,ee,se,me){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=U_(se,re.mode,me),ee.return=re,ee):(ee=b(ee,se.children||[]),ee.return=re,ee)}function pe(re,ee,se,me,Ve){return ee===null||ee.tag!==7?(ee=zo(se,re.mode,me,Ve),ee.return=re,ee):(ee=b(ee,se),ee.return=re,ee)}function ge(re,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=F_(""+ee,re.mode,se),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return se=Gf(ee.type,ee.key,ee.props,null,re.mode,se),nh(se,ee),se.return=re,se;case _:return ee=U_(ee,re.mode,se),ee.return=re,ee;case V:return ee=Wo(ee),ge(re,ee,se)}if(te(ee)||$(ee))return ee=zo(ee,re.mode,se,null),ee.return=re,ee;if(typeof ee.then=="function")return ge(re,$f(ee),se);if(ee.$$typeof===C)return ge(re,Hf(re,ee),se);qf(re,ee)}return null}function oe(re,ee,se,me){var Ve=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ve!==null?null:N(re,ee,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return se.key===Ve?Y(re,ee,se,me):null;case _:return se.key===Ve?ae(re,ee,se,me):null;case V:return se=Wo(se),oe(re,ee,se,me)}if(te(se)||$(se))return Ve!==null?null:pe(re,ee,se,me,null);if(typeof se.then=="function")return oe(re,ee,$f(se),me);if(se.$$typeof===C)return oe(re,ee,Hf(re,se),me);qf(re,se)}return null}function ce(re,ee,se,me,Ve){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return re=re.get(se)||null,N(ee,re,""+me,Ve);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return re=re.get(me.key===null?se:me.key)||null,Y(ee,re,me,Ve);case _:return re=re.get(me.key===null?se:me.key)||null,ae(ee,re,me,Ve);case V:return me=Wo(me),ce(re,ee,se,me,Ve)}if(te(me)||$(me))return re=re.get(se)||null,pe(ee,re,me,Ve,null);if(typeof me.then=="function")return ce(re,ee,se,$f(me),Ve);if(me.$$typeof===C)return ce(re,ee,se,Hf(ee,me),Ve);qf(ee,me)}return null}function Re(re,ee,se,me){for(var Ve=null,Ut=null,Ie=ee,dt=ee=0,Ct=null;Ie!==null&&dt<se.length;dt++){Ie.index>dt?(Ct=Ie,Ie=null):Ct=Ie.sibling;var Gt=oe(re,Ie,se[dt],me);if(Gt===null){Ie===null&&(Ie=Ct);break}o&&Ie&&Gt.alternate===null&&u(re,Ie),ee=v(Gt,ee,dt),Ut===null?Ve=Gt:Ut.sibling=Gt,Ut=Gt,Ie=Ct}if(dt===se.length)return f(re,Ie),Tt&&ra(re,dt),Ve;if(Ie===null){for(;dt<se.length;dt++)Ie=ge(re,se[dt],me),Ie!==null&&(ee=v(Ie,ee,dt),Ut===null?Ve=Ie:Ut.sibling=Ie,Ut=Ie);return Tt&&ra(re,dt),Ve}for(Ie=m(Ie);dt<se.length;dt++)Ct=ce(Ie,re,dt,se[dt],me),Ct!==null&&(o&&Ct.alternate!==null&&Ie.delete(Ct.key===null?dt:Ct.key),ee=v(Ct,ee,dt),Ut===null?Ve=Ct:Ut.sibling=Ct,Ut=Ct);return o&&Ie.forEach(function(oo){return u(re,oo)}),Tt&&ra(re,dt),Ve}function qe(re,ee,se,me){if(se==null)throw Error(r(151));for(var Ve=null,Ut=null,Ie=ee,dt=ee=0,Ct=null,Gt=se.next();Ie!==null&&!Gt.done;dt++,Gt=se.next()){Ie.index>dt?(Ct=Ie,Ie=null):Ct=Ie.sibling;var oo=oe(re,Ie,Gt.value,me);if(oo===null){Ie===null&&(Ie=Ct);break}o&&Ie&&oo.alternate===null&&u(re,Ie),ee=v(oo,ee,dt),Ut===null?Ve=oo:Ut.sibling=oo,Ut=oo,Ie=Ct}if(Gt.done)return f(re,Ie),Tt&&ra(re,dt),Ve;if(Ie===null){for(;!Gt.done;dt++,Gt=se.next())Gt=ge(re,Gt.value,me),Gt!==null&&(ee=v(Gt,ee,dt),Ut===null?Ve=Gt:Ut.sibling=Gt,Ut=Gt);return Tt&&ra(re,dt),Ve}for(Ie=m(Ie);!Gt.done;dt++,Gt=se.next())Gt=ce(Ie,re,dt,Gt.value,me),Gt!==null&&(o&&Gt.alternate!==null&&Ie.delete(Gt.key===null?dt:Gt.key),ee=v(Gt,ee,dt),Ut===null?Ve=Gt:Ut.sibling=Gt,Ut=Gt);return o&&Ie.forEach(function(KH){return u(re,KH)}),Tt&&ra(re,dt),Ve}function en(re,ee,se,me){if(typeof se=="object"&&se!==null&&se.type===S&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case y:e:{for(var Ve=se.key;ee!==null;){if(ee.key===Ve){if(Ve=se.type,Ve===S){if(ee.tag===7){f(re,ee.sibling),me=b(ee,se.props.children),me.return=re,re=me;break e}}else if(ee.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===V&&Wo(Ve)===ee.type){f(re,ee.sibling),me=b(ee,se.props),nh(me,se),me.return=re,re=me;break e}f(re,ee);break}else u(re,ee);ee=ee.sibling}se.type===S?(me=zo(se.props.children,re.mode,me,se.key),me.return=re,re=me):(me=Gf(se.type,se.key,se.props,null,re.mode,me),nh(me,se),me.return=re,re=me)}return T(re);case _:e:{for(Ve=se.key;ee!==null;){if(ee.key===Ve)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){f(re,ee.sibling),me=b(ee,se.children||[]),me.return=re,re=me;break e}else{f(re,ee);break}else u(re,ee);ee=ee.sibling}me=U_(se,re.mode,me),me.return=re,re=me}return T(re);case V:return se=Wo(se),en(re,ee,se,me)}if(te(se))return Re(re,ee,se,me);if($(se)){if(Ve=$(se),typeof Ve!="function")throw Error(r(150));return se=Ve.call(se),qe(re,ee,se,me)}if(typeof se.then=="function")return en(re,ee,$f(se),me);if(se.$$typeof===C)return en(re,ee,Hf(re,se),me);qf(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(f(re,ee.sibling),me=b(ee,se),me.return=re,re=me):(f(re,ee),me=F_(se,re.mode,me),me.return=re,re=me),T(re)):f(re,ee)}return function(re,ee,se,me){try{th=0;var Ve=en(re,ee,se,me);return iu=null,Ve}catch(Ie){if(Ie===ru||Ie===Xf)throw Ie;var Ut=vi(29,Ie,null,re.mode);return Ut.lanes=me,Ut.return=re,Ut}}}var qo=CT(!0),TT=CT(!1),ja=!1;function Z_(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Q_(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Xa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Wa(o,u,f){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(zt&2)!==0){var b=m.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u,u=Uf(o),uT(o,null,f),u}return Ff(o,m,u,f),Uf(o)}function rh(o,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,f|=m,u.lanes=f,Le(o,f)}}function J_(o,u){var f=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,v=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};v===null?b=v=T:v=v.next=T,f=f.next}while(f!==null);v===null?b=v=u:v=v.next=u}else b=v=u;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:v,shared:m.shared,callbacks:m.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=u}var eb=!1;function ih(){if(eb){var o=nu;if(o!==null)throw o}}function sh(o,u,f,m){eb=!1;var b=o.updateQueue;ja=!1;var v=b.firstBaseUpdate,T=b.lastBaseUpdate,N=b.shared.pending;if(N!==null){b.shared.pending=null;var Y=N,ae=Y.next;Y.next=null,T===null?v=ae:T.next=ae,T=Y;var pe=o.alternate;pe!==null&&(pe=pe.updateQueue,N=pe.lastBaseUpdate,N!==T&&(N===null?pe.firstBaseUpdate=ae:N.next=ae,pe.lastBaseUpdate=Y))}if(v!==null){var ge=b.baseState;T=0,pe=ae=Y=null,N=v;do{var oe=N.lane&-536870913,ce=oe!==N.lane;if(ce?(wt&oe)===oe:(m&oe)===oe){oe!==0&&oe===tu&&(eb=!0),pe!==null&&(pe=pe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Re=o,qe=N;oe=u;var en=f;switch(qe.tag){case 1:if(Re=qe.payload,typeof Re=="function"){ge=Re.call(en,ge,oe);break e}ge=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=qe.payload,oe=typeof Re=="function"?Re.call(en,ge,oe):Re,oe==null)break e;ge=p({},ge,oe);break e;case 2:ja=!0}}oe=N.callback,oe!==null&&(o.flags|=64,ce&&(o.flags|=8192),ce=b.callbacks,ce===null?b.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},pe===null?(ae=pe=ce,Y=ge):pe=pe.next=ce,T|=oe;if(N=N.next,N===null){if(N=b.shared.pending,N===null)break;ce=N,N=ce.next,ce.next=null,b.lastBaseUpdate=ce,b.shared.pending=null}}while(!0);pe===null&&(Y=ge),b.baseState=Y,b.firstBaseUpdate=ae,b.lastBaseUpdate=pe,v===null&&(b.shared.lanes=0),Za|=T,o.lanes=T,o.memoizedState=ge}}function AT(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function MT(o,u){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)AT(f[o],u)}var su=G(null),Yf=G(0);function RT(o,u){o=pa,L(Yf,o),L(su,u),pa=o|u.baseLanes}function tb(){L(Yf,pa),L(su,su.current)}function nb(){pa=Yf.current,Q(su),Q(Yf)}var Si=G(null),Hi=null;function $a(o){var u=o.alternate;L(Fn,Fn.current&1),L(Si,o),Hi===null&&(u===null||su.current!==null||u.memoizedState!==null)&&(Hi=o)}function rb(o){L(Fn,Fn.current),L(Si,o),Hi===null&&(Hi=o)}function PT(o){o.tag===22?(L(Fn,Fn.current),L(Si,o),Hi===null&&(Hi=o)):qa()}function qa(){L(Fn,Fn.current),L(Si,Si.current)}function Ei(o){Q(Si),Hi===o&&(Hi=null),Q(Fn)}var Fn=G(0);function Kf(o){for(var u=o;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||u0(f)||c0(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var aa=0,ht=null,Qt=null,Wn=null,Zf=!1,au=!1,Yo=!1,Qf=0,ah=0,ou=null,G9=0;function Mn(){throw Error(r(321))}function ib(o,u){if(u===null)return!1;for(var f=0;f<u.length&&f<o.length;f++)if(!xi(o[f],u[f]))return!1;return!0}function sb(o,u,f,m,b,v){return aa=v,ht=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=o===null||o.memoizedState===null?fA:xb,Yo=!1,v=f(m,b),Yo=!1,au&&(v=DT(u,f,m,b)),BT(o),v}function BT(o){z.H=uh;var u=Qt!==null&&Qt.next!==null;if(aa=0,Wn=Qt=ht=null,Zf=!1,ah=0,ou=null,u)throw Error(r(300));o===null||$n||(o=o.dependencies,o!==null&&Vf(o)&&($n=!0))}function DT(o,u,f,m){ht=o;var b=0;do{if(au&&(ou=null),ah=0,au=!1,25<=b)throw Error(r(301));if(b+=1,Wn=Qt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}z.H=pA,v=u(f,m)}while(au);return v}function z9(){var o=z.H,u=o.useState()[0];return u=typeof u.then=="function"?oh(u):u,o=o.useState()[0],(Qt!==null?Qt.memoizedState:null)!==o&&(ht.flags|=1024),u}function ab(){var o=Qf!==0;return Qf=0,o}function ob(o,u,f){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~f}function lb(o){if(Zf){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Zf=!1}aa=0,Wn=Qt=ht=null,au=!1,ah=Qf=0,ou=null}function Ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ht.memoizedState=Wn=o:Wn=Wn.next=o,Wn}function Un(){if(Qt===null){var o=ht.alternate;o=o!==null?o.memoizedState:null}else o=Qt.next;var u=Wn===null?ht.memoizedState:Wn.next;if(u!==null)Wn=u,Qt=o;else{if(o===null)throw ht.alternate===null?Error(r(467)):Error(r(310));Qt=o,o={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Wn===null?ht.memoizedState=Wn=o:Wn=Wn.next=o}return Wn}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oh(o){var u=ah;return ah+=1,ou===null&&(ou=[]),o=ST(ou,o,u),u=ht,(Wn===null?u.memoizedState:Wn.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?fA:xb),o}function ep(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return oh(o);if(o.$$typeof===C)return gr(o)}throw Error(r(438,String(o)))}function ub(o){var u=null,f=ht.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var m=ht.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Jf(),ht.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(o),m=0;m<o;m++)f[m]=D;return u.index++,f}function oa(o,u){return typeof u=="function"?u(o):u}function tp(o){var u=Un();return cb(u,Qt,o)}function cb(o,u,f){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var b=o.baseQueue,v=m.pending;if(v!==null){if(b!==null){var T=b.next;b.next=v.next,v.next=T}u.baseQueue=b=v,m.pending=null}if(v=o.baseState,b===null)o.memoizedState=v;else{u=b.next;var N=T=null,Y=null,ae=u,pe=!1;do{var ge=ae.lane&-536870913;if(ge!==ae.lane?(wt&ge)===ge:(aa&ge)===ge){var oe=ae.revertLane;if(oe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ge===tu&&(pe=!0);else if((aa&oe)===oe){ae=ae.next,oe===tu&&(pe=!0);continue}else ge={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(N=Y=ge,T=v):Y=Y.next=ge,ht.lanes|=oe,Za|=oe;ge=ae.action,Yo&&f(v,ge),v=ae.hasEagerState?ae.eagerState:f(v,ge)}else oe={lane:ge,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(N=Y=oe,T=v):Y=Y.next=oe,ht.lanes|=ge,Za|=ge;ae=ae.next}while(ae!==null&&ae!==u);if(Y===null?T=v:Y.next=N,!xi(v,o.memoizedState)&&($n=!0,pe&&(f=nu,f!==null)))throw f;o.memoizedState=v,o.baseState=T,o.baseQueue=Y,m.lastRenderedState=v}return b===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function hb(o){var u=Un(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var m=f.dispatch,b=f.pending,v=u.memoizedState;if(b!==null){f.pending=null;var T=b=b.next;do v=o(v,T.action),T=T.next;while(T!==b);xi(v,u.memoizedState)||($n=!0),u.memoizedState=v,u.baseQueue===null&&(u.baseState=v),f.lastRenderedState=v}return[v,m]}function kT(o,u,f){var m=ht,b=Un(),v=Tt;if(v){if(f===void 0)throw Error(r(407));f=f()}else f=u();var T=!xi((Qt||b).memoizedState,f);if(T&&(b.memoizedState=f,$n=!0),b=b.queue,pb(NT.bind(null,m,b,o),[o]),b.getSnapshot!==u||T||Wn!==null&&Wn.memoizedState.tag&1){if(m.flags|=2048,lu(9,{destroy:void 0},IT.bind(null,m,b,f,u),null),rn===null)throw Error(r(349));v||(aa&127)!==0||OT(m,u,f)}return f}function OT(o,u,f){o.flags|=16384,o={getSnapshot:u,value:f},u=ht.updateQueue,u===null?(u=Jf(),ht.updateQueue=u,u.stores=[o]):(f=u.stores,f===null?u.stores=[o]:f.push(o))}function IT(o,u,f,m){u.value=f,u.getSnapshot=m,LT(u)&&FT(o)}function NT(o,u,f){return f(function(){LT(u)&&FT(o)})}function LT(o){var u=o.getSnapshot;o=o.value;try{var f=u();return!xi(o,f)}catch{return!0}}function FT(o){var u=Go(o,2);u!==null&&ei(u,o,2)}function db(o){var u=Ir();if(typeof o=="function"){var f=o;if(o=f(),Yo){er(!0);try{f()}finally{er(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:o},u}function UT(o,u,f,m){return o.baseState=f,cb(o,Qt,typeof m=="function"?m:oa)}function V9(o,u,f,m,b){if(ip(o))throw Error(r(485));if(o=u.action,o!==null){var v={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};z.T!==null?f(!0):v.isTransition=!1,m(v),f=u.pending,f===null?(v.next=u.pending=v,GT(u,v)):(v.next=f.next,u.pending=f.next=v)}}function GT(o,u){var f=u.action,m=u.payload,b=o.state;if(u.isTransition){var v=z.T,T={};z.T=T;try{var N=f(b,m),Y=z.S;Y!==null&&Y(T,N),zT(o,u,N)}catch(ae){fb(o,u,ae)}finally{v!==null&&T.types!==null&&(v.types=T.types),z.T=v}}else try{v=f(b,m),zT(o,u,v)}catch(ae){fb(o,u,ae)}}function zT(o,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){VT(o,u,m)},function(m){return fb(o,u,m)}):VT(o,u,f)}function VT(o,u,f){u.status="fulfilled",u.value=f,HT(u),o.state=f,u=o.pending,u!==null&&(f=u.next,f===u?o.pending=null:(f=f.next,u.next=f,GT(o,f)))}function fb(o,u,f){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=f,HT(u),u=u.next;while(u!==m)}o.action=null}function HT(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function jT(o,u){return u}function XT(o,u){if(Tt){var f=rn.formState;if(f!==null){e:{var m=ht;if(Tt){if(fn){t:{for(var b=fn,v=Vi;b.nodeType!==8;){if(!v){b=null;break t}if(b=ji(b.nextSibling),b===null){b=null;break t}}v=b.data,b=v==="F!"||v==="F"?b:null}if(b){fn=ji(b.nextSibling),m=b.data==="F!";break e}}Va(m)}m=!1}m&&(u=f[0])}}return f=Ir(),f.memoizedState=f.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jT,lastRenderedState:u},f.queue=m,f=cA.bind(null,ht,m),m.dispatch=f,m=db(!1),v=bb.bind(null,ht,!1,m.queue),m=Ir(),b={state:u,dispatch:null,action:o,pending:null},m.queue=b,f=V9.bind(null,ht,b,v,f),b.dispatch=f,m.memoizedState=o,[u,f,!1]}function WT(o){var u=Un();return $T(u,Qt,o)}function $T(o,u,f){if(u=cb(o,u,jT)[0],o=tp(oa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=oh(u)}catch(T){throw T===ru?Xf:T}else m=u;u=Un();var b=u.queue,v=b.dispatch;return f!==u.memoizedState&&(ht.flags|=2048,lu(9,{destroy:void 0},H9.bind(null,b,f),null)),[m,v,o]}function H9(o,u){o.action=u}function qT(o){var u=Un(),f=Qt;if(f!==null)return $T(u,f,o);Un(),u=u.memoizedState,f=Un();var m=f.queue.dispatch;return f.memoizedState=o,[u,m,!1]}function lu(o,u,f,m){return o={tag:o,create:f,deps:m,inst:u,next:null},u=ht.updateQueue,u===null&&(u=Jf(),ht.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=o.next=o:(m=f.next,f.next=o,o.next=m,u.lastEffect=o),o}function YT(){return Un().memoizedState}function np(o,u,f,m){var b=Ir();ht.flags|=o,b.memoizedState=lu(1|u,{destroy:void 0},f,m===void 0?null:m)}function rp(o,u,f,m){var b=Un();m=m===void 0?null:m;var v=b.memoizedState.inst;Qt!==null&&m!==null&&ib(m,Qt.memoizedState.deps)?b.memoizedState=lu(u,v,f,m):(ht.flags|=o,b.memoizedState=lu(1|u,v,f,m))}function KT(o,u){np(8390656,8,o,u)}function pb(o,u){rp(2048,8,o,u)}function j9(o){ht.flags|=4;var u=ht.updateQueue;if(u===null)u=Jf(),ht.updateQueue=u,u.events=[o];else{var f=u.events;f===null?u.events=[o]:f.push(o)}}function ZT(o){var u=Un().memoizedState;return j9({ref:u,nextImpl:o}),function(){if((zt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function QT(o,u){return rp(4,2,o,u)}function JT(o,u){return rp(4,4,o,u)}function eA(o,u){if(typeof u=="function"){o=o();var f=u(o);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function tA(o,u,f){f=f!=null?f.concat([o]):null,rp(4,4,eA.bind(null,u,o),f)}function mb(){}function nA(o,u){var f=Un();u=u===void 0?null:u;var m=f.memoizedState;return u!==null&&ib(u,m[1])?m[0]:(f.memoizedState=[o,u],o)}function rA(o,u){var f=Un();u=u===void 0?null:u;var m=f.memoizedState;if(u!==null&&ib(u,m[1]))return m[0];if(m=o(),Yo){er(!0);try{o()}finally{er(!1)}}return f.memoizedState=[m,u],m}function gb(o,u,f){return f===void 0||(aa&1073741824)!==0&&(wt&261930)===0?o.memoizedState=u:(o.memoizedState=f,o=iM(),ht.lanes|=o,Za|=o,f)}function iA(o,u,f,m){return xi(f,u)?f:su.current!==null?(o=gb(o,f,m),xi(o,u)||($n=!0),o):(aa&42)===0||(aa&1073741824)!==0&&(wt&261930)===0?($n=!0,o.memoizedState=f):(o=iM(),ht.lanes|=o,Za|=o,u)}function sA(o,u,f,m,b){var v=X.p;X.p=v!==0&&8>v?v:8;var T=z.T,N={};z.T=N,bb(o,!1,u,f);try{var Y=b(),ae=z.S;if(ae!==null&&ae(N,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pe=U9(Y,m);lh(o,u,pe,Ti(o))}else lh(o,u,m,Ti(o))}catch(ge){lh(o,u,{then:function(){},status:"rejected",reason:ge},Ti())}finally{X.p=v,T!==null&&N.types!==null&&(T.types=N.types),z.T=T}}function X9(){}function yb(o,u,f,m){if(o.tag!==5)throw Error(r(476));var b=aA(o).queue;sA(o,b,u,K,f===null?X9:function(){return oA(o),f(m)})}function aA(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:K},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:f},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function oA(o){var u=aA(o);u.next===null&&(u=o.alternate.memoizedState),lh(o,u.next.queue,{},Ti())}function _b(){return gr(Ch)}function lA(){return Un().memoizedState}function uA(){return Un().memoizedState}function W9(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ti();o=Xa(f);var m=Wa(u,o,f);m!==null&&(ei(m,u,f),rh(m,u,f)),u={cache:$_()},o.payload=u;return}u=u.return}}function $9(o,u,f){var m=Ti();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},ip(o)?hA(u,f):(f=N_(o,u,f,m),f!==null&&(ei(f,o,m),dA(f,u,m)))}function cA(o,u,f){var m=Ti();lh(o,u,f,m)}function lh(o,u,f,m){var b={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(ip(o))hA(u,b);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=u.lastRenderedReducer,v!==null))try{var T=u.lastRenderedState,N=v(T,f);if(b.hasEagerState=!0,b.eagerState=N,xi(N,T))return Ff(o,u,b,0),rn===null&&Lf(),!1}catch{}if(f=N_(o,u,b,m),f!==null)return ei(f,o,m),dA(f,u,m),!0}return!1}function bb(o,u,f,m){if(m={lane:2,revertLane:Zb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ip(o)){if(u)throw Error(r(479))}else u=N_(o,f,m,2),u!==null&&ei(u,o,2)}function ip(o){var u=o.alternate;return o===ht||u!==null&&u===ht}function hA(o,u){au=Zf=!0;var f=o.pending;f===null?u.next=u:(u.next=f.next,f.next=u),o.pending=u}function dA(o,u,f){if((f&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,f|=m,u.lanes=f,Le(o,f)}}var uh={readContext:gr,use:ep,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn};uh.useEffectEvent=Mn;var fA={readContext:gr,use:ep,useCallback:function(o,u){return Ir().memoizedState=[o,u===void 0?null:u],o},useContext:gr,useEffect:KT,useImperativeHandle:function(o,u,f){f=f!=null?f.concat([o]):null,np(4194308,4,eA.bind(null,u,o),f)},useLayoutEffect:function(o,u){return np(4194308,4,o,u)},useInsertionEffect:function(o,u){np(4,2,o,u)},useMemo:function(o,u){var f=Ir();u=u===void 0?null:u;var m=o();if(Yo){er(!0);try{o()}finally{er(!1)}}return f.memoizedState=[m,u],m},useReducer:function(o,u,f){var m=Ir();if(f!==void 0){var b=f(u);if(Yo){er(!0);try{f(u)}finally{er(!1)}}}else b=u;return m.memoizedState=m.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},m.queue=o,o=o.dispatch=$9.bind(null,ht,o),[m.memoizedState,o]},useRef:function(o){var u=Ir();return o={current:o},u.memoizedState=o},useState:function(o){o=db(o);var u=o.queue,f=cA.bind(null,ht,u);return u.dispatch=f,[o.memoizedState,f]},useDebugValue:mb,useDeferredValue:function(o,u){var f=Ir();return gb(f,o,u)},useTransition:function(){var o=db(!1);return o=sA.bind(null,ht,o.queue,!0,!1),Ir().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,f){var m=ht,b=Ir();if(Tt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),rn===null)throw Error(r(349));(wt&127)!==0||OT(m,u,f)}b.memoizedState=f;var v={value:f,getSnapshot:u};return b.queue=v,KT(NT.bind(null,m,v,o),[o]),m.flags|=2048,lu(9,{destroy:void 0},IT.bind(null,m,v,f,u),null),f},useId:function(){var o=Ir(),u=rn.identifierPrefix;if(Tt){var f=As,m=Ts;f=(m&~(1<<32-Lt(m)-1)).toString(32)+f,u="_"+u+"R_"+f,f=Qf++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=G9++,u="_"+u+"r_"+f.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:_b,useFormState:XT,useActionState:XT,useOptimistic:function(o){var u=Ir();u.memoizedState=u.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=bb.bind(null,ht,!0,f),f.dispatch=u,[o,u]},useMemoCache:ub,useCacheRefresh:function(){return Ir().memoizedState=W9.bind(null,ht)},useEffectEvent:function(o){var u=Ir(),f={impl:o};return u.memoizedState=f,function(){if((zt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},xb={readContext:gr,use:ep,useCallback:nA,useContext:gr,useEffect:pb,useImperativeHandle:tA,useInsertionEffect:QT,useLayoutEffect:JT,useMemo:rA,useReducer:tp,useRef:YT,useState:function(){return tp(oa)},useDebugValue:mb,useDeferredValue:function(o,u){var f=Un();return iA(f,Qt.memoizedState,o,u)},useTransition:function(){var o=tp(oa)[0],u=Un().memoizedState;return[typeof o=="boolean"?o:oh(o),u]},useSyncExternalStore:kT,useId:lA,useHostTransitionStatus:_b,useFormState:WT,useActionState:WT,useOptimistic:function(o,u){var f=Un();return UT(f,Qt,o,u)},useMemoCache:ub,useCacheRefresh:uA};xb.useEffectEvent=ZT;var pA={readContext:gr,use:ep,useCallback:nA,useContext:gr,useEffect:pb,useImperativeHandle:tA,useInsertionEffect:QT,useLayoutEffect:JT,useMemo:rA,useReducer:hb,useRef:YT,useState:function(){return hb(oa)},useDebugValue:mb,useDeferredValue:function(o,u){var f=Un();return Qt===null?gb(f,o,u):iA(f,Qt.memoizedState,o,u)},useTransition:function(){var o=hb(oa)[0],u=Un().memoizedState;return[typeof o=="boolean"?o:oh(o),u]},useSyncExternalStore:kT,useId:lA,useHostTransitionStatus:_b,useFormState:qT,useActionState:qT,useOptimistic:function(o,u){var f=Un();return Qt!==null?UT(f,Qt,o,u):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:ub,useCacheRefresh:uA};pA.useEffectEvent=ZT;function vb(o,u,f,m){u=o.memoizedState,f=f(m,u),f=f==null?u:p({},u,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Sb={enqueueSetState:function(o,u,f){o=o._reactInternals;var m=Ti(),b=Xa(m);b.payload=u,f!=null&&(b.callback=f),u=Wa(o,b,m),u!==null&&(ei(u,o,m),rh(u,o,m))},enqueueReplaceState:function(o,u,f){o=o._reactInternals;var m=Ti(),b=Xa(m);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Wa(o,b,m),u!==null&&(ei(u,o,m),rh(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var f=Ti(),m=Xa(f);m.tag=2,u!=null&&(m.callback=u),u=Wa(o,m,f),u!==null&&(ei(u,o,f),rh(u,o,f))}};function mA(o,u,f,m,b,v,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,v,T):u.prototype&&u.prototype.isPureReactComponent?!Yc(f,m)||!Yc(b,v):!0}function gA(o,u,f,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,m),u.state!==o&&Sb.enqueueReplaceState(u,u.state,null)}function Ko(o,u){var f=u;if("ref"in u){f={};for(var m in u)m!=="ref"&&(f[m]=u[m])}if(o=o.defaultProps){f===u&&(f=p({},f));for(var b in o)f[b]===void 0&&(f[b]=o[b])}return f}function yA(o){Nf(o)}function _A(o){console.error(o)}function bA(o){Nf(o)}function sp(o,u){try{var f=o.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function xA(o,u,f){try{var m=o.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Eb(o,u,f){return f=Xa(f),f.tag=3,f.payload={element:null},f.callback=function(){sp(o,u)},f}function vA(o){return o=Xa(o),o.tag=3,o}function SA(o,u,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var v=m.value;o.payload=function(){return b(v)},o.callback=function(){xA(u,f,m)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){xA(u,f,m),typeof b!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var N=m.stack;this.componentDidCatch(m.value,{componentStack:N!==null?N:""})})}function q9(o,u,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=f.alternate,u!==null&&eu(u,f,b,!0),f=Si.current,f!==null){switch(f.tag){case 31:case 13:return Hi===null?yp():f.alternate===null&&Rn===0&&(Rn=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Wf?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([m]):u.add(m),qb(o,m,b)),!1;case 22:return f.flags|=65536,m===Wf?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([m]):f.add(m)),qb(o,m,b)),!1}throw Error(r(435,f.tag))}return qb(o,m,b),yp(),!1}if(Tt)return u=Si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,m!==V_&&(o=Error(r(422),{cause:m}),Qc(Ui(o,f)))):(m!==V_&&(u=Error(r(423),{cause:m}),Qc(Ui(u,f))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,m=Ui(m,f),b=Eb(o.stateNode,m,b),J_(o,b),Rn!==4&&(Rn=2)),!1;var v=Error(r(520),{cause:m});if(v=Ui(v,f),yh===null?yh=[v]:yh.push(v),Rn!==4&&(Rn=2),u===null)return!0;m=Ui(m,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,o=b&-b,f.lanes|=o,o=Eb(f.stateNode,m,o),J_(f,o),!1;case 1:if(u=f.type,v=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qa===null||!Qa.has(v))))return f.flags|=65536,b&=-b,f.lanes|=b,b=vA(b),SA(b,o,f,m),J_(f,b),!1}f=f.return}while(f!==null);return!1}var wb=Error(r(461)),$n=!1;function yr(o,u,f,m){u.child=o===null?TT(u,null,f,m):qo(u,o.child,f,m)}function EA(o,u,f,m,b){f=f.render;var v=u.ref;if("ref"in m){var T={};for(var N in m)N!=="ref"&&(T[N]=m[N])}else T=m;return jo(u),m=sb(o,u,f,T,v,b),N=ab(),o!==null&&!$n?(ob(o,u,b),la(o,u,b)):(Tt&&N&&G_(u),u.flags|=1,yr(o,u,m,b),u.child)}function wA(o,u,f,m,b){if(o===null){var v=f.type;return typeof v=="function"&&!L_(v)&&v.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=v,CA(o,u,v,m,b)):(o=Gf(f.type,null,m,u,u.mode,b),o.ref=u.ref,o.return=u,u.child=o)}if(v=o.child,!Db(o,b)){var T=v.memoizedProps;if(f=f.compare,f=f!==null?f:Yc,f(T,m)&&o.ref===u.ref)return la(o,u,b)}return u.flags|=1,o=na(v,m),o.ref=u.ref,o.return=u,u.child=o}function CA(o,u,f,m,b){if(o!==null){var v=o.memoizedProps;if(Yc(v,m)&&o.ref===u.ref)if($n=!1,u.pendingProps=m=v,Db(o,b))(o.flags&131072)!==0&&($n=!0);else return u.lanes=o.lanes,la(o,u,b)}return Cb(o,u,f,m,b)}function TA(o,u,f,m){var b=m.children,v=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(v=v!==null?v.baseLanes|f:f,o!==null){for(m=u.child=o.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~v}else m=0,u.child=null;return AA(o,u,v,f,m)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&jf(u,v!==null?v.cachePool:null),v!==null?RT(u,v):tb(),PT(u);else return m=u.lanes=536870912,AA(o,u,v!==null?v.baseLanes|f:f,f,m)}else v!==null?(jf(u,v.cachePool),RT(u,v),qa(),u.memoizedState=null):(o!==null&&jf(u,null),tb(),qa());return yr(o,u,b,f),u.child}function ch(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function AA(o,u,f,m,b){var v=Y_();return v=v===null?null:{parent:Xn._currentValue,pool:v},u.memoizedState={baseLanes:f,cachePool:v},o!==null&&jf(u,null),tb(),PT(u),o!==null&&eu(o,u,m,!0),u.childLanes=b,null}function ap(o,u){return u=lp({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function MA(o,u,f){return qo(u,o.child,null,f),o=ap(u,u.pendingProps),o.flags|=2,Ei(u),u.memoizedState=null,o}function Y9(o,u,f){var m=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Tt){if(m.mode==="hidden")return o=ap(u,m),u.lanes=536870912,ch(null,o);if(rb(u),(o=fn)?(o=GM(o,Vi),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ga!==null?{id:Ts,overflow:As}:null,retryLane:536870912,hydrationErrors:null},f=hT(o),f.return=u,u.child=f,mr=u,fn=null)):o=null,o===null)throw Va(u);return u.lanes=536870912,null}return ap(u,m)}var v=o.memoizedState;if(v!==null){var T=v.dehydrated;if(rb(u),b)if(u.flags&256)u.flags&=-257,u=MA(o,u,f);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if($n||eu(o,u,f,!1),b=(f&o.childLanes)!==0,$n||b){if(m=rn,m!==null&&(T=jt(m,f),T!==0&&T!==v.retryLane))throw v.retryLane=T,Go(o,T),ei(m,o,T),wb;yp(),u=MA(o,u,f)}else o=v.treeContext,fn=ji(T.nextSibling),mr=u,Tt=!0,za=null,Vi=!1,o!==null&&pT(u,o),u=ap(u,m),u.flags|=4096;return u}return o=na(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function op(o,u){var f=u.ref;if(f===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(u.flags|=4194816)}}function Cb(o,u,f,m,b){return jo(u),f=sb(o,u,f,m,void 0,b),m=ab(),o!==null&&!$n?(ob(o,u,b),la(o,u,b)):(Tt&&m&&G_(u),u.flags|=1,yr(o,u,f,b),u.child)}function RA(o,u,f,m,b,v){return jo(u),u.updateQueue=null,f=DT(u,m,f,b),BT(o),m=ab(),o!==null&&!$n?(ob(o,u,v),la(o,u,v)):(Tt&&m&&G_(u),u.flags|=1,yr(o,u,f,v),u.child)}function PA(o,u,f,m,b){if(jo(u),u.stateNode===null){var v=Kl,T=f.contextType;typeof T=="object"&&T!==null&&(v=gr(T)),v=new f(m,v),u.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Sb,u.stateNode=v,v._reactInternals=u,v=u.stateNode,v.props=m,v.state=u.memoizedState,v.refs={},Z_(u),T=f.contextType,v.context=typeof T=="object"&&T!==null?gr(T):Kl,v.state=u.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(vb(u,f,T,m),v.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&Sb.enqueueReplaceState(v,v.state,null),sh(u,m,v,b),ih(),v.state=u.memoizedState),typeof v.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){v=u.stateNode;var N=u.memoizedProps,Y=Ko(f,N);v.props=Y;var ae=v.context,pe=f.contextType;T=Kl,typeof pe=="object"&&pe!==null&&(T=gr(pe));var ge=f.getDerivedStateFromProps;pe=typeof ge=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=u.pendingProps!==N,pe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||ae!==T)&&gA(u,v,m,T),ja=!1;var oe=u.memoizedState;v.state=oe,sh(u,m,v,b),ih(),ae=u.memoizedState,N||oe!==ae||ja?(typeof ge=="function"&&(vb(u,f,ge,m),ae=u.memoizedState),(Y=ja||mA(u,f,Y,m,oe,ae,T))?(pe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(u.flags|=4194308)):(typeof v.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=ae),v.props=m,v.state=ae,v.context=T,m=Y):(typeof v.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{v=u.stateNode,Q_(o,u),T=u.memoizedProps,pe=Ko(f,T),v.props=pe,ge=u.pendingProps,oe=v.context,ae=f.contextType,Y=Kl,typeof ae=="object"&&ae!==null&&(Y=gr(ae)),N=f.getDerivedStateFromProps,(ae=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==ge||oe!==Y)&&gA(u,v,m,Y),ja=!1,oe=u.memoizedState,v.state=oe,sh(u,m,v,b),ih();var ce=u.memoizedState;T!==ge||oe!==ce||ja||o!==null&&o.dependencies!==null&&Vf(o.dependencies)?(typeof N=="function"&&(vb(u,f,N,m),ce=u.memoizedState),(pe=ja||mA(u,f,pe,m,oe,ce,Y)||o!==null&&o.dependencies!==null&&Vf(o.dependencies))?(ae||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(m,ce,Y),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(m,ce,Y)),typeof v.componentDidUpdate=="function"&&(u.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===o.memoizedProps&&oe===o.memoizedState||(u.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&oe===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ce),v.props=m,v.state=ce,v.context=Y,m=pe):(typeof v.componentDidUpdate!="function"||T===o.memoizedProps&&oe===o.memoizedState||(u.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&oe===o.memoizedState||(u.flags|=1024),m=!1)}return v=m,op(o,u),m=(u.flags&128)!==0,v||m?(v=u.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:v.render(),u.flags|=1,o!==null&&m?(u.child=qo(u,o.child,null,b),u.child=qo(u,null,f,b)):yr(o,u,f,b),u.memoizedState=v.state,o=u.child):o=la(o,u,b),o}function BA(o,u,f,m){return Vo(),u.flags|=256,yr(o,u,f,m),u.child}var Tb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ab(o){return{baseLanes:o,cachePool:xT()}}function Mb(o,u,f){return o=o!==null?o.childLanes&~f:0,u&&(o|=Ci),o}function DA(o,u,f){var m=u.pendingProps,b=!1,v=(u.flags&128)!==0,T;if((T=v)||(T=o!==null&&o.memoizedState===null?!1:(Fn.current&2)!==0),T&&(b=!0,u.flags&=-129),T=(u.flags&32)!==0,u.flags&=-33,o===null){if(Tt){if(b?$a(u):qa(),(o=fn)?(o=GM(o,Vi),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ga!==null?{id:Ts,overflow:As}:null,retryLane:536870912,hydrationErrors:null},f=hT(o),f.return=u,u.child=f,mr=u,fn=null)):o=null,o===null)throw Va(u);return c0(o)?u.lanes=32:u.lanes=536870912,null}var N=m.children;return m=m.fallback,b?(qa(),b=u.mode,N=lp({mode:"hidden",children:N},b),m=zo(m,b,f,null),N.return=u,m.return=u,N.sibling=m,u.child=N,m=u.child,m.memoizedState=Ab(f),m.childLanes=Mb(o,T,f),u.memoizedState=Tb,ch(null,m)):($a(u),Rb(u,N))}var Y=o.memoizedState;if(Y!==null&&(N=Y.dehydrated,N!==null)){if(v)u.flags&256?($a(u),u.flags&=-257,u=Pb(o,u,f)):u.memoizedState!==null?(qa(),u.child=o.child,u.flags|=128,u=null):(qa(),N=m.fallback,b=u.mode,m=lp({mode:"visible",children:m.children},b),N=zo(N,b,f,null),N.flags|=2,m.return=u,N.return=u,m.sibling=N,u.child=m,qo(u,o.child,null,f),m=u.child,m.memoizedState=Ab(f),m.childLanes=Mb(o,T,f),u.memoizedState=Tb,u=ch(null,m));else if($a(u),c0(N)){if(T=N.nextSibling&&N.nextSibling.dataset,T)var ae=T.dgst;T=ae,m=Error(r(419)),m.stack="",m.digest=T,Qc({value:m,source:null,stack:null}),u=Pb(o,u,f)}else if($n||eu(o,u,f,!1),T=(f&o.childLanes)!==0,$n||T){if(T=rn,T!==null&&(m=jt(T,f),m!==0&&m!==Y.retryLane))throw Y.retryLane=m,Go(o,m),ei(T,o,m),wb;u0(N)||yp(),u=Pb(o,u,f)}else u0(N)?(u.flags|=192,u.child=o.child,u=null):(o=Y.treeContext,fn=ji(N.nextSibling),mr=u,Tt=!0,za=null,Vi=!1,o!==null&&pT(u,o),u=Rb(u,m.children),u.flags|=4096);return u}return b?(qa(),N=m.fallback,b=u.mode,Y=o.child,ae=Y.sibling,m=na(Y,{mode:"hidden",children:m.children}),m.subtreeFlags=Y.subtreeFlags&65011712,ae!==null?N=na(ae,N):(N=zo(N,b,f,null),N.flags|=2),N.return=u,m.return=u,m.sibling=N,u.child=m,ch(null,m),m=u.child,N=o.child.memoizedState,N===null?N=Ab(f):(b=N.cachePool,b!==null?(Y=Xn._currentValue,b=b.parent!==Y?{parent:Y,pool:Y}:b):b=xT(),N={baseLanes:N.baseLanes|f,cachePool:b}),m.memoizedState=N,m.childLanes=Mb(o,T,f),u.memoizedState=Tb,ch(o.child,m)):($a(u),f=o.child,o=f.sibling,f=na(f,{mode:"visible",children:m.children}),f.return=u,f.sibling=null,o!==null&&(T=u.deletions,T===null?(u.deletions=[o],u.flags|=16):T.push(o)),u.child=f,u.memoizedState=null,f)}function Rb(o,u){return u=lp({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function lp(o,u){return o=vi(22,o,null,u),o.lanes=0,o}function Pb(o,u,f){return qo(u,o.child,null,f),o=Rb(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function kA(o,u,f){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),X_(o.return,u,f)}function Bb(o,u,f,m,b,v){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b,treeForkCount:v}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=f,T.tailMode=b,T.treeForkCount=v)}function OA(o,u,f){var m=u.pendingProps,b=m.revealOrder,v=m.tail;m=m.children;var T=Fn.current,N=(T&2)!==0;if(N?(T=T&1|2,u.flags|=128):T&=1,L(Fn,T),yr(o,u,m,f),m=Tt?Zc:0,!N&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&kA(o,f,u);else if(o.tag===19)kA(o,f,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)o=f.alternate,o!==null&&Kf(o)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),Bb(u,!1,b,f,v,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(o=b.alternate,o!==null&&Kf(o)===null){u.child=b;break}o=b.sibling,b.sibling=f,f=b,b=o}Bb(u,!0,f,null,v,m);break;case"together":Bb(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function la(o,u,f){if(o!==null&&(u.dependencies=o.dependencies),Za|=u.lanes,(f&u.childLanes)===0)if(o!==null){if(eu(o,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,f=na(o,o.pendingProps),u.child=f,f.return=u;o.sibling!==null;)o=o.sibling,f=f.sibling=na(o,o.pendingProps),f.return=u;f.sibling=null}return u.child}function Db(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Vf(o)))}function K9(o,u,f){switch(u.tag){case 3:ke(u,u.stateNode.containerInfo),Ha(u,Xn,o.memoizedState.cache),Vo();break;case 27:case 5:rt(u);break;case 4:ke(u,u.stateNode.containerInfo);break;case 10:Ha(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,rb(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?($a(u),u.flags|=128,null):(f&u.child.childLanes)!==0?DA(o,u,f):($a(u),o=la(o,u,f),o!==null?o.sibling:null);$a(u);break;case 19:var b=(o.flags&128)!==0;if(m=(f&u.childLanes)!==0,m||(eu(o,u,f,!1),m=(f&u.childLanes)!==0),b){if(m)return OA(o,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),L(Fn,Fn.current),m)break;return null;case 22:return u.lanes=0,TA(o,u,f,u.pendingProps);case 24:Ha(u,Xn,o.memoizedState.cache)}return la(o,u,f)}function IA(o,u,f){if(o!==null)if(o.memoizedProps!==u.pendingProps)$n=!0;else{if(!Db(o,f)&&(u.flags&128)===0)return $n=!1,K9(o,u,f);$n=(o.flags&131072)!==0}else $n=!1,Tt&&(u.flags&1048576)!==0&&fT(u,Zc,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=Wo(u.elementType),u.type=o,typeof o=="function")L_(o)?(m=Ko(o,m),u.tag=1,u=PA(null,u,o,m,f)):(u.tag=0,u=Cb(null,u,o,m,f));else{if(o!=null){var b=o.$$typeof;if(b===A){u.tag=11,u=EA(null,u,o,m,f);break e}else if(b===I){u.tag=14,u=wA(null,u,o,m,f);break e}}throw u=Z(o)||o,Error(r(306,u,""))}}return u;case 0:return Cb(o,u,u.type,u.pendingProps,f);case 1:return m=u.type,b=Ko(m,u.pendingProps),PA(o,u,m,b,f);case 3:e:{if(ke(u,u.stateNode.containerInfo),o===null)throw Error(r(387));m=u.pendingProps;var v=u.memoizedState;b=v.element,Q_(o,u),sh(u,m,null,f);var T=u.memoizedState;if(m=T.cache,Ha(u,Xn,m),m!==v.cache&&W_(u,[Xn],f,!0),ih(),m=T.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:T.cache},u.updateQueue.baseState=v,u.memoizedState=v,u.flags&256){u=BA(o,u,m,f);break e}else if(m!==b){b=Ui(Error(r(424)),u),Qc(b),u=BA(o,u,m,f);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,fn=ji(o.firstChild),mr=u,Tt=!0,za=null,Vi=!0,f=TT(u,null,m,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Vo(),m===b){u=la(o,u,f);break e}yr(o,u,m,f)}u=u.child}return u;case 26:return op(o,u),o===null?(f=WM(u.type,null,u.pendingProps,null))?u.memoizedState=f:Tt||(f=u.type,o=u.pendingProps,m=wp(ve.current).createElement(f),m[_t]=u,m[tr]=o,_r(m,f,o),Hn(m),u.stateNode=m):u.memoizedState=WM(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return rt(u),o===null&&Tt&&(m=u.stateNode=HM(u.type,u.pendingProps,ve.current),mr=u,Vi=!0,b=fn,no(u.type)?(h0=b,fn=ji(m.firstChild)):fn=b),yr(o,u,u.pendingProps.children,f),op(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Tt&&((b=m=fn)&&(m=TH(m,u.type,u.pendingProps,Vi),m!==null?(u.stateNode=m,mr=u,fn=ji(m.firstChild),Vi=!1,b=!0):b=!1),b||Va(u)),rt(u),b=u.type,v=u.pendingProps,T=o!==null?o.memoizedProps:null,m=v.children,a0(b,v)?m=null:T!==null&&a0(b,T)&&(u.flags|=32),u.memoizedState!==null&&(b=sb(o,u,z9,null,null,f),Ch._currentValue=b),op(o,u),yr(o,u,m,f),u.child;case 6:return o===null&&Tt&&((o=f=fn)&&(f=AH(f,u.pendingProps,Vi),f!==null?(u.stateNode=f,mr=u,fn=null,o=!0):o=!1),o||Va(u)),null;case 13:return DA(o,u,f);case 4:return ke(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=qo(u,null,m,f):yr(o,u,m,f),u.child;case 11:return EA(o,u,u.type,u.pendingProps,f);case 7:return yr(o,u,u.pendingProps,f),u.child;case 8:return yr(o,u,u.pendingProps.children,f),u.child;case 12:return yr(o,u,u.pendingProps.children,f),u.child;case 10:return m=u.pendingProps,Ha(u,u.type,m.value),yr(o,u,m.children,f),u.child;case 9:return b=u.type._context,m=u.pendingProps.children,jo(u),b=gr(b),m=m(b),u.flags|=1,yr(o,u,m,f),u.child;case 14:return wA(o,u,u.type,u.pendingProps,f);case 15:return CA(o,u,u.type,u.pendingProps,f);case 19:return OA(o,u,f);case 31:return Y9(o,u,f);case 22:return TA(o,u,f,u.pendingProps);case 24:return jo(u),m=gr(Xn),o===null?(b=Y_(),b===null&&(b=rn,v=$_(),b.pooledCache=v,v.refCount++,v!==null&&(b.pooledCacheLanes|=f),b=v),u.memoizedState={parent:m,cache:b},Z_(u),Ha(u,Xn,b)):((o.lanes&f)!==0&&(Q_(o,u),sh(u,null,null,f),ih()),b=o.memoizedState,v=u.memoizedState,b.parent!==m?(b={parent:m,cache:m},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Ha(u,Xn,m)):(m=v.cache,Ha(u,Xn,m),m!==b.cache&&W_(u,[Xn],f,!0))),yr(o,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function ua(o){o.flags|=4}function kb(o,u,f,m,b){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(b&335544128)===b)if(o.stateNode.complete)o.flags|=8192;else if(lM())o.flags|=8192;else throw $o=Wf,K_}else o.flags&=-16777217}function NA(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!ZM(u))if(lM())o.flags|=8192;else throw $o=Wf,K_}function up(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?ye():536870912,o.lanes|=u,du|=u)}function hh(o,u){if(!Tt)switch(o.tailMode){case"hidden":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function pn(o){var u=o.alternate!==null&&o.alternate.child===o.child,f=0,m=0;if(u)for(var b=o.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=m,o.childLanes=f,u}function Z9(o,u,f){var m=u.pendingProps;switch(z_(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(u),null;case 1:return pn(u),null;case 3:return f=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),sa(Xn),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Jl(u)?ua(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,H_())),pn(u),null;case 26:var b=u.type,v=u.memoizedState;return o===null?(ua(u),v!==null?(pn(u),NA(u,v)):(pn(u),kb(u,b,null,m,f))):v?v!==o.memoizedState?(ua(u),pn(u),NA(u,v)):(pn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&ua(u),pn(u),kb(u,b,o,m,f)),null;case 27:if(st(u),f=ve.current,b=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&ua(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return pn(u),null}o=he.current,Jl(u)?mT(u):(o=HM(b,m,f),u.stateNode=o,ua(u))}return pn(u),null;case 5:if(st(u),b=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&ua(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return pn(u),null}if(v=he.current,Jl(u))mT(u);else{var T=wp(ve.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?v.multiple=!0:m.size&&(v.size=m.size);break;default:v=typeof m.is=="string"?T.createElement(b,{is:m.is}):T.createElement(b)}}v[_t]=u,v[tr]=m;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=v;e:switch(_r(v,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ua(u)}}return pn(u),kb(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,f),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&ua(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(o=ve.current,Jl(u)){if(o=u.stateNode,f=u.memoizedProps,m=null,b=mr,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}o[_t]=u,o=!!(o.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||DM(o.nodeValue,f)),o||Va(u,!0)}else o=wp(o).createTextNode(m),o[_t]=u,u.stateNode=o}return pn(u),null;case 31:if(f=u.memoizedState,o===null||o.memoizedState!==null){if(m=Jl(u),f!==null){if(o===null){if(!m)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[_t]=u}else Vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pn(u),o=!1}else f=H_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return u.flags&256?(Ei(u),u):(Ei(u),null);if((u.flags&128)!==0)throw Error(r(558))}return pn(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=Jl(u),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[_t]=u}else Vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pn(u),b=!1}else b=H_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ei(u),u):(Ei(u),null)}return Ei(u),(u.flags&128)!==0?(u.lanes=f,u):(f=m!==null,o=o!==null&&o.memoizedState!==null,f&&(m=u.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),v=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(v=m.memoizedState.cachePool.pool),v!==b&&(m.flags|=2048)),f!==o&&f&&(u.child.flags|=8192),up(u,u.updateQueue),pn(u),null);case 4:return Ne(),o===null&&t0(u.stateNode.containerInfo),pn(u),null;case 10:return sa(u.type),pn(u),null;case 19:if(Q(Fn),m=u.memoizedState,m===null)return pn(u),null;if(b=(u.flags&128)!==0,v=m.rendering,v===null)if(b)hh(m,!1);else{if(Rn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(v=Kf(o),v!==null){for(u.flags|=128,hh(m,!1),o=v.updateQueue,u.updateQueue=o,up(u,o),u.subtreeFlags=0,o=f,f=u.child;f!==null;)cT(f,o),f=f.sibling;return L(Fn,Fn.current&1|2),Tt&&ra(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Nt()>pp&&(u.flags|=128,b=!0,hh(m,!1),u.lanes=4194304)}else{if(!b)if(o=Kf(v),o!==null){if(u.flags|=128,b=!0,o=o.updateQueue,u.updateQueue=o,up(u,o),hh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Tt)return pn(u),null}else 2*Nt()-m.renderingStartTime>pp&&f!==536870912&&(u.flags|=128,b=!0,hh(m,!1),u.lanes=4194304);m.isBackwards?(v.sibling=u.child,u.child=v):(o=m.last,o!==null?o.sibling=v:u.child=v,m.last=v)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Nt(),o.sibling=null,f=Fn.current,L(Fn,b?f&1|2:f&1),Tt&&ra(u,m.treeForkCount),o):(pn(u),null);case 22:case 23:return Ei(u),nb(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(f&536870912)!==0&&(u.flags&128)===0&&(pn(u),u.subtreeFlags&6&&(u.flags|=8192)):pn(u),f=u.updateQueue,f!==null&&up(u,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048),o!==null&&Q(Xo),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),sa(Xn),pn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function Q9(o,u){switch(z_(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return sa(Xn),Ne(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return st(u),null;case 31:if(u.memoizedState!==null){if(Ei(u),u.alternate===null)throw Error(r(340));Vo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Ei(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Vo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Q(Fn),null;case 4:return Ne(),null;case 10:return sa(u.type),null;case 22:case 23:return Ei(u),nb(),o!==null&&Q(Xo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return sa(Xn),null;case 25:return null;default:return null}}function LA(o,u){switch(z_(u),u.tag){case 3:sa(Xn),Ne();break;case 26:case 27:case 5:st(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&Ei(u);break;case 13:Ei(u);break;case 19:Q(Fn);break;case 10:sa(u.type);break;case 22:case 23:Ei(u),nb(),o!==null&&Q(Xo);break;case 24:sa(Xn)}}function dh(o,u){try{var f=u.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&o)===o){m=void 0;var v=f.create,T=f.inst;m=v(),T.destroy=m}f=f.next}while(f!==b)}}catch(N){qt(u,u.return,N)}}function Ya(o,u,f){try{var m=u.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var v=b.next;m=v;do{if((m.tag&o)===o){var T=m.inst,N=T.destroy;if(N!==void 0){T.destroy=void 0,b=u;var Y=f,ae=N;try{ae()}catch(pe){qt(b,Y,pe)}}}m=m.next}while(m!==v)}}catch(pe){qt(u,u.return,pe)}}function FA(o){var u=o.updateQueue;if(u!==null){var f=o.stateNode;try{MT(u,f)}catch(m){qt(o,o.return,m)}}}function UA(o,u,f){f.props=Ko(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(m){qt(o,u,m)}}function fh(o,u){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof f=="function"?o.refCleanup=f(m):f.current=m}}catch(b){qt(o,u,b)}}function Ms(o,u){var f=o.ref,m=o.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){qt(o,u,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){qt(o,u,b)}else f.current=null}function GA(o){var u=o.type,f=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){qt(o,o.return,b)}}function Ob(o,u,f){try{var m=o.stateNode;xH(m,o.type,f,u),m[tr]=u}catch(b){qt(o,o.return,b)}}function zA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&no(o.type)||o.tag===4}function Ib(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||zA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&no(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Nb(o,u,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(o),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Ee));else if(m!==4&&(m===27&&no(o.type)&&(f=o.stateNode,u=null),o=o.child,o!==null))for(Nb(o,u,f),o=o.sibling;o!==null;)Nb(o,u,f),o=o.sibling}function cp(o,u,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?f.insertBefore(o,u):f.appendChild(o);else if(m!==4&&(m===27&&no(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(cp(o,u,f),o=o.sibling;o!==null;)cp(o,u,f),o=o.sibling}function VA(o){var u=o.stateNode,f=o.memoizedProps;try{for(var m=o.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);_r(u,m,f),u[_t]=o,u[tr]=f}catch(v){qt(o,o.return,v)}}var ca=!1,qn=!1,Lb=!1,HA=typeof WeakSet=="function"?WeakSet:Set,sr=null;function J9(o,u){if(o=o.containerInfo,i0=Bp,o=tT(o),P_(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{f.nodeType,v.nodeType}catch{f=null;break e}var T=0,N=-1,Y=-1,ae=0,pe=0,ge=o,oe=null;t:for(;;){for(var ce;ge!==f||b!==0&&ge.nodeType!==3||(N=T+b),ge!==v||m!==0&&ge.nodeType!==3||(Y=T+m),ge.nodeType===3&&(T+=ge.nodeValue.length),(ce=ge.firstChild)!==null;)oe=ge,ge=ce;for(;;){if(ge===o)break t;if(oe===f&&++ae===b&&(N=T),oe===v&&++pe===m&&(Y=T),(ce=ge.nextSibling)!==null)break;ge=oe,oe=ge.parentNode}ge=ce}f=N===-1||Y===-1?null:{start:N,end:Y}}else f=null}f=f||{start:0,end:0}}else f=null;for(s0={focusedElem:o,selectionRange:f},Bp=!1,sr=u;sr!==null;)if(u=sr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,sr=o;else for(;sr!==null;){switch(u=sr,v=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)b=o[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,f=u,b=v.memoizedProps,v=v.memoizedState,m=f.stateNode;try{var Re=Ko(f.type,b);o=m.getSnapshotBeforeUpdate(Re,v),m.__reactInternalSnapshotBeforeUpdate=o}catch(qe){qt(f,f.return,qe)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,f=o.nodeType,f===9)l0(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":l0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,sr=o;break}sr=u.return}}function jA(o,u,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:da(o,f),m&4&&dh(5,f);break;case 1:if(da(o,f),m&4)if(o=f.stateNode,u===null)try{o.componentDidMount()}catch(T){qt(f,f.return,T)}else{var b=Ko(f.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(b,u,o.__reactInternalSnapshotBeforeUpdate)}catch(T){qt(f,f.return,T)}}m&64&&FA(f),m&512&&fh(f,f.return);break;case 3:if(da(o,f),m&64&&(o=f.updateQueue,o!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{MT(o,u)}catch(T){qt(f,f.return,T)}}break;case 27:u===null&&m&4&&VA(f);case 26:case 5:da(o,f),u===null&&m&4&&GA(f),m&512&&fh(f,f.return);break;case 12:da(o,f);break;case 31:da(o,f),m&4&&$A(o,f);break;case 13:da(o,f),m&4&&qA(o,f),m&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=lH.bind(null,f),MH(o,f))));break;case 22:if(m=f.memoizedState!==null||ca,!m){u=u!==null&&u.memoizedState!==null||qn,b=ca;var v=qn;ca=m,(qn=u)&&!v?fa(o,f,(f.subtreeFlags&8772)!==0):da(o,f),ca=b,qn=v}break;case 30:break;default:da(o,f)}}function XA(o){var u=o.alternate;u!==null&&(o.alternate=null,XA(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Lc(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var _n=null,Kr=!1;function ha(o,u,f){for(f=f.child;f!==null;)WA(o,u,f),f=f.sibling}function WA(o,u,f){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Nn,f)}catch{}switch(f.tag){case 26:qn||Ms(f,u),ha(o,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:qn||Ms(f,u);var m=_n,b=Kr;no(f.type)&&(_n=f.stateNode,Kr=!1),ha(o,u,f),Sh(f.stateNode),_n=m,Kr=b;break;case 5:qn||Ms(f,u);case 6:if(m=_n,b=Kr,_n=null,ha(o,u,f),_n=m,Kr=b,_n!==null)if(Kr)try{(_n.nodeType===9?_n.body:_n.nodeName==="HTML"?_n.ownerDocument.body:_n).removeChild(f.stateNode)}catch(v){qt(f,u,v)}else try{_n.removeChild(f.stateNode)}catch(v){qt(f,u,v)}break;case 18:_n!==null&&(Kr?(o=_n,FM(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),xu(o)):FM(_n,f.stateNode));break;case 4:m=_n,b=Kr,_n=f.stateNode.containerInfo,Kr=!0,ha(o,u,f),_n=m,Kr=b;break;case 0:case 11:case 14:case 15:Ya(2,f,u),qn||Ya(4,f,u),ha(o,u,f);break;case 1:qn||(Ms(f,u),m=f.stateNode,typeof m.componentWillUnmount=="function"&&UA(f,u,m)),ha(o,u,f);break;case 21:ha(o,u,f);break;case 22:qn=(m=qn)||f.memoizedState!==null,ha(o,u,f),qn=m;break;default:ha(o,u,f)}}function $A(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{xu(o)}catch(f){qt(u,u.return,f)}}}function qA(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{xu(o)}catch(f){qt(u,u.return,f)}}function eH(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new HA),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new HA),u;default:throw Error(r(435,o.tag))}}function hp(o,u){var f=eH(o);u.forEach(function(m){if(!f.has(m)){f.add(m);var b=uH.bind(null,o,m);m.then(b,b)}})}function Zr(o,u){var f=u.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],v=o,T=u,N=T;e:for(;N!==null;){switch(N.tag){case 27:if(no(N.type)){_n=N.stateNode,Kr=!1;break e}break;case 5:_n=N.stateNode,Kr=!1;break e;case 3:case 4:_n=N.stateNode.containerInfo,Kr=!0;break e}N=N.return}if(_n===null)throw Error(r(160));WA(v,T,b),_n=null,Kr=!1,v=b.alternate,v!==null&&(v.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)YA(u,o),u=u.sibling}var os=null;function YA(o,u){var f=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Zr(u,o),Qr(o),m&4&&(Ya(3,o,o.return),dh(3,o),Ya(5,o,o.return));break;case 1:Zr(u,o),Qr(o),m&512&&(qn||f===null||Ms(f,f.return)),m&64&&ca&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=os;if(Zr(u,o),Qr(o),m&512&&(qn||f===null||Ms(f,f.return)),m&4){var v=f!==null?f.memoizedState:null;if(m=o.memoizedState,f===null)if(m===null)if(o.stateNode===null){e:{m=o.type,f=o.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":v=b.getElementsByTagName("title")[0],(!v||v[Oo]||v[_t]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=b.createElement(m),b.head.insertBefore(v,b.querySelector("head > title"))),_r(v,m,f),v[_t]=o,Hn(v),m=v;break e;case"link":var T=YM("link","href",b).get(m+(f.href||""));if(T){for(var N=0;N<T.length;N++)if(v=T[N],v.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&v.getAttribute("rel")===(f.rel==null?null:f.rel)&&v.getAttribute("title")===(f.title==null?null:f.title)&&v.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(N,1);break t}}v=b.createElement(m),_r(v,m,f),b.head.appendChild(v);break;case"meta":if(T=YM("meta","content",b).get(m+(f.content||""))){for(N=0;N<T.length;N++)if(v=T[N],v.getAttribute("content")===(f.content==null?null:""+f.content)&&v.getAttribute("name")===(f.name==null?null:f.name)&&v.getAttribute("property")===(f.property==null?null:f.property)&&v.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&v.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(N,1);break t}}v=b.createElement(m),_r(v,m,f),b.head.appendChild(v);break;default:throw Error(r(468,m))}v[_t]=o,Hn(v),m=v}o.stateNode=m}else KM(b,o.type,o.stateNode);else o.stateNode=qM(b,m,o.memoizedProps);else v!==m?(v===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):v.count--,m===null?KM(b,o.type,o.stateNode):qM(b,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Ob(o,o.memoizedProps,f.memoizedProps)}break;case 27:Zr(u,o),Qr(o),m&512&&(qn||f===null||Ms(f,f.return)),f!==null&&m&4&&Ob(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Zr(u,o),Qr(o),m&512&&(qn||f===null||Ms(f,f.return)),o.flags&32){b=o.stateNode;try{Ye(b,"")}catch(Re){qt(o,o.return,Re)}}m&4&&o.stateNode!=null&&(b=o.memoizedProps,Ob(o,b,f!==null?f.memoizedProps:b)),m&1024&&(Lb=!0);break;case 6:if(Zr(u,o),Qr(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,f=o.stateNode;try{f.nodeValue=m}catch(Re){qt(o,o.return,Re)}}break;case 3:if(Ap=null,b=os,os=Cp(u.containerInfo),Zr(u,o),os=b,Qr(o),m&4&&f!==null&&f.memoizedState.isDehydrated)try{xu(u.containerInfo)}catch(Re){qt(o,o.return,Re)}Lb&&(Lb=!1,KA(o));break;case 4:m=os,os=Cp(o.stateNode.containerInfo),Zr(u,o),Qr(o),os=m;break;case 12:Zr(u,o),Qr(o);break;case 31:Zr(u,o),Qr(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,hp(o,m)));break;case 13:Zr(u,o),Qr(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(fp=Nt()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,hp(o,m)));break;case 22:b=o.memoizedState!==null;var Y=f!==null&&f.memoizedState!==null,ae=ca,pe=qn;if(ca=ae||b,qn=pe||Y,Zr(u,o),qn=pe,ca=ae,Qr(o),m&8192)e:for(u=o.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||Y||ca||qn||Zo(o)),f=null,u=o;;){if(u.tag===5||u.tag===26){if(f===null){Y=f=u;try{if(v=Y.stateNode,b)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{N=Y.stateNode;var ge=Y.memoizedProps.style,oe=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;N.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Re){qt(Y,Y.return,Re)}}}else if(u.tag===6){if(f===null){Y=u;try{Y.stateNode.nodeValue=b?"":Y.memoizedProps}catch(Re){qt(Y,Y.return,Re)}}}else if(u.tag===18){if(f===null){Y=u;try{var ce=Y.stateNode;b?UM(ce,!0):UM(Y.stateNode,!1)}catch(Re){qt(Y,Y.return,Re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,hp(o,f))));break;case 19:Zr(u,o),Qr(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,hp(o,m)));break;case 30:break;case 21:break;default:Zr(u,o),Qr(o)}}function Qr(o){var u=o.flags;if(u&2){try{for(var f,m=o.return;m!==null;){if(zA(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,v=Ib(o);cp(o,v,b);break;case 5:var T=f.stateNode;f.flags&32&&(Ye(T,""),f.flags&=-33);var N=Ib(o);cp(o,N,T);break;case 3:case 4:var Y=f.stateNode.containerInfo,ae=Ib(o);Nb(o,ae,Y);break;default:throw Error(r(161))}}catch(pe){qt(o,o.return,pe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function KA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;KA(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function da(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)jA(o,u.alternate,u),u=u.sibling}function Zo(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ya(4,u,u.return),Zo(u);break;case 1:Ms(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&UA(u,u.return,f),Zo(u);break;case 27:Sh(u.stateNode);case 26:case 5:Ms(u,u.return),Zo(u);break;case 22:u.memoizedState===null&&Zo(u);break;case 30:Zo(u);break;default:Zo(u)}o=o.sibling}}function fa(o,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,b=o,v=u,T=v.flags;switch(v.tag){case 0:case 11:case 15:fa(b,v,f),dh(4,v);break;case 1:if(fa(b,v,f),m=v,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ae){qt(m,m.return,ae)}if(m=v,b=m.updateQueue,b!==null){var N=m.stateNode;try{var Y=b.shared.hiddenCallbacks;if(Y!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Y.length;b++)AT(Y[b],N)}catch(ae){qt(m,m.return,ae)}}f&&T&64&&FA(v),fh(v,v.return);break;case 27:VA(v);case 26:case 5:fa(b,v,f),f&&m===null&&T&4&&GA(v),fh(v,v.return);break;case 12:fa(b,v,f);break;case 31:fa(b,v,f),f&&T&4&&$A(b,v);break;case 13:fa(b,v,f),f&&T&4&&qA(b,v);break;case 22:v.memoizedState===null&&fa(b,v,f),fh(v,v.return);break;case 30:break;default:fa(b,v,f)}u=u.sibling}}function Fb(o,u){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Jc(f))}function Ub(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Jc(o))}function ls(o,u,f,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)ZA(o,u,f,m),u=u.sibling}function ZA(o,u,f,m){var b=u.flags;switch(u.tag){case 0:case 11:case 15:ls(o,u,f,m),b&2048&&dh(9,u);break;case 1:ls(o,u,f,m);break;case 3:ls(o,u,f,m),b&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Jc(o)));break;case 12:if(b&2048){ls(o,u,f,m),o=u.stateNode;try{var v=u.memoizedProps,T=v.id,N=v.onPostCommit;typeof N=="function"&&N(T,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Y){qt(u,u.return,Y)}}else ls(o,u,f,m);break;case 31:ls(o,u,f,m);break;case 13:ls(o,u,f,m);break;case 23:break;case 22:v=u.stateNode,T=u.alternate,u.memoizedState!==null?v._visibility&2?ls(o,u,f,m):ph(o,u):v._visibility&2?ls(o,u,f,m):(v._visibility|=2,uu(o,u,f,m,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Fb(T,u);break;case 24:ls(o,u,f,m),b&2048&&Ub(u.alternate,u);break;default:ls(o,u,f,m)}}function uu(o,u,f,m,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var v=o,T=u,N=f,Y=m,ae=T.flags;switch(T.tag){case 0:case 11:case 15:uu(v,T,N,Y,b),dh(8,T);break;case 23:break;case 22:var pe=T.stateNode;T.memoizedState!==null?pe._visibility&2?uu(v,T,N,Y,b):ph(v,T):(pe._visibility|=2,uu(v,T,N,Y,b)),b&&ae&2048&&Fb(T.alternate,T);break;case 24:uu(v,T,N,Y,b),b&&ae&2048&&Ub(T.alternate,T);break;default:uu(v,T,N,Y,b)}u=u.sibling}}function ph(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=o,m=u,b=m.flags;switch(m.tag){case 22:ph(f,m),b&2048&&Fb(m.alternate,m);break;case 24:ph(f,m),b&2048&&Ub(m.alternate,m);break;default:ph(f,m)}u=u.sibling}}var mh=8192;function cu(o,u,f){if(o.subtreeFlags&mh)for(o=o.child;o!==null;)QA(o,u,f),o=o.sibling}function QA(o,u,f){switch(o.tag){case 26:cu(o,u,f),o.flags&mh&&o.memoizedState!==null&&GH(f,os,o.memoizedState,o.memoizedProps);break;case 5:cu(o,u,f);break;case 3:case 4:var m=os;os=Cp(o.stateNode.containerInfo),cu(o,u,f),os=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=mh,mh=16777216,cu(o,u,f),mh=m):cu(o,u,f));break;default:cu(o,u,f)}}function JA(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function gh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];sr=m,tM(m,o)}JA(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)eM(o),o=o.sibling}function eM(o){switch(o.tag){case 0:case 11:case 15:gh(o),o.flags&2048&&Ya(9,o,o.return);break;case 3:gh(o);break;case 12:gh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,dp(o)):gh(o);break;default:gh(o)}}function dp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];sr=m,tM(m,o)}JA(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ya(8,u,u.return),dp(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,dp(u));break;default:dp(u)}o=o.sibling}}function tM(o,u){for(;sr!==null;){var f=sr;switch(f.tag){case 0:case 11:case 15:Ya(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Jc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,sr=m;else e:for(f=o;sr!==null;){m=sr;var b=m.sibling,v=m.return;if(XA(m),m===f){sr=null;break e}if(b!==null){b.return=v,sr=b;break e}sr=v}}}var tH={getCacheForType:function(o){var u=gr(Xn),f=u.data.get(o);return f===void 0&&(f=o(),u.data.set(o,f)),f},cacheSignal:function(){return gr(Xn).controller.signal}},nH=typeof WeakMap=="function"?WeakMap:Map,zt=0,rn=null,xt=null,wt=0,$t=0,wi=null,Ka=!1,hu=!1,Gb=!1,pa=0,Rn=0,Za=0,Qo=0,zb=0,Ci=0,du=0,yh=null,Jr=null,Vb=!1,fp=0,nM=0,pp=1/0,mp=null,Qa=null,nr=0,Ja=null,fu=null,ma=0,Hb=0,jb=null,rM=null,_h=0,Xb=null;function Ti(){return(zt&2)!==0&&wt!==0?wt&-wt:z.T!==null?Zb():fr()}function iM(){if(Ci===0)if((wt&536870912)===0||Tt){var o=Zs;Zs<<=1,(Zs&3932160)===0&&(Zs=262144),Ci=o}else Ci=536870912;return o=Si.current,o!==null&&(o.flags|=32),Ci}function ei(o,u,f){(o===rn&&($t===2||$t===9)||o.cancelPendingCommit!==null)&&(pu(o,0),eo(o,wt,Ci,!1)),ct(o,f),((zt&2)===0||o!==rn)&&(o===rn&&((zt&2)===0&&(Qo|=f),Rn===4&&eo(o,wt,Ci,!1)),Rs(o))}function sM(o,u,f){if((zt&6)!==0)throw Error(r(327));var m=!f&&(u&127)===0&&(u&o.expiredLanes)===0||j(o,u),b=m?sH(o,u):$b(o,u,!0),v=m;do{if(b===0){hu&&!m&&eo(o,u,0,!1);break}else{if(f=o.current.alternate,v&&!rH(f)){b=$b(o,u,!1),v=!1;continue}if(b===2){if(v=u,o.errorRecoveryDisabledLanes&v)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){u=T;e:{var N=o;b=yh;var Y=N.current.memoizedState.isDehydrated;if(Y&&(pu(N,T).flags|=256),T=$b(N,T,!1),T!==2){if(Gb&&!Y){N.errorRecoveryDisabledLanes|=v,Qo|=v,b=4;break e}v=Jr,Jr=b,v!==null&&(Jr===null?Jr=v:Jr.push.apply(Jr,v))}b=T}if(v=!1,b!==2)continue}}if(b===1){pu(o,0),eo(o,u,0,!0);break}e:{switch(m=o,v=b,v){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:eo(m,u,Ci,!Ka);break e;case 2:Jr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=fp+300-Nt(),10<b)){if(eo(m,u,Ci,!Ka),R(m,0,!0)!==0)break e;ma=u,m.timeoutHandle=NM(aM.bind(null,m,f,Jr,mp,Vb,u,Ci,Qo,du,Ka,v,"Throttled",-0,0),b);break e}aM(m,f,Jr,mp,Vb,u,Ci,Qo,du,Ka,v,null,-0,0)}}break}while(!0);Rs(o)}function aM(o,u,f,m,b,v,T,N,Y,ae,pe,ge,oe,ce){if(o.timeoutHandle=-1,ge=u.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ee},QA(u,v,ge);var Re=(v&62914560)===v?fp-Nt():(v&4194048)===v?nM-Nt():0;if(Re=zH(ge,Re),Re!==null){ma=v,o.cancelPendingCommit=Re(pM.bind(null,o,u,v,f,m,b,T,N,Y,pe,ge,null,oe,ce)),eo(o,v,T,!ae);return}}pM(o,u,v,f,m,b,T,N,Y)}function rH(o){for(var u=o;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],v=b.getSnapshot;b=b.value;try{if(!xi(v(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function eo(o,u,f,m){u&=~zb,u&=~Qo,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var b=u;0<b;){var v=31-Lt(b),T=1<<v;m[v]=-1,b&=~T}f!==0&&Te(o,f,u)}function gp(){return(zt&6)===0?(bh(0),!1):!0}function Wb(){if(xt!==null){if($t===0)var o=xt.return;else o=xt,ia=Ho=null,lb(o),iu=null,th=0,o=xt;for(;o!==null;)LA(o.alternate,o),o=o.return;xt=null}}function pu(o,u){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,EH(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),ma=0,Wb(),rn=o,xt=f=na(o.current,null),wt=u,$t=0,wi=null,Ka=!1,hu=j(o,u),Gb=!1,du=Ci=zb=Qo=Za=Rn=0,Jr=yh=null,Vb=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var b=31-Lt(m),v=1<<b;u|=o[b],m&=~v}return pa=u,Lf(),f}function oM(o,u){ht=null,z.H=uh,u===ru||u===Xf?(u=ET(),$t=3):u===K_?(u=ET(),$t=4):$t=u===wb?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,wi=u,xt===null&&(Rn=1,sp(o,Ui(u,o.current)))}function lM(){var o=Si.current;return o===null?!0:(wt&4194048)===wt?Hi===null:(wt&62914560)===wt||(wt&536870912)!==0?o===Hi:!1}function uM(){var o=z.H;return z.H=uh,o===null?uh:o}function cM(){var o=z.A;return z.A=tH,o}function yp(){Rn=4,Ka||(wt&4194048)!==wt&&Si.current!==null||(hu=!0),(Za&134217727)===0&&(Qo&134217727)===0||rn===null||eo(rn,wt,Ci,!1)}function $b(o,u,f){var m=zt;zt|=2;var b=uM(),v=cM();(rn!==o||wt!==u)&&(mp=null,pu(o,u)),u=!1;var T=Rn;e:do try{if($t!==0&&xt!==null){var N=xt,Y=wi;switch($t){case 8:Wb(),T=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(u=!0);var ae=$t;if($t=0,wi=null,mu(o,N,Y,ae),f&&hu){T=0;break e}break;default:ae=$t,$t=0,wi=null,mu(o,N,Y,ae)}}iH(),T=Rn;break}catch(pe){oM(o,pe)}while(!0);return u&&o.shellSuspendCounter++,ia=Ho=null,zt=m,z.H=b,z.A=v,xt===null&&(rn=null,wt=0,Lf()),T}function iH(){for(;xt!==null;)hM(xt)}function sH(o,u){var f=zt;zt|=2;var m=uM(),b=cM();rn!==o||wt!==u?(mp=null,pp=Nt()+500,pu(o,u)):hu=j(o,u);e:do try{if($t!==0&&xt!==null){u=xt;var v=wi;t:switch($t){case 1:$t=0,wi=null,mu(o,u,v,1);break;case 2:case 9:if(vT(v)){$t=0,wi=null,dM(u);break}u=function(){$t!==2&&$t!==9||rn!==o||($t=7),Rs(o)},v.then(u,u);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:vT(v)?($t=0,wi=null,dM(u)):($t=0,wi=null,mu(o,u,v,7));break;case 5:var T=null;switch(xt.tag){case 26:T=xt.memoizedState;case 5:case 27:var N=xt;if(T?ZM(T):N.stateNode.complete){$t=0,wi=null;var Y=N.sibling;if(Y!==null)xt=Y;else{var ae=N.return;ae!==null?(xt=ae,_p(ae)):xt=null}break t}}$t=0,wi=null,mu(o,u,v,5);break;case 6:$t=0,wi=null,mu(o,u,v,6);break;case 8:Wb(),Rn=6;break e;default:throw Error(r(462))}}aH();break}catch(pe){oM(o,pe)}while(!0);return ia=Ho=null,z.H=m,z.A=b,zt=f,xt!==null?0:(rn=null,wt=0,Lf(),Rn)}function aH(){for(;xt!==null&&!Ht();)hM(xt)}function hM(o){var u=IA(o.alternate,o,pa);o.memoizedProps=o.pendingProps,u===null?_p(o):xt=u}function dM(o){var u=o,f=u.alternate;switch(u.tag){case 15:case 0:u=RA(f,u,u.pendingProps,u.type,void 0,wt);break;case 11:u=RA(f,u,u.pendingProps,u.type.render,u.ref,wt);break;case 5:lb(u);default:LA(f,u),u=xt=cT(u,pa),u=IA(f,u,pa)}o.memoizedProps=o.pendingProps,u===null?_p(o):xt=u}function mu(o,u,f,m){ia=Ho=null,lb(u),iu=null,th=0;var b=u.return;try{if(q9(o,b,u,f,wt)){Rn=1,sp(o,Ui(f,o.current)),xt=null;return}}catch(v){if(b!==null)throw xt=b,v;Rn=1,sp(o,Ui(f,o.current)),xt=null;return}u.flags&32768?(Tt||m===1?o=!0:hu||(wt&536870912)!==0?o=!1:(Ka=o=!0,(m===2||m===9||m===3||m===6)&&(m=Si.current,m!==null&&m.tag===13&&(m.flags|=16384))),fM(u,o)):_p(u)}function _p(o){var u=o;do{if((u.flags&32768)!==0){fM(u,Ka);return}o=u.return;var f=Z9(u.alternate,u,pa);if(f!==null){xt=f;return}if(u=u.sibling,u!==null){xt=u;return}xt=u=o}while(u!==null);Rn===0&&(Rn=5)}function fM(o,u){do{var f=Q9(o.alternate,o);if(f!==null){f.flags&=32767,xt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(o=o.sibling,o!==null)){xt=o;return}xt=o=f}while(o!==null);Rn=6,xt=null}function pM(o,u,f,m,b,v,T,N,Y){o.cancelPendingCommit=null;do bp();while(nr!==0);if((zt&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(v=u.lanes|u.childLanes,v|=I_,Me(o,f,v,T,N,Y),o===rn&&(xt=rn=null,wt=0),fu=u,Ja=o,ma=f,Hb=v,jb=b,rM=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,cH(Fe,function(){return bM(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=z.T,z.T=null,b=X.p,X.p=2,T=zt,zt|=4;try{J9(o,u,f)}finally{zt=T,X.p=b,z.T=m}}nr=1,mM(),gM(),yM()}}function mM(){if(nr===1){nr=0;var o=Ja,u=fu,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=z.T,z.T=null;var m=X.p;X.p=2;var b=zt;zt|=4;try{YA(u,o);var v=s0,T=tT(o.containerInfo),N=v.focusedElem,Y=v.selectionRange;if(T!==N&&N&&N.ownerDocument&&eT(N.ownerDocument.documentElement,N)){if(Y!==null&&P_(N)){var ae=Y.start,pe=Y.end;if(pe===void 0&&(pe=ae),"selectionStart"in N)N.selectionStart=ae,N.selectionEnd=Math.min(pe,N.value.length);else{var ge=N.ownerDocument||document,oe=ge&&ge.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),Re=N.textContent.length,qe=Math.min(Y.start,Re),en=Y.end===void 0?qe:Math.min(Y.end,Re);!ce.extend&&qe>en&&(T=en,en=qe,qe=T);var re=JC(N,qe),ee=JC(N,en);if(re&&ee&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==ee.node||ce.focusOffset!==ee.offset)){var se=ge.createRange();se.setStart(re.node,re.offset),ce.removeAllRanges(),qe>en?(ce.addRange(se),ce.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),ce.addRange(se))}}}}for(ge=[],ce=N;ce=ce.parentNode;)ce.nodeType===1&&ge.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ge.length;N++){var me=ge[N];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Bp=!!i0,s0=i0=null}finally{zt=b,X.p=m,z.T=f}}o.current=u,nr=2}}function gM(){if(nr===2){nr=0;var o=Ja,u=fu,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=z.T,z.T=null;var m=X.p;X.p=2;var b=zt;zt|=4;try{jA(o,u.alternate,u)}finally{zt=b,X.p=m,z.T=f}}nr=3}}function yM(){if(nr===4||nr===3){nr=0,vr();var o=Ja,u=fu,f=ma,m=rM;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?nr=5:(nr=0,fu=Ja=null,_M(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(Qa=null),dr(f),u=u.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Nn,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=z.T,b=X.p,X.p=2,z.T=null;try{for(var v=o.onRecoverableError,T=0;T<m.length;T++){var N=m[T];v(N.value,{componentStack:N.stack})}}finally{z.T=u,X.p=b}}(ma&3)!==0&&bp(),Rs(o),b=o.pendingLanes,(f&261930)!==0&&(b&42)!==0?o===Xb?_h++:(_h=0,Xb=o):_h=0,bh(0)}}function _M(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Jc(u)))}function bp(){return mM(),gM(),yM(),bM()}function bM(){if(nr!==5)return!1;var o=Ja,u=Hb;Hb=0;var f=dr(ma),m=z.T,b=X.p;try{X.p=32>f?32:f,z.T=null,f=jb,jb=null;var v=Ja,T=ma;if(nr=0,fu=Ja=null,ma=0,(zt&6)!==0)throw Error(r(331));var N=zt;if(zt|=4,eM(v.current),ZA(v,v.current,T,f),zt=N,bh(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Nn,v)}catch{}return!0}finally{X.p=b,z.T=m,_M(o,u)}}function xM(o,u,f){u=Ui(f,u),u=Eb(o.stateNode,u,2),o=Wa(o,u,2),o!==null&&(ct(o,2),Rs(o))}function qt(o,u,f){if(o.tag===3)xM(o,o,f);else for(;u!==null;){if(u.tag===3){xM(u,o,f);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Qa===null||!Qa.has(m))){o=Ui(f,o),f=vA(2),m=Wa(u,f,2),m!==null&&(SA(f,m,u,o),ct(m,2),Rs(m));break}}u=u.return}}function qb(o,u,f){var m=o.pingCache;if(m===null){m=o.pingCache=new nH;var b=new Set;m.set(u,b)}else b=m.get(u),b===void 0&&(b=new Set,m.set(u,b));b.has(f)||(Gb=!0,b.add(f),o=oH.bind(null,o,u,f),u.then(o,o))}function oH(o,u,f){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,rn===o&&(wt&f)===f&&(Rn===4||Rn===3&&(wt&62914560)===wt&&300>Nt()-fp?(zt&2)===0&&pu(o,0):zb|=f,du===wt&&(du=0)),Rs(o)}function vM(o,u){u===0&&(u=ye()),o=Go(o,u),o!==null&&(ct(o,u),Rs(o))}function lH(o){var u=o.memoizedState,f=0;u!==null&&(f=u.retryLane),vM(o,f)}function uH(o,u){var f=0;switch(o.tag){case 31:case 13:var m=o.stateNode,b=o.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),vM(o,f)}function cH(o,u){return In(o,u)}var xp=null,gu=null,Yb=!1,vp=!1,Kb=!1,to=0;function Rs(o){o!==gu&&o.next===null&&(gu===null?xp=gu=o:gu=gu.next=o),vp=!0,Yb||(Yb=!0,dH())}function bh(o,u){if(!Kb&&vp){Kb=!0;do for(var f=!1,m=xp;m!==null;){if(o!==0){var b=m.pendingLanes;if(b===0)var v=0;else{var T=m.suspendedLanes,N=m.pingedLanes;v=(1<<31-Lt(42|o)+1)-1,v&=b&~(T&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(f=!0,CM(m,v))}else v=wt,v=R(m,m===rn?v:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(v&3)===0||j(m,v)||(f=!0,CM(m,v));m=m.next}while(f);Kb=!1}}function hH(){SM()}function SM(){vp=Yb=!1;var o=0;to!==0&&SH()&&(o=to);for(var u=Nt(),f=null,m=xp;m!==null;){var b=m.next,v=EM(m,u);v===0?(m.next=null,f===null?xp=b:f.next=b,b===null&&(gu=f)):(f=m,(o!==0||(v&3)!==0)&&(vp=!0)),m=b}nr!==0&&nr!==5||bh(o),to!==0&&(to=0)}function EM(o,u){for(var f=o.suspendedLanes,m=o.pingedLanes,b=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var T=31-Lt(v),N=1<<T,Y=b[T];Y===-1?((N&f)===0||(N&m)!==0)&&(b[T]=ie(N,u)):Y<=u&&(o.expiredLanes|=N),v&=~N}if(u=rn,f=wt,f=R(o,o===u?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,f===0||o===u&&($t===2||$t===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Pt(m),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||j(o,f)){if(u=f&-f,u===o.callbackPriority)return u;switch(m!==null&&Pt(m),dr(f)){case 2:case 8:f=be;break;case 32:f=Fe;break;case 268435456:f=mt;break;default:f=Fe}return m=wM.bind(null,o),f=In(f,m),o.callbackPriority=u,o.callbackNode=f,u}return m!==null&&m!==null&&Pt(m),o.callbackPriority=2,o.callbackNode=null,2}function wM(o,u){if(nr!==0&&nr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(bp()&&o.callbackNode!==f)return null;var m=wt;return m=R(o,o===rn?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(sM(o,m,u),EM(o,Nt()),o.callbackNode!=null&&o.callbackNode===f?wM.bind(null,o):null)}function CM(o,u){if(bp())return null;sM(o,u,!0)}function dH(){wH(function(){(zt&6)!==0?In(de,hH):SM()})}function Zb(){if(to===0){var o=tu;o===0&&(o=ss,ss<<=1,(ss&261888)===0&&(ss=256)),to=o}return to}function TM(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Fa(""+o)}function AM(o,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,o.id&&f.setAttribute("form",o.id),u.parentNode.insertBefore(f,u),o=new FormData(o),f.parentNode.removeChild(f),o}function fH(o,u,f,m,b){if(u==="submit"&&f&&f.stateNode===b){var v=TM((b[tr]||null).action),T=m.submitter;T&&(u=(u=T[tr]||null)?TM(u.formAction):T.getAttribute("formAction"),u!==null&&(v=u,T=null));var N=new kf("action","action",null,m,b);o.push({event:N,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(to!==0){var Y=T?AM(b,T):new FormData(b);yb(f,{pending:!0,data:Y,method:b.method,action:v},null,Y)}}else typeof v=="function"&&(N.preventDefault(),Y=T?AM(b,T):new FormData(b),yb(f,{pending:!0,data:Y,method:b.method,action:v},v,Y))},currentTarget:b}]})}}for(var Qb=0;Qb<O_.length;Qb++){var Jb=O_[Qb],pH=Jb.toLowerCase(),mH=Jb[0].toUpperCase()+Jb.slice(1);as(pH,"on"+mH)}as(iT,"onAnimationEnd"),as(sT,"onAnimationIteration"),as(aT,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(B9,"onTransitionRun"),as(D9,"onTransitionStart"),as(k9,"onTransitionCancel"),as(oT,"onTransitionEnd"),_e("onMouseEnter",["mouseout","mouseover"]),_e("onMouseLeave",["mouseout","mouseover"]),_e("onPointerEnter",["pointerout","pointerover"]),_e("onPointerLeave",["pointerout","pointerover"]),Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Js("onBeforeInput",["compositionend","keypress","textInput","paste"]),Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xh));function MM(o,u){u=(u&4)!==0;for(var f=0;f<o.length;f++){var m=o[f],b=m.event;m=m.listeners;e:{var v=void 0;if(u)for(var T=m.length-1;0<=T;T--){var N=m[T],Y=N.instance,ae=N.currentTarget;if(N=N.listener,Y!==v&&b.isPropagationStopped())break e;v=N,b.currentTarget=ae;try{v(b)}catch(pe){Nf(pe)}b.currentTarget=null,v=Y}else for(T=0;T<m.length;T++){if(N=m[T],Y=N.instance,ae=N.currentTarget,N=N.listener,Y!==v&&b.isPropagationStopped())break e;v=N,b.currentTarget=ae;try{v(b)}catch(pe){Nf(pe)}b.currentTarget=null,v=Y}}}}function vt(o,u){var f=u[Oa];f===void 0&&(f=u[Oa]=new Set);var m=o+"__bubble";f.has(m)||(RM(u,o,2,!1),f.add(m))}function e0(o,u,f){var m=0;u&&(m|=4),RM(f,o,m,u)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function t0(o){if(!o[Sp]){o[Sp]=!0,Cf.forEach(function(f){f!=="selectionchange"&&(gH.has(f)||e0(f,!1,o),e0(f,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Sp]||(u[Sp]=!0,e0("selectionchange",!1,u))}}function RM(o,u,f,m){switch(iR(u)){case 2:var b=jH;break;case 8:b=XH;break;default:b=g0}f=b.bind(null,u,f,o),b=void 0,!v_||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),m?b!==void 0?o.addEventListener(u,f,{capture:!0,passive:b}):o.addEventListener(u,f,!0):b!==void 0?o.addEventListener(u,f,{passive:b}):o.addEventListener(u,f,!1)}function n0(o,u,f,m,b){var v=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var N=m.stateNode.containerInfo;if(N===b)break;if(T===4)for(T=m.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;N!==null;){if(T=Or(N),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){m=v=T;continue e}N=N.parentNode}}m=m.return}Rf(function(){var ae=v,pe=ot(f),ge=[];e:{var oe=lT.get(o);if(oe!==void 0){var ce=kf,Re=o;switch(o){case"keypress":if(Bf(f)===0)break e;case"keydown":case"keyup":ce=u9;break;case"focusin":Re="focus",ce=C_;break;case"focusout":Re="blur",ce=C_;break;case"beforeblur":case"afterblur":ce=C_;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=LC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ZV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=d9;break;case iT:case sT:case aT:ce=e9;break;case oT:ce=p9;break;case"scroll":case"scrollend":ce=YV;break;case"wheel":ce=g9;break;case"copy":case"cut":case"paste":ce=n9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=UC;break;case"toggle":case"beforetoggle":ce=_9}var qe=(u&4)!==0,en=!qe&&(o==="scroll"||o==="scrollend"),re=qe?oe!==null?oe+"Capture":null:oe;qe=[];for(var ee=ae,se;ee!==null;){var me=ee;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||re===null||(me=Vc(ee,re),me!=null&&qe.push(vh(ee,me,se))),en)break;ee=ee.return}0<qe.length&&(oe=new ce(oe,Re,null,f,pe),ge.push({event:oe,listeners:qe}))}}if((u&7)===0){e:{if(oe=o==="mouseover"||o==="pointerover",ce=o==="mouseout"||o==="pointerout",oe&&f!==Oe&&(Re=f.relatedTarget||f.fromElement)&&(Or(Re)||Re[kr]))break e;if((ce||oe)&&(oe=pe.window===pe?pe:(oe=pe.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(Re=f.relatedTarget||f.toElement,ce=ae,Re=Re?Or(Re):null,Re!==null&&(en=s(Re),qe=Re.tag,Re!==en||qe!==5&&qe!==27&&qe!==6)&&(Re=null)):(ce=null,Re=ae),ce!==Re)){if(qe=LC,me="onMouseLeave",re="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(qe=UC,me="onPointerLeave",re="onPointerEnter",ee="pointer"),en=ce==null?oe:Ia(ce),se=Re==null?oe:Ia(Re),oe=new qe(me,ee+"leave",ce,f,pe),oe.target=en,oe.relatedTarget=se,me=null,Or(pe)===ae&&(qe=new qe(re,ee+"enter",Re,f,pe),qe.target=se,qe.relatedTarget=en,me=qe),en=me,ce&&Re)t:{for(qe=yH,re=ce,ee=Re,se=0,me=re;me;me=qe(me))se++;me=0;for(var Ve=ee;Ve;Ve=qe(Ve))me++;for(;0<se-me;)re=qe(re),se--;for(;0<me-se;)ee=qe(ee),me--;for(;se--;){if(re===ee||ee!==null&&re===ee.alternate){qe=re;break t}re=qe(re),ee=qe(ee)}qe=null}else qe=null;ce!==null&&PM(ge,oe,ce,qe,!1),Re!==null&&en!==null&&PM(ge,en,Re,qe,!0)}}e:{if(oe=ae?Ia(ae):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ut=$C;else if(XC(oe))if(qC)Ut=M9;else{Ut=T9;var Ie=C9}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&La(ae.elementType)&&(Ut=$C):Ut=A9;if(Ut&&(Ut=Ut(o,ae))){WC(ge,Ut,f,pe);break e}Ie&&Ie(o,oe,ae),o==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&jl(oe,"number",oe.value)}switch(Ie=ae?Ia(ae):window,o){case"focusin":(XC(Ie)||Ie.contentEditable==="true")&&($l=Ie,B_=ae,Kc=null);break;case"focusout":Kc=B_=$l=null;break;case"mousedown":D_=!0;break;case"contextmenu":case"mouseup":case"dragend":D_=!1,nT(ge,f,pe);break;case"selectionchange":if(P9)break;case"keydown":case"keyup":nT(ge,f,pe)}var dt;if(A_)e:{switch(o){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Wl?HC(o,f)&&(Ct="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ct="onCompositionStart");Ct&&(GC&&f.locale!=="ko"&&(Wl||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Wl&&(dt=IC()):(Ua=pe,S_="value"in Ua?Ua.value:Ua.textContent,Wl=!0)),Ie=Ep(ae,Ct),0<Ie.length&&(Ct=new FC(Ct,o,null,f,pe),ge.push({event:Ct,listeners:Ie}),dt?Ct.data=dt:(dt=jC(f),dt!==null&&(Ct.data=dt)))),(dt=x9?v9(o,f):S9(o,f))&&(Ct=Ep(ae,"onBeforeInput"),0<Ct.length&&(Ie=new FC("onBeforeInput","beforeinput",null,f,pe),ge.push({event:Ie,listeners:Ct}),Ie.data=dt)),fH(ge,o,ae,f,pe)}MM(ge,u)})}function vh(o,u,f){return{instance:o,listener:u,currentTarget:f}}function Ep(o,u){for(var f=u+"Capture",m=[];o!==null;){var b=o,v=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||v===null||(b=Vc(o,f),b!=null&&m.unshift(vh(o,b,v)),b=Vc(o,u),b!=null&&m.push(vh(o,b,v))),o.tag===3)return m;o=o.return}return[]}function yH(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function PM(o,u,f,m,b){for(var v=u._reactName,T=[];f!==null&&f!==m;){var N=f,Y=N.alternate,ae=N.stateNode;if(N=N.tag,Y!==null&&Y===m)break;N!==5&&N!==26&&N!==27||ae===null||(Y=ae,b?(ae=Vc(f,v),ae!=null&&T.unshift(vh(f,ae,Y))):b||(ae=Vc(f,v),ae!=null&&T.push(vh(f,ae,Y)))),f=f.return}T.length!==0&&o.push({event:u,listeners:T})}var _H=/\r\n?/g,bH=/\u0000|\uFFFD/g;function BM(o){return(typeof o=="string"?o:""+o).replace(_H,`
`).replace(bH,"")}function DM(o,u){return u=BM(u),BM(o)===u}function Jt(o,u,f,m,b,v){switch(f){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Ye(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Ye(o,""+m);break;case"className":_i(o,"class",m);break;case"tabIndex":_i(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(o,f,m);break;case"style":Wt(o,m,v);break;case"data":if(u!=="object"){_i(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||f!=="href")){o.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(f);break}m=Fa(""+m),o.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(f==="formAction"?(u!=="input"&&Jt(o,u,"name",b.name,b,null),Jt(o,u,"formEncType",b.formEncType,b,null),Jt(o,u,"formMethod",b.formMethod,b,null),Jt(o,u,"formTarget",b.formTarget,b,null)):(Jt(o,u,"encType",b.encType,b,null),Jt(o,u,"method",b.method,b,null),Jt(o,u,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(f);break}m=Fa(""+m),o.setAttribute(f,m);break;case"onClick":m!=null&&(o.onclick=Ee);break;case"onScroll":m!=null&&vt("scroll",o);break;case"onScrollEnd":m!=null&&vt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}f=Fa(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,""+m):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":m===!0?o.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,m):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(f,m):o.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(f):o.setAttribute(f,m);break;case"popover":vt("beforetoggle",o),vt("toggle",o),wr(o,"popover",m);break;case"xlinkActuate":$r(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$r(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$r(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$r(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$r(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$r(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$r(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$r(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$r(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":wr(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ea.get(f)||f,wr(o,f,m))}}function r0(o,u,f,m,b,v){switch(f){case"style":Wt(o,m,v);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof m=="string"?Ye(o,m):(typeof m=="number"||typeof m=="bigint")&&Ye(o,""+m);break;case"onScroll":m!=null&&vt("scroll",o);break;case"onScrollEnd":m!=null&&vt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Ee);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),v=o[tr]||null,v=v!=null?v[f]:null,typeof v=="function"&&o.removeEventListener(u,v,b),typeof m=="function")){typeof v!="function"&&v!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(u,m,b);break e}f in o?o[f]=m:m===!0?o.setAttribute(f,""):wr(o,f,m)}}}function _r(o,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",o),vt("load",o);var m=!1,b=!1,v;for(v in f)if(f.hasOwnProperty(v)){var T=f[v];if(T!=null)switch(v){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Jt(o,u,v,T,f,null)}}b&&Jt(o,u,"srcSet",f.srcSet,f,null),m&&Jt(o,u,"src",f.src,f,null);return;case"input":vt("invalid",o);var N=v=T=b=null,Y=null,ae=null;for(m in f)if(f.hasOwnProperty(m)){var pe=f[m];if(pe!=null)switch(m){case"name":b=pe;break;case"type":T=pe;break;case"checked":Y=pe;break;case"defaultChecked":ae=pe;break;case"value":v=pe;break;case"defaultValue":N=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,u));break;default:Jt(o,u,m,pe,f,null)}}No(o,v,N,Y,ae,T,b,!1);return;case"select":vt("invalid",o),m=T=v=null;for(b in f)if(f.hasOwnProperty(b)&&(N=f[b],N!=null))switch(b){case"value":v=N;break;case"defaultValue":T=N;break;case"multiple":m=N;default:Jt(o,u,b,N,f,null)}u=v,f=T,o.multiple=!!m,u!=null?pr(o,!!m,u,!1):f!=null&&pr(o,!!m,f,!0);return;case"textarea":vt("invalid",o),v=b=m=null;for(T in f)if(f.hasOwnProperty(T)&&(N=f[T],N!=null))switch(T){case"value":m=N;break;case"defaultValue":b=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:Jt(o,u,T,N,f,null)}Xl(o,m,b,v);return;case"option":for(Y in f)f.hasOwnProperty(Y)&&(m=f[Y],m!=null)&&(Y==="selected"?o.selected=m&&typeof m!="function"&&typeof m!="symbol":Jt(o,u,Y,m,f,null));return;case"dialog":vt("beforetoggle",o),vt("toggle",o),vt("cancel",o),vt("close",o);break;case"iframe":case"object":vt("load",o);break;case"video":case"audio":for(m=0;m<xh.length;m++)vt(xh[m],o);break;case"image":vt("error",o),vt("load",o);break;case"details":vt("toggle",o);break;case"embed":case"source":case"link":vt("error",o),vt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in f)if(f.hasOwnProperty(ae)&&(m=f[ae],m!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Jt(o,u,ae,m,f,null)}return;default:if(La(u)){for(pe in f)f.hasOwnProperty(pe)&&(m=f[pe],m!==void 0&&r0(o,u,pe,m,f,void 0));return}}for(N in f)f.hasOwnProperty(N)&&(m=f[N],m!=null&&Jt(o,u,N,m,f,null))}function xH(o,u,f,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,v=null,T=null,N=null,Y=null,ae=null,pe=null;for(ce in f){var ge=f[ce];if(f.hasOwnProperty(ce)&&ge!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Y=ge;default:m.hasOwnProperty(ce)||Jt(o,u,ce,null,m,ge)}}for(var oe in m){var ce=m[oe];if(ge=f[oe],m.hasOwnProperty(oe)&&(ce!=null||ge!=null))switch(oe){case"type":v=ce;break;case"name":b=ce;break;case"checked":ae=ce;break;case"defaultChecked":pe=ce;break;case"value":T=ce;break;case"defaultValue":N=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:ce!==ge&&Jt(o,u,oe,ce,m,ge)}}Uc(o,T,N,Y,ae,pe,v,b);return;case"select":ce=T=N=oe=null;for(v in f)if(Y=f[v],f.hasOwnProperty(v)&&Y!=null)switch(v){case"value":break;case"multiple":ce=Y;default:m.hasOwnProperty(v)||Jt(o,u,v,null,m,Y)}for(b in m)if(v=m[b],Y=f[b],m.hasOwnProperty(b)&&(v!=null||Y!=null))switch(b){case"value":oe=v;break;case"defaultValue":N=v;break;case"multiple":T=v;default:v!==Y&&Jt(o,u,b,v,m,Y)}u=N,f=T,m=ce,oe!=null?pr(o,!!f,oe,!1):!!m!=!!f&&(u!=null?pr(o,!!f,u,!0):pr(o,!!f,f?[]:"",!1));return;case"textarea":ce=oe=null;for(N in f)if(b=f[N],f.hasOwnProperty(N)&&b!=null&&!m.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Jt(o,u,N,null,m,b)}for(T in m)if(b=m[T],v=f[T],m.hasOwnProperty(T)&&(b!=null||v!=null))switch(T){case"value":oe=b;break;case"defaultValue":ce=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==v&&Jt(o,u,T,b,m,v)}Af(o,oe,ce);return;case"option":for(var Re in f)oe=f[Re],f.hasOwnProperty(Re)&&oe!=null&&!m.hasOwnProperty(Re)&&(Re==="selected"?o.selected=!1:Jt(o,u,Re,null,m,oe));for(Y in m)oe=m[Y],ce=f[Y],m.hasOwnProperty(Y)&&oe!==ce&&(oe!=null||ce!=null)&&(Y==="selected"?o.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":Jt(o,u,Y,oe,m,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in f)oe=f[qe],f.hasOwnProperty(qe)&&oe!=null&&!m.hasOwnProperty(qe)&&Jt(o,u,qe,null,m,oe);for(ae in m)if(oe=m[ae],ce=f[ae],m.hasOwnProperty(ae)&&oe!==ce&&(oe!=null||ce!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,u));break;default:Jt(o,u,ae,oe,m,ce)}return;default:if(La(u)){for(var en in f)oe=f[en],f.hasOwnProperty(en)&&oe!==void 0&&!m.hasOwnProperty(en)&&r0(o,u,en,void 0,m,oe);for(pe in m)oe=m[pe],ce=f[pe],!m.hasOwnProperty(pe)||oe===ce||oe===void 0&&ce===void 0||r0(o,u,pe,oe,m,ce);return}}for(var re in f)oe=f[re],f.hasOwnProperty(re)&&oe!=null&&!m.hasOwnProperty(re)&&Jt(o,u,re,null,m,oe);for(ge in m)oe=m[ge],ce=f[ge],!m.hasOwnProperty(ge)||oe===ce||oe==null&&ce==null||Jt(o,u,ge,oe,m,ce)}function kM(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vH(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var b=f[m],v=b.transferSize,T=b.initiatorType,N=b.duration;if(v&&N&&kM(T)){for(T=0,N=b.responseEnd,m+=1;m<f.length;m++){var Y=f[m],ae=Y.startTime;if(ae>N)break;var pe=Y.transferSize,ge=Y.initiatorType;pe&&kM(ge)&&(Y=Y.responseEnd,T+=pe*(Y<N?1:(N-ae)/(Y-ae)))}if(--m,u+=8*(v+T)/(b.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var i0=null,s0=null;function wp(o){return o.nodeType===9?o:o.ownerDocument}function OM(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IM(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function a0(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var o0=null;function SH(){var o=window.event;return o&&o.type==="popstate"?o===o0?!1:(o0=o,!0):(o0=null,!1)}var NM=typeof setTimeout=="function"?setTimeout:void 0,EH=typeof clearTimeout=="function"?clearTimeout:void 0,LM=typeof Promise=="function"?Promise:void 0,wH=typeof queueMicrotask=="function"?queueMicrotask:typeof LM<"u"?function(o){return LM.resolve(null).then(o).catch(CH)}:NM;function CH(o){setTimeout(function(){throw o})}function no(o){return o==="head"}function FM(o,u){var f=u,m=0;do{var b=f.nextSibling;if(o.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(m===0){o.removeChild(b),xu(u);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")Sh(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,Sh(f);for(var v=f.firstChild;v;){var T=v.nextSibling,N=v.nodeName;v[Oo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||f.removeChild(v),v=T}}else f==="body"&&Sh(o.ownerDocument.body);f=b}while(f);xu(u)}function UM(o,u){var f=o;o=0;do{var m=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=m}while(f)}function l0(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":l0(f),Lc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function TH(o,u,f,m){for(;o.nodeType===1;){var b=f;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Oo])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var v=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=ji(o.nextSibling),o===null)break}return null}function AH(o,u,f){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ji(o.nextSibling),o===null))return null;return o}function GM(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ji(o.nextSibling),o===null))return null;return o}function u0(o){return o.data==="$?"||o.data==="$~"}function c0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function MH(o,u){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||f.readyState!=="loading")u();else{var m=function(){u(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function ji(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var h0=null;function zM(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(u===0)return ji(o.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}o=o.nextSibling}return null}function VM(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return o;u--}else f!=="/$"&&f!=="/&"||u++}o=o.previousSibling}return null}function HM(o,u,f){switch(u=wp(f),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Sh(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Lc(o)}var Xi=new Map,jM=new Set;function Cp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ga=X.d;X.d={f:RH,r:PH,D:BH,C:DH,L:kH,m:OH,X:NH,S:IH,M:LH};function RH(){var o=ga.f(),u=gp();return o||u}function PH(o){var u=Qs(o);u!==null&&u.tag===5&&u.type==="form"?oA(u):ga.r(o)}var yu=typeof document>"u"?null:document;function XM(o,u,f){var m=yu;if(m&&typeof u=="string"&&u){var b=qr(u);b='link[rel="'+o+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),jM.has(b)||(jM.add(b),o={rel:o,crossOrigin:f,href:u},m.querySelector(b)===null&&(u=m.createElement("link"),_r(u,"link",o),Hn(u),m.head.appendChild(u)))}}function BH(o){ga.D(o),XM("dns-prefetch",o,null)}function DH(o,u){ga.C(o,u),XM("preconnect",o,u)}function kH(o,u,f){ga.L(o,u,f);var m=yu;if(m&&o&&u){var b='link[rel="preload"][as="'+qr(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+qr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+qr(f.imageSizes)+'"]')):b+='[href="'+qr(o)+'"]';var v=b;switch(u){case"style":v=_u(o);break;case"script":v=bu(o)}Xi.has(v)||(o=p({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:o,as:u},f),Xi.set(v,o),m.querySelector(b)!==null||u==="style"&&m.querySelector(Eh(v))||u==="script"&&m.querySelector(wh(v))||(u=m.createElement("link"),_r(u,"link",o),Hn(u),m.head.appendChild(u)))}}function OH(o,u){ga.m(o,u);var f=yu;if(f&&o){var m=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+qr(m)+'"][href="'+qr(o)+'"]',v=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=bu(o)}if(!Xi.has(v)&&(o=p({rel:"modulepreload",href:o},u),Xi.set(v,o),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(wh(v)))return}m=f.createElement("link"),_r(m,"link",o),Hn(m),f.head.appendChild(m)}}}function IH(o,u,f){ga.S(o,u,f);var m=yu;if(m&&o){var b=Na(m).hoistableStyles,v=_u(o);u=u||"default";var T=b.get(v);if(!T){var N={loading:0,preload:null};if(T=m.querySelector(Eh(v)))N.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},f),(f=Xi.get(v))&&d0(o,f);var Y=T=m.createElement("link");Hn(Y),_r(Y,"link",o),Y._p=new Promise(function(ae,pe){Y.onload=ae,Y.onerror=pe}),Y.addEventListener("load",function(){N.loading|=1}),Y.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Tp(T,u,m)}T={type:"stylesheet",instance:T,count:1,state:N},b.set(v,T)}}}function NH(o,u){ga.X(o,u);var f=yu;if(f&&o){var m=Na(f).hoistableScripts,b=bu(o),v=m.get(b);v||(v=f.querySelector(wh(b)),v||(o=p({src:o,async:!0},u),(u=Xi.get(b))&&f0(o,u),v=f.createElement("script"),Hn(v),_r(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(b,v))}}function LH(o,u){ga.M(o,u);var f=yu;if(f&&o){var m=Na(f).hoistableScripts,b=bu(o),v=m.get(b);v||(v=f.querySelector(wh(b)),v||(o=p({src:o,async:!0,type:"module"},u),(u=Xi.get(b))&&f0(o,u),v=f.createElement("script"),Hn(v),_r(v,"link",o),f.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(b,v))}}function WM(o,u,f,m){var b=(b=ve.current)?Cp(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=_u(f.href),f=Na(b).hoistableStyles,m=f.get(u),m||(m={type:"style",instance:null,count:0,state:null},f.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=_u(f.href);var v=Na(b).hoistableStyles,T=v.get(o);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,T),(v=b.querySelector(Eh(o)))&&!v._p&&(T.instance=v,T.state.loading=5),Xi.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Xi.set(o,f),v||FH(b,o,f,T.state))),u&&m===null)throw Error(r(528,""));return T}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=bu(f),f=Na(b).hoistableScripts,m=f.get(u),m||(m={type:"script",instance:null,count:0,state:null},f.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function _u(o){return'href="'+qr(o)+'"'}function Eh(o){return'link[rel="stylesheet"]['+o+"]"}function $M(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function FH(o,u,f,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),_r(u,"link",f),Hn(u),o.head.appendChild(u))}function bu(o){return'[src="'+qr(o)+'"]'}function wh(o){return"script[async]"+o}function qM(o,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+qr(f.href)+'"]');if(m)return u.instance=m,Hn(m),m;var b=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Hn(m),_r(m,"style",b),Tp(m,f.precedence,o),u.instance=m;case"stylesheet":b=_u(f.href);var v=o.querySelector(Eh(b));if(v)return u.state.loading|=4,u.instance=v,Hn(v),v;m=$M(f),(b=Xi.get(b))&&d0(m,b),v=(o.ownerDocument||o).createElement("link"),Hn(v);var T=v;return T._p=new Promise(function(N,Y){T.onload=N,T.onerror=Y}),_r(v,"link",m),u.state.loading|=4,Tp(v,f.precedence,o),u.instance=v;case"script":return v=bu(f.src),(b=o.querySelector(wh(v)))?(u.instance=b,Hn(b),b):(m=f,(b=Xi.get(v))&&(m=p({},f),f0(m,b)),o=o.ownerDocument||o,b=o.createElement("script"),Hn(b),_r(b,"link",m),o.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,Tp(m,f.precedence,o));return u.instance}function Tp(o,u,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,v=b,T=0;T<m.length;T++){var N=m[T];if(N.dataset.precedence===u)v=N;else if(v!==b)break}v?v.parentNode.insertBefore(o,v.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(o,u.firstChild))}function d0(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function f0(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Ap=null;function YM(o,u,f){if(Ap===null){var m=new Map,b=Ap=new Map;b.set(f,m)}else b=Ap,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(o))return m;for(m.set(o,null),f=f.getElementsByTagName(o),b=0;b<f.length;b++){var v=f[b];if(!(v[Oo]||v[_t]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(u)||"";T=o+T;var N=m.get(T);N?N.push(v):m.set(T,[v])}}return m}function KM(o,u,f){o=o.ownerDocument||o,o.head.insertBefore(f,u==="title"?o.querySelector("head > title"):null)}function UH(o,u,f){if(f===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function ZM(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function GH(o,u,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=_u(m.href),v=u.querySelector(Eh(b));if(v){u=v._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Mp.bind(o),u.then(o,o)),f.state.loading|=4,f.instance=v,Hn(v);return}v=u.ownerDocument||u,m=$M(m),(b=Xi.get(b))&&d0(m,b),v=v.createElement("link"),Hn(v);var T=v;T._p=new Promise(function(N,Y){T.onload=N,T.onerror=Y}),_r(v,"link",m),f.instance=v}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Mp.bind(o),u.addEventListener("load",f),u.addEventListener("error",f))}}var p0=0;function zH(o,u){return o.stylesheets&&o.count===0&&Pp(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var m=setTimeout(function(){if(o.stylesheets&&Pp(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4+u);0<o.imgBytes&&p0===0&&(p0=62500*vH());var b=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Pp(o,o.stylesheets),o.unsuspend)){var v=o.unsuspend;o.unsuspend=null,v()}},(o.imgBytes>p0?50:800)+u);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Mp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Rp=null;function Pp(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Rp=new Map,u.forEach(VH,o),Rp=null,Mp.call(o))}function VH(o,u){if(!(u.state.loading&4)){var f=Rp.get(o);if(f)var m=f.get(null);else{f=new Map,Rp.set(o,f);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<b.length;v++){var T=b[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),m=T)}m&&f.set(null,m)}b=u.instance,T=b.getAttribute("data-precedence"),v=f.get(T)||m,v===m&&f.set(null,b),f.set(T,b),this.count++,m=Mp.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),v?v.parentNode.insertBefore(b,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),u.state.loading|=4}}var Ch={$$typeof:C,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function HH(o,u,f,m,b,v,T,N,Y){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function QM(o,u,f,m,b,v,T,N,Y,ae,pe,ge){return o=new HH(o,u,f,T,Y,ae,pe,ge,N),u=1,v===!0&&(u|=24),v=vi(3,null,null,u),o.current=v,v.stateNode=o,u=$_(),u.refCount++,o.pooledCache=u,u.refCount++,v.memoizedState={element:m,isDehydrated:f,cache:u},Z_(v),o}function JM(o){return o?(o=Kl,o):Kl}function eR(o,u,f,m,b,v){b=JM(b),m.context===null?m.context=b:m.pendingContext=b,m=Xa(u),m.payload={element:f},v=v===void 0?null:v,v!==null&&(m.callback=v),f=Wa(o,m,u),f!==null&&(ei(f,o,u),rh(f,o,u))}function tR(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<u?f:u}}function m0(o,u){tR(o,u),(o=o.alternate)&&tR(o,u)}function nR(o){if(o.tag===13||o.tag===31){var u=Go(o,67108864);u!==null&&ei(u,o,67108864),m0(o,67108864)}}function rR(o){if(o.tag===13||o.tag===31){var u=Ti();u=Ft(u);var f=Go(o,u);f!==null&&ei(f,o,u),m0(o,u)}}var Bp=!0;function jH(o,u,f,m){var b=z.T;z.T=null;var v=X.p;try{X.p=2,g0(o,u,f,m)}finally{X.p=v,z.T=b}}function XH(o,u,f,m){var b=z.T;z.T=null;var v=X.p;try{X.p=8,g0(o,u,f,m)}finally{X.p=v,z.T=b}}function g0(o,u,f,m){if(Bp){var b=y0(m);if(b===null)n0(o,u,m,Dp,f),sR(o,m);else if($H(b,o,u,f,m))m.stopPropagation();else if(sR(o,m),u&4&&-1<WH.indexOf(o)){for(;b!==null;){var v=Qs(b);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=F(v.pendingLanes);if(T!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;T;){var Y=1<<31-Lt(T);N.entanglements[1]|=Y,T&=~Y}Rs(v),(zt&6)===0&&(pp=Nt()+500,bh(0))}}break;case 31:case 13:N=Go(v,2),N!==null&&ei(N,v,2),gp(),m0(v,2)}if(v=y0(m),v===null&&n0(o,u,m,Dp,f),v===b)break;b=v}b!==null&&m.stopPropagation()}else n0(o,u,m,null,f)}}function y0(o){return o=ot(o),_0(o)}var Dp=null;function _0(o){if(Dp=null,o=Or(o),o!==null){var u=s(o);if(u===null)o=null;else{var f=u.tag;if(f===13){if(o=a(u),o!==null)return o;o=null}else if(f===31){if(o=l(u),o!==null)return o;o=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Dp=o,null}function iR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yi()){case de:return 2;case be:return 8;case Fe:case et:return 32;case mt:return 268435456;default:return 32}default:return 32}}var b0=!1,ro=null,io=null,so=null,Th=new Map,Ah=new Map,ao=[],WH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sR(o,u){switch(o){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Th.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(u.pointerId)}}function Mh(o,u,f,m,b,v){return o===null||o.nativeEvent!==v?(o={blockedOn:u,domEventName:f,eventSystemFlags:m,nativeEvent:v,targetContainers:[b]},u!==null&&(u=Qs(u),u!==null&&nR(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),o)}function $H(o,u,f,m,b){switch(u){case"focusin":return ro=Mh(ro,o,u,f,m,b),!0;case"dragenter":return io=Mh(io,o,u,f,m,b),!0;case"mouseover":return so=Mh(so,o,u,f,m,b),!0;case"pointerover":var v=b.pointerId;return Th.set(v,Mh(Th.get(v)||null,o,u,f,m,b)),!0;case"gotpointercapture":return v=b.pointerId,Ah.set(v,Mh(Ah.get(v)||null,o,u,f,m,b)),!0}return!1}function aR(o){var u=Or(o.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){o.blockedOn=u,Wr(o.priority,function(){rR(f)});return}}else if(u===31){if(u=l(f),u!==null){o.blockedOn=u,Wr(o.priority,function(){rR(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function kp(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var f=y0(o.nativeEvent);if(f===null){f=o.nativeEvent;var m=new f.constructor(f.type,f);Oe=m,f.target.dispatchEvent(m),Oe=null}else return u=Qs(f),u!==null&&nR(u),o.blockedOn=f,!1;u.shift()}return!0}function oR(o,u,f){kp(o)&&f.delete(u)}function qH(){b0=!1,ro!==null&&kp(ro)&&(ro=null),io!==null&&kp(io)&&(io=null),so!==null&&kp(so)&&(so=null),Th.forEach(oR),Ah.forEach(oR)}function Op(o,u){o.blockedOn===u&&(o.blockedOn=null,b0||(b0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qH)))}var Ip=null;function lR(o){Ip!==o&&(Ip=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ip===o&&(Ip=null);for(var u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],b=o[u+2];if(typeof m!="function"){if(_0(m||f)===null)continue;break}var v=Qs(f);v!==null&&(o.splice(u,3),u-=3,yb(v,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function xu(o){function u(Y){return Op(Y,o)}ro!==null&&Op(ro,o),io!==null&&Op(io,o),so!==null&&Op(so,o),Th.forEach(u),Ah.forEach(u);for(var f=0;f<ao.length;f++){var m=ao[f];m.blockedOn===o&&(m.blockedOn=null)}for(;0<ao.length&&(f=ao[0],f.blockedOn===null);)aR(f),f.blockedOn===null&&ao.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],v=f[m+1],T=b[tr]||null;if(typeof v=="function")T||lR(f);else if(T){var N=null;if(v&&v.hasAttribute("formAction")){if(b=v,T=v[tr]||null)N=T.formAction;else if(_0(b)!==null)continue}else N=T.action;typeof N=="function"?f[m+1]=N:(f.splice(m,3),m-=3),lR(f)}}}function uR(){function o(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function x0(o){this._internalRoot=o}Np.prototype.render=x0.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,m=Ti();eR(f,m,o,u,null,null)},Np.prototype.unmount=x0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;eR(o.current,2,null,o,null,null),gp(),u[kr]=null}};function Np(o){this._internalRoot=o}Np.prototype.unstable_scheduleHydration=function(o){if(o){var u=fr();o={blockedOn:null,target:o,priority:u};for(var f=0;f<ao.length&&u!==0&&u<ao[f].priority;f++);ao.splice(f,0,o),f===0&&aR(o)}};var cR=e.version;if(cR!=="19.2.4")throw Error(r(527,cR,"19.2.4"));X.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=h(u),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var YH={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lp.isDisabled&&Lp.supportsFiber)try{Nn=Lp.inject(YH),dn=Lp}catch{}}return $h.createRoot=function(o,u){if(!i(o))throw Error(r(299));var f=!1,m="",b=yA,v=_A,T=bA;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(v=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=QM(o,1,!1,null,null,f,m,null,b,v,T,uR),o[kr]=u.current,t0(o),new x0(u)},$h.hydrateRoot=function(o,u,f){if(!i(o))throw Error(r(299));var m=!1,b="",v=yA,T=_A,N=bA,Y=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(v=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(N=f.onRecoverableError),f.formState!==void 0&&(Y=f.formState)),u=QM(o,1,!0,u,f??null,m,b,Y,v,T,N,uR),u.context=JM(null),f=u.current,m=Ti(),m=Ft(m),b=Xa(m),b.callback=null,Wa(f,b,m),f=m,u.current.lanes=f,ct(u,f),Rs(u),o[kr]=u.current,t0(o),new Np(u)},$h.version="19.2.4",$h}var vD;function nZ(){if(vD)return mx.exports;vD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mx.exports=tZ(),mx.exports}var rZ=nZ();const iZ=Ol(rZ);var SD="popstate";function sZ(n={}){function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return TS("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Vd(i)}return oZ(e,t,null,n)}function xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Es(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aZ(){return Math.random().toString(36).substring(2,10)}function ED(n,e){return{usr:n.state,key:n.key,idx:e}}function TS(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Mc(e):e,state:t,key:e&&e.key||r||aZ()}}function Vd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Mc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function oZ(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",c=null,h=d();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function d(){return(a.state||{idx:null}).idx}function p(){l="POP";let x=d(),E=x==null?null:x-h;h=x,c&&c({action:l,location:S.location,delta:E})}function g(x,E){l="PUSH";let w=TS(S.location,x,E);h=d()+1;let C=ED(w,h),A=S.createHref(w);try{a.pushState(C,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(A)}s&&c&&c({action:l,location:S.location,delta:1})}function y(x,E){l="REPLACE";let w=TS(S.location,x,E);h=d();let C=ED(w,h),A=S.createHref(w);a.replaceState(C,"",A),s&&c&&c({action:l,location:S.location,delta:0})}function _(x){return lZ(x)}let S={get action(){return l},get location(){return n(i,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(SD,p),c=x,()=>{i.removeEventListener(SD,p),c=null}},createHref(x){return e(i,x)},createURL:_,encodeLocation(x){let E=_(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(x){return a.go(x)}};return S}function lZ(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),xn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Vd(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function L8(n,e,t="/"){return uZ(n,e,t,!1)}function uZ(n,e,t,r){let i=typeof e=="string"?Mc(e):e,s=Ra(i.pathname||"/",t);if(s==null)return null;let a=F8(n);cZ(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=vZ(s);l=bZ(a[c],h,r)}return l}function F8(n,e=[],t=[],r="",i=!1){let s=(a,l,c=i,h)=>{let d={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;xn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=Aa([r,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(xn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),F8(a.children,e,g,p,c)),!(a.path==null&&!a.index)&&e.push({path:p,score:yZ(p,a.index),routesMeta:g})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let c of U8(a.path))s(a,l,!0,c)}),e}function U8(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=U8(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function cZ(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_Z(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var hZ=/^:[\w-]+$/,dZ=3,fZ=2,pZ=1,mZ=10,gZ=-2,wD=n=>n==="*";function yZ(n,e){let t=n.split("/"),r=t.length;return t.some(wD)&&(r+=gZ),e&&(r+=fZ),t.filter(i=>!wD(i)).reduce((i,s)=>i+(hZ.test(s)?dZ:s===""?pZ:mZ),r)}function _Z(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function bZ(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=Ig({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),g=c.route;if(!p&&h&&t&&!r[r.length-1].route.index&&(p=Ig({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Aa([s,p.pathname]),pathnameBase:CZ(Aa([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Aa([s,p.pathnameBase]))}return a}function Ig(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=xZ(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,{paramName:d,isOptional:p},g)=>{if(d==="*"){let _=l[g]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[g];return p&&!y?h[d]=void 0:h[d]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function xZ(n,e=!1,t=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vZ(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ra(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var SZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function EZ(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Mc(n):n,s;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?s=CD(t.substring(1),"/"):s=CD(t,e)):s=e,{pathname:s,search:TZ(r),hash:AZ(i)}}function CD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function bx(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wZ(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xw(n){let e=wZ(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function vw(n,e,t,r=!1){let i;typeof n=="string"?i=Mc(n):(i={...n},xn(!i.pathname||!i.pathname.includes("?"),bx("?","pathname","search",i)),xn(!i.pathname||!i.pathname.includes("#"),bx("#","pathname","hash",i)),xn(!i.search||!i.search.includes("#"),bx("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=t;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=EZ(i,l),h=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var Aa=n=>n.join("/").replace(/\/\/+/g,"/"),CZ=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TZ=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AZ=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,MZ=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function RZ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function PZ(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var G8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function z8(n,e){let t=n;if(typeof t!="string"||!SZ.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(G8)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),l=Ra(a.pathname,e);a.origin===s.origin&&l!=null?t=l+a.search+a.hash:i=!0}catch{Es(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V8=["POST","PUT","PATCH","DELETE"];new Set(V8);var BZ=["GET",...V8];new Set(BZ);var Rc=W.createContext(null);Rc.displayName="DataRouter";var Jy=W.createContext(null);Jy.displayName="DataRouterState";var DZ=W.createContext(!1),H8=W.createContext({isTransitioning:!1});H8.displayName="ViewTransition";var kZ=W.createContext(new Map);kZ.displayName="Fetchers";var OZ=W.createContext(null);OZ.displayName="Await";var Ni=W.createContext(null);Ni.displayName="Navigation";var af=W.createContext(null);af.displayName="Location";var is=W.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var Sw=W.createContext(null);Sw.displayName="RouteError";var j8="REACT_ROUTER_ERROR",IZ="REDIRECT",NZ="ROUTE_ERROR_RESPONSE";function LZ(n){if(n.startsWith(`${j8}:${IZ}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function FZ(n){if(n.startsWith(`${j8}:${NZ}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new MZ(e.status,e.statusText,e.data)}catch{}}function UZ(n,{relative:e}={}){xn(Pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=W.useContext(Ni),{hash:i,pathname:s,search:a}=lf(n,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Aa([t,s])),r.createHref({pathname:l,search:a,hash:i})}function Pc(){return W.useContext(af)!=null}function Po(){return xn(Pc(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(af).location}var X8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W8(n){W.useContext(Ni).static||W.useLayoutEffect(n)}function of(){let{isDataRoute:n}=W.useContext(is);return n?tQ():GZ()}function GZ(){xn(Pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(Rc),{basename:e,navigator:t}=W.useContext(Ni),{matches:r}=W.useContext(is),{pathname:i}=Po(),s=JSON.stringify(xw(r)),a=W.useRef(!1);return W8(()=>{a.current=!0}),W.useCallback((c,h={})=>{if(Es(a.current,X8),!a.current)return;if(typeof c=="number"){t.go(c);return}let d=vw(c,JSON.parse(s),i,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Aa([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,s,i,n])}var zZ=W.createContext(null);function VZ(n){let e=W.useContext(is).outlet;return W.useMemo(()=>e&&W.createElement(zZ.Provider,{value:n},e),[e,n])}function HZ(){let{matches:n}=W.useContext(is),e=n[n.length-1];return e?e.params:{}}function lf(n,{relative:e}={}){let{matches:t}=W.useContext(is),{pathname:r}=Po(),i=JSON.stringify(xw(t));return W.useMemo(()=>vw(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function jZ(n,e){return $8(n,e)}function $8(n,e,t,r,i){xn(Pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=W.useContext(Ni),{matches:a}=W.useContext(is),l=a[a.length-1],c=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let w=p&&p.path||"";Y8(h,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Po(),y;if(e){let w=typeof e=="string"?Mc(e):e;xn(d==="/"||w.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),y=w}else y=g;let _=y.pathname||"/",S=_;if(d!=="/"){let w=d.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=L8(n,{pathname:S});Es(p||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Es(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=YZ(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Aa([d,s.encodeLocation?s.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Aa([d,s.encodeLocation?s.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),a,t,r,i);return e&&E?W.createElement(af.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function XZ(){let n=eQ(),e=RZ(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:s},"ErrorBoundary")," or"," ",W.createElement("code",{style:s},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,a)}var WZ=W.createElement(XZ,null),q8=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=FZ(n.digest);t&&(n=t)}let e=n!==void 0?W.createElement(is.Provider,{value:this.props.routeContext},W.createElement(Sw.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?W.createElement($Z,{error:n},e):e}};q8.contextType=DZ;var xx=new WeakMap;function $Z({children:n,error:e}){let{basename:t}=W.useContext(Ni);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=LZ(e.digest);if(r){let i=xx.get(e);if(i)throw i;let s=z8(r.location,t);if(G8&&!xx.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw xx.set(e,a),a}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function qZ({routeContext:n,match:e,children:t}){let r=W.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(is.Provider,{value:n},t)}function YZ(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let d=s.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);xn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:y}=t,_=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let h=t&&r?(d,p)=>{r(d,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:PZ(t.matches),errorInfo:p})}:void 0;return s.reduceRight((d,p,g)=>{let y,_=!1,S=null,x=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||WZ,l&&(c<0&&g===0?(Y8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,x=null):c===g&&(_=!0,x=p.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),w=()=>{let C;return y?C=S:_?C=x:p.route.Component?C=W.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,W.createElement(qZ,{match:p,routeContext:{outlet:d,matches:E,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?W.createElement(q8,{location:t.location,revalidation:t.revalidation,component:S,error:y,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:h}):w()},null)}function Ew(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KZ(n){let e=W.useContext(Rc);return xn(e,Ew(n)),e}function ZZ(n){let e=W.useContext(Jy);return xn(e,Ew(n)),e}function QZ(n){let e=W.useContext(is);return xn(e,Ew(n)),e}function ww(n){let e=QZ(n),t=e.matches[e.matches.length-1];return xn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function JZ(){return ww("useRouteId")}function eQ(){let n=W.useContext(Sw),e=ZZ("useRouteError"),t=ww("useRouteError");return n!==void 0?n:e.errors?.[t]}function tQ(){let{router:n}=KZ("useNavigate"),e=ww("useNavigate"),t=W.useRef(!1);return W8(()=>{t.current=!0}),W.useCallback(async(i,s={})=>{Es(t.current,X8),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var TD={};function Y8(n,e,t){!e&&!TD[n]&&(TD[n]=!0,Es(!1,t))}W.memo(nQ);function nQ({routes:n,future:e,state:t,onError:r}){return $8(n,void 0,t,r,e)}function Cw({to:n,replace:e,state:t,relative:r}){xn(Pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext(Ni);Es(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=W.useContext(is),{pathname:a}=Po(),l=of(),c=vw(n,xw(s),a,r==="path"),h=JSON.stringify(c);return W.useEffect(()=>{l(JSON.parse(h),{replace:e,state:t,relative:r})},[l,h,r,e,t]),null}function rQ(n){return VZ(n.context)}function co(n){xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iQ({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){xn(!Pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=W.useMemo(()=>({basename:l,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[l,i,s,a]);typeof t=="string"&&(t=Mc(t));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=t,_=W.useMemo(()=>{let S=Ra(h,l);return S==null?null:{location:{pathname:S,search:d,hash:p,state:g,key:y},navigationType:r}},[l,h,d,p,g,y,r]);return Es(_!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:W.createElement(Ni.Provider,{value:c},W.createElement(af.Provider,{children:e,value:_}))}function sQ({children:n,location:e}){return jZ(AS(n),e)}function AS(n,e=[]){let t=[];return W.Children.forEach(n,(r,i)=>{if(!W.isValidElement(r))return;let s=[...e,i];if(r.type===W.Fragment){t.push.apply(t,AS(r.props.children,s));return}xn(r.type===co,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=AS(r.props.children,s)),t.push(a)}),t}var Qm="get",Jm="application/x-www-form-urlencoded";function e_(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function aQ(n){return e_(n)&&n.tagName.toLowerCase()==="button"}function oQ(n){return e_(n)&&n.tagName.toLowerCase()==="form"}function lQ(n){return e_(n)&&n.tagName.toLowerCase()==="input"}function uQ(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cQ(n,e){return n.button===0&&(!e||e==="_self")&&!uQ(n)}var bm=null;function hQ(){if(bm===null)try{new FormData(document.createElement("form"),0),bm=!1}catch{bm=!0}return bm}var dQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vx(n){return n!=null&&!dQ.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jm}"`),null):n}function fQ(n,e){let t,r,i,s,a;if(oQ(n)){let l=n.getAttribute("action");r=l?Ra(l,e):null,t=n.getAttribute("method")||Qm,i=vx(n.getAttribute("enctype"))||Jm,s=new FormData(n)}else if(aQ(n)||lQ(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(r=c?Ra(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||Qm,i=vx(n.getAttribute("formenctype"))||vx(l.getAttribute("enctype"))||Jm,s=new FormData(l,n),!hQ()){let{name:h,type:d,value:p}=n;if(d==="image"){let g=h?`${h}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else h&&s.append(h,p)}}else{if(e_(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qm,r=null,i=Jm,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pQ(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Ra(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function mQ(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gQ(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yQ(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await mQ(s,t);return a.links?a.links():[]}return[]}));return vQ(r.flat(1).filter(gQ).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function AD(n,e,t,r,i,s){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>t[h].pathname!==c.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,h)=>a(c,h)||l(c,h)):s==="data"?e.filter((c,h)=>{let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function _Q(n,e,{includeHydrateFallback:t}={}){return bQ(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function bQ(n){return[...new Set(n)]}function xQ(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function vQ(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(xQ(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function K8(){let n=W.useContext(Rc);return Tw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function SQ(){let n=W.useContext(Jy);return Tw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Aw=W.createContext(void 0);Aw.displayName="FrameworkContext";function Z8(){let n=W.useContext(Aw);return Tw(n,"You must render this element inside a <HydratedRouter> element"),n}function EQ(n,e){let t=W.useContext(Aw),[r,i]=W.useState(!1),[s,a]=W.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:p}=e,g=W.useRef(null);W.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let S=E=>{E.forEach(w=>{a(w.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return g.current&&x.observe(g.current),()=>{x.disconnect()}}},[n]),W.useEffect(()=>{if(r){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[r]);let y=()=>{i(!0)},_=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,g,{}]:[s,g,{onFocus:qh(l,y),onBlur:qh(c,_),onMouseEnter:qh(h,y),onMouseLeave:qh(d,_),onTouchStart:qh(p,y)}]:[!1,g,{}]}function qh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wQ({page:n,...e}){let{router:t}=K8(),r=W.useMemo(()=>L8(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?W.createElement(TQ,{page:n,matches:r,...e}):null}function CQ(n){let{manifest:e,routeModules:t}=Z8(),[r,i]=W.useState([]);return W.useEffect(()=>{let s=!1;return yQ(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function TQ({page:n,matches:e,...t}){let r=Po(),{future:i,manifest:s,routeModules:a}=Z8(),{basename:l}=K8(),{loaderData:c,matches:h}=SQ(),d=W.useMemo(()=>AD(n,e,h,s,r,"data"),[n,e,h,s,r]),p=W.useMemo(()=>AD(n,e,h,s,r,"assets"),[n,e,h,s,r]),g=W.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,x=!1;if(e.forEach(w=>{let C=s.routes[w.route.id];!C||!C.hasLoader||(!d.some(A=>A.route.id===w.route.id)&&w.route.id in c&&a[w.route.id]?.shouldRevalidate||C.hasClientLoader?x=!0:S.add(w.route.id))}),S.size===0)return[];let E=pQ(n,l,i.unstable_trailingSlashAwareDataRequests,"data");return x&&S.size>0&&E.searchParams.set("_routes",e.filter(w=>S.has(w.route.id)).map(w=>w.route.id).join(",")),[E.pathname+E.search]},[l,i.unstable_trailingSlashAwareDataRequests,c,r,s,d,e,n,a]),y=W.useMemo(()=>_Q(p,s),[p,s]),_=CQ(p);return W.createElement(W.Fragment,null,g.map(S=>W.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),y.map(S=>W.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),_.map(({key:S,link:x})=>W.createElement("link",{key:S,nonce:t.nonce,...x,crossOrigin:x.crossOrigin??t.crossOrigin})))}function AQ(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var MQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MQ&&(window.__reactRouterVersion="7.13.0")}catch{}function RQ({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=W.useRef();i.current==null&&(i.current=sZ({window:r,v5Compat:!0}));let s=i.current,[a,l]=W.useState({action:s.action,location:s.location}),c=W.useCallback(h=>{t===!1?l(h):W.startTransition(()=>l(h))},[t]);return W.useLayoutEffect(()=>s.listen(c),[s,c]),W.createElement(iQ,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var Q8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J8=W.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:c,to:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},_){let{basename:S,unstable_useTransitions:x}=W.useContext(Ni),E=typeof h=="string"&&Q8.test(h),w=z8(h,S);h=w.to;let C=UZ(h,{relative:i}),[A,P,M]=EQ(r,y),I=DQ(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:x});function V(D){e&&e(D),D.defaultPrevented||I(D)}let O=W.createElement("a",{...y,...M,href:w.absoluteURL||C,onClick:w.isExternal||s?e:V,ref:AQ(_,P),target:c,"data-discover":!E&&t==="render"?"true":void 0});return A&&!E?W.createElement(W.Fragment,null,O,W.createElement(wQ,{page:C})):O});J8.displayName="Link";var eG=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:c,...h},d){let p=lf(a,{relative:h.relative}),g=Po(),y=W.useContext(Jy),{navigator:_,basename:S}=W.useContext(Ni),x=y!=null&&LQ(p)&&l===!0,E=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,w=g.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(w=w.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&S&&(C=Ra(C,S)||C);const A=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let P=w===E||!i&&w.startsWith(E)&&w.charAt(A)==="/",M=C!=null&&(C===E||!i&&C.startsWith(E)&&C.charAt(E.length)==="/"),I={isActive:P,isPending:M,isTransitioning:x},V=P?e:void 0,O;typeof r=="function"?O=r(I):O=[r,P?"active":null,M?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(I):s;return W.createElement(J8,{...h,"aria-current":V,className:O,ref:d,style:D,to:a,viewTransition:l},typeof c=="function"?c(I):c)});eG.displayName="NavLink";var PQ=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=Qm,action:l,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},_)=>{let{unstable_useTransitions:S}=W.useContext(Ni),x=IQ(),E=NQ(l,{relative:h}),w=a.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&Q8.test(l),A=P=>{if(c&&c(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,I=M?.getAttribute("formmethod")||a,V=()=>x(M||P.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:s,relative:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g});S&&t!==!1?W.startTransition(()=>V()):V()};return W.createElement("form",{ref:_,method:w,action:E,onSubmit:r?c:A,...y,"data-discover":!C&&n==="render"?"true":void 0})});PQ.displayName="Form";function BQ(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tG(n){let e=W.useContext(Rc);return xn(e,BQ(n)),e}function DQ(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let h=of(),d=Po(),p=lf(n,{relative:s});return W.useCallback(g=>{if(cQ(g,e)){g.preventDefault();let y=t!==void 0?t:Vd(d)===Vd(p),_=()=>h(n,{replace:y,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l});c?W.startTransition(()=>_()):_()}},[d,h,p,t,r,e,n,i,s,a,l,c])}var kQ=0,OQ=()=>`__${String(++kQ)}__`;function IQ(){let{router:n}=tG("useSubmit"),{basename:e}=W.useContext(Ni),t=JZ(),r=n.fetch,i=n.navigate;return W.useCallback(async(s,a={})=>{let{action:l,method:c,encType:h,formData:d,body:p}=fQ(s,e);if(a.navigate===!1){let g=a.fetcherKey||OQ();await r(g,t,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await i(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,t])}function NQ(n,{relative:e}={}){let{basename:t}=W.useContext(Ni),r=W.useContext(is);xn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...lf(n||".",{relative:e})},a=Po();if(n==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let d=l.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Aa([t,s.pathname])),Vd(s)}function LQ(n,{relative:e}={}){let t=W.useContext(H8);xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tG("useViewTransitionState"),i=lf(n,{relative:e});if(!t.isTransitioning)return!1;let s=Ra(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Ra(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ig(i.pathname,a)!=null||Ig(i.pathname,s)!=null}var FQ=N8();function nG(n,e){return function(){return n.apply(e,arguments)}}const{toString:UQ}=Object.prototype,{getPrototypeOf:Mw}=Object,{iterator:t_,toStringTag:rG}=Symbol,n_=(n=>e=>{const t=UQ.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Cs=n=>(n=n.toLowerCase(),e=>n_(e)===n),r_=n=>e=>typeof e===n,{isArray:Bc}=Array,gc=r_("undefined");function uf(n){return n!==null&&!gc(n)&&n.constructor!==null&&!gc(n.constructor)&&di(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const iG=Cs("ArrayBuffer");function GQ(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&iG(n.buffer),e}const zQ=r_("string"),di=r_("function"),sG=r_("number"),cf=n=>n!==null&&typeof n=="object",VQ=n=>n===!0||n===!1,eg=n=>{if(n_(n)!=="object")return!1;const e=Mw(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(rG in n)&&!(t_ in n)},HQ=n=>{if(!cf(n)||uf(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},jQ=Cs("Date"),XQ=Cs("File"),WQ=Cs("Blob"),$Q=Cs("FileList"),qQ=n=>cf(n)&&di(n.pipe),YQ=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||di(n.append)&&((e=n_(n))==="formdata"||e==="object"&&di(n.toString)&&n.toString()==="[object FormData]"))},KQ=Cs("URLSearchParams"),[ZQ,QQ,JQ,eJ]=["ReadableStream","Request","Response","Headers"].map(Cs),tJ=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Bc(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(uf(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let l;for(r=0;r<a;r++)l=s[r],e.call(null,n[l],l,n)}}function aG(n,e){if(uf(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oG=n=>!gc(n)&&n!==vl;function MS(){const{caseless:n,skipUndefined:e}=oG(this)&&this||{},t={},r=(i,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const a=n&&aG(t,s)||s;eg(t[a])&&eg(i)?t[a]=MS(t[a],i):eg(i)?t[a]=MS({},i):Bc(i)?t[a]=i.slice():(!e||!gc(i))&&(t[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&hf(arguments[i],r);return t}const nJ=(n,e,t,{allOwnKeys:r}={})=>(hf(e,(i,s)=>{t&&di(i)?Object.defineProperty(n,s,{value:nG(i,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,s,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),n),rJ=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),iJ=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},sJ=(n,e,t,r)=>{let i,s,a;const l={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)a=i[s],(!r||r(a,n,e))&&!l[a]&&(e[a]=n[a],l[a]=!0);n=t!==!1&&Mw(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},aJ=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},oJ=n=>{if(!n)return null;if(Bc(n))return n;let e=n.length;if(!sG(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},lJ=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Mw(Uint8Array)),uJ=(n,e)=>{const r=(n&&n[t_]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},cJ=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},hJ=Cs("HTMLFormElement"),dJ=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),MD=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),fJ=Cs("RegExp"),lG=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};hf(t,(i,s)=>{let a;(a=e(i,s,n))!==!1&&(r[s]=a||i)}),Object.defineProperties(n,r)},pJ=n=>{lG(n,(e,t)=>{if(di(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(di(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},mJ=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Bc(n)?r(n):r(String(n).split(e)),t},gJ=()=>{},yJ=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function _J(n){return!!(n&&di(n.append)&&n[rG]==="FormData"&&n[t_])}const bJ=n=>{const e=new Array(10),t=(r,i)=>{if(cf(r)){if(e.indexOf(r)>=0)return;if(uf(r))return r;if(!("toJSON"in r)){e[i]=r;const s=Bc(r)?[]:{};return hf(r,(a,l)=>{const c=t(a,i+1);!gc(c)&&(s[l]=c)}),e[i]=void 0,s}}return r};return t(n,0)},xJ=Cs("AsyncFunction"),vJ=n=>n&&(cf(n)||di(n))&&di(n.then)&&di(n.catch),uG=((n,e)=>n?setImmediate:e?((t,r)=>(vl.addEventListener("message",({source:i,data:s})=>{i===vl&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),vl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",di(vl.postMessage)),SJ=typeof queueMicrotask<"u"?queueMicrotask.bind(vl):typeof process<"u"&&process.nextTick||uG,EJ=n=>n!=null&&di(n[t_]),ue={isArray:Bc,isArrayBuffer:iG,isBuffer:uf,isFormData:YQ,isArrayBufferView:GQ,isString:zQ,isNumber:sG,isBoolean:VQ,isObject:cf,isPlainObject:eg,isEmptyObject:HQ,isReadableStream:ZQ,isRequest:QQ,isResponse:JQ,isHeaders:eJ,isUndefined:gc,isDate:jQ,isFile:XQ,isBlob:WQ,isRegExp:fJ,isFunction:di,isStream:qQ,isURLSearchParams:KQ,isTypedArray:lJ,isFileList:$Q,forEach:hf,merge:MS,extend:nJ,trim:tJ,stripBOM:rJ,inherits:iJ,toFlatObject:sJ,kindOf:n_,kindOfTest:Cs,endsWith:aJ,toArray:oJ,forEachEntry:uJ,matchAll:cJ,isHTMLForm:hJ,hasOwnProperty:MD,hasOwnProp:MD,reduceDescriptors:lG,freezeMethods:pJ,toObjectSet:mJ,toCamelCase:dJ,noop:gJ,toFiniteNumber:yJ,findKey:aG,global:vl,isContextDefined:oG,isSpecCompliantForm:_J,toJSONObject:bJ,isAsyncFn:xJ,isThenable:vJ,setImmediate:uG,asap:SJ,isIterable:EJ};let Qe=class cG extends Error{static from(e,t,r,i,s,a){const l=new cG(e.message,t||e.code,r,i,s);return l.cause=e,l.name=e.name,a&&Object.assign(l,a),l}constructor(e,t,r,i,s){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}};Qe.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Qe.ERR_BAD_OPTION="ERR_BAD_OPTION";Qe.ECONNABORTED="ECONNABORTED";Qe.ETIMEDOUT="ETIMEDOUT";Qe.ERR_NETWORK="ERR_NETWORK";Qe.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Qe.ERR_DEPRECATED="ERR_DEPRECATED";Qe.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Qe.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Qe.ERR_CANCELED="ERR_CANCELED";Qe.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Qe.ERR_INVALID_URL="ERR_INVALID_URL";const wJ=null;function RS(n){return ue.isPlainObject(n)||ue.isArray(n)}function hG(n){return ue.endsWith(n,"[]")?n.slice(0,-2):n}function RD(n,e,t){return n?n.concat(e).map(function(i,s){return i=hG(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function CJ(n){return ue.isArray(n)&&!n.some(RS)}const TJ=ue.toFlatObject(ue,{},null,function(e){return/^is[A-Z]/.test(e)});function i_(n,e,t){if(!ue.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ue.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,x){return!ue.isUndefined(x[S])});const r=t.metaTokens,i=t.visitor||d,s=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(e);if(!ue.isFunction(i))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(ue.isDate(_))return _.toISOString();if(ue.isBoolean(_))return _.toString();if(!c&&ue.isBlob(_))throw new Qe("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(_)||ue.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function d(_,S,x){let E=_;if(_&&!x&&typeof _=="object"){if(ue.endsWith(S,"{}"))S=r?S:S.slice(0,-2),_=JSON.stringify(_);else if(ue.isArray(_)&&CJ(_)||(ue.isFileList(_)||ue.endsWith(S,"[]"))&&(E=ue.toArray(_)))return S=hG(S),E.forEach(function(C,A){!(ue.isUndefined(C)||C===null)&&e.append(a===!0?RD([S],A,s):a===null?S:S+"[]",h(C))}),!1}return RS(_)?!0:(e.append(RD(x,S,s),h(_)),!1)}const p=[],g=Object.assign(TJ,{defaultVisitor:d,convertValue:h,isVisitable:RS});function y(_,S){if(!ue.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(_),ue.forEach(_,function(E,w){(!(ue.isUndefined(E)||E===null)&&i.call(e,E,ue.isString(w)?w.trim():w,S,g))===!0&&y(E,S?S.concat(w):[w])}),p.pop()}}if(!ue.isObject(n))throw new TypeError("data must be an object");return y(n),e}function PD(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Rw(n,e){this._pairs=[],n&&i_(n,this,e)}const dG=Rw.prototype;dG.append=function(e,t){this._pairs.push([e,t])};dG.toString=function(e){const t=e?function(r){return e.call(this,r,PD)}:PD;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function AJ(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fG(n,e,t){if(!e)return n;const r=t&&t.encode||AJ,i=ue.isFunction(t)?{serialize:t}:t,s=i&&i.serialize;let a;if(s?a=s(e,i):a=ue.isURLSearchParams(e)?e.toString():new Rw(e,i).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class BD{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ue.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Pw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},MJ=typeof URLSearchParams<"u"?URLSearchParams:Rw,RJ=typeof FormData<"u"?FormData:null,PJ=typeof Blob<"u"?Blob:null,BJ={isBrowser:!0,classes:{URLSearchParams:MJ,FormData:RJ,Blob:PJ},protocols:["http","https","file","blob","url","data"]},Bw=typeof window<"u"&&typeof document<"u",PS=typeof navigator=="object"&&navigator||void 0,DJ=Bw&&(!PS||["ReactNative","NativeScript","NS"].indexOf(PS.product)<0),kJ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OJ=Bw&&window.location.href||"http://localhost",IJ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bw,hasStandardBrowserEnv:DJ,hasStandardBrowserWebWorkerEnv:kJ,navigator:PS,origin:OJ},Symbol.toStringTag,{value:"Module"})),Ar={...IJ,...BJ};function NJ(n,e){return i_(n,new Ar.classes.URLSearchParams,{visitor:function(t,r,i,s){return Ar.isNode&&ue.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function LJ(n){return ue.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FJ(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function pG(n){function e(t,r,i,s){let a=t[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=s>=t.length;return a=!a&&ue.isArray(i)?i.length:a,c?(ue.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!l):((!i[a]||!ue.isObject(i[a]))&&(i[a]=[]),e(t,r,i[a],s)&&ue.isArray(i[a])&&(i[a]=FJ(i[a])),!l)}if(ue.isFormData(n)&&ue.isFunction(n.entries)){const t={};return ue.forEachEntry(n,(r,i)=>{e(LJ(r),i,t,0)}),t}return null}function UJ(n,e,t){if(ue.isString(n))try{return(e||JSON.parse)(n),ue.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const df={transitional:Pw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=ue.isObject(e);if(s&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return i?JSON.stringify(pG(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)||ue.isReadableStream(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return NJ(e,this.formSerializer).toString();if((l=ue.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return i_(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),UJ(e)):e}],transformResponse:[function(e){const t=this.transitional||df.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ue.isResponse(e)||ue.isReadableStream(e))return e;if(e&&ue.isString(e)&&(r&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?Qe.from(l,Qe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ar.classes.FormData,Blob:Ar.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],n=>{df.headers[n]={}});const GJ=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zJ=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!t||e[t]&&GJ[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},DD=Symbol("internals");function Yh(n){return n&&String(n).trim().toLowerCase()}function tg(n){return n===!1||n==null?n:ue.isArray(n)?n.map(tg):String(n)}function VJ(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const HJ=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Sx(n,e,t,r,i){if(ue.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ue.isString(e)){if(ue.isString(r))return e.indexOf(r)!==-1;if(ue.isRegExp(r))return r.test(e)}}function jJ(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function XJ(n,e){const t=ue.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}let fi=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(l,c,h){const d=Yh(c);if(!d)throw new Error("header name must be a non-empty string");const p=ue.findKey(i,d);(!p||i[p]===void 0||h===!0||h===void 0&&i[p]!==!1)&&(i[p||c]=tg(l))}const a=(l,c)=>ue.forEach(l,(h,d)=>s(h,d,c));if(ue.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(ue.isString(e)&&(e=e.trim())&&!HJ(e))a(zJ(e),t);else if(ue.isObject(e)&&ue.isIterable(e)){let l={},c,h;for(const d of e){if(!ue.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[h=d[0]]=(c=l[h])?ue.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Yh(e),e){const r=ue.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return VJ(i);if(ue.isFunction(t))return t.call(this,i,r);if(ue.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yh(e),e){const r=ue.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Sx(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(a){if(a=Yh(a),a){const l=ue.findKey(r,a);l&&(!t||Sx(r,r[l],l,t))&&(delete r[l],i=!0)}}return ue.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||Sx(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return ue.forEach(this,(i,s)=>{const a=ue.findKey(r,s);if(a){t[a]=tg(i),delete t[s];return}const l=e?jJ(s):String(s).trim();l!==s&&delete t[s],t[l]=tg(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ue.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ue.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[DD]=this[DD]={accessors:{}}).accessors,i=this.prototype;function s(a){const l=Yh(a);r[l]||(XJ(i,a),r[l]=!0)}return ue.isArray(e)?e.forEach(s):s(e),this}};fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(fi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ue.freezeMethods(fi);function Ex(n,e){const t=this||df,r=e||t,i=fi.from(r.headers);let s=r.data;return ue.forEach(n,function(l){s=l.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function mG(n){return!!(n&&n.__CANCEL__)}let ff=class extends Qe{constructor(e,t,r){super(e??"canceled",Qe.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function gG(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Qe("Request failed with status code "+t.status,[Qe.ERR_BAD_REQUEST,Qe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function WJ(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function $J(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),d=r[s];a||(a=h),t[i]=c,r[i]=h;let p=s,g=0;for(;p!==i;)g+=t[p++],p=p%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),h-a<e)return;const y=d&&h-d;return y?Math.round(g*1e3/y):void 0}}function qJ(n,e){let t=0,r=1e3/e,i,s;const a=(h,d=Date.now())=>{t=d,i=null,s&&(clearTimeout(s),s=null),n(...h)};return[(...h)=>{const d=Date.now(),p=d-t;p>=r?a(h,d):(i=h,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const Ng=(n,e,t=3)=>{let r=0;const i=$J(50,250);return qJ(s=>{const a=s.loaded,l=s.lengthComputable?s.total:void 0,c=a-r,h=i(c),d=a<=l;r=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&d?(l-a)/h:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(p)},t)},kD=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},OD=n=>(...e)=>ue.asap(()=>n(...e)),YJ=Ar.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ar.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ar.origin),Ar.navigator&&/(msie|trident)/i.test(Ar.navigator.userAgent)):()=>!0,KJ=Ar.hasStandardBrowserEnv?{write(n,e,t,r,i,s,a){if(typeof document>"u")return;const l=[`${n}=${encodeURIComponent(e)}`];ue.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),ue.isString(r)&&l.push(`path=${r}`),ue.isString(i)&&l.push(`domain=${i}`),s===!0&&l.push("secure"),ue.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ZJ(n){return typeof n!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function QJ(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function yG(n,e,t){let r=!ZJ(e);return n&&(r||t==!1)?QJ(n,e):e}const ID=n=>n instanceof fi?{...n}:n;function Dl(n,e){e=e||{};const t={};function r(h,d,p,g){return ue.isPlainObject(h)&&ue.isPlainObject(d)?ue.merge.call({caseless:g},h,d):ue.isPlainObject(d)?ue.merge({},d):ue.isArray(d)?d.slice():d}function i(h,d,p,g){if(ue.isUndefined(d)){if(!ue.isUndefined(h))return r(void 0,h,p,g)}else return r(h,d,p,g)}function s(h,d){if(!ue.isUndefined(d))return r(void 0,d)}function a(h,d){if(ue.isUndefined(d)){if(!ue.isUndefined(h))return r(void 0,h)}else return r(void 0,d)}function l(h,d,p){if(p in e)return r(h,d);if(p in n)return r(void 0,h)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(h,d,p)=>i(ID(h),ID(d),p,!0)};return ue.forEach(Object.keys({...n,...e}),function(d){if(d==="__proto__"||d==="constructor"||d==="prototype")return;const p=ue.hasOwnProp(c,d)?c[d]:i,g=p(n[d],e[d],d);ue.isUndefined(g)&&p!==l||(t[d]=g)}),t}const _G=n=>{const e=Dl({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=e;if(e.headers=a=fi.from(a),e.url=fG(yG(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ue.isFormData(t)){if(Ar.hasStandardBrowserEnv||Ar.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ue.isFunction(t.getHeaders)){const c=t.getHeaders(),h=["content-type","content-length"];Object.entries(c).forEach(([d,p])=>{h.includes(d.toLowerCase())&&a.set(d,p)})}}if(Ar.hasStandardBrowserEnv&&(r&&ue.isFunction(r)&&(r=r(e)),r||r!==!1&&YJ(e.url))){const c=i&&s&&KJ.read(s);c&&a.set(i,c)}return e},JJ=typeof XMLHttpRequest<"u",eee=JJ&&function(n){return new Promise(function(t,r){const i=_G(n);let s=i.data;const a=fi.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:h}=i,d,p,g,y,_;function S(){y&&y(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function E(){if(!x)return;const C=fi.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),P={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:n,request:x};gG(function(I){t(I),S()},function(I){r(I),S()},P),x=null}"onloadend"in x?x.onloadend=E:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(E)},x.onabort=function(){x&&(r(new Qe("Request aborted",Qe.ECONNABORTED,n,x)),x=null)},x.onerror=function(A){const P=A&&A.message?A.message:"Network Error",M=new Qe(P,Qe.ERR_NETWORK,n,x);M.event=A||null,r(M),x=null},x.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||Pw;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new Qe(A,P.clarifyTimeoutError?Qe.ETIMEDOUT:Qe.ECONNABORTED,n,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&ue.forEach(a.toJSON(),function(A,P){x.setRequestHeader(P,A)}),ue.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),l&&l!=="json"&&(x.responseType=i.responseType),h&&([g,_]=Ng(h,!0),x.addEventListener("progress",g)),c&&x.upload&&([p,y]=Ng(c),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=C=>{x&&(r(!C||C.type?new ff(null,n,x):C),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const w=WJ(i.url);if(w&&Ar.protocols.indexOf(w)===-1){r(new Qe("Unsupported protocol "+w+":",Qe.ERR_BAD_REQUEST,n));return}x.send(s||null)})},tee=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(h){if(!i){i=!0,l();const d=h instanceof Error?h:this.reason;r.abort(d instanceof Qe?d:new ff(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,s(new Qe(`timeout of ${e}ms exceeded`,Qe.ETIMEDOUT))},e);const l=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),n=null)};n.forEach(h=>h.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>ue.asap(l),c}},nee=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},ree=async function*(n,e){for await(const t of iee(n))yield*nee(t,e)},iee=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},ND=(n,e,t,r)=>{const i=ree(n,e);let s=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:d}=await i.next();if(h){l(),c.close();return}let p=d.byteLength;if(t){let g=s+=p;t(g)}c.enqueue(new Uint8Array(d))}catch(h){throw l(h),h}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},LD=64*1024,{isFunction:xm}=ue,see=(({Request:n,Response:e})=>({Request:n,Response:e}))(ue.global),{ReadableStream:FD,TextEncoder:UD}=ue.global,GD=(n,...e)=>{try{return!!n(...e)}catch{return!1}},aee=n=>{n=ue.merge.call({skipUndefined:!0},see,n);const{fetch:e,Request:t,Response:r}=n,i=e?xm(e):typeof fetch=="function",s=xm(t),a=xm(r);if(!i)return!1;const l=i&&xm(FD),c=i&&(typeof UD=="function"?(_=>S=>_.encode(S))(new UD):async _=>new Uint8Array(await new t(_).arrayBuffer())),h=s&&l&&GD(()=>{let _=!1;const S=new t(Ar.origin,{body:new FD,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!S}),d=a&&l&&GD(()=>ue.isReadableStream(new r("").body)),p={stream:d&&(_=>_.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!p[_]&&(p[_]=(S,x)=>{let E=S&&S[_];if(E)return E.call(S);throw new Qe(`Response type '${_}' is not supported`,Qe.ERR_NOT_SUPPORT,x)})});const g=async _=>{if(_==null)return 0;if(ue.isBlob(_))return _.size;if(ue.isSpecCompliantForm(_))return(await new t(Ar.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(_)||ue.isArrayBuffer(_))return _.byteLength;if(ue.isURLSearchParams(_)&&(_=_+""),ue.isString(_))return(await c(_)).byteLength},y=async(_,S)=>{const x=ue.toFiniteNumber(_.getContentLength());return x??g(S)};return async _=>{let{url:S,method:x,data:E,signal:w,cancelToken:C,timeout:A,onDownloadProgress:P,onUploadProgress:M,responseType:I,headers:V,withCredentials:O="same-origin",fetchOptions:D}=_G(_),H=e||fetch;I=I?(I+"").toLowerCase():"text";let $=tee([w,C&&C.toAbortSignal()],A),ne=null;const Z=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let te;try{if(M&&h&&x!=="get"&&x!=="head"&&(te=await y(V,E))!==0){let G=new t(S,{method:"POST",body:E,duplex:"half"}),Q;if(ue.isFormData(E)&&(Q=G.headers.get("content-type"))&&V.setContentType(Q),G.body){const[L,he]=kD(te,Ng(OD(M)));E=ND(G.body,LD,L,he)}}ue.isString(O)||(O=O?"include":"omit");const z=s&&"credentials"in t.prototype,X={...D,signal:$,method:x.toUpperCase(),headers:V.normalize().toJSON(),body:E,duplex:"half",credentials:z?O:void 0};ne=s&&new t(S,X);let K=await(s?H(ne,D):H(S,X));const J=d&&(I==="stream"||I==="response");if(d&&(P||J&&Z)){const G={};["status","statusText","headers"].forEach(fe=>{G[fe]=K[fe]});const Q=ue.toFiniteNumber(K.headers.get("content-length")),[L,he]=P&&kD(Q,Ng(OD(P),!0))||[];K=new r(ND(K.body,LD,L,()=>{he&&he(),Z&&Z()}),G)}I=I||"text";let U=await p[ue.findKey(p,I)||"text"](K,_);return!J&&Z&&Z(),await new Promise((G,Q)=>{gG(G,Q,{data:U,headers:fi.from(K.headers),status:K.status,statusText:K.statusText,config:_,request:ne})})}catch(z){throw Z&&Z(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Qe("Network Error",Qe.ERR_NETWORK,_,ne,z&&z.response),{cause:z.cause||z}):Qe.from(z,z&&z.code,_,ne,z&&z.response)}}},oee=new Map,bG=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let a=s.length,l=a,c,h,d=oee;for(;l--;)c=s[l],h=d.get(c),h===void 0&&d.set(c,h=l?new Map:aee(e)),d=h;return h};bG();const Dw={http:wJ,xhr:eee,fetch:{get:bG}};ue.forEach(Dw,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const zD=n=>`- ${n}`,lee=n=>ue.isFunction(n)||n===null||n===!1;function uee(n,e){n=ue.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let a=0;a<t;a++){r=n[a];let l;if(i=r,!lee(r)&&(i=Dw[(l=String(r)).toLowerCase()],i===void 0))throw new Qe(`Unknown adapter '${l}'`);if(i&&(ue.isFunction(i)||(i=i.get(e))))break;s[l||"#"+a]=i}if(!i){const a=Object.entries(s).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(zD).join(`
`):" "+zD(a[0]):"as no adapter specified";throw new Qe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const xG={getAdapter:uee,adapters:Dw};function wx(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ff(null,n)}function VD(n){return wx(n),n.headers=fi.from(n.headers),n.data=Ex.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),xG.getAdapter(n.adapter||df.adapter,n)(n).then(function(r){return wx(n),r.data=Ex.call(n,n.transformResponse,r),r.headers=fi.from(r.headers),r},function(r){return mG(r)||(wx(n),r&&r.response&&(r.response.data=Ex.call(n,n.transformResponse,r.response),r.response.headers=fi.from(r.response.headers))),Promise.reject(r)})}const vG="1.13.5",s_={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{s_[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const HD={};s_.transitional=function(e,t,r){function i(s,a){return"[Axios v"+vG+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(e===!1)throw new Qe(i(a," has been removed"+(t?" in "+t:"")),Qe.ERR_DEPRECATED);return t&&!HD[a]&&(HD[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,l):!0}};s_.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function cee(n,e,t){if(typeof n!="object")throw new Qe("options must be an object",Qe.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const l=n[s],c=l===void 0||a(l,s,n);if(c!==!0)throw new Qe("option "+s+" must be "+c,Qe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Qe("Unknown option "+s,Qe.ERR_BAD_OPTION)}}const ng={assertOptions:cee,validators:s_},$i=ng.validators;let Cl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new BD,response:new BD}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Dl(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&ng.assertOptions(r,{silentJSONParsing:$i.transitional($i.boolean),forcedJSONParsing:$i.transitional($i.boolean),clarifyTimeoutError:$i.transitional($i.boolean),legacyInterceptorReqResOrdering:$i.transitional($i.boolean)},!1),i!=null&&(ue.isFunction(i)?t.paramsSerializer={serialize:i}:ng.assertOptions(i,{encode:$i.function,serialize:$i.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ng.assertOptions(t,{baseUrl:$i.spelling("baseURL"),withXsrfToken:$i.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&ue.merge(s.common,s[t.method]);s&&ue.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),t.headers=fi.concat(a,s);const l=[];let c=!0;this.interceptors.request.forEach(function(S){if(typeof S.runWhen=="function"&&S.runWhen(t)===!1)return;c=c&&S.synchronous;const x=t.transitional||Pw;x&&x.legacyInterceptorReqResOrdering?l.unshift(S.fulfilled,S.rejected):l.push(S.fulfilled,S.rejected)});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let d,p=0,g;if(!c){const _=[VD.bind(this),void 0];for(_.unshift(...l),_.push(...h),g=_.length,d=Promise.resolve(t);p<g;)d=d.then(_[p++],_[p++]);return d}g=l.length;let y=t;for(;p<g;){const _=l[p++],S=l[p++];try{y=_(y)}catch(x){S.call(this,x);break}}try{d=VD.call(this,y)}catch(_){return Promise.reject(_)}for(p=0,g=h.length;p<g;)d=d.then(h[p++],h[p++]);return d}getUri(e){e=Dl(this.defaults,e);const t=yG(e.baseURL,e.url,e.allowAbsoluteUrls);return fG(t,e.params,e.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(e){Cl.prototype[e]=function(t,r){return this.request(Dl(r||{},{method:e,url:t,data:(r||{}).data}))}});ue.forEach(["post","put","patch"],function(e){function t(r){return function(s,a,l){return this.request(Dl(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Cl.prototype[e]=t(),Cl.prototype[e+"Form"]=t(!0)});let hee=class SG{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,l){r.reason||(r.reason=new ff(s,a,l),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new SG(function(i){e=i}),cancel:e}}};function dee(n){return function(t){return n.apply(null,t)}}function fee(n){return ue.isObject(n)&&n.isAxiosError===!0}const BS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(BS).forEach(([n,e])=>{BS[e]=n});function EG(n){const e=new Cl(n),t=nG(Cl.prototype.request,e);return ue.extend(t,Cl.prototype,e,{allOwnKeys:!0}),ue.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return EG(Dl(n,i))},t}const Vn=EG(df);Vn.Axios=Cl;Vn.CanceledError=ff;Vn.CancelToken=hee;Vn.isCancel=mG;Vn.VERSION=vG;Vn.toFormData=i_;Vn.AxiosError=Qe;Vn.Cancel=Vn.CanceledError;Vn.all=function(e){return Promise.all(e)};Vn.spread=dee;Vn.isAxiosError=fee;Vn.mergeConfig=Dl;Vn.AxiosHeaders=fi;Vn.formToJSON=n=>pG(ue.isHTMLForm(n)?new FormData(n):n);Vn.getAdapter=xG.getAdapter;Vn.HttpStatusCode=BS;Vn.default=Vn;const{Axios:Tge,AxiosError:Age,CanceledError:Mge,isCancel:Rge,CancelToken:Pge,VERSION:Bge,all:Dge,Cancel:kge,isAxiosError:Oge,spread:Ige,toFormData:Nge,AxiosHeaders:Lge,HttpStatusCode:Fge,formToJSON:Uge,getAdapter:Gge,mergeConfig:zge}=Vn,pee=window.location.origin,cr=Vn.create({baseURL:pee,headers:{"Content-Type":"application/json"}});cr.interceptors.request.use(n=>{const e=localStorage.getItem("vanta_token");return e?n.headers.Authorization=`Bearer ${e}`:console.warn("[API] No token found in localStorage for request:",n.url),n});cr.interceptors.response.use(n=>n,n=>(n.response?.status===401&&(localStorage.removeItem("vanta_token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(n)));const wG=async()=>{try{return(await cr.get("/health")).status===200}catch{return!1}},mee=async(n,e)=>(await cr.post("/api/extensions/voice/synthesize",{text:n,prosody_override:{volume:1,speaking_rate:1}},{responseType:"blob"})).data,jD=Object.freeze(Object.defineProperty({__proto__:null,api:cr,checkHealth:wG,synthesizeVoice:mee},Symbol.toStringTag,{value:"Module"})),CG=W.createContext(void 0),gee=({children:n})=>{const[e,t]=W.useState(localStorage.getItem("vanta_token"));W.useEffect(()=>{e?localStorage.setItem("vanta_token",e):localStorage.removeItem("vanta_token")},[e]);const r=async(s,a)=>{try{const c=(await cr.post("/auth/login",{username_or_email:s,password:a})).data.access_token;localStorage.setItem("vanta_token",c),t(c)}catch(l){throw console.error("Login failed:",l),l}},i=()=>{t(null)};return B.jsx(CG.Provider,{value:{token:e,isAuthenticated:!!e,login:r,logout:i},children:n})},a_=()=>{const n=W.useContext(CG);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},yee=({children:n})=>{const{isAuthenticated:e}=a_();return e?B.jsx(B.Fragment,{children:n}):B.jsx(Cw,{to:"/login",replace:!0})};const TG=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const _ee=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const bee=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const XD=n=>{const e=bee(n);return e.charAt(0).toUpperCase()+e.slice(1)};var xee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vee=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const See=W.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...l},c)=>W.createElement("svg",{ref:c,...xee,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:TG("lucide",i),...!s&&!vee(l)&&{"aria-hidden":"true"},...l},[...a.map(([h,d])=>W.createElement(h,d)),...Array.isArray(s)?s:[s]]));const kt=(n,e)=>{const t=W.forwardRef(({className:r,...i},s)=>W.createElement(See,{ref:s,iconNode:e,className:TG(`lucide-${_ee(XD(n))}`,`lucide-${n}`,r),...i}));return t.displayName=XD(n),t};const Eee=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],WD=kt("activity",Eee);const wee=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Cee=kt("bot",wee);const Tee=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Aee=kt("brain-circuit",Tee);const Mee=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],DS=kt("brain",Mee);const Ree=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],AG=kt("calendar",Ree);const Pee=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bee=kt("chevron-down",Pee);const Dee=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],MG=kt("chevron-left",Dee);const kee=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kw=kt("chevron-right",kee);const Oee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Iee=kt("circle-alert",Oee);const Nee=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Lee=kt("cpu",Nee);const Fee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Uee=kt("file-text",Fee);const Gee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zee=kt("image",Gee);const Vee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],RG=kt("loader-circle",Vee);const Hee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jee=kt("lock",Hee);const Xee=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Wee=kt("log-out",Xee);const $ee=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qee=kt("mail",$ee);const Yee=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Kee=kt("maximize-2",Yee);const Zee=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],PG=kt("message-square",Zee);const Qee=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Jee=kt("mic",Qee);const ete=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],tte=kt("monitor",ete);const nte=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],$D=kt("paperclip",nte);const rte=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ite=kt("plus",rte);const ste=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ate=kt("save",ste);const ote=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lte=kt("search",ote);const ute=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],cte=kt("send",ute);const hte=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BG=kt("settings",hte);const dte=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],DG=kt("tag",dte);const fte=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kG=kt("trash-2",fte);const pte=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],OG=kt("triangle-alert",pte);const mte=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gte=kt("upload",mte);const yte=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_te=kt("user",yte);const bte=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],xte=kt("volume-2",bte);const vte=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Ste=kt("volume-x",vte);const Ete=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],o_=kt("x",Ete);function IG(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=IG(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Yt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=IG(n))&&(r&&(r+=" "),r+=e);return r}const wte=()=>{const{logout:n}=a_(),[e,t]=W.useState(!1),r=[{icon:PG,label:"Chat",to:"/"},{icon:Lee,label:"Memory",to:"/memory"},{icon:BG,label:"Settings",to:"/settings"}];return B.jsxs("aside",{className:Yt("bg-neutral-900 border-r border-neutral-800 flex flex-col h-screen transition-all duration-300 ease-in-out relative group z-30",e?"w-20":"w-64"),children:[B.jsx("button",{onClick:()=>t(!e),className:"absolute -right-3 top-8 w-6 h-6 bg-neutral-800 border border-neutral-700 rounded-full flex items-center justify-center text-neutral-400 hover:text-white cursor-pointer z-50 transition-colors shadow-sm",children:e?B.jsx(kw,{size:14}):B.jsx(MG,{size:14})}),B.jsxs("div",{className:Yt("p-6 border-b border-neutral-800 flex items-center transition-all duration-300",e?"justify-center px-2":"gap-0"),children:[B.jsx("img",{src:"/logo.png",alt:"Vanta AI",className:Yt("rounded-xl shadow-lg transition-all duration-300",e?"w-10 h-10":"w-12 h-12 -mr-3")}),B.jsx("h1",{className:Yt("text-white font-bold text-2xl tracking-tight whitespace-nowrap overflow-hidden transition-all duration-300",e?"w-0 opacity-0":"w-auto opacity-100 ml-3"),children:"Vanta AI"})]}),B.jsx("nav",{className:"flex-1 p-4 space-y-2",children:r.map(i=>B.jsxs(eG,{to:i.to,className:({isActive:s})=>Yt("flex items-center rounded-lg transition-all duration-300 text-sm font-medium h-[44px]",e?"justify-center px-0":"gap-3 px-4",s?"bg-blue-600/10 text-blue-400":"text-neutral-400 hover:bg-neutral-800 hover:text-white"),title:e?i.label:void 0,children:[B.jsx(i.icon,{className:Yt("transition-all duration-300",e?"w-6 h-6":"w-5 h-5")}),B.jsx("span",{className:Yt("whitespace-nowrap overflow-hidden transition-all duration-300",e?"w-0 opacity-0":"w-auto opacity-100"),children:i.label})]},i.to))}),B.jsx("div",{className:"p-4 border-t border-neutral-800",children:B.jsxs("button",{onClick:n,className:Yt("flex items-center rounded-lg transition-all duration-300 text-sm font-medium h-[44px] w-full",e?"justify-center px-0 hover:bg-red-400/10":"gap-3 px-4 hover:bg-red-400/10","text-neutral-400 hover:text-red-400"),title:e?"Sign Out":void 0,children:[B.jsx(Wee,{className:Yt("transition-all duration-300",e?"w-6 h-6":"w-5 h-5")}),B.jsx("span",{className:Yt("whitespace-nowrap overflow-hidden transition-all duration-300",e?"w-0 opacity-0":"w-auto opacity-100"),children:"Sign Out"})]})})]})},qD=n=>{let e;const t=new Set,r=(h,d)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const g=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h))},c=e=n(r,i,l);return l},Cte=(n=>n?qD(n):qD),Tte=n=>n;function Ate(n,e=Tte){const t=xl.useSyncExternalStore(n.subscribe,xl.useCallback(()=>e(n.getState()),[n,e]),xl.useCallback(()=>e(n.getInitialState()),[n,e]));return xl.useDebugValue(t),t}const YD=n=>{const e=Cte(n),t=r=>Ate(e,r);return Object.assign(t,e),t},l_=(n=>n?YD(n):YD),kS=(n,e)=>e.some(t=>n instanceof t);let KD,ZD;function Mte(){return KD||(KD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rte(){return ZD||(ZD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,Cx=new WeakMap,u_=new WeakMap;function Pte(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Tl(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return u_.set(e,n),e}function Bte(n){if(OS.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});OS.set(n,e)}let IS={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return OS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NG(n){IS=n(IS)}function Dte(n){return Rte().includes(n)?function(...e){return n.apply(NS(this),e),Tl(this.request)}:function(...e){return Tl(n.apply(NS(this),e))}}function kte(n){return typeof n=="function"?Dte(n):(n instanceof IDBTransaction&&Bte(n),kS(n,Mte())?new Proxy(n,IS):n)}function Tl(n){if(n instanceof IDBRequest)return Pte(n);if(Cx.has(n))return Cx.get(n);const e=kte(n);return e!==n&&(Cx.set(n,e),u_.set(e,n)),e}const NS=n=>u_.get(n);function Ote(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=Tl(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Tl(a.result),c.oldVersion,c.newVersion,Tl(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Ite=["get","getKey","getAll","getAllKeys","count"],Nte=["put","add","delete","clear"],Tx=new Map;function QD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tx.get(e))return Tx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Nte.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ite.includes(t)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&c.done]))[0]};return Tx.set(e,s),s}NG(n=>({...n,get:(e,t,r)=>QD(e,t)||n.get(e,t,r),has:(e,t)=>!!QD(e,t)||n.has(e,t)}));const Lte=["continue","continuePrimaryKey","advance"],JD={},LS=new WeakMap,LG=new WeakMap,Fte={get(n,e){if(!Lte.includes(e))return n[e];let t=JD[e];return t||(t=JD[e]=function(...r){LS.set(this,LG.get(this)[e](...r))}),t}};async function*Ute(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const t=new Proxy(e,Fte);for(LG.set(t,e),u_.set(t,NS(e));e;)yield t,e=await(LS.get(t)||e.continue()),LS.delete(t)}function e3(n,e){return e===Symbol.asyncIterator&&kS(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&kS(n,[IDBIndex,IDBObjectStore])}NG(n=>({...n,get(e,t,r){return e3(e,t)?Ute:n.get(e,t,r)},has(e,t){return e3(e,t)||n.has(e,t)}}));const Gte="vanta-chat",zte=1;let Ax=null;function pf(){return Ax||(Ax=Ote(Gte,zte,{upgrade(n){n.objectStoreNames.contains("threads")||n.createObjectStore("threads",{keyPath:"id"}),n.objectStoreNames.contains("messages")||n.createObjectStore("messages",{keyPath:"id"}).createIndex("by-thread","threadId")}})),Ax}async function Vte(){try{return(await(await pf()).getAll("threads")).sort((t,r)=>new Date(r.updated_at).getTime()-new Date(t.updated_at).getTime())}catch(n){return console.warn("[LocalDB] Failed to get threads:",n),[]}}async function Hte(n){try{const t=(await pf()).transaction("threads","readwrite");for(const r of n)await t.store.put(r);await t.done}catch(e){console.warn("[LocalDB] Failed to save threads:",e)}}async function jte(n){try{const e=await pf();await e.delete("threads",n);const t=e.transaction("messages","readwrite");let i=await t.store.index("by-thread").openCursor(n);for(;i;)await i.delete(),i=await i.continue();await t.done}catch(e){console.warn("[LocalDB] Failed to delete thread:",e)}}async function Xte(n){try{const i=await(await pf()).transaction("messages","readonly").store.index("by-thread").getAll(n);return i.sort((s,a)=>s.timestamp-a.timestamp),i.map(({threadId:s,...a})=>a)}catch(e){return console.warn("[LocalDB] Failed to get messages:",e),[]}}async function FG(n,e){try{const r=(await pf()).transaction("messages","readwrite");for(const i of e){const s={...i,threadId:n,attachments:i.attachments?.map(a=>({...a,dataUrl:a.dataUrl&&a.dataUrl.length<2e6?a.dataUrl:void 0,textContent:a.textContent}))};await r.store.put(s)}await r.done}catch(t){console.warn("[LocalDB] Failed to save messages:",t)}}async function Ru(n,e){return FG(n,[e])}const Lg=l_((n,e)=>({threads:[],currentThreadId:null,isLoading:!1,fetchThreads:async()=>{n({isLoading:!0});try{const t=await Vte();t.length>0&&(console.log(`[ConversationStore] Loaded ${t.length} threads from local DB`),n({threads:t}))}catch(t){console.warn("[ConversationStore] Local DB read failed:",t)}try{const r=(await cr.get("/api/threads")).data.threads||[];console.log(`[ConversationStore] Synced ${r.length} threads from server`),n({threads:r,isLoading:!1}),await Hte(r)}catch(t){console.error("Failed to fetch threads from server:",t),n({isLoading:!1})}},selectThread:t=>{n({currentThreadId:t})},deleteThread:async t=>{try{await cr.delete(`/api/threads/${t}`);const{threads:r}=e();n({threads:r.filter(i=>i.id!==t)}),e().currentThreadId===t&&n({currentThreadId:null}),await jte(t)}catch(r){console.error("Failed to delete thread:",r)}},createNewThread:()=>{n({currentThreadId:null})},clearThreads:()=>{n({threads:[],currentThreadId:null})}})),Wte=new Set(["jpg","jpeg","png","gif","webp","bmp","svg","ico","tiff","tif","avif"]),$te=new Set(["txt","md","json","csv","xml","html","htm","css","js","jsx","ts","tsx","py","log","yaml","yml","toml","ini","cfg","env","sh","bat","ps1","sql","java","cpp","c","h","hpp","rb","go","rs","php","swift","kt","kts","lua","r","scala","dart","vue","svelte","astro","graphql","gql","prisma","dockerfile","makefile","gitignore","editorconfig","prettierrc","eslintrc"]);function qte(n){const e=n.split(".");return e.length>1?e.pop().toLowerCase():""}function Yte(n){if(n.type.startsWith("image/"))return"image";if(n.type.startsWith("text/"))return"text";const e=qte(n.name);return Wte.has(e)?"image":$te.has(e)||n.size<5e5&&!n.type.startsWith("video/")&&!n.type.startsWith("audio/")?"text":"unknown"}function Kte(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)})}function Zte(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsText(n)})}async function Qte(n){const e=Yte(n);if(e==="unknown")return null;const t={id:crypto.randomUUID(),name:n.name,type:e,mimeType:n.type||"application/octet-stream",size:n.size};return e==="image"?t.dataUrl=await Kte(n):t.textContent=await Zte(n),t}const c_=l_((n,e)=>({messages:[],isLoading:!1,isConnected:!1,currentThreadId:null,currentMood:null,currentAudio:null,addMessage:t=>n(r=>({messages:[...r.messages,t]})),setMood:t=>n({currentMood:t}),clearMessages:()=>n({messages:[],currentThreadId:null,currentMood:null,currentAudio:null}),checkConnection:async()=>{const t=await wG();n({isConnected:t})},setCurrentThread:t=>{n({currentThreadId:t}),t||n({messages:[]})},loadThreadMessages:async t=>{n({isLoading:!0,currentThreadId:t});try{const r=await Xte(t);r.length>0&&(console.log(`[ChatStore] Loaded ${r.length} messages from local DB`),n({messages:r}))}catch(r){console.warn("[ChatStore] Local DB read failed:",r)}try{const s=((await cr.get(`/api/threads/${t}`)).data.messages||[]).map(a=>({id:a.id||crypto.randomUUID(),role:a.role,content:a.content,timestamp:a.timestamp||Date.now()}));n({messages:s,isLoading:!1}),await FG(t,s)}catch(r){console.error("Failed to load thread messages from server:",r),n({isLoading:!1})}},sendMessage:async t=>{const{addMessage:r,setMood:i,currentThreadId:s}=e(),a={id:crypto.randomUUID(),role:"user",content:t,timestamp:Date.now()};r(a),n({isLoading:!0});try{const l=await cr.post("/v1/chat/completions",{messages:[{role:"user",content:t}],model:"skyfall-36b-v2",stream:!1,thread_id:s}),c=l.data.choices[0].message.content,h=l.data.vanta_metadata?.thread_id;l.data.vanta_metadata?.emotional_state?.primary&&i(l.data.vanta_metadata.emotional_state.primary),h&&h!==s&&(n({currentThreadId:h}),Lg.getState().fetchThreads());const d={id:crypto.randomUUID(),role:"assistant",content:c,timestamp:Date.now()};r(d);const p=e().currentThreadId;p&&(Ru(p,a).catch(()=>{}),Ru(p,d).catch(()=>{}));const{useSettingsStore:g}=await zs(async()=>{const{useSettingsStore:_}=await Promise.resolve().then(()=>EO);return{useSettingsStore:_}},[]);if(g.getState().settings.voice_enabled)try{const{synthesizeVoice:_}=await zs(async()=>{const{synthesizeVoice:x}=await Promise.resolve().then(()=>jD);return{synthesizeVoice:x}},void 0),S=await _(c);n({currentAudio:S})}catch(_){console.error("TTS generation failed:",_)}}catch(l){console.error("Chat error:",l);const c={id:crypto.randomUUID(),role:"system",content:"Error: Could not connect to Vanta Server. Is it running?",timestamp:Date.now()};r(c)}finally{n({isLoading:!1})}},sendMessageWithAttachments:async(t,r)=>{const{addMessage:i,setMood:s,currentThreadId:a}=e(),l=[];for(const d of r){const p=await Qte(d);p&&l.push(p)}if(!t.trim()&&l.length===0)return;const c=t.trim()||(l.length===1?`Here's a file: ${l[0].name}`:`Here are ${l.length} files`),h={id:crypto.randomUUID(),role:"user",content:c,timestamp:Date.now(),attachments:l};i(h),n({isLoading:!0});try{const d=l.filter(E=>E.type==="image"),p=l.filter(E=>E.type==="text");let g=[];for(const E of d)try{const w=E.dataUrl?.split(",")[1]||"",C=await cr.post("/api/advanced/vision",{image:w,caption:c,filename:E.name});C.data?.response&&g.push(C.data.response)}catch(w){console.error(`Vision analysis failed for ${E.name}:`,w)}let y=c;if(p.length>0){const E=p.map(w=>`--- FILE: ${w.name} ---
${w.textContent?.substring(0,15e3)||"(empty)"}
--- END FILE ---`).join(`

`);y=`${c}

[The user has shared the following file(s) for you to read and discuss]:

${E}`}if(g.length>0&&p.length===0){const E={id:crypto.randomUUID(),role:"assistant",content:g.join(`

`),timestamp:Date.now()};i(E);const w=e().currentThreadId;w&&(Ru(w,h).catch(()=>{}),Ru(w,E).catch(()=>{}))}else{g.length>0&&(y+=`

[Vision analysis of attached images]:
${g.join(`
`)}`);const E=await cr.post("/v1/chat/completions",{messages:[{role:"user",content:y}],model:"skyfall-36b-v2",stream:!1,thread_id:a}),w=E.data.choices[0].message.content,C=E.data.vanta_metadata?.thread_id;E.data.vanta_metadata?.emotional_state?.primary&&s(E.data.vanta_metadata.emotional_state.primary),C&&C!==a&&(n({currentThreadId:C}),Lg.getState().fetchThreads());const A={id:crypto.randomUUID(),role:"assistant",content:w,timestamp:Date.now()};i(A);const P=e().currentThreadId;P&&(Ru(P,h).catch(()=>{}),Ru(P,A).catch(()=>{}))}const{useSettingsStore:_}=await zs(async()=>{const{useSettingsStore:E}=await Promise.resolve().then(()=>EO);return{useSettingsStore:E}},void 0),S=_.getState().settings,x=e().messages.filter(E=>E.role==="assistant").pop();if(S.voice_enabled&&x)try{const{synthesizeVoice:E}=await zs(async()=>{const{synthesizeVoice:C}=await Promise.resolve().then(()=>jD);return{synthesizeVoice:C}},void 0),w=await E(x.content);n({currentAudio:w})}catch(E){console.error("TTS generation failed:",E)}}catch(d){console.error("Chat error with attachments:",d);const p={id:crypto.randomUUID(),role:"system",content:"Error: Could not process your files. Is the server running?",timestamp:Date.now()};i(p)}finally{n({isLoading:!1})}}})),Jte=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:s="Confirm",cancelText:a="Cancel",variant:l="danger"})=>{const[c,h]=W.useState(!1);return W.useEffect(()=>{if(n)h(!0);else{const d=setTimeout(()=>h(!1),300);return()=>clearTimeout(d)}},[n]),c?FQ.createPortal(B.jsxs("div",{className:Yt("fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-300",n?"opacity-100":"opacity-0 pointer-events-none"),children:[B.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),B.jsxs("div",{className:Yt("relative bg-neutral-900 border border-neutral-800 rounded-xl p-6 shadow-2xl w-full max-w-md transform transition-all duration-300",n?"scale-100 translate-y-0":"scale-95 translate-y-4"),children:[B.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-neutral-500 hover:text-white transition-colors",children:B.jsx(o_,{size:20})}),B.jsxs("div",{className:"flex flex-col gap-4",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("div",{className:Yt("p-3 rounded-full",l==="danger"?"bg-red-500/10 text-red-500":"bg-amber-500/10 text-amber-500"),children:B.jsx(OG,{size:24})}),B.jsx("h3",{className:"text-xl font-bold text-white",children:r})]}),B.jsx("p",{className:"text-neutral-400 leading-relaxed",children:i}),B.jsxs("div",{className:"flex items-center justify-end gap-3 mt-4",children:[B.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-neutral-400 hover:text-white hover:bg-neutral-800 transition-colors",children:a}),B.jsx("button",{onClick:()=>{t(),e()},className:Yt("px-4 py-2 rounded-lg text-sm font-medium text-white transition-all shadow-lg active:scale-95",l==="danger"?"bg-red-600 hover:bg-red-700 shadow-red-900/20":"bg-amber-600 hover:bg-amber-700 shadow-amber-900/20"),children:s})]})]})]})]}),document.body):null},vm=43200,t3=1440,n3=Symbol.for("constructDateFrom");function Ow(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&n3 in n?n[n3](e):n instanceof Date?new n.constructor(e):new Date(e)}function wo(n,e){return Ow(n,n)}let ene={};function tne(){return ene}function r3(n){const e=wo(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Iw(n,...e){const t=Ow.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function rg(n,e){const t=+wo(n)-+wo(e);return t<0?-1:t>0?1:t}function nne(n){return Ow(n,Date.now())}function rne(n,e,t){const[r,i]=Iw(t?.in,n,e),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function ine(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function sne(n,e){return+wo(n)-+wo(e)}function ane(n,e){const t=wo(n);return t.setHours(23,59,59,999),t}function one(n,e){const t=wo(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function lne(n,e){const t=wo(n);return+ane(t)==+one(t)}function une(n,e,t){const[r,i,s]=Iw(t?.in,n,n,e),a=rg(i,s),l=Math.abs(rne(i,s));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*l);let c=rg(i,s)===-a;lne(r)&&l===1&&rg(r,s)===1&&(c=!1);const h=a*(l-+c);return h===0?0:h}function cne(n,e,t){const r=sne(n,e)/1e3;return ine(t?.roundingMethod)(r)}const hne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dne=(n,e,t)=>{let r;const i=hne[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Mx(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const fne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gne={date:Mx({formats:fne,defaultWidth:"full"}),time:Mx({formats:pne,defaultWidth:"full"}),dateTime:Mx({formats:mne,defaultWidth:"full"})},yne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_ne=(n,e,t,r)=>yne[n];function Kh(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):a;i=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const bne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},vne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ene={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cne=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Tne={ordinalNumber:Cne,era:Kh({values:bne,defaultWidth:"wide"}),quarter:Kh({values:xne,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Kh({values:vne,defaultWidth:"wide"}),day:Kh({values:Sne,defaultWidth:"wide"}),dayPeriod:Kh({values:Ene,defaultWidth:"wide",formattingValues:wne,defaultFormattingWidth:"wide"})};function Zh(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?Mne(l,p=>p.test(a)):Ane(l,p=>p.test(a));let h;h=n.valueCallback?n.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;const d=e.slice(a.length);return{value:h,rest:d}}}function Ane(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Mne(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Rne(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const Pne=/^(\d+)(th|st|nd|rd)?/i,Bne=/\d+/i,Dne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kne={any:[/^b/i,/^(a|c)/i]},One={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ine={any:[/1/i,/2/i,/3/i,/4/i]},Nne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Lne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Une={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vne={ordinalNumber:Rne({matchPattern:Pne,parsePattern:Bne,valueCallback:n=>parseInt(n,10)}),era:Zh({matchPatterns:Dne,defaultMatchWidth:"wide",parsePatterns:kne,defaultParseWidth:"any"}),quarter:Zh({matchPatterns:One,defaultMatchWidth:"wide",parsePatterns:Ine,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Zh({matchPatterns:Nne,defaultMatchWidth:"wide",parsePatterns:Lne,defaultParseWidth:"any"}),day:Zh({matchPatterns:Fne,defaultMatchWidth:"wide",parsePatterns:Une,defaultParseWidth:"any"}),dayPeriod:Zh({matchPatterns:Gne,defaultMatchWidth:"any",parsePatterns:zne,defaultParseWidth:"any"})},Hne={code:"en-US",formatDistance:dne,formatLong:gne,formatRelative:_ne,localize:Tne,match:Vne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jne(n,e,t){const r=tne(),i=t?.locale??r.locale??Hne,s=2520,a=rg(n,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:a}),[c,h]=Iw(t?.in,...a>0?[e,n]:[n,e]),d=cne(h,c),p=(r3(h)-r3(c))/1e3,g=Math.round((d-p)/60);let y;if(g<2)return t?.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):g===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",g,l);if(g<45)return i.formatDistance("xMinutes",g,l);if(g<90)return i.formatDistance("aboutXHours",1,l);if(g<t3){const _=Math.round(g/60);return i.formatDistance("aboutXHours",_,l)}else{if(g<s)return i.formatDistance("xDays",1,l);if(g<vm){const _=Math.round(g/t3);return i.formatDistance("xDays",_,l)}else if(g<vm*2)return y=Math.round(g/vm),i.formatDistance("aboutXMonths",y,l)}if(y=une(h,c),y<12){const _=Math.round(g/vm);return i.formatDistance("xMonths",_,l)}else{const _=y%12,S=Math.trunc(y/12);return _<3?i.formatDistance("aboutXYears",S,l):_<9?i.formatDistance("overXYears",S,l):i.formatDistance("almostXYears",S+1,l)}}function Nw(n,e){return jne(n,nne(n),e)}const Xne=n=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t);r.setDate(r.getDate()-1);const i=new Date(t);i.setDate(i.getDate()-7);const s={Today:[],Yesterday:[],"Last 7 Days":[],Older:[]};return n.forEach(a=>{const l=new Date(a.updated_at);l>=t?s.Today.push(a):l>=r?s.Yesterday.push(a):l>=i?s["Last 7 Days"].push(a):s.Older.push(a)}),s},Wne=()=>{const{threads:n,currentThreadId:e,isLoading:t,fetchThreads:r,deleteThread:i,createNewThread:s}=Lg(),{clearMessages:a}=c_(),l=of(),[c,h]=W.useState(!1),[d,p]=W.useState(null),[g,y]=W.useState(!1);W.useEffect(()=>{r();const C=setInterval(r,3e4);return()=>clearInterval(C)},[r]);const _=Xne(n),S=(C,A)=>{C.stopPropagation(),p(A),h(!0)},x=async()=>{d&&(await i(d),e===d&&l("/"),p(null),h(!1))},E=()=>{s(),a(),l("/")},w=C=>{l(`/c/${C}`)};return B.jsxs("div",{className:Yt("relative flex flex-col h-full bg-neutral-900 border-r border-neutral-800 transition-all duration-300 ease-in-out z-20",g?"w-0 border-none":"w-72"),children:[B.jsx("button",{onClick:()=>y(!g),className:"absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-12 bg-neutral-900 border border-neutral-700 rounded-r-lg flex items-center justify-center text-neutral-400 hover:text-white cursor-pointer z-50 hover:bg-neutral-800 transition-colors",title:g?"Expand sidebar":"Collapse sidebar",children:g?B.jsx(kw,{size:14}):B.jsx(MG,{size:14})}),B.jsxs("div",{className:Yt("w-72 flex flex-col h-full overflow-hidden transition-opacity duration-200",g?"opacity-0 invisible":"opacity-100 visible"),children:[B.jsx("div",{className:"p-4 border-b border-neutral-800",children:B.jsxs("button",{onClick:E,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg whitespace-nowrap",children:[B.jsx(ite,{size:18}),"New Chat"]})}),B.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent",children:t?B.jsx("div",{className:"p-4 text-center text-neutral-500",children:"Loading..."}):n.length===0?B.jsxs("div",{className:"p-8 text-center text-neutral-500",children:[B.jsx(PG,{className:"mx-auto mb-2 opacity-30",size:48}),B.jsx("p",{className:"text-sm",children:"No conversations yet"})]}):Object.entries(_).map(([C,A])=>A.length>0?B.jsxs("div",{className:"mb-4",children:[B.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wide truncate",children:C}),A.map(P=>B.jsx("div",{role:"button",tabIndex:0,onClick:()=>w(P.id),onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&w(P.id)},className:Yt("w-full px-4 py-3 text-left hover:bg-neutral-800/50 transition-colors group relative cursor-pointer block",e===P.id&&"bg-neutral-800 border-l-2 border-cyan-500"),children:B.jsxs("div",{className:"flex items-start justify-between gap-2",children:[B.jsxs("div",{className:"flex-1 min-w-0",children:[B.jsx("p",{className:"text-sm font-medium text-neutral-200 truncate",children:P.title||"New Conversation"}),B.jsx("p",{className:"text-xs text-neutral-500 mt-0.5 truncate",children:Nw(new Date(P.updated_at),{addSuffix:!0})})]}),B.jsx("button",{onClick:M=>S(M,P.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 rounded transition-all flex-shrink-0",title:"Delete conversation",children:B.jsx(kG,{size:14,className:"text-red-400"})})]})},P.id))]},C):null)}),B.jsx(Jte,{isOpen:c,onClose:()=>h(!1),onConfirm:x,title:"Delete Conversation",message:"Are you sure you want to delete this conversation? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"})]})]})},Se=(n,e,t,r)=>`rgba(${n}, ${e}, ${t}, ${r/255})`,FS={ecstasy:{primary:Se(255,250,205,160),secondary:Se(255,215,0,120)},excitement:{primary:Se(255,140,0,160),secondary:Se(255,200,0,120)},rage:{primary:Se(139,0,0,160),secondary:Se(100,0,0,120)},panic:{primary:Se(148,0,211,160),secondary:Se(255,255,255,100)},euphoria:{primary:Se(255,20,147,160),secondary:Se(0,255,255,120)},vigilance:{primary:Se(0,255,0,160),secondary:Se(50,205,50,120)},serenity:{primary:Se(32,178,170,160),secondary:Se(64,224,208,120)},melancholy:{primary:Se(75,0,130,160),secondary:Se(50,0,90,120)},boredom:{primary:Se(128,128,128,160),secondary:Se(105,105,105,120)},despair:{primary:Se(26,26,26,160),secondary:Se(10,10,10,120)},nostalgia:{primary:Se(210,105,30,160),secondary:Se(160,82,45,120)},fatigue:{primary:Se(230,230,250,160),secondary:Se(200,200,220,120)},admiration:{primary:Se(255,182,193,160),secondary:Se(255,150,170,120)},contempt:{primary:Se(224,255,255,160),secondary:Se(175,238,238,120)},guilt:{primary:Se(153,50,204,160),secondary:Se(128,0,128,120)},jealousy:{primary:Se(154,205,50,160),secondary:Se(107,142,35,120)},gratitude:{primary:Se(255,215,0,160),secondary:Se(255,193,37,120)},shy:{primary:Se(220,20,60,160),secondary:Se(255,99,71,120)},curiosity:{primary:Se(138,43,226,160),secondary:Se(75,0,130,120)},confusion:{primary:Se(192,192,192,160),secondary:Se(169,169,169,120)},epiphany:{primary:Se(255,255,255,160),secondary:Se(255,250,240,120)},skepticism:{primary:Se(70,130,180,160),secondary:Se(100,149,237,120)},overwhelmed:{primary:Se(105,105,105,160),secondary:Se(128,128,128,120)},joy:{primary:Se(255,215,0,160),secondary:Se(255,140,0,120)},happiness:{primary:Se(255,215,0,160),secondary:Se(255,140,0,120)},sadness:{primary:Se(65,105,225,160),secondary:Se(100,149,237,120)},anger:{primary:Se(255,69,0,160),secondary:Se(178,34,34,120)},fear:{primary:Se(139,0,0,160),secondary:Se(75,0,30,120)},surprise:{primary:Se(0,206,209,160),secondary:Se(64,224,208,120)},disgust:{primary:Se(85,107,47,160),secondary:Se(107,142,35,120)},trust:{primary:Se(100,149,237,160),secondary:Se(70,130,180,120)},neutral:{primary:Se(0,240,255,150),secondary:Se(0,100,255,100)},ennui:{primary:Se(112,128,144,160),secondary:Se(119,136,153,120)},sonder:{primary:Se(221,160,221,160),secondary:Se(186,85,211,120)},schadenfreude:{primary:Se(205,133,63,160),secondary:Se(210,105,30,120)},ambivalence:{primary:Se(147,112,219,160),secondary:Se(138,43,226,120)},saudade:{primary:Se(139,69,19,160),secondary:Se(160,82,45,120)},love:{primary:Se(255,20,147,160),secondary:Se(199,21,133,120)},affection:{primary:Se(255,105,180,160),secondary:Se(255,20,147,120)},compassion:{primary:Se(186,85,211,160),secondary:Se(138,43,226,120)},empathy:{primary:Se(147,112,219,160),secondary:Se(138,43,226,120)},longing:{primary:Se(176,196,222,160),secondary:Se(135,206,235,120)}},i3=FS.neutral,$ne=()=>{const n=c_(r=>r.currentMood),[e,t]=W.useState(i3);return W.useEffect(()=>{let r=i3;if(n){const i=n.toLowerCase();FS[i]?r=FS[i]:console.log(`[MoodBackground] Unknown mood: ${n}, defaulting to Neutral`)}t(r)},[n]),B.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden pointer-events-none bg-neutral-950",children:[B.jsx("div",{className:"absolute inset-0 bg-neutral-950"}),B.jsx("div",{className:"absolute w-[80vw] h-[80vw] rounded-full blur-[120px] opacity-40 animate-pulse-slow transition-colors duration-1000 ease-in-out",style:{backgroundColor:e.primary,top:"-20%",left:"-20%",animation:"orbit1 20s infinite ease-in-out alternate"}}),B.jsx("div",{className:"absolute w-[70vw] h-[70vw] rounded-full blur-[100px] opacity-30 animate-pulse-slower transition-colors duration-1000 ease-in-out",style:{backgroundColor:e.secondary,bottom:"-10%",right:"-10%",animation:"orbit2 25s infinite ease-in-out alternate-reverse"}}),B.jsx("div",{className:"absolute inset-0 bg-neutral-950/40 backdrop-blur-[2px]"}),B.jsx("style",{children:`
                @keyframes orbit1 {
                    0% { transform: translate(0, 0) scale(1); }
                    33% { transform: translate(10%, 10%) scale(1.1); }
                    66% { transform: translate(-5%, 15%) scale(0.9); }
                    100% { transform: translate(0, 0) scale(1); }
                }
                @keyframes orbit2 {
                    0% { transform: translate(0, 0) scale(1); }
                    33% { transform: translate(-10%, -10%) scale(1.2); }
                    66% { transform: translate(5%, -5%) scale(0.95); }
                    100% { transform: translate(0, 0) scale(1); }
                }
            `})]})},qne=({modelPath:n,className:e})=>null,Yne=()=>{const{isAuthenticated:n}=a_();return n?B.jsxs("div",{className:"flex h-screen text-white overflow-hidden font-sans relative",children:[B.jsx($ne,{}),B.jsx(qne,{}),B.jsx(wte,{}),B.jsx(Wne,{}),B.jsx("main",{className:"flex-1 flex flex-col relative w-full h-full overflow-hidden",children:B.jsx(rQ,{})})]}):B.jsx(Cw,{to:"/login",replace:!0})},Kne=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,s]=W.useState(!1),[a,l]=W.useState(""),{login:c}=a_(),h=of(),d=async p=>{p.preventDefault(),l(""),s(!0);try{await c(n,t),h("/")}catch(g){l(g.response?.data?.detail||"Login failed. Please check your credentials.")}finally{s(!1)}};return B.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-950 via-neutral-900 to-neutral-950 flex items-center justify-center p-4",children:[B.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[B.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-blue-600/10 to-cyan-600/10 rounded-full blur-3xl animate-pulse"}),B.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-purple-600/10 to-pink-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),B.jsx("div",{className:"relative w-full max-w-md",children:B.jsxs("div",{className:"bg-neutral-900/80 backdrop-blur-xl border border-neutral-800 rounded-2xl shadow-2xl p-8",children:[B.jsxs("div",{className:"text-center mb-10",children:[B.jsx("img",{src:"/logo.png",alt:"Vanta AI Logo",className:"w-40 h-40 mx-auto mb-8 drop-shadow-2xl filter hover:brightness-110 transition-all"}),B.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:"Vanta Access"}),B.jsx("p",{className:"text-neutral-400 text-sm",children:"Sign in to continue"})]}),a&&B.jsx("div",{className:"mb-6 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm",children:a}),B.jsxs("form",{onSubmit:d,className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Email or Username"}),B.jsxs("div",{className:"relative",children:[B.jsx(qee,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500",size:18}),B.jsx("input",{id:"email",type:"text",value:n,onChange:p=>e(p.target.value),placeholder:"Enter your email or username",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg pl-10 pr-4 py-3 text-white placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",required:!0,disabled:i})]})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Password"}),B.jsxs("div",{className:"relative",children:[B.jsx(jee,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500",size:18}),B.jsx("input",{id:"password",type:"password",value:t,onChange:p=>r(p.target.value),placeholder:"Enter your password",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg pl-10 pr-4 py-3 text-white placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",required:!0,disabled:i})]})]}),B.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:from-neutral-700 disabled:to-neutral-700 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg disabled:cursor-not-allowed",children:i?B.jsxs(B.Fragment,{children:[B.jsx(RG,{className:"animate-spin",size:18}),"Signing in..."]}):"Sign In"})]}),B.jsx("div",{className:"mt-6 text-center text-sm text-neutral-500",children:B.jsx("p",{children:"Don't have an account? Contact your administrator."})})]})})]})};function Zne(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const Qne=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jne=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ere={};function s3(n,e){return(ere.jsx?Jne:Qne).test(n)}const tre=/[ \t\n\f\r]/g;function nre(n){return typeof n=="object"?n.type==="text"?a3(n.value):!1:a3(n)}function a3(n){return n.replace(tre,"")===""}class mf{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}mf.prototype.normal={};mf.prototype.property={};mf.prototype.space=void 0;function UG(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new mf(t,r,e)}function US(n){return n.toLowerCase()}class gi{constructor(e,t){this.attribute=t,this.property=e}}gi.prototype.attribute="";gi.prototype.booleanish=!1;gi.prototype.boolean=!1;gi.prototype.commaOrSpaceSeparated=!1;gi.prototype.commaSeparated=!1;gi.prototype.defined=!1;gi.prototype.mustUseProperty=!1;gi.prototype.number=!1;gi.prototype.overloadedBoolean=!1;gi.prototype.property="";gi.prototype.spaceSeparated=!1;gi.prototype.space=void 0;let rre=0;const ft=Ul(),Yn=Ul(),GS=Ul(),xe=Ul(),cn=Ul(),ic=Ul(),Ri=Ul();function Ul(){return 2**++rre}const zS=Object.freeze(Object.defineProperty({__proto__:null,boolean:ft,booleanish:Yn,commaOrSpaceSeparated:Ri,commaSeparated:ic,number:xe,overloadedBoolean:GS,spaceSeparated:cn},Symbol.toStringTag,{value:"Module"})),Rx=Object.keys(zS);class Lw extends gi{constructor(e,t,r,i){let s=-1;if(super(e,t),o3(this,"space",i),typeof r=="number")for(;++s<Rx.length;){const a=Rx[s];o3(this,Rx[s],(r&zS[a])===zS[a])}}}Lw.prototype.defined=!0;function o3(n,e,t){t&&(n[e]=t)}function Dc(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const s=new Lw(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[US(r)]=r,t[US(s.attribute)]=r}return new mf(e,t,n.space)}const GG=Dc({properties:{ariaActiveDescendant:null,ariaAtomic:Yn,ariaAutoComplete:null,ariaBusy:Yn,ariaChecked:Yn,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:cn,ariaCurrent:null,ariaDescribedBy:cn,ariaDetails:null,ariaDisabled:Yn,ariaDropEffect:cn,ariaErrorMessage:null,ariaExpanded:Yn,ariaFlowTo:cn,ariaGrabbed:Yn,ariaHasPopup:null,ariaHidden:Yn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:cn,ariaLevel:xe,ariaLive:null,ariaModal:Yn,ariaMultiLine:Yn,ariaMultiSelectable:Yn,ariaOrientation:null,ariaOwns:cn,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:Yn,ariaReadOnly:Yn,ariaRelevant:null,ariaRequired:Yn,ariaRoleDescription:cn,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:Yn,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function zG(n,e){return e in n?n[e]:e}function VG(n,e){return zG(n,e.toLowerCase())}const ire=Dc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ic,acceptCharset:cn,accessKey:cn,action:null,allow:null,allowFullScreen:ft,allowPaymentRequest:ft,allowUserMedia:ft,alt:null,as:null,async:ft,autoCapitalize:null,autoComplete:cn,autoFocus:ft,autoPlay:ft,blocking:cn,capture:null,charSet:null,checked:ft,cite:null,className:cn,cols:xe,colSpan:null,content:null,contentEditable:Yn,controls:ft,controlsList:cn,coords:xe|ic,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ft,defer:ft,dir:null,dirName:null,disabled:ft,download:GS,draggable:Yn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ft,formTarget:null,headers:cn,height:xe,hidden:GS,high:xe,href:null,hrefLang:null,htmlFor:cn,httpEquiv:cn,id:null,imageSizes:null,imageSrcSet:null,inert:ft,inputMode:null,integrity:null,is:null,isMap:ft,itemId:null,itemProp:cn,itemRef:cn,itemScope:ft,itemType:cn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ft,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:ft,muted:ft,name:null,nonce:null,noModule:ft,noValidate:ft,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ft,optimum:xe,pattern:null,ping:cn,placeholder:null,playsInline:ft,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ft,referrerPolicy:null,rel:cn,required:ft,reversed:ft,rows:xe,rowSpan:xe,sandbox:cn,scope:null,scoped:ft,seamless:ft,selected:ft,shadowRootClonable:ft,shadowRootDelegatesFocus:ft,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:Yn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:ft,useMap:null,value:Yn,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:cn,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ft,declare:ft,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:ft,noHref:ft,noShade:ft,noWrap:ft,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:Yn,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ft,disableRemotePlayback:ft,prefix:null,property:null,results:xe,security:null,unselectable:null},space:"html",transform:VG}),sre=Dc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ri,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:cn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:ft,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ic,g2:ic,glyphName:ic,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:Ri,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:cn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ri,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ri,rev:Ri,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ri,requiredFeatures:Ri,requiredFonts:Ri,requiredFormats:Ri,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:Ri,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ri,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ri,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:zG}),HG=Dc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),jG=Dc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:VG}),XG=Dc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),are={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ore=/[A-Z]/g,l3=/-[a-z]/g,lre=/^data[-\w.:]+$/i;function ure(n,e){const t=US(e);let r=e,i=gi;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&lre.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(l3,hre);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!l3.test(s)){let a=s.replace(ore,cre);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=Lw}return new i(r,e)}function cre(n){return"-"+n.toLowerCase()}function hre(n){return n.charAt(1).toUpperCase()}const dre=UG([GG,ire,HG,jG,XG],"html"),Fw=UG([GG,sre,HG,jG,XG],"svg");function fre(n){return n.join(" ").trim()}var Pu={},Px,u3;function pre(){if(u3)return Px;u3=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,h="/",d="*",p="",g="comment",y="declaration";function _(x,E){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];E=E||{};var w=1,C=1;function A(Z){var te=Z.match(e);te&&(w+=te.length);var z=Z.lastIndexOf(c);C=~z?Z.length-z:C+Z.length}function P(){var Z={line:w,column:C};return function(te){return te.position=new M(Z),O(),te}}function M(Z){this.start=Z,this.end={line:w,column:C},this.source=E.source}M.prototype.content=x;function I(Z){var te=new Error(E.source+":"+w+":"+C+": "+Z);if(te.reason=Z,te.filename=E.source,te.line=w,te.column=C,te.source=x,!E.silent)throw te}function V(Z){var te=Z.exec(x);if(te){var z=te[0];return A(z),x=x.slice(z.length),te}}function O(){V(t)}function D(Z){var te;for(Z=Z||[];te=H();)te!==!1&&Z.push(te);return Z}function H(){var Z=P();if(!(h!=x.charAt(0)||d!=x.charAt(1))){for(var te=2;p!=x.charAt(te)&&(d!=x.charAt(te)||h!=x.charAt(te+1));)++te;if(te+=2,p===x.charAt(te-1))return I("End of comment missing");var z=x.slice(2,te-2);return C+=2,A(z),x=x.slice(te),C+=2,Z({type:g,comment:z})}}function $(){var Z=P(),te=V(r);if(te){if(H(),!V(i))return I("property missing ':'");var z=V(s),X=Z({type:y,property:S(te[0].replace(n,p)),value:z?S(z[0].replace(n,p)):p});return V(a),X}}function ne(){var Z=[];D(Z);for(var te;te=$();)te!==!1&&(Z.push(te),D(Z));return Z}return O(),ne()}function S(x){return x?x.replace(l,p):p}return Px=_,Px}var c3;function mre(){if(c3)return Pu;c3=1;var n=Pu&&Pu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.default=t;const e=n(pre());function t(r,i){let s=null;if(!r||typeof r!="string")return s;const a=(0,e.default)(r),l=typeof i=="function";return a.forEach(c=>{if(c.type!=="declaration")return;const{property:h,value:d}=c;l?i(h,d,c):d&&(s=s||{},s[h]=d)}),s}return Pu}var Qh={},h3;function gre(){if(h3)return Qh;h3=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(h){return!h||t.test(h)||n.test(h)},a=function(h,d){return d.toUpperCase()},l=function(h,d){return"".concat(d,"-")},c=function(h,d){return d===void 0&&(d={}),s(h)?h:(h=h.toLowerCase(),d.reactCompat?h=h.replace(i,l):h=h.replace(r,l),h.replace(e,a))};return Qh.camelCase=c,Qh}var Jh,d3;function yre(){if(d3)return Jh;d3=1;var n=Jh&&Jh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(mre()),t=gre();function r(i,s){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(a[(0,t.camelCase)(l,s)]=c)}),a}return r.default=r,Jh=r,Jh}var _re=yre();const bre=Ol(_re),WG=$G("end"),Uw=$G("start");function $G(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xre(n){const e=Uw(n),t=WG(n);if(e&&t)return{start:e,end:t}}function _d(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?f3(n.position):"start"in n||"end"in n?f3(n):"line"in n||"column"in n?VS(n):""}function VS(n){return p3(n&&n.line)+":"+p3(n&&n.column)}function f3(n){return VS(n&&n.start)+"-"+VS(n&&n.end)}function p3(n){return n&&typeof n=="number"?n:1}class Dr extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",s={},a=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=_d(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Dr.prototype.file="";Dr.prototype.name="";Dr.prototype.reason="";Dr.prototype.message="";Dr.prototype.stack="";Dr.prototype.column=void 0;Dr.prototype.line=void 0;Dr.prototype.ancestors=void 0;Dr.prototype.cause=void 0;Dr.prototype.fatal=void 0;Dr.prototype.place=void 0;Dr.prototype.ruleId=void 0;Dr.prototype.source=void 0;const Gw={}.hasOwnProperty,vre=new Map,Sre=/[A-Z]/g,Ere=new Set(["table","tbody","thead","tfoot","tr"]),wre=new Set(["td","th"]),qG="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Cre(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=kre(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Dre(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Fw:dre,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=YG(i,n,void 0);return s&&typeof s!="string"?s:i.create(n,i.Fragment,{children:s||void 0},void 0)}function YG(n,e,t){if(e.type==="element")return Tre(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Are(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Rre(n,e,t);if(e.type==="mdxjsEsm")return Mre(n,e);if(e.type==="root")return Pre(n,e,t);if(e.type==="text")return Bre(n,e)}function Tre(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Fw,n.schema=i),n.ancestors.push(e);const s=ZG(n,e.tagName,!1),a=Ore(n,e);let l=Vw(n,e);return Ere.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!nre(c):!0})),KG(n,a,s,e),zw(a,l),n.ancestors.pop(),n.schema=r,n.create(e,s,a,t)}function Are(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}Hd(n,e.position)}function Mre(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Hd(n,e.position)}function Rre(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Fw,n.schema=i),n.ancestors.push(e);const s=e.name===null?n.Fragment:ZG(n,e.name,!0),a=Ire(n,e),l=Vw(n,e);return KG(n,a,s,e),zw(a,l),n.ancestors.pop(),n.schema=r,n.create(e,s,a,t)}function Pre(n,e,t){const r={};return zw(r,Vw(n,e)),n.create(e,n.Fragment,r,t)}function Bre(n,e){return e.value}function KG(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function zw(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function Dre(n,e,t){return r;function r(i,s,a,l){const h=Array.isArray(a.children)?t:e;return l?h(s,a,l):h(s,a)}}function kre(n,e){return t;function t(r,i,s,a){const l=Array.isArray(s.children),c=Uw(r);return e(i,s,a,l,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function Ore(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&Gw.call(e.properties,i)){const s=Nre(n,i,e.properties[i]);if(s){const[a,l]=s;n.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&wre.has(e.tagName)?r=l:t[a]=l}}if(r){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function Ire(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const l=a.properties[0];l.type,Object.assign(t,n.evaluater.evaluateExpression(l.argument))}else Hd(n,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const l=r.value.data.estree.body[0];l.type,s=n.evaluater.evaluateExpression(l.expression)}else Hd(n,e.position);else s=r.value===null?!0:r.value;t[i]=s}return t}function Vw(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:vre;for(;++r<e.children.length;){const s=e.children[r];let a;if(n.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const h=i.get(c)||0;a=c+"-"+h,i.set(c,h+1)}}const l=YG(n,s,a);l!==void 0&&t.push(l)}return t}function Nre(n,e,t){const r=ure(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?Zne(t):fre(t)),r.property==="style"){let i=typeof t=="object"?t:Lre(n,String(t));return n.stylePropertyNameCase==="css"&&(i=Fre(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?are[r.property]||r.property:r.attribute,t]}}function Lre(n,e){try{return bre(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new Dr("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=qG+"#cannot-parse-style-attribute",i}}function ZG(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,a;for(;++s<i.length;){const l=s3(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=a}else r=s3(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Gw.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);Hd(n)}function Hd(n,e){const t=new Dr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=qG+"#cannot-handle-mdx-estrees-without-createevaluater",t}function Fre(n){const e={};let t;for(t in n)Gw.call(n,t)&&(e[Ure(t)]=n[t]);return e}function Ure(n){let e=n.replace(Sre,Gre);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Gre(n){return"-"+n.toLowerCase()}const Bx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zre={};function Hw(n,e){const t=zre,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return QG(n,r,i)}function QG(n,e,t){if(Vre(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return m3(n.children,e,t)}return Array.isArray(n)?m3(n,e,t):""}function m3(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=QG(n[i],e,t);return r.join("")}function Vre(n){return!!(n&&typeof n=="object")}const g3=document.createElement("i");function jw(n){const e="&"+n+";";g3.innerHTML=e;const t=g3.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Bi(n,e,t,r){const i=n.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)a=Array.from(r),a.unshift(e,t),n.splice(...a);else for(t&&n.splice(e,t);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),n.splice(...a),s+=1e4,e+=1e4}function Ki(n,e){return n.length>0?(Bi(n,n.length,0,e),n):e}const y3={}.hasOwnProperty;function JG(n){const e={};let t=-1;for(;++t<n.length;)Hre(e,n[t]);return e}function Hre(n,e){let t;for(t in e){const i=(y3.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let a;if(s)for(a in s){y3.call(i,a)||(i[a]=[]);const l=s[a];jre(i[a],Array.isArray(l)?l:l?[l]:[])}}}function jre(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Bi(n,0,0,r)}function e6(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function _s(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fr=Bo(/[A-Za-z]/),Rr=Bo(/[\dA-Za-z]/),Xre=Bo(/[#-'*+\--9=?A-Z^-~]/);function Fg(n){return n!==null&&(n<32||n===127)}const HS=Bo(/\d/),Wre=Bo(/[\dA-Fa-f]/),$re=Bo(/[!-/:-@[-`{-~]/);function We(n){return n!==null&&n<-2}function on(n){return n!==null&&(n<0||n===32)}function St(n){return n===-2||n===-1||n===32}const h_=Bo(new RegExp("\\p{P}|\\p{S}","u")),kl=Bo(/\s/);function Bo(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function kc(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const s=n.charCodeAt(t);let a="";if(s===37&&Rr(n.charCodeAt(t+1))&&Rr(n.charCodeAt(t+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const l=n.charCodeAt(t+1);s<56320&&l>56319&&l<57344?(a=String.fromCharCode(s,l),i=1):a=""}else a=String.fromCharCode(s);a&&(e.push(n.slice(r,t),encodeURIComponent(a)),r=t+i+1,a=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Dt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return St(c)?(n.enter(t),l(c)):e(c)}function l(c){return St(c)&&s++<i?(n.consume(c),l):(n.exit(t),e(c))}}const qre={tokenize:Yre};function Yre(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),Dt(n,e,"linePrefix")}function i(l){return n.enter("paragraph"),s(l)}function s(l){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,a(l)}function a(l){if(l===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(l);return}return We(l)?(n.consume(l),n.exit("chunkText"),s):(n.consume(l),a)}}const Kre={tokenize:Zre},_3={tokenize:Qre};function Zre(n){const e=this,t=[];let r=0,i,s,a;return l;function l(C){if(r<t.length){const A=t[r];return e.containerState=A[1],n.attempt(A[0].continuation,c,h)(C)}return h(C)}function c(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const A=e.events.length;let P=A,M;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){M=e.events[P][1].end;break}E(r);let I=A;for(;I<e.events.length;)e.events[I][1].end={...M},I++;return Bi(e.events,P+1,0,e.events.slice(A)),e.events.length=I,h(C)}return l(C)}function h(C){if(r===t.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return _(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(_3,d,p)(C)}function d(C){return i&&w(),E(r),g(C)}function p(C){return e.parser.lazy[e.now().line]=r!==t.length,a=e.now().offset,_(C)}function g(C){return e.containerState={},n.attempt(_3,y,_)(C)}function y(C){return r++,t.push([e.currentConstruct,e.containerState]),g(C)}function _(C){if(C===null){i&&w(),E(0),n.consume(C);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),S(C)}function S(C){if(C===null){x(n.exit("chunkFlow"),!0),E(0),n.consume(C);return}return We(C)?(n.consume(C),x(n.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(n.consume(C),S)}function x(C,A){const P=e.sliceStream(C);if(A&&P.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(P),e.parser.lazy[C.start.line]){let M=i.events.length;for(;M--;)if(i.events[M][1].start.offset<a&&(!i.events[M][1].end||i.events[M][1].end.offset>a))return;const I=e.events.length;let V=I,O,D;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(O){D=e.events[V][1].end;break}O=!0}for(E(r),M=I;M<e.events.length;)e.events[M][1].end={...D},M++;Bi(e.events,V+1,0,e.events.slice(I)),e.events.length=M}}function E(C){let A=t.length;for(;A-- >C;){const P=t[A];e.containerState=P[1],P[0].exit.call(e,n)}t.length=C}function w(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Qre(n,e,t){return Dt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yc(n){if(n===null||on(n)||kl(n))return 1;if(h_(n))return 2}function d_(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const jS={name:"attention",resolveAll:Jre,tokenize:eie};function Jre(n,e){let t=-1,r,i,s,a,l,c,h,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p={...n[r][1].end},g={...n[t][1].start};b3(p,-c),b3(g,c),a={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...n[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},n[r][1].end={...a.start},n[t][1].start={...l.end},h=[],n[r][1].end.offset-n[r][1].start.offset&&(h=Ki(h,[["enter",n[r][1],e],["exit",n[r][1],e]])),h=Ki(h,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),h=Ki(h,d_(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),h=Ki(h,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,h=Ki(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,Bi(n,r-1,t-r+3,h),t=r+h.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function eie(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=yc(r);let s;return a;function a(c){return s=c,n.enter("attentionSequence"),l(c)}function l(c){if(c===s)return n.consume(c),l;const h=n.exit("attentionSequence"),d=yc(c),p=!d||d===2&&i||t.includes(c),g=!i||i===2&&d||t.includes(r);return h._open=!!(s===42?p:p&&(i||!g)),h._close=!!(s===42?g:g&&(d||!p)),e(c)}}function b3(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const tie={name:"autolink",tokenize:nie};function nie(n,e,t){let r=0;return i;function i(y){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(y){return Fr(y)?(n.consume(y),a):y===64?t(y):h(y)}function a(y){return y===43||y===45||y===46||Rr(y)?(r=1,l(y)):h(y)}function l(y){return y===58?(n.consume(y),r=0,c):(y===43||y===45||y===46||Rr(y))&&r++<32?(n.consume(y),l):(r=0,h(y))}function c(y){return y===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):y===null||y===32||y===60||Fg(y)?t(y):(n.consume(y),c)}function h(y){return y===64?(n.consume(y),d):Xre(y)?(n.consume(y),h):t(y)}function d(y){return Rr(y)?p(y):t(y)}function p(y){return y===46?(n.consume(y),r=0,d):y===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):g(y)}function g(y){if((y===45||Rr(y))&&r++<63){const _=y===45?g:p;return n.consume(y),_}return t(y)}}const gf={partial:!0,tokenize:rie};function rie(n,e,t){return r;function r(s){return St(s)?Dt(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||We(s)?e(s):t(s)}}const t6={continuation:{tokenize:sie},exit:aie,name:"blockQuote",tokenize:iie};function iie(n,e,t){const r=this;return i;function i(a){if(a===62){const l=r.containerState;return l.open||(n.enter("blockQuote",{_container:!0}),l.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),s}return t(a)}function s(a){return St(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function sie(n,e,t){const r=this;return i;function i(a){return St(a)?Dt(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return n.attempt(t6,e,t)(a)}}function aie(n){n.exit("blockQuote")}const n6={name:"characterEscape",tokenize:oie};function oie(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return $re(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const r6={name:"characterReference",tokenize:lie};function lie(n,e,t){const r=this;let i=0,s,a;return l;function l(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),c}function c(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),s=31,a=Rr,d(p))}function h(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,a=Wre,d):(n.enter("characterReferenceValue"),s=7,a=HS,d(p))}function d(p){if(p===59&&i){const g=n.exit("characterReferenceValue");return a===Rr&&!jw(r.sliceSerialize(g))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(p)&&i++<s?(n.consume(p),d):t(p)}}const x3={partial:!0,tokenize:cie},v3={concrete:!0,name:"codeFenced",tokenize:uie};function uie(n,e,t){const r=this,i={partial:!0,tokenize:P};let s=0,a=0,l;return c;function c(M){return h(M)}function h(M){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=M,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(M)}function d(M){return M===l?(a++,n.consume(M),d):a<3?t(M):(n.exit("codeFencedFenceSequence"),St(M)?Dt(n,p,"whitespace")(M):p(M))}function p(M){return M===null||We(M)?(n.exit("codeFencedFence"),r.interrupt?e(M):n.check(x3,S,A)(M)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(M))}function g(M){return M===null||We(M)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(M)):St(M)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Dt(n,y,"whitespace")(M)):M===96&&M===l?t(M):(n.consume(M),g)}function y(M){return M===null||We(M)?p(M):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),_(M))}function _(M){return M===null||We(M)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(M)):M===96&&M===l?t(M):(n.consume(M),_)}function S(M){return n.attempt(i,A,x)(M)}function x(M){return n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),E}function E(M){return s>0&&St(M)?Dt(n,w,"linePrefix",s+1)(M):w(M)}function w(M){return M===null||We(M)?n.check(x3,S,A)(M):(n.enter("codeFlowValue"),C(M))}function C(M){return M===null||We(M)?(n.exit("codeFlowValue"),w(M)):(n.consume(M),C)}function A(M){return n.exit("codeFenced"),e(M)}function P(M,I,V){let O=0;return D;function D(te){return M.enter("lineEnding"),M.consume(te),M.exit("lineEnding"),H}function H(te){return M.enter("codeFencedFence"),St(te)?Dt(M,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(te):$(te)}function $(te){return te===l?(M.enter("codeFencedFenceSequence"),ne(te)):V(te)}function ne(te){return te===l?(O++,M.consume(te),ne):O>=a?(M.exit("codeFencedFenceSequence"),St(te)?Dt(M,Z,"whitespace")(te):Z(te)):V(te)}function Z(te){return te===null||We(te)?(M.exit("codeFencedFence"),I(te)):V(te)}}}function cie(n,e,t){const r=this;return i;function i(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}const Dx={name:"codeIndented",tokenize:die},hie={partial:!0,tokenize:fie};function die(n,e,t){const r=this;return i;function i(h){return n.enter("codeIndented"),Dt(n,s,"linePrefix",5)(h)}function s(h){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(h):t(h)}function a(h){return h===null?c(h):We(h)?n.attempt(hie,a,c)(h):(n.enter("codeFlowValue"),l(h))}function l(h){return h===null||We(h)?(n.exit("codeFlowValue"),a(h)):(n.consume(h),l)}function c(h){return n.exit("codeIndented"),e(h)}}function fie(n,e,t){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?t(a):We(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):Dt(n,s,"linePrefix",5)(a)}function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):We(a)?i(a):t(a)}}const pie={name:"codeText",previous:gie,resolve:mie,tokenize:yie};function mie(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function gie(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function yie(n,e,t){let r=0,i,s;return a;function a(p){return n.enter("codeText"),n.enter("codeTextSequence"),l(p)}function l(p){return p===96?(n.consume(p),r++,l):(n.exit("codeTextSequence"),c(p))}function c(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),c):p===96?(s=n.enter("codeTextSequence"),i=0,d(p)):We(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||We(p)?(n.exit("codeTextData"),c(p)):(n.consume(p),h)}function d(p){return p===96?(n.consume(p),i++,d):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(p)):(s.type="codeTextData",h(p))}}class _ie{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ed(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ed(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ed(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);ed(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ed(this.left,t.reverse())}}}function ed(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function i6(n){const e={};let t=-1,r,i,s,a,l,c,h;const d=new _ie(n);for(;++t<d.length;){for(;t in e;)t=e[t];if(r=d.get(t),t&&r[1].type==="chunkFlow"&&d.get(t-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,bie(d,t)),t=e[t],h=!0);else if(r[1]._container){for(s=t,i=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,t),l.unshift(r),d.splice(i,t-i+1,l))}}return Bi(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function bie(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const s=[];let a=t._tokenizer;a||(a=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],h={};let d,p,g=-1,y=t,_=0,S=0;const x=[S];for(;y;){for(;n.get(++i)[1]!==y;);s.push(i),y._tokenizer||(d=r.sliceStream(y),y.next||d.push(null),p&&a.defineSkip(y.start),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=t;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(S=g+1,x.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(a.events=[],y?(y._tokenizer=void 0,y.previous=void 0):x.pop(),g=x.length;g--;){const E=l.slice(x[g],x[g+1]),w=s.pop();c.push([w,w+E.length-1]),n.splice(w,2,E)}for(c.reverse(),g=-1;++g<c.length;)h[_+c[g][0]]=_+c[g][1],_+=c[g][1]-c[g][0]-1;return h}const xie={resolve:Sie,tokenize:Eie},vie={partial:!0,tokenize:wie};function Sie(n){return i6(n),n}function Eie(n,e){let t;return r;function r(l){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):We(l)?n.check(vie,a,s)(l):(n.consume(l),i)}function s(l){return n.exit("chunkContent"),n.exit("content"),e(l)}function a(l){return n.consume(l),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function wie(n,e,t){const r=this;return i;function i(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Dt(n,s,"linePrefix")}function s(a){if(a===null||We(a))return t(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):n.interrupt(r.parser.constructs.flow,t,e)(a)}}function s6(n,e,t,r,i,s,a,l,c){const h=c||Number.POSITIVE_INFINITY;let d=0;return p;function p(E){return E===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(E),n.exit(s),g):E===null||E===32||E===41||Fg(E)?t(E):(n.enter(r),n.enter(a),n.enter(l),n.enter("chunkString",{contentType:"string"}),S(E))}function g(E){return E===62?(n.enter(s),n.consume(E),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(l),n.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===62?(n.exit("chunkString"),n.exit(l),g(E)):E===null||E===60||We(E)?t(E):(n.consume(E),E===92?_:y)}function _(E){return E===60||E===62||E===92?(n.consume(E),y):y(E)}function S(E){return!d&&(E===null||E===41||on(E))?(n.exit("chunkString"),n.exit(l),n.exit(a),n.exit(r),e(E)):d<h&&E===40?(n.consume(E),d++,S):E===41?(n.consume(E),d--,S):E===null||E===32||E===40||Fg(E)?t(E):(n.consume(E),E===92?x:S)}function x(E){return E===40||E===41||E===92?(n.consume(E),S):S(E)}}function a6(n,e,t,r,i,s){const a=this;let l=0,c;return h;function h(y){return n.enter(r),n.enter(i),n.consume(y),n.exit(i),n.enter(s),d}function d(y){return l>999||y===null||y===91||y===93&&!c||y===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?t(y):y===93?(n.exit(s),n.enter(i),n.consume(y),n.exit(i),n.exit(r),e):We(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||We(y)||l++>999?(n.exit("chunkString"),d(y)):(n.consume(y),c||(c=!St(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(n.consume(y),l++,p):p(y)}}function o6(n,e,t,r,i,s){let a;return l;function l(g){return g===34||g===39||g===40?(n.enter(r),n.enter(i),n.consume(g),n.exit(i),a=g===40?41:g,c):t(g)}function c(g){return g===a?(n.enter(i),n.consume(g),n.exit(i),n.exit(r),e):(n.enter(s),h(g))}function h(g){return g===a?(n.exit(s),c(a)):g===null?t(g):We(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),Dt(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===a||g===null||We(g)?(n.exit("chunkString"),h(g)):(n.consume(g),g===92?p:d)}function p(g){return g===a||g===92?(n.consume(g),d):d(g)}}function bd(n,e){let t;return r;function r(i){return We(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):St(i)?Dt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const Cie={name:"definition",tokenize:Aie},Tie={partial:!0,tokenize:Mie};function Aie(n,e,t){const r=this;let i;return s;function s(y){return n.enter("definition"),a(y)}function a(y){return a6.call(r,n,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function l(y){return i=_s(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(n.enter("definitionMarker"),n.consume(y),n.exit("definitionMarker"),c):t(y)}function c(y){return on(y)?bd(n,h)(y):h(y)}function h(y){return s6(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function d(y){return n.attempt(Tie,p,p)(y)}function p(y){return St(y)?Dt(n,g,"whitespace")(y):g(y)}function g(y){return y===null||We(y)?(n.exit("definition"),r.parser.defined.push(i),e(y)):t(y)}}function Mie(n,e,t){return r;function r(l){return on(l)?bd(n,i)(l):t(l)}function i(l){return o6(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return St(l)?Dt(n,a,"whitespace")(l):a(l)}function a(l){return l===null||We(l)?e(l):t(l)}}const Rie={name:"hardBreakEscape",tokenize:Pie};function Pie(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return We(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const Bie={name:"headingAtx",resolve:Die,tokenize:kie};function Die(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Bi(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function kie(n,e,t){let r=0;return i;function i(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(n.consume(d),a):d===null||on(d)?(n.exit("atxHeadingSequence"),l(d)):t(d)}function l(d){return d===35?(n.enter("atxHeadingSequence"),c(d)):d===null||We(d)?(n.exit("atxHeading"),e(d)):St(d)?Dt(n,l,"whitespace")(d):(n.enter("atxHeadingText"),h(d))}function c(d){return d===35?(n.consume(d),c):(n.exit("atxHeadingSequence"),l(d))}function h(d){return d===null||d===35||on(d)?(n.exit("atxHeadingText"),l(d)):(n.consume(d),h)}}const Oie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],S3=["pre","script","style","textarea"],Iie={concrete:!0,name:"htmlFlow",resolveTo:Fie,tokenize:Uie},Nie={partial:!0,tokenize:zie},Lie={partial:!0,tokenize:Gie};function Fie(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function Uie(n,e,t){const r=this;let i,s,a,l,c;return h;function h(L){return d(L)}function d(L){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(L),p}function p(L){return L===33?(n.consume(L),g):L===47?(n.consume(L),s=!0,S):L===63?(n.consume(L),i=3,r.interrupt?e:U):Fr(L)?(n.consume(L),a=String.fromCharCode(L),x):t(L)}function g(L){return L===45?(n.consume(L),i=2,y):L===91?(n.consume(L),i=5,l=0,_):Fr(L)?(n.consume(L),i=4,r.interrupt?e:U):t(L)}function y(L){return L===45?(n.consume(L),r.interrupt?e:U):t(L)}function _(L){const he="CDATA[";return L===he.charCodeAt(l++)?(n.consume(L),l===he.length?r.interrupt?e:$:_):t(L)}function S(L){return Fr(L)?(n.consume(L),a=String.fromCharCode(L),x):t(L)}function x(L){if(L===null||L===47||L===62||on(L)){const he=L===47,fe=a.toLowerCase();return!he&&!s&&S3.includes(fe)?(i=1,r.interrupt?e(L):$(L)):Oie.includes(a.toLowerCase())?(i=6,he?(n.consume(L),E):r.interrupt?e(L):$(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(L):s?w(L):C(L))}return L===45||Rr(L)?(n.consume(L),a+=String.fromCharCode(L),x):t(L)}function E(L){return L===62?(n.consume(L),r.interrupt?e:$):t(L)}function w(L){return St(L)?(n.consume(L),w):D(L)}function C(L){return L===47?(n.consume(L),D):L===58||L===95||Fr(L)?(n.consume(L),A):St(L)?(n.consume(L),C):D(L)}function A(L){return L===45||L===46||L===58||L===95||Rr(L)?(n.consume(L),A):P(L)}function P(L){return L===61?(n.consume(L),M):St(L)?(n.consume(L),P):C(L)}function M(L){return L===null||L===60||L===61||L===62||L===96?t(L):L===34||L===39?(n.consume(L),c=L,I):St(L)?(n.consume(L),M):V(L)}function I(L){return L===c?(n.consume(L),c=null,O):L===null||We(L)?t(L):(n.consume(L),I)}function V(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||on(L)?P(L):(n.consume(L),V)}function O(L){return L===47||L===62||St(L)?C(L):t(L)}function D(L){return L===62?(n.consume(L),H):t(L)}function H(L){return L===null||We(L)?$(L):St(L)?(n.consume(L),H):t(L)}function $(L){return L===45&&i===2?(n.consume(L),z):L===60&&i===1?(n.consume(L),X):L===62&&i===4?(n.consume(L),G):L===63&&i===3?(n.consume(L),U):L===93&&i===5?(n.consume(L),J):We(L)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(Nie,Q,ne)(L)):L===null||We(L)?(n.exit("htmlFlowData"),ne(L)):(n.consume(L),$)}function ne(L){return n.check(Lie,Z,Q)(L)}function Z(L){return n.enter("lineEnding"),n.consume(L),n.exit("lineEnding"),te}function te(L){return L===null||We(L)?ne(L):(n.enter("htmlFlowData"),$(L))}function z(L){return L===45?(n.consume(L),U):$(L)}function X(L){return L===47?(n.consume(L),a="",K):$(L)}function K(L){if(L===62){const he=a.toLowerCase();return S3.includes(he)?(n.consume(L),G):$(L)}return Fr(L)&&a.length<8?(n.consume(L),a+=String.fromCharCode(L),K):$(L)}function J(L){return L===93?(n.consume(L),U):$(L)}function U(L){return L===62?(n.consume(L),G):L===45&&i===2?(n.consume(L),U):$(L)}function G(L){return L===null||We(L)?(n.exit("htmlFlowData"),Q(L)):(n.consume(L),G)}function Q(L){return n.exit("htmlFlow"),e(L)}}function Gie(n,e,t){const r=this;return i;function i(a){return We(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):t(a)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}function zie(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(gf,e,t)}}const Vie={name:"htmlText",tokenize:Hie};function Hie(n,e,t){const r=this;let i,s,a;return l;function l(U){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(U),c}function c(U){return U===33?(n.consume(U),h):U===47?(n.consume(U),P):U===63?(n.consume(U),C):Fr(U)?(n.consume(U),V):t(U)}function h(U){return U===45?(n.consume(U),d):U===91?(n.consume(U),s=0,_):Fr(U)?(n.consume(U),w):t(U)}function d(U){return U===45?(n.consume(U),y):t(U)}function p(U){return U===null?t(U):U===45?(n.consume(U),g):We(U)?(a=p,X(U)):(n.consume(U),p)}function g(U){return U===45?(n.consume(U),y):p(U)}function y(U){return U===62?z(U):U===45?g(U):p(U)}function _(U){const G="CDATA[";return U===G.charCodeAt(s++)?(n.consume(U),s===G.length?S:_):t(U)}function S(U){return U===null?t(U):U===93?(n.consume(U),x):We(U)?(a=S,X(U)):(n.consume(U),S)}function x(U){return U===93?(n.consume(U),E):S(U)}function E(U){return U===62?z(U):U===93?(n.consume(U),E):S(U)}function w(U){return U===null||U===62?z(U):We(U)?(a=w,X(U)):(n.consume(U),w)}function C(U){return U===null?t(U):U===63?(n.consume(U),A):We(U)?(a=C,X(U)):(n.consume(U),C)}function A(U){return U===62?z(U):C(U)}function P(U){return Fr(U)?(n.consume(U),M):t(U)}function M(U){return U===45||Rr(U)?(n.consume(U),M):I(U)}function I(U){return We(U)?(a=I,X(U)):St(U)?(n.consume(U),I):z(U)}function V(U){return U===45||Rr(U)?(n.consume(U),V):U===47||U===62||on(U)?O(U):t(U)}function O(U){return U===47?(n.consume(U),z):U===58||U===95||Fr(U)?(n.consume(U),D):We(U)?(a=O,X(U)):St(U)?(n.consume(U),O):z(U)}function D(U){return U===45||U===46||U===58||U===95||Rr(U)?(n.consume(U),D):H(U)}function H(U){return U===61?(n.consume(U),$):We(U)?(a=H,X(U)):St(U)?(n.consume(U),H):O(U)}function $(U){return U===null||U===60||U===61||U===62||U===96?t(U):U===34||U===39?(n.consume(U),i=U,ne):We(U)?(a=$,X(U)):St(U)?(n.consume(U),$):(n.consume(U),Z)}function ne(U){return U===i?(n.consume(U),i=void 0,te):U===null?t(U):We(U)?(a=ne,X(U)):(n.consume(U),ne)}function Z(U){return U===null||U===34||U===39||U===60||U===61||U===96?t(U):U===47||U===62||on(U)?O(U):(n.consume(U),Z)}function te(U){return U===47||U===62||on(U)?O(U):t(U)}function z(U){return U===62?(n.consume(U),n.exit("htmlTextData"),n.exit("htmlText"),e):t(U)}function X(U){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(U),n.exit("lineEnding"),K}function K(U){return St(U)?Dt(n,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):J(U)}function J(U){return n.enter("htmlTextData"),a(U)}}const Xw={name:"labelEnd",resolveAll:$ie,resolveTo:qie,tokenize:Yie},jie={tokenize:Kie},Xie={tokenize:Zie},Wie={tokenize:Qie};function $ie(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&Bi(n,0,n.length,t),n}function qie(n,e){let t=n.length,r=0,i,s,a,l;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=t);const c={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[s][1].start},end:{...n[a][1].end}},d={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[a-2][1].start}};return l=[["enter",c,e],["enter",h,e]],l=Ki(l,n.slice(s+1,s+r+3)),l=Ki(l,[["enter",d,e]]),l=Ki(l,d_(e.parser.constructs.insideSpan.null,n.slice(s+r+4,a-3),e)),l=Ki(l,[["exit",d,e],n[a-2],n[a-1],["exit",h,e]]),l=Ki(l,n.slice(a+1)),l=Ki(l,[["exit",c,e]]),Bi(n,s,n.length,l),n}function Yie(n,e,t){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(a=r.parser.defined.includes(_s(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),c):t(g)}function c(g){return g===40?n.attempt(jie,d,a?d:p)(g):g===91?n.attempt(Xie,d,a?h:p)(g):a?d(g):p(g)}function h(g){return n.attempt(Wie,d,p)(g)}function d(g){return e(g)}function p(g){return s._balanced=!0,t(g)}}function Kie(n,e,t){return r;function r(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),i}function i(p){return on(p)?bd(n,s)(p):s(p)}function s(p){return p===41?d(p):s6(n,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return on(p)?bd(n,c)(p):d(p)}function l(p){return t(p)}function c(p){return p===34||p===39||p===40?o6(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function h(p){return on(p)?bd(n,d)(p):d(p)}function d(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),e):t(p)}}function Zie(n,e,t){const r=this;return i;function i(l){return a6.call(r,n,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(_s(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):t(l)}function a(l){return t(l)}}function Qie(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const Jie={name:"labelStartImage",resolveAll:Xw.resolveAll,tokenize:ese};function ese(n,e,t){const r=this;return i;function i(l){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(l),n.exit("labelImageMarker"),s}function s(l){return l===91?(n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelImage"),a):t(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):e(l)}}const tse={name:"labelStartLink",resolveAll:Xw.resolveAll,tokenize:nse};function nse(n,e,t){const r=this;return i;function i(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const kx={name:"lineEnding",tokenize:rse};function rse(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Dt(n,e,"linePrefix")}}const ig={name:"thematicBreak",tokenize:ise};function ise(n,e,t){let r=0,i;return s;function s(h){return n.enter("thematicBreak"),a(h)}function a(h){return i=h,l(h)}function l(h){return h===i?(n.enter("thematicBreakSequence"),c(h)):r>=3&&(h===null||We(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===i?(n.consume(h),r++,c):(n.exit("thematicBreakSequence"),St(h)?Dt(n,l,"whitespace")(h):l(h))}}const ni={continuation:{tokenize:lse},exit:cse,name:"list",tokenize:ose},sse={partial:!0,tokenize:hse},ase={partial:!0,tokenize:use};function ose(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(y){const _=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:HS(y)){if(r.containerState.type||(r.containerState.type=_,n.enter(_,{_container:!0})),_==="listUnordered")return n.enter("listItemPrefix"),y===42||y===45?n.check(ig,t,h)(y):h(y);if(!r.interrupt||y===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(y)}return t(y)}function c(y){return HS(y)&&++a<10?(n.consume(y),c):(!r.interrupt||a<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(n.exit("listItemValue"),h(y)):t(y)}function h(y){return n.enter("listItemMarker"),n.consume(y),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,n.check(gf,r.interrupt?t:d,n.attempt(sse,g,p))}function d(y){return r.containerState.initialBlankLine=!0,s++,g(y)}function p(y){return St(y)?(n.enter("listItemPrefixWhitespace"),n.consume(y),n.exit("listItemPrefixWhitespace"),g):t(y)}function g(y){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(y)}}function lse(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(gf,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Dt(n,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!St(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(ase,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Dt(n,n.attempt(ni,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function use(n,e,t){const r=this;return Dt(n,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):t(s)}}function cse(n){n.exit(this.containerState.type)}function hse(n,e,t){const r=this;return Dt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!St(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const E3={name:"setextUnderline",resolveTo:dse,tokenize:fse};function dse(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const a={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",a,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=a,n.push(["exit",a,e]),n}function fse(n,e,t){const r=this;let i;return s;function s(h){let d=r.events.length,p;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){p=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(n.enter("setextHeadingLine"),i=h,a(h)):t(h)}function a(h){return n.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===i?(n.consume(h),l):(n.exit("setextHeadingLineSequence"),St(h)?Dt(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||We(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const pse={tokenize:mse};function mse(n){const e=this,t=n.attempt(gf,r,n.attempt(this.parser.constructs.flowInitial,i,Dt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(xie,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const gse={resolveAll:u6()},yse=l6("string"),_se=l6("text");function l6(n){return{resolveAll:u6(n==="text"?bse:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,a,l);return a;function a(d){return h(d)?s(d):l(d)}function l(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),c}function c(d){return h(d)?(t.exit("data"),s(d)):(t.consume(d),c)}function h(d){if(d===null)return!0;const p=i[d];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function u6(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function bse(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,a=-1,l=0,c;for(;s--;){const h=i[s];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(h===-2)c=!0,l++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(l=0),l){const h={type:t===n.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const xse={42:ni,43:ni,45:ni,48:ni,49:ni,50:ni,51:ni,52:ni,53:ni,54:ni,55:ni,56:ni,57:ni,62:t6},vse={91:Cie},Sse={[-2]:Dx,[-1]:Dx,32:Dx},Ese={35:Bie,42:ig,45:[E3,ig],60:Iie,61:E3,95:ig,96:v3,126:v3},wse={38:r6,92:n6},Cse={[-5]:kx,[-4]:kx,[-3]:kx,33:Jie,38:r6,42:jS,60:[tie,Vie],91:tse,92:[Rie,n6],93:Xw,95:jS,96:pie},Tse={null:[jS,gse]},Ase={null:[42,95]},Mse={null:[]},Rse=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ase,contentInitial:vse,disable:Mse,document:xse,flow:Ese,flowInitial:Sse,insideSpan:Tse,string:wse,text:Cse},Symbol.toStringTag,{value:"Module"}));function Pse(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},s=[];let a=[],l=[];const c={attempt:I(P),check:I(M),consume:w,enter:C,exit:A,interrupt:I(M,{interrupt:!0})},h={code:null,containerState:{},defineSkip:S,events:[],now:_,parser:n,previous:null,sliceSerialize:g,sliceStream:y,write:p};let d=e.tokenize.call(h,c);return e.resolveAll&&s.push(e),h;function p(H){return a=Ki(a,H),x(),a[a.length-1]!==null?[]:(V(e,0),h.events=d_(s,h.events,h),h.events)}function g(H,$){return Dse(y(H),$)}function y(H){return Bse(a,H)}function _(){const{_bufferIndex:H,_index:$,line:ne,column:Z,offset:te}=r;return{_bufferIndex:H,_index:$,line:ne,column:Z,offset:te}}function S(H){i[H.line]=H.column,D()}function x(){let H;for(;r._index<a.length;){const $=a[r._index];if(typeof $=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<$.length;)E($.charCodeAt(r._bufferIndex));else E($)}}function E(H){d=d(H)}function w(H){We(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,D()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=H}function C(H,$){const ne=$||{};return ne.type=H,ne.start=_(),h.events.push(["enter",ne,h]),l.push(ne),ne}function A(H){const $=l.pop();return $.end=_(),h.events.push(["exit",$,h]),$}function P(H,$){V(H,$.from)}function M(H,$){$.restore()}function I(H,$){return ne;function ne(Z,te,z){let X,K,J,U;return Array.isArray(Z)?Q(Z):"tokenize"in Z?Q([Z]):G(Z);function G(ve){return Be;function Be(ke){const Ne=ke!==null&&ve[ke],rt=ke!==null&&ve.null,st=[...Array.isArray(Ne)?Ne:Ne?[Ne]:[],...Array.isArray(rt)?rt:rt?[rt]:[]];return Q(st)(ke)}}function Q(ve){return X=ve,K=0,ve.length===0?z:L(ve[K])}function L(ve){return Be;function Be(ke){return U=O(),J=ve,ve.partial||(h.currentConstruct=ve),ve.name&&h.parser.constructs.disable.null.includes(ve.name)?fe():ve.tokenize.call($?Object.assign(Object.create(h),$):h,c,he,fe)(ke)}}function he(ve){return H(J,U),te}function fe(ve){return U.restore(),++K<X.length?L(X[K]):z}}}function V(H,$){H.resolveAll&&!s.includes(H)&&s.push(H),H.resolve&&Bi(h.events,$,h.events.length-$,H.resolve(h.events.slice($),h)),H.resolveTo&&(h.events=H.resolveTo(h.events,h))}function O(){const H=_(),$=h.previous,ne=h.currentConstruct,Z=h.events.length,te=Array.from(l);return{from:Z,restore:z};function z(){r=H,h.previous=$,h.currentConstruct=ne,h.events.length=Z,l=te,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Bse(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(t===i)a=[n[t].slice(r,s)];else{if(a=n.slice(t,i),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}s>0&&a.push(n[i].slice(0,s))}return a}function Dse(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function kse(n){const r={constructs:JG([Rse,...(n||{}).extensions||[]]),content:i(qre),defined:[],document:i(Kre),flow:i(pse),lazy:{},string:i(yse),text:i(_se)};return r;function i(s){return a;function a(l){return Pse(r,s,l)}}}function Ose(n){for(;!i6(n););return n}const w3=/[\0\t\n\r]/g;function Ise(){let n=1,e="",t=!0,r;return i;function i(s,a,l){const c=[];let h,d,p,g,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),p=0,e="",t&&(s.charCodeAt(0)===65279&&p++,t=void 0);p<s.length;){if(w3.lastIndex=p,h=w3.exec(s),g=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(g),!h){e=s.slice(p);break}if(y===10&&p===g&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<g&&(c.push(s.slice(p,g)),n+=g-p),y){case 0:{c.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,c.push(-2);n++<d;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:r=!0,n=1}p=g+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Nse=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Lse(n){return n.replace(Nse,Fse)}function Fse(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return e6(t.slice(s?2:1),s?16:10)}return jw(t)||n}const c6={}.hasOwnProperty;function Use(n,e,t){return typeof e!="string"&&(t=e,e=void 0),Gse(t)(Ose(kse(t).document().write(Ise()(n,e,!0))))}function Gse(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Sn),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Vt),blockQuote:s(rt),characterEscape:O,characterReference:O,codeFenced:s(st),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(st,a),codeText:s(at,a),codeTextData:O,data:O,codeFlowValue:O,definition:s(nn),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(ut),hardBreakEscape:s(De),hardBreakTrailing:s(De),htmlFlow:s(ln,a),htmlFlowData:O,htmlText:s(ln,a),htmlTextData:O,image:s(vn),label:a,link:s(Sn),listItem:s(Pt),listItemValue:g,listOrdered:s(In,p),listUnordered:s(In),paragraph:s(Ht),reference:L,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Vt),strong:s(vr),thematicBreak:s(yi)},exit:{atxHeading:c(),atxHeadingSequence:P,autolink:c(),autolinkEmail:Ne,autolinkProtocol:ke,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:ve,characterReference:Be,codeFenced:c(x),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:_,codeFlowValue:D,codeIndented:c(E),codeText:c(te),codeTextData:D,data:D,definition:c(),definitionDestinationString:A,definitionLabelString:w,definitionTitleString:C,emphasis:c(),hardBreakEscape:c($),hardBreakTrailing:c($),htmlFlow:c(ne),htmlFlowData:D,htmlText:c(Z),htmlTextData:D,image:c(X),label:J,labelText:K,lineEnding:H,link:c(z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:he,resourceDestinationString:U,resourceTitleString:G,resource:Q,setextHeading:c(V),setextHeadingLineSequence:I,setextHeadingText:M,strong:c(),thematicBreak:c()}};h6(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(de){let be={type:"root",children:[]};const Fe={stack:[be],tokenStack:[],config:e,enter:l,exit:h,buffer:a,resume:d,data:t},et=[];let mt=-1;for(;++mt<de.length;)if(de[mt][1].type==="listOrdered"||de[mt][1].type==="listUnordered")if(de[mt][0]==="enter")et.push(mt);else{const Jn=et.pop();mt=i(de,Jn,mt)}for(mt=-1;++mt<de.length;){const Jn=e[de[mt][0]];c6.call(Jn,de[mt][1].type)&&Jn[de[mt][1].type].call(Object.assign({sliceSerialize:de[mt][2].sliceSerialize},Fe),de[mt][1])}if(Fe.tokenStack.length>0){const Jn=Fe.tokenStack[Fe.tokenStack.length-1];(Jn[1]||C3).call(Fe,void 0,Jn[0])}for(be.position={start:uo(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:uo(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},mt=-1;++mt<e.transforms.length;)be=e.transforms[mt](be)||be;return be}function i(de,be,Fe){let et=be-1,mt=-1,Jn=!1,Sr,Nn,dn,er;for(;++et<=Fe;){const Lt=de[et];switch(Lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Lt[0]==="enter"?mt++:mt--,er=void 0;break}case"lineEndingBlank":{Lt[0]==="enter"&&(Sr&&!er&&!mt&&!dn&&(dn=et),er=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:er=void 0}if(!mt&&Lt[0]==="enter"&&Lt[1].type==="listItemPrefix"||mt===-1&&Lt[0]==="exit"&&(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered")){if(Sr){let Xr=et;for(Nn=void 0;Xr--;){const An=de[Xr];if(An[1].type==="lineEnding"||An[1].type==="lineEndingBlank"){if(An[0]==="exit")continue;Nn&&(de[Nn][1].type="lineEndingBlank",Jn=!0),An[1].type="lineEnding",Nn=Xr}else if(!(An[1].type==="linePrefix"||An[1].type==="blockQuotePrefix"||An[1].type==="blockQuotePrefixWhitespace"||An[1].type==="blockQuoteMarker"||An[1].type==="listItemIndent"))break}dn&&(!Nn||dn<Nn)&&(Sr._spread=!0),Sr.end=Object.assign({},Nn?de[Nn][1].start:Lt[1].end),de.splice(Nn||et,0,["exit",Sr,Lt[2]]),et++,Fe++}if(Lt[1].type==="listItemPrefix"){const Xr={type:"listItem",_spread:!1,start:Object.assign({},Lt[1].start),end:void 0};Sr=Xr,de.splice(et,0,["enter",Xr,Lt[2]]),et++,Fe++,dn=void 0,er=!0}}}return de[be][1]._spread=Jn,Fe}function s(de,be){return Fe;function Fe(et){l.call(this,de(et),et),be&&be.call(this,et)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(de,be,Fe){this.stack[this.stack.length-1].children.push(de),this.stack.push(de),this.tokenStack.push([be,Fe||void 0]),de.position={start:uo(be.start),end:void 0}}function c(de){return be;function be(Fe){de&&de.call(this,Fe),h.call(this,Fe)}}function h(de,be){const Fe=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==de.type&&(be?be.call(this,de,et[0]):(et[1]||C3).call(this,de,et[0]));else throw new Error("Cannot close `"+de.type+"` ("+_d({start:de.start,end:de.end})+"): its not open");Fe.position.end=uo(de.end)}function d(){return Hw(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(de){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(de),10),this.data.expectingFirstListItemValue=void 0}}function y(){const de=this.resume(),be=this.stack[this.stack.length-1];be.lang=de}function _(){const de=this.resume(),be=this.stack[this.stack.length-1];be.meta=de}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const de=this.resume(),be=this.stack[this.stack.length-1];be.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const de=this.resume(),be=this.stack[this.stack.length-1];be.value=de.replace(/(\r?\n|\r)$/g,"")}function w(de){const be=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=be,Fe.identifier=_s(this.sliceSerialize(de)).toLowerCase()}function C(){const de=this.resume(),be=this.stack[this.stack.length-1];be.title=de}function A(){const de=this.resume(),be=this.stack[this.stack.length-1];be.url=de}function P(de){const be=this.stack[this.stack.length-1];if(!be.depth){const Fe=this.sliceSerialize(de).length;be.depth=Fe}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function I(de){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(de).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function O(de){const Fe=this.stack[this.stack.length-1].children;let et=Fe[Fe.length-1];(!et||et.type!=="text")&&(et=Nt(),et.position={start:uo(de.start),end:void 0},Fe.push(et)),this.stack.push(et)}function D(de){const be=this.stack.pop();be.value+=this.sliceSerialize(de),be.position.end=uo(de.end)}function H(de){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Fe=be.children[be.children.length-1];Fe.position.end=uo(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(O.call(this,de),D.call(this,de))}function $(){this.data.atHardBreak=!0}function ne(){const de=this.resume(),be=this.stack[this.stack.length-1];be.value=de}function Z(){const de=this.resume(),be=this.stack[this.stack.length-1];be.value=de}function te(){const de=this.resume(),be=this.stack[this.stack.length-1];be.value=de}function z(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=be,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function X(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=be,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function K(de){const be=this.sliceSerialize(de),Fe=this.stack[this.stack.length-2];Fe.label=Lse(be),Fe.identifier=_s(be).toLowerCase()}function J(){const de=this.stack[this.stack.length-1],be=this.resume(),Fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Fe.type==="link"){const et=de.children;Fe.children=et}else Fe.alt=be}function U(){const de=this.resume(),be=this.stack[this.stack.length-1];be.url=de}function G(){const de=this.resume(),be=this.stack[this.stack.length-1];be.title=de}function Q(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function he(de){const be=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=be,Fe.identifier=_s(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function fe(de){this.data.characterReferenceType=de.type}function ve(de){const be=this.sliceSerialize(de),Fe=this.data.characterReferenceType;let et;Fe?(et=e6(be,Fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=jw(be);const mt=this.stack[this.stack.length-1];mt.value+=et}function Be(de){const be=this.stack.pop();be.position.end=uo(de.end)}function ke(de){D.call(this,de);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(de)}function Ne(de){D.call(this,de);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(de)}function rt(){return{type:"blockquote",children:[]}}function st(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function nn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function Vt(){return{type:"heading",depth:0,children:[]}}function De(){return{type:"break"}}function ln(){return{type:"html",value:""}}function vn(){return{type:"image",title:null,url:"",alt:null}}function Sn(){return{type:"link",title:null,url:"",children:[]}}function In(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function Pt(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function Ht(){return{type:"paragraph",children:[]}}function vr(){return{type:"strong",children:[]}}function Nt(){return{type:"text",value:""}}function yi(){return{type:"thematicBreak"}}}function uo(n){return{line:n.line,column:n.column,offset:n.offset}}function h6(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?h6(n,r):zse(n,r)}}function zse(n,e){let t;for(t in e)if(c6.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function C3(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+_d({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+_d({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+_d({start:e.start,end:e.end})+") is still open")}function Vse(n){const e=this;e.parser=t;function t(r){return Use(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Hse(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function jse(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function Xse(n,e){const t=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),n.patch(e,s),s=n.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},n.patch(e,s),s}function Wse(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function $se(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function qse(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=kc(r.toLowerCase()),s=n.footnoteOrder.indexOf(r);let a,l=n.footnoteCounts.get(r);l===void 0?(l=0,n.footnoteOrder.push(r),a=n.footnoteOrder.length):a=s+1,l+=1,n.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function Yse(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Kse(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function d6(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function Zse(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return d6(n,e);const i={src:kc(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,s),n.applyData(e,s)}function Qse(n,e){const t={src:kc(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function Jse(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function eae(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return d6(n,e);const i={href:kc(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function tae(n,e){const t={href:kc(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function nae(n,e,t){const r=n.all(e),i=t?rae(t):f6(e),s={},a=[];if(typeof e.checked=="boolean"){const d=r[0];let p;d&&d.type==="element"&&d.tagName==="p"?p=d:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(i||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:a};return n.patch(e,h),n.applyData(e,h)}function rae(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=f6(t[r])}return e}function f6(n){const e=n.spread;return e??n.children.length>1}function iae(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function sae(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function aae(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function oae(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function lae(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],a),i.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},l=Uw(e.children[1]),c=WG(e.children[e.children.length-1]);l&&c&&(a.position={start:l,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function uae(n,e,t){const r=t?t.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,l=a?a.length:e.children.length;let c=-1;const h=[];for(;++c<l;){const p=e.children[c],g={},y=a?a[c]:void 0;y&&(g.align=y);let _={type:"element",tagName:s,properties:g,children:[]};p&&(_.children=n.all(p),n.patch(p,_),_=n.applyData(p,_)),h.push(_)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,d),n.applyData(e,d)}function cae(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const T3=9,A3=32;function hae(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const s=[];for(;r;)s.push(M3(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return s.push(M3(e.slice(i),i>0,!1)),s.join("")}function M3(n,e,t){let r=0,i=n.length;if(e){let s=n.codePointAt(r);for(;s===T3||s===A3;)r++,s=n.codePointAt(r)}if(t){let s=n.codePointAt(i-1);for(;s===T3||s===A3;)i--,s=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function dae(n,e){const t={type:"text",value:hae(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function fae(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const pae={blockquote:Hse,break:jse,code:Xse,delete:Wse,emphasis:$se,footnoteReference:qse,heading:Yse,html:Kse,imageReference:Zse,image:Qse,inlineCode:Jse,linkReference:eae,link:tae,listItem:nae,list:iae,paragraph:sae,root:aae,strong:oae,table:lae,tableCell:cae,tableRow:uae,text:dae,thematicBreak:fae,toml:Sm,yaml:Sm,definition:Sm,footnoteDefinition:Sm};function Sm(){}const p6=-1,f_=0,xd=1,Ug=2,Ww=3,$w=4,qw=5,Yw=6,m6=7,g6=8,R3=typeof self=="object"?self:globalThis,mae=(n,e)=>{const t=(i,s)=>(n.set(s,i),i),r=i=>{if(n.has(i))return n.get(i);const[s,a]=e[i];switch(s){case f_:case p6:return t(a,i);case xd:{const l=t([],i);for(const c of a)l.push(r(c));return l}case Ug:{const l=t({},i);for(const[c,h]of a)l[r(c)]=r(h);return l}case Ww:return t(new Date(a),i);case $w:{const{source:l,flags:c}=a;return t(new RegExp(l,c),i)}case qw:{const l=t(new Map,i);for(const[c,h]of a)l.set(r(c),r(h));return l}case Yw:{const l=t(new Set,i);for(const c of a)l.add(r(c));return l}case m6:{const{name:l,message:c}=a;return t(new R3[l](c),i)}case g6:return t(BigInt(a),i);case"BigInt":return t(Object(BigInt(a)),i);case"ArrayBuffer":return t(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return t(new DataView(l),a)}}return t(new R3[s](a),i)};return r},P3=n=>mae(new Map,n)(0),Bu="",{toString:gae}={},{keys:yae}=Object,td=n=>{const e=typeof n;if(e!=="object"||!n)return[f_,e];const t=gae.call(n).slice(8,-1);switch(t){case"Array":return[xd,Bu];case"Object":return[Ug,Bu];case"Date":return[Ww,Bu];case"RegExp":return[$w,Bu];case"Map":return[qw,Bu];case"Set":return[Yw,Bu];case"DataView":return[xd,t]}return t.includes("Array")?[xd,t]:t.includes("Error")?[m6,t]:[Ug,t]},Em=([n,e])=>n===f_&&(e==="function"||e==="symbol"),_ae=(n,e,t,r)=>{const i=(a,l)=>{const c=r.push(a)-1;return t.set(l,c),c},s=a=>{if(t.has(a))return t.get(a);let[l,c]=td(a);switch(l){case f_:{let d=a;switch(c){case"bigint":l=g6,d=a.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return i([p6],a)}return i([l,d],a)}case xd:{if(c){let g=a;return c==="DataView"?g=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(a)),i([c,[...g]],a)}const d=[],p=i([l,d],a);for(const g of a)d.push(s(g));return p}case Ug:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const d=[],p=i([l,d],a);for(const g of yae(a))(n||!Em(td(a[g])))&&d.push([s(g),s(a[g])]);return p}case Ww:return i([l,a.toISOString()],a);case $w:{const{source:d,flags:p}=a;return i([l,{source:d,flags:p}],a)}case qw:{const d=[],p=i([l,d],a);for(const[g,y]of a)(n||!(Em(td(g))||Em(td(y))))&&d.push([s(g),s(y)]);return p}case Yw:{const d=[],p=i([l,d],a);for(const g of a)(n||!Em(td(g)))&&d.push(s(g));return p}}const{message:h}=a;return i([l,{name:c,message:h}],a)};return s},B3=(n,{json:e,lossy:t}={})=>{const r=[];return _ae(!(e||t),!!e,new Map,r)(n),r},Gg=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?P3(B3(n,e)):structuredClone(n):(n,e)=>P3(B3(n,e));function bae(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function xae(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function vae(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||bae,r=n.options.footnoteBackLabel||xae,i=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",a=n.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const d=n.all(h),p=String(h.identifier).toUpperCase(),g=kc(p.toLowerCase());let y=0;const _=[],S=n.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){_.length>0&&_.push({type:"text",value:" "});let w=typeof t=="string"?t:t(c,y);typeof w=="string"&&(w={type:"text",value:w}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const w=x.children[x.children.length-1];w&&w.type==="text"?w.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(..._)}else d.push(..._);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:n.wrap(d,!0)};n.patch(h,E),l.push(E)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Gg(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(l,!0)},{type:"text",value:`
`}]}}const yf=(function(n){if(n==null)return Cae;if(typeof n=="function")return p_(n);if(typeof n=="object")return Array.isArray(n)?Sae(n):Eae(n);if(typeof n=="string")return wae(n);throw new Error("Expected function, string, or object as test")});function Sae(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=yf(n[t]);return p_(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Eae(n){const e=n;return p_(t);function t(r){const i=r;let s;for(s in n)if(i[s]!==e[s])return!1;return!0}}function wae(n){return p_(e);function e(t){return t&&t.type===n}}function p_(n){return e;function e(t,r,i){return!!(Tae(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Cae(){return!0}function Tae(n){return n!==null&&typeof n=="object"&&"type"in n}const y6=[],Aae=!0,XS=!1,Mae="skip";function _6(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const s=yf(i),a=r?-1:1;l(n,void 0,[])();function l(c,h,d){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=y6,_,S,x;if((!e||s(c,h,d[d.length-1]||void 0))&&(y=Rae(t(c,d)),y[0]===XS))return y;if("children"in c&&c.children){const E=c;if(E.children&&y[0]!==Mae)for(S=(r?E.children.length:-1)+a,x=d.concat(E);S>-1&&S<E.children.length;){const w=E.children[S];if(_=l(w,S,x)(),_[0]===XS)return _;S=typeof _[1]=="number"?_[1]:S+a}}return y}}}function Rae(n){return Array.isArray(n)?n:typeof n=="number"?[Aae,n]:n==null?y6:[n]}function m_(n,e,t,r){let i,s,a;typeof e=="function"&&typeof t!="function"?(s=void 0,a=e,i=t):(s=e,a=t,i=r),_6(n,s,l,i);function l(c,h){const d=h[h.length-1],p=d?d.children.indexOf(c):void 0;return a(c,p,d)}}const WS={}.hasOwnProperty,Pae={};function Bae(n,e){const t=e||Pae,r=new Map,i=new Map,s=new Map,a={...pae,...t.handlers},l={all:h,applyData:kae,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:t,patch:Dae,wrap:Iae};return m_(n,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const p=d.type==="definition"?r:i,g=String(d.identifier).toUpperCase();p.has(g)||p.set(g,d)}}),l;function c(d,p){const g=d.type,y=l.handlers[g];if(WS.call(l.handlers,g)&&y)return y(l,d,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in d){const{children:S,...x}=d,E=Gg(x);return E.children=l.all(d),E}return Gg(d)}return(l.options.unknownHandler||Oae)(l,d,p)}function h(d){const p=[];if("children"in d){const g=d.children;let y=-1;for(;++y<g.length;){const _=l.one(g[y],d);if(_){if(y&&g[y-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=D3(_.value)),!Array.isArray(_)&&_.type==="element")){const S=_.children[0];S&&S.type==="text"&&(S.value=D3(S.value))}Array.isArray(_)?p.push(..._):p.push(_)}}}return p}}function Dae(n,e){n.position&&(e.position=xre(n))}function kae(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,s=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const a="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:a}}t.type==="element"&&s&&Object.assign(t.properties,Gg(s)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function Oae(n,e){const t=e.data||{},r="value"in e&&!(WS.call(t,"hProperties")||WS.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function Iae(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function D3(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function k3(n,e){const t=Bae(n,e),r=t.one(n,void 0),i=vae(t),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Nae(n,e){return n&&"run"in n?async function(t,r){const i=k3(t,{file:r,...e});await n.run(i,r)}:function(t,r){return k3(t,{file:r,...n||e})}}function O3(n){if(n)throw n}var Ox,I3;function Lae(){if(I3)return Ox;I3=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var d=n.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!d&&!p)return!1;var g;for(g in h);return typeof g>"u"||n.call(h,g)},a=function(h,d){t&&d.name==="__proto__"?t(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},l=function(h,d){if(d==="__proto__")if(n.call(h,d)){if(r)return r(h,d).value}else return;return h[d]};return Ox=function c(){var h,d,p,g,y,_,S=arguments[0],x=1,E=arguments.length,w=!1;for(typeof S=="boolean"&&(w=S,S=arguments[1]||{},x=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});x<E;++x)if(h=arguments[x],h!=null)for(d in h)p=l(S,d),g=l(h,d),S!==g&&(w&&g&&(s(g)||(y=i(g)))?(y?(y=!1,_=p&&i(p)?p:[]):_=p&&s(p)?p:{},a(S,{name:d,newValue:c(w,_,g)})):typeof g<"u"&&a(S,{name:d,newValue:g}));return S},Ox}var Fae=Lae();const Ix=Ol(Fae);function $S(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Uae(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...i);function l(c,...h){const d=n[++s];let p=-1;if(c){a(c);return}for(;++p<i.length;)(h[p]===null||h[p]===void 0)&&(h[p]=i[p]);i=h,d?Gae(d,l)(...h):a(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function Gae(n,e){let t;return r;function r(...a){const l=n.length>a.length;let c;l&&a.push(i);try{c=n.apply(this,a)}catch(h){const d=h;if(l&&t)throw d;return i(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...l){t||(t=!0,e(a,...l))}function s(a){i(null,a)}}const Ns={basename:zae,dirname:Vae,extname:Hae,join:jae,sep:"/"};function zae(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');_f(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let a=-1,l=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else a<0&&(s=!0,a=i+1),l>-1&&(n.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=a));return t===r?r=a:r<0&&(r=n.length),n.slice(t,r)}function Vae(n){if(_f(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Hae(n){_f(n);let e=n.length,t=-1,r=0,i=-1,s=0,a;for(;e--;){const l=n.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}t<0&&(a=!0,t=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function jae(...n){let e=-1,t;for(;++e<n.length;)_f(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":Xae(t)}function Xae(n){_f(n);const e=n.codePointAt(0)===47;let t=Wae(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function Wae(n,e){let t="",r=0,i=-1,s=0,a=-1,l,c;for(;++a<=n.length;){if(a<n.length)l=n.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",r=0):(t=t.slice(0,c),r=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length>0){t="",r=0,i=a,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,a):t=n.slice(i+1,a),r=a-i-1;i=a,s=0}else l===46&&s>-1?s++:s=-1}return t}function _f(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const $ae={cwd:qae};function qae(){return"/"}function qS(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function Yae(n){if(typeof n=="string")n=new URL(n);else if(!qS(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Kae(n)}function Kae(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Nx=["history","path","basename","stem","extname","dirname"];class b6{constructor(e){let t;e?qS(e)?t={path:e}:typeof e=="string"||Zae(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":$ae.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Nx.length;){const s=Nx[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)Nx.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?Ns.basename(this.path):void 0}set basename(e){Fx(e,"basename"),Lx(e,"basename"),this.path=Ns.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ns.dirname(this.path):void 0}set dirname(e){N3(this.basename,"dirname"),this.path=Ns.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ns.extname(this.path):void 0}set extname(e){if(Lx(e,"extname"),N3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ns.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){qS(e)&&(e=Yae(e)),Fx(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ns.basename(this.path,this.extname):void 0}set stem(e){Fx(e,"stem"),Lx(e,"stem"),this.path=Ns.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Dr(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Lx(n,e){if(n&&n.includes(Ns.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ns.sep+"`")}function Fx(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function N3(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Zae(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const Qae=(function(n){const r=this.constructor.prototype,i=r[n],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),Jae={}.hasOwnProperty;class Kw extends Qae{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Uae()}copy(){const e=new Kw;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(Ix(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(zx("data",this.frozen),this.namespace[e]=t,this):Jae.call(this.namespace,e)&&this.namespace[e]||void 0:e?(zx("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=wm(e),r=this.parser||this.Parser;return Ux("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),Ux("process",this.parser||this.Parser),Gx("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(s,a){const l=wm(e),c=r.parse(l);r.run(c,l,function(d,p,g){if(d||!p||!g)return h(d);const y=p,_=r.stringify(y,g);noe(_)?g.value=_:g.result=_,h(d,g)});function h(d,p){d||!p?a(d):s?s(p):t(void 0,p)}}}processSync(e){let t=!1,r;return this.freeze(),Ux("processSync",this.parser||this.Parser),Gx("processSync",this.compiler||this.Compiler),this.process(e,i),F3("processSync","process",t),r;function i(s,a){t=!0,O3(s),r=a}}run(e,t,r){L3(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(a,l){const c=wm(t);i.run(e,c,h);function h(d,p,g){const y=p||e;d?l(d):a?a(y):r(void 0,y,g)}}}runSync(e,t){let r=!1,i;return this.run(e,t,s),F3("runSync","run",r),i;function s(a,l){O3(a),i=l,r=!0}}stringify(e,t){this.freeze();const r=wm(t),i=this.compiler||this.Compiler;return Gx("stringify",i),L3(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(zx("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...p]=h;c(d,p)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(i.settings=Ix(!0,i.settings,h.settings))}function l(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const p=h[d];s(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,d){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===h){g=p;break}if(g===-1)r.push([h,...d]);else if(d.length>0){let[y,..._]=d;const S=r[g][1];$S(S)&&$S(y)&&(y=Ix(!0,S,y)),r[g]=[h,y,..._]}}}}const eoe=new Kw().freeze();function Ux(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Gx(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function zx(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function L3(n){if(!$S(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function F3(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function wm(n){return toe(n)?n:new b6(n)}function toe(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function noe(n){return typeof n=="string"||roe(n)}function roe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const ioe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",U3=[],G3={allowDangerousHtml:!0},soe=/^(https?|ircs?|mailto|xmpp)$/i,aoe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ooe(n){const e=loe(n),t=uoe(n);return coe(e.runSync(e.parse(t),t),n)}function loe(n){const e=n.rehypePlugins||U3,t=n.remarkPlugins||U3,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...G3}:G3;return eoe().use(Vse).use(t).use(Nae,r).use(e)}function uoe(n){const e=n.children||"",t=new b6;return typeof e=="string"&&(t.value=e),t}function coe(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||hoe;for(const d of aoe)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+ioe+d.id,void 0);return m_(n,h),Cre(n,{Fragment:B.Fragment,components:i,ignoreInvalidStyle:!0,jsx:B.jsx,jsxs:B.jsxs,passKeys:!0,passNode:!0});function h(d,p,g){if(d.type==="raw"&&g&&typeof p=="number")return a?g.children.splice(p,1):g.children[p]={type:"text",value:d.value},p;if(d.type==="element"){let y;for(y in Bx)if(Object.hasOwn(Bx,y)&&Object.hasOwn(d.properties,y)){const _=d.properties[y],S=Bx[y];(S===null||S.includes(d.tagName))&&(d.properties[y]=c(String(_||""),y,d))}}if(d.type==="element"){let y=t?!t.includes(d.tagName):s?s.includes(d.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(d,p,g)),y&&g&&typeof p=="number")return l&&d.children?g.children.splice(p,1,...d.children):g.children.splice(p,1),p}}}function hoe(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||soe.test(n.slice(0,e))?n:""}function z3(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function doe(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function foe(n,e,t){const i=yf((t||{}).ignore||[]),s=poe(e);let a=-1;for(;++a<s.length;)_6(n,"text",l);function l(h,d){let p=-1,g;for(;++p<d.length;){const y=d[p],_=g?g.children:void 0;if(i(y,_?_.indexOf(y):void 0,g))return;g=y}if(g)return c(h,d)}function c(h,d){const p=d[d.length-1],g=s[a][0],y=s[a][1];let _=0;const x=p.children.indexOf(h);let E=!1,w=[];g.lastIndex=0;let C=g.exec(h.value);for(;C;){const A=C.index,P={index:C.index,input:C.input,stack:[...d,h]};let M=y(...C,P);if(typeof M=="string"&&(M=M.length>0?{type:"text",value:M}:void 0),M===!1?g.lastIndex=A+1:(_!==A&&w.push({type:"text",value:h.value.slice(_,A)}),Array.isArray(M)?w.push(...M):M&&w.push(M),_=A+C[0].length,E=!0),!g.global)break;C=g.exec(h.value)}return E?(_<h.value.length&&w.push({type:"text",value:h.value.slice(_)}),p.children.splice(x,1,...w)):w=[h],x+w.length}}function poe(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const i=t[r];e.push([moe(i[0]),goe(i[1])])}return e}function moe(n){return typeof n=="string"?new RegExp(doe(n),"g"):n}function goe(n){return typeof n=="function"?n:function(){return n}}const Vx="phrasing",Hx=["autolink","link","image","label"];function yoe(){return{transforms:[woe],enter:{literalAutolink:boe,literalAutolinkEmail:jx,literalAutolinkHttp:jx,literalAutolinkWww:jx},exit:{literalAutolink:Eoe,literalAutolinkEmail:Soe,literalAutolinkHttp:xoe,literalAutolinkWww:voe}}}function _oe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Vx,notInConstruct:Hx},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Vx,notInConstruct:Hx},{character:":",before:"[ps]",after:"\\/",inConstruct:Vx,notInConstruct:Hx}]}}function boe(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function jx(n){this.config.enter.autolinkProtocol.call(this,n)}function xoe(n){this.config.exit.autolinkProtocol.call(this,n)}function voe(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function Soe(n){this.config.exit.autolinkEmail.call(this,n)}function Eoe(n){this.exit(n)}function woe(n){foe(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Coe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Toe]],{ignore:["link","linkReference"]})}function Coe(n,e,t,r,i){let s="";if(!x6(i)||(/^w/i.test(e)&&(t=e+t,e="",s="http://"),!Aoe(t)))return!1;const a=Moe(t+r);if(!a[0])return!1;const l={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Toe(n,e,t,r){return!x6(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function Aoe(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Moe(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const i=z3(n,"(");let s=z3(n,")");for(;r!==-1&&i>s;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),s++;return[n,t]}function x6(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||kl(t)||h_(t))&&(!e||t!==47)}v6.peek=Loe;function Roe(){this.buffer()}function Poe(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function Boe(){this.buffer()}function Doe(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function koe(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=_s(this.sliceSerialize(n)).toLowerCase(),t.label=e}function Ooe(n){this.exit(n)}function Ioe(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=_s(this.sliceSerialize(n)).toLowerCase(),t.label=e}function Noe(n){this.exit(n)}function Loe(){return"["}function v6(n,e,t,r){const i=t.createTracker(r);let s=i.move("[^");const a=t.enter("footnoteReference"),l=t.enter("reference");return s+=i.move(t.safe(t.associationId(n),{after:"]",before:s})),l(),a(),s+=i.move("]"),s}function Foe(){return{enter:{gfmFootnoteCallString:Roe,gfmFootnoteCall:Poe,gfmFootnoteDefinitionLabelString:Boe,gfmFootnoteDefinition:Doe},exit:{gfmFootnoteCallString:koe,gfmFootnoteCall:Ooe,gfmFootnoteDefinitionLabelString:Ioe,gfmFootnoteDefinition:Noe}}}function Uoe(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:v6},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,i,s,a){const l=s.createTracker(a);let c=l.move("[^");const h=s.enter("footnoteDefinition"),d=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),d(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),e?S6:Goe))),h(),c}}function Goe(n,e,t){return e===0?n:S6(n,e,t)}function S6(n,e,t){return(t?"":"    ")+n}const zoe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];E6.peek=Woe;function Voe(){return{canContainEols:["delete"],enter:{strikethrough:joe},exit:{strikethrough:Xoe}}}function Hoe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zoe}],handlers:{delete:E6}}}function joe(n){this.enter({type:"delete",children:[]},n)}function Xoe(n){this.exit(n)}function E6(n,e,t,r){const i=t.createTracker(r),s=t.enter("strikethrough");let a=i.move("~~");return a+=t.containerPhrasing(n,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function Woe(){return"~"}function $oe(n){return n.length}function qoe(n,e){const t=e||{},r=(t.align||[]).concat(),i=t.stringLength||$oe,s=[],a=[],l=[],c=[];let h=0,d=-1;for(;++d<n.length;){const S=[],x=[];let E=-1;for(n[d].length>h&&(h=n[d].length);++E<n[d].length;){const w=Yoe(n[d][E]);if(t.alignDelimiters!==!1){const C=i(w);x[E]=C,(c[E]===void 0||C>c[E])&&(c[E]=C)}S.push(w)}a[d]=S,l[d]=x}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<h;)s[p]=V3(r[p]);else{const S=V3(r);for(;++p<h;)s[p]=S}p=-1;const g=[],y=[];for(;++p<h;){const S=s[p];let x="",E="";S===99?(x=":",E=":"):S===108?x=":":S===114&&(E=":");let w=t.alignDelimiters===!1?1:Math.max(1,c[p]-x.length-E.length);const C=x+"-".repeat(w)+E;t.alignDelimiters!==!1&&(w=x.length+w+E.length,w>c[p]&&(c[p]=w),y[p]=w),g[p]=C}a.splice(1,0,g),l.splice(1,0,y),d=-1;const _=[];for(;++d<a.length;){const S=a[d],x=l[d];p=-1;const E=[];for(;++p<h;){const w=S[p]||"";let C="",A="";if(t.alignDelimiters!==!1){const P=c[p]-(x[p]||0),M=s[p];M===114?C=" ".repeat(P):M===99?P%2?(C=" ".repeat(P/2+.5),A=" ".repeat(P/2-.5)):(C=" ".repeat(P/2),A=C):A=" ".repeat(P)}t.delimiterStart!==!1&&!p&&E.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&w==="")&&(t.delimiterStart!==!1||p)&&E.push(" "),t.alignDelimiters!==!1&&E.push(C),E.push(w),t.alignDelimiters!==!1&&E.push(A),t.padding!==!1&&E.push(" "),(t.delimiterEnd!==!1||p!==h-1)&&E.push("|")}_.push(t.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return _.join(`
`)}function Yoe(n){return n==null?"":String(n)}function V3(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Koe(n,e,t,r){const i=t.enter("blockquote"),s=t.createTracker(r);s.move("> "),s.shift(2);const a=t.indentLines(t.containerFlow(n,s.current()),Zoe);return i(),a}function Zoe(n,e,t){return">"+(t?"":" ")+n}function Qoe(n,e){return H3(n,e.inConstruct,!0)&&!H3(n,e.notInConstruct,!1)}function H3(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function j3(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&Qoe(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Joe(n,e){const t=String(n);let r=t.indexOf(e),i=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+e.length,r=t.indexOf(e,i);return a}function ele(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function tle(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function nle(n,e,t,r){const i=tle(t),s=n.value||"",a=i==="`"?"GraveAccent":"Tilde";if(ele(n,t)){const p=t.enter("codeIndented"),g=t.indentLines(s,rle);return p(),g}const l=t.createTracker(r),c=i.repeat(Math.max(Joe(s,i)+1,3)),h=t.enter("codeFenced");let d=l.move(c);if(n.lang){const p=t.enter(`codeFencedLang${a}`);d+=l.move(t.safe(n.lang,{before:d,after:" ",encode:["`"],...l.current()})),p()}if(n.lang&&n.meta){const p=t.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(t.safe(n.meta,{before:d,after:`
`,encode:["`"],...l.current()})),p()}return d+=l.move(`
`),s&&(d+=l.move(s+`
`)),d+=l.move(c),h(),d}function rle(n,e,t){return(t?"":"    ")+n}function Zw(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function ile(n,e,t,r){const i=Zw(t),s=i==='"'?"Quote":"Apostrophe",a=t.enter("definition");let l=t.enter("label");const c=t.createTracker(r);let h=c.move("[");return h+=c.move(t.safe(t.associationId(n),{before:h,after:"]",...c.current()})),h+=c.move("]: "),l(),!n.url||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(t.safe(n.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=t.enter("destinationRaw"),h+=c.move(t.safe(n.url,{before:h,after:n.title?" ":`
`,...c.current()}))),l(),n.title&&(l=t.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(t.safe(n.title,{before:h,after:i,...c.current()})),h+=c.move(i),l()),a(),h}function sle(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function jd(n){return"&#x"+n.toString(16).toUpperCase()+";"}function zg(n,e,t){const r=yc(n),i=yc(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}w6.peek=ale;function w6(n,e,t,r){const i=sle(t),s=t.enter("emphasis"),a=t.createTracker(r),l=a.move(i);let c=a.move(t.containerPhrasing(n,{after:i,before:l,...a.current()}));const h=c.charCodeAt(0),d=zg(r.before.charCodeAt(r.before.length-1),h,i);d.inside&&(c=jd(h)+c.slice(1));const p=c.charCodeAt(c.length-1),g=zg(r.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+jd(p));const y=a.move(i);return s(),t.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+c+y}function ale(n,e,t){return t.options.emphasis||"*"}function ole(n,e){let t=!1;return m_(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,XS}),!!((!n.depth||n.depth<3)&&Hw(n)&&(e.options.setext||t))}function lle(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),s=t.createTracker(r);if(ole(n,t)){const d=t.enter("headingSetext"),p=t.enter("phrasing"),g=t.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return p(),d(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const a="#".repeat(i),l=t.enter("headingAtx"),c=t.enter("phrasing");s.move(a+" ");let h=t.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=jd(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,t.options.closeAtx&&(h+=" "+a),c(),l(),h}C6.peek=ule;function C6(n){return n.value||""}function ule(){return"<"}T6.peek=cle;function T6(n,e,t,r){const i=Zw(t),s=i==='"'?"Quote":"Apostrophe",a=t.enter("image");let l=t.enter("label");const c=t.createTracker(r);let h=c.move("![");return h+=c.move(t.safe(n.alt,{before:h,after:"]",...c.current()})),h+=c.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(t.safe(n.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=t.enter("destinationRaw"),h+=c.move(t.safe(n.url,{before:h,after:n.title?" ":")",...c.current()}))),l(),n.title&&(l=t.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(t.safe(n.title,{before:h,after:i,...c.current()})),h+=c.move(i),l()),h+=c.move(")"),a(),h}function cle(){return"!"}A6.peek=hle;function A6(n,e,t,r){const i=n.referenceType,s=t.enter("imageReference");let a=t.enter("label");const l=t.createTracker(r);let c=l.move("![");const h=t.safe(n.alt,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),a();const d=t.stack;t.stack=[],a=t.enter("reference");const p=t.safe(t.associationId(n),{before:c,after:"]",...l.current()});return a(),t.stack=d,s(),i==="full"||!h||h!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function hle(){return"!"}M6.peek=dle;function M6(n,e,t){let r=n.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<t.unsafe.length;){const a=t.unsafe[s],l=t.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(r);){let h=c.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(c.index+1)}}return i+r+i}function dle(){return"`"}function R6(n,e){const t=Hw(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}P6.peek=fle;function P6(n,e,t,r){const i=Zw(t),s=i==='"'?"Quote":"Apostrophe",a=t.createTracker(r);let l,c;if(R6(n,t)){const d=t.stack;t.stack=[],l=t.enter("autolink");let p=a.move("<");return p+=a.move(t.containerPhrasing(n,{before:p,after:">",...a.current()})),p+=a.move(">"),l(),t.stack=d,p}l=t.enter("link"),c=t.enter("label");let h=a.move("[");return h+=a.move(t.containerPhrasing(n,{before:h,after:"](",...a.current()})),h+=a.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(t.safe(n.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(c=t.enter("destinationRaw"),h+=a.move(t.safe(n.url,{before:h,after:n.title?" ":")",...a.current()}))),c(),n.title&&(c=t.enter(`title${s}`),h+=a.move(" "+i),h+=a.move(t.safe(n.title,{before:h,after:i,...a.current()})),h+=a.move(i),c()),h+=a.move(")"),l(),h}function fle(n,e,t){return R6(n,t)?"<":"["}B6.peek=ple;function B6(n,e,t,r){const i=n.referenceType,s=t.enter("linkReference");let a=t.enter("label");const l=t.createTracker(r);let c=l.move("[");const h=t.containerPhrasing(n,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),a();const d=t.stack;t.stack=[],a=t.enter("reference");const p=t.safe(t.associationId(n),{before:c,after:"]",...l.current()});return a(),t.stack=d,s(),i==="full"||!h||h!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function ple(){return"["}function Qw(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function mle(n){const e=Qw(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function gle(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function D6(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function yle(n,e,t,r){const i=t.enter("list"),s=t.bulletCurrent;let a=n.ordered?gle(t):Qw(t);const l=n.ordered?a==="."?")":".":mle(t);let c=e&&t.bulletLastUsed?a===t.bulletLastUsed:!1;if(!n.ordered){const d=n.children?n.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(c=!0),D6(t)===a&&d){let p=-1;for(;++p<n.children.length;){const g=n.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),t.bulletCurrent=a;const h=t.containerFlow(n,r);return t.bulletLastUsed=a,t.bulletCurrent=s,i(),h}function _le(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function ble(n,e,t,r){const i=_le(t);let s=t.bulletCurrent||Qw(t);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(a=Math.ceil(a/4)*4);const l=t.createTracker(r);l.move(s+" ".repeat(a-s.length)),l.shift(a);const c=t.enter("listItem"),h=t.indentLines(t.containerFlow(n,l.current()),d);return c(),h;function d(p,g,y){return g?(y?"":" ".repeat(a))+p:(y?s:s+" ".repeat(a-s.length))+p}}function xle(n,e,t,r){const i=t.enter("paragraph"),s=t.enter("phrasing"),a=t.containerPhrasing(n,r);return s(),i(),a}const vle=yf(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Sle(n,e,t,r){return(n.children.some(function(a){return vle(a)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function Ele(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}k6.peek=wle;function k6(n,e,t,r){const i=Ele(t),s=t.enter("strong"),a=t.createTracker(r),l=a.move(i+i);let c=a.move(t.containerPhrasing(n,{after:i,before:l,...a.current()}));const h=c.charCodeAt(0),d=zg(r.before.charCodeAt(r.before.length-1),h,i);d.inside&&(c=jd(h)+c.slice(1));const p=c.charCodeAt(c.length-1),g=zg(r.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+jd(p));const y=a.move(i+i);return s(),t.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+c+y}function wle(n,e,t){return t.options.strong||"*"}function Cle(n,e,t,r){return t.safe(n.value,r)}function Tle(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Ale(n,e,t){const r=(D6(t)+(t.options.ruleSpaces?" ":"")).repeat(Tle(t));return t.options.ruleSpaces?r.slice(0,-1):r}const O6={blockquote:Koe,break:j3,code:nle,definition:ile,emphasis:w6,hardBreak:j3,heading:lle,html:C6,image:T6,imageReference:A6,inlineCode:M6,link:P6,linkReference:B6,list:yle,listItem:ble,paragraph:xle,root:Sle,strong:k6,text:Cle,thematicBreak:Ale};function Mle(){return{enter:{table:Rle,tableData:X3,tableHeader:X3,tableRow:Ble},exit:{codeText:Dle,table:Ple,tableData:Xx,tableHeader:Xx,tableRow:Xx}}}function Rle(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function Ple(n){this.exit(n),this.data.inTable=void 0}function Ble(n){this.enter({type:"tableRow",children:[]},n)}function Xx(n){this.exit(n)}function X3(n){this.enter({type:"tableCell",children:[]},n)}function Dle(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,kle));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function kle(n,e){return e==="|"?e:n}function Ole(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:a,tableCell:c,tableRow:l}};function a(y,_,S,x){return h(d(y,S,x),y.align)}function l(y,_,S,x){const E=p(y,S,x),w=h([E]);return w.slice(0,w.indexOf(`
`))}function c(y,_,S,x){const E=S.enter("tableCell"),w=S.enter("phrasing"),C=S.containerPhrasing(y,{...x,before:s,after:s});return w(),E(),C}function h(y,_){return qoe(y,{align:_,alignDelimiters:r,padding:t,stringLength:i})}function d(y,_,S){const x=y.children;let E=-1;const w=[],C=_.enter("table");for(;++E<x.length;)w[E]=p(x[E],_,S);return C(),w}function p(y,_,S){const x=y.children;let E=-1;const w=[],C=_.enter("tableRow");for(;++E<x.length;)w[E]=c(x[E],y,_,S);return C(),w}function g(y,_,S){let x=O6.inlineCode(y,_,S);return S.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function Ile(){return{exit:{taskListCheckValueChecked:W3,taskListCheckValueUnchecked:W3,paragraph:Lle}}}function Nle(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Fle}}}function W3(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function Lle(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,a;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){a=l;break}}a===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function Fle(n,e,t,r){const i=n.children[0],s=typeof n.checked=="boolean"&&i&&i.type==="paragraph",a="["+(n.checked?"x":" ")+"] ",l=t.createTracker(r);s&&l.move(a);let c=O6.listItem(n,e,t,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),c;function h(d){return d+a}}function Ule(){return[yoe(),Foe(),Voe(),Mle(),Ile()]}function Gle(n){return{extensions:[_oe(),Uoe(n),Hoe(),Ole(n),Nle()]}}const zle={tokenize:$le,partial:!0},I6={tokenize:qle,partial:!0},N6={tokenize:Yle,partial:!0},L6={tokenize:Kle,partial:!0},Vle={tokenize:Zle,partial:!0},F6={name:"wwwAutolink",tokenize:Xle,previous:G6},U6={name:"protocolAutolink",tokenize:Wle,previous:z6},ka={name:"emailAutolink",tokenize:jle,previous:V6},Ks={};function Hle(){return{text:Ks}}let sl=48;for(;sl<123;)Ks[sl]=ka,sl++,sl===58?sl=65:sl===91&&(sl=97);Ks[43]=ka;Ks[45]=ka;Ks[46]=ka;Ks[95]=ka;Ks[72]=[ka,U6];Ks[104]=[ka,U6];Ks[87]=[ka,F6];Ks[119]=[ka,F6];function jle(n,e,t){const r=this;let i,s;return a;function a(p){return!YS(p)||!V6.call(r,r.previous)||Jw(r.events)?t(p):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),l(p))}function l(p){return YS(p)?(n.consume(p),l):p===64?(n.consume(p),c):t(p)}function c(p){return p===46?n.check(Vle,d,h)(p):p===45||p===95||Rr(p)?(s=!0,n.consume(p),c):d(p)}function h(p){return n.consume(p),i=!0,c}function d(p){return s&&i&&Fr(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(p)):t(p)}}function Xle(n,e,t){const r=this;return i;function i(a){return a!==87&&a!==119||!G6.call(r,r.previous)||Jw(r.events)?t(a):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(zle,n.attempt(I6,n.attempt(N6,s),t),t)(a))}function s(a){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(a)}}function Wle(n,e,t){const r=this;let i="",s=!1;return a;function a(p){return(p===72||p===104)&&z6.call(r,r.previous)&&!Jw(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),n.consume(p),l):t(p)}function l(p){if(Fr(p)&&i.length<5)return i+=String.fromCodePoint(p),n.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return n.consume(p),c}return t(p)}function c(p){return p===47?(n.consume(p),s?h:(s=!0,c)):t(p)}function h(p){return p===null||Fg(p)||on(p)||kl(p)||h_(p)?t(p):n.attempt(I6,n.attempt(N6,d),t)(p)}function d(p){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(p)}}function $le(n,e,t){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,n.consume(a),i):a===46&&r===3?(n.consume(a),s):t(a)}function s(a){return a===null?t(a):e(a)}}function qle(n,e,t){let r,i,s;return a;function a(h){return h===46||h===95?n.check(L6,c,l)(h):h===null||on(h)||kl(h)||h!==45&&h_(h)?c(h):(s=!0,n.consume(h),a)}function l(h){return h===95?r=!0:(i=r,r=void 0),n.consume(h),a}function c(h){return i||r||!s?t(h):e(h)}}function Yle(n,e){let t=0,r=0;return i;function i(a){return a===40?(t++,n.consume(a),i):a===41&&r<t?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?n.check(L6,e,s)(a):a===null||on(a)||kl(a)?e(a):(n.consume(a),i)}function s(a){return a===41&&r++,n.consume(a),i}}function Kle(n,e,t){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(n.consume(l),r):l===38?(n.consume(l),s):l===93?(n.consume(l),i):l===60||l===null||on(l)||kl(l)?e(l):t(l)}function i(l){return l===null||l===40||l===91||on(l)||kl(l)?e(l):r(l)}function s(l){return Fr(l)?a(l):t(l)}function a(l){return l===59?(n.consume(l),r):Fr(l)?(n.consume(l),a):t(l)}}function Zle(n,e,t){return r;function r(s){return n.consume(s),i}function i(s){return Rr(s)?t(s):e(s)}}function G6(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||on(n)}function z6(n){return!Fr(n)}function V6(n){return!(n===47||YS(n))}function YS(n){return n===43||n===45||n===46||n===95||Rr(n)}function Jw(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const Qle={tokenize:aue,partial:!0};function Jle(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:rue,continuation:{tokenize:iue},exit:sue}},text:{91:{name:"gfmFootnoteCall",tokenize:nue},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:eue,resolveTo:tue}}}}function eue(n,e,t){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return t(c);const h=_s(r.sliceSerialize({start:a.end,end:r.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?t(c):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(c),n.exit("gfmFootnoteCallLabelMarker"),e(c))}}function tue(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...l),n}function nue(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return l;function l(p){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(p),n.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?t(p):(n.enter("gfmFootnoteCallMarker"),n.consume(p),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",h)}function h(p){if(s>999||p===93&&!a||p===null||p===91||on(p))return t(p);if(p===93){n.exit("chunkString");const g=n.exit("gfmFootnoteCallString");return i.includes(_s(r.sliceSerialize(g)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(p),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(p)}return on(p)||(a=!0),s++,n.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(n.consume(p),s++,h):h(p)}}function rue(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,l;return c;function c(_){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(_),n.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(_){return _===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(_),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",d):t(_)}function d(_){if(a>999||_===93&&!l||_===null||_===91||on(_))return t(_);if(_===93){n.exit("chunkString");const S=n.exit("gfmFootnoteDefinitionLabelString");return s=_s(r.sliceSerialize(S)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(_),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),g}return on(_)||(l=!0),a++,n.consume(_),_===92?p:d}function p(_){return _===91||_===92||_===93?(n.consume(_),a++,d):d(_)}function g(_){return _===58?(n.enter("definitionMarker"),n.consume(_),n.exit("definitionMarker"),i.includes(s)||i.push(s),Dt(n,y,"gfmFootnoteDefinitionWhitespace")):t(_)}function y(_){return e(_)}}function iue(n,e,t){return n.check(gf,e,n.attempt(Qle,e,t))}function sue(n){n.exit("gfmFootnoteDefinition")}function aue(n,e,t){const r=this;return Dt(n,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):t(s)}}function oue(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let h=c;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[c][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[c][1].end)},p={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[c][1].start)},g=[["enter",d,l],["enter",a[h][1],l],["exit",a[h][1],l],["enter",p,l]],y=l.parser.constructs.insideSpan.null;y&&Bi(g,g.length,0,d_(y,a.slice(h+1,c),l)),Bi(g,g.length,0,[["exit",p,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",d,l]]),Bi(a,h-1,c-h+3,g),c=h+g.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function s(a,l,c){const h=this.previous,d=this.events;let p=0;return g;function g(_){return h===126&&d[d.length-1][1].type!=="characterEscape"?c(_):(a.enter("strikethroughSequenceTemporary"),y(_))}function y(_){const S=yc(h);if(_===126)return p>1?c(_):(a.consume(_),p++,y);if(p<2&&!t)return c(_);const x=a.exit("strikethroughSequenceTemporary"),E=yc(_);return x._open=!E||E===2&&!!S,x._close=!S||S===2&&!!E,l(_)}}}class lue{constructor(){this.map=[]}add(e,t,r){uue(this,e,t,r)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function uue(n,e,t,r){let i=0;if(!(t===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===e){n.map[i][1]+=t,n.map[i][2].push(...r);return}i+=1}n.map.push([e,t,r])}}function cue(n,e){let t=!1;const r=[];for(;e<n.length;){const i=n[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function hue(){return{flow:{null:{name:"table",tokenize:due,resolveAll:fue}}}}function due(n,e,t){const r=this;let i=0,s=0,a;return l;function l(D){let H=r.events.length-1;for(;H>-1;){const Z=r.events[H][1].type;if(Z==="lineEnding"||Z==="linePrefix")H--;else break}const $=H>-1?r.events[H][1].type:null,ne=$==="tableHead"||$==="tableRow"?M:c;return ne===M&&r.parser.lazy[r.now().line]?t(D):ne(D)}function c(D){return n.enter("tableHead"),n.enter("tableRow"),h(D)}function h(D){return D===124||(a=!0,s+=1),d(D)}function d(D){return D===null?t(D):We(D)?s>1?(s=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),y):t(D):St(D)?Dt(n,d,"whitespace")(D):(s+=1,a&&(a=!1,i+=1),D===124?(n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),a=!0,d):(n.enter("data"),p(D)))}function p(D){return D===null||D===124||on(D)?(n.exit("data"),d(D)):(n.consume(D),D===92?g:p)}function g(D){return D===92||D===124?(n.consume(D),p):p(D)}function y(D){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(D):(n.enter("tableDelimiterRow"),a=!1,St(D)?Dt(n,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):_(D))}function _(D){return D===45||D===58?x(D):D===124?(a=!0,n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),S):P(D)}function S(D){return St(D)?Dt(n,x,"whitespace")(D):x(D)}function x(D){return D===58?(s+=1,a=!0,n.enter("tableDelimiterMarker"),n.consume(D),n.exit("tableDelimiterMarker"),E):D===45?(s+=1,E(D)):D===null||We(D)?A(D):P(D)}function E(D){return D===45?(n.enter("tableDelimiterFiller"),w(D)):P(D)}function w(D){return D===45?(n.consume(D),w):D===58?(a=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(D),n.exit("tableDelimiterMarker"),C):(n.exit("tableDelimiterFiller"),C(D))}function C(D){return St(D)?Dt(n,A,"whitespace")(D):A(D)}function A(D){return D===124?_(D):D===null||We(D)?!a||i!==s?P(D):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(D)):P(D)}function P(D){return t(D)}function M(D){return n.enter("tableRow"),I(D)}function I(D){return D===124?(n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),I):D===null||We(D)?(n.exit("tableRow"),e(D)):St(D)?Dt(n,I,"whitespace")(D):(n.enter("data"),V(D))}function V(D){return D===null||D===124||on(D)?(n.exit("data"),I(D)):(n.consume(D),D===92?O:V)}function O(D){return D===92||D===124?(n.consume(D),V):V(D)}}function fue(n,e){let t=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,h,d,p;const g=new lue;for(;++t<n.length;){const y=n[t],_=y[1];y[0]==="enter"?_.type==="tableHead"?(l=!1,c!==0&&($3(g,e,c,h,d),d=void 0,c=0),h={type:"table",start:Object.assign({},_.start),end:Object.assign({},_.end)},g.add(t,0,[["enter",h,e]])):_.type==="tableRow"||_.type==="tableDelimiterRow"?(r=!0,p=void 0,s=[0,0,0,0],a=[0,t+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},_.start),end:Object.assign({},_.end)},g.add(t,0,[["enter",d,e]])),i=_.type==="tableDelimiterRow"?2:d?3:1):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],p=Cm(g,e,s,i,void 0,p),s=[0,0,0,0]),a[2]=t)):_.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],p=Cm(g,e,s,i,void 0,p)),s=a,a=[s[1],t,0,0])):_.type==="tableHead"?(l=!0,c=t):_.type==="tableRow"||_.type==="tableDelimiterRow"?(c=t,s[1]!==0?(a[0]=a[1],p=Cm(g,e,s,i,t,p)):a[1]!==0&&(p=Cm(g,e,a,i,t,p)),i=0):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")&&(a[3]=t)}for(c!==0&&$3(g,e,c,h,d),g.consume(e.events),t=-1;++t<e.events.length;){const y=e.events[t];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=cue(e.events,t))}return n}function Cm(n,e,t,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";t[0]!==0&&(s.end=Object.assign({},Iu(e.events,t[0])),n.add(t[0],0,[["exit",s,e]]));const c=Iu(e.events,t[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},n.add(t[1],0,[["enter",s,e]]),t[2]!==0){const h=Iu(e.events,t[2]),d=Iu(e.events,t[3]),p={type:l,start:Object.assign({},h),end:Object.assign({},d)};if(n.add(t[2],0,[["enter",p,e]]),r!==2){const g=e.events[t[2]],y=e.events[t[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",t[3]>t[2]+1){const _=t[2]+1,S=t[3]-t[2]-1;n.add(_,S,[])}}n.add(t[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},Iu(e.events,i)),n.add(i,0,[["exit",s,e]]),s=void 0),s}function $3(n,e,t,r,i){const s=[],a=Iu(e.events,t);i&&(i.end=Object.assign({},a),s.push(["exit",i,e])),r.end=Object.assign({},a),s.push(["exit",r,e]),n.add(t+1,0,s)}function Iu(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const pue={name:"tasklistCheck",tokenize:gue};function mue(){return{text:{91:pue}}}function gue(n,e,t){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(c):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),s)}function s(c){return on(c)?(n.enter("taskListCheckValueUnchecked"),n.consume(c),n.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(n.enter("taskListCheckValueChecked"),n.consume(c),n.exit("taskListCheckValueChecked"),a):t(c)}function a(c){return c===93?(n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),l):t(c)}function l(c){return We(c)?e(c):St(c)?n.check({tokenize:yue},e,t)(c):t(c)}}function yue(n,e,t){return Dt(n,r,"whitespace");function r(i){return i===null?t(i):e(i)}}function _ue(n){return JG([Hle(),Jle(),oue(n),hue(),mue()])}const bue={};function xue(n){const e=this,t=n||bue,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(_ue(t)),s.push(Ule()),a.push(Gle(t))}const q3=(function(n,e,t){const r=yf(t);if(!n||!n.type||!n.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=n.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<n.children.length;)if(r(n.children[e],e,n))return n.children[e]}),Gl=(function(n){if(n==null)return Eue;if(typeof n=="string")return Sue(n);if(typeof n=="object")return vue(n);if(typeof n=="function")return eC(n);throw new Error("Expected function, string, or array as `test`")});function vue(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Gl(n[t]);return eC(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Sue(n){return eC(e);function e(t){return t.tagName===n}}function eC(n){return e;function e(t,r,i){return!!(wue(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Eue(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="element"&&"tagName"in n&&typeof n.tagName=="string")}function wue(n){return n!==null&&typeof n=="object"&&"type"in n&&"tagName"in n}const Y3=/\n/g,K3=/[\t ]+/g,KS=Gl("br"),Z3=Gl(Due),Cue=Gl("p"),Q3=Gl("tr"),Tue=Gl(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Bue,kue]),H6=Gl(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Aue(n,e){const t=e||{},r="children"in n?n.children:[],i=H6(n),s=W6(n,{whitespace:t.whitespace||"normal"}),a=[];(n.type==="text"||n.type==="comment")&&a.push(...X6(n,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<r.length;)a.push(...j6(r[l],n,{whitespace:s,breakBefore:l?void 0:i,breakAfter:l<r.length-1?KS(r[l+1]):i}));const c=[];let h;for(l=-1;++l<a.length;){const d=a[l];typeof d=="number"?h!==void 0&&d>h&&(h=d):d&&(h!==void 0&&h>-1&&c.push(`
`.repeat(h)||" "),h=-1,c.push(d))}return c.join("")}function j6(n,e,t){return n.type==="element"?Mue(n,e,t):n.type==="text"?t.whitespace==="normal"?X6(n,t):Rue(n):[]}function Mue(n,e,t){const r=W6(n,t),i=n.children||[];let s=-1,a=[];if(Tue(n))return a;let l,c;for(KS(n)||Q3(n)&&q3(e,n,Q3)?c=`
`:Cue(n)?(l=2,c=2):H6(n)&&(l=1,c=1);++s<i.length;)a=a.concat(j6(i[s],n,{whitespace:r,breakBefore:s?void 0:l,breakAfter:s<i.length-1?KS(i[s+1]):c}));return Z3(n)&&q3(e,n,Z3)&&a.push("	"),l&&a.unshift(l),c&&a.push(c),a}function X6(n,e){const t=String(n.value),r=[],i=[];let s=0;for(;s<=t.length;){Y3.lastIndex=s;const c=Y3.exec(t),h=c&&"index"in c?c.index:t.length;r.push(Pue(t.slice(s,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?e.breakBefore:!0,h===t.length?e.breakAfter:!0)),s=h+1}let a=-1,l;for(;++a<r.length;)r[a].charCodeAt(r[a].length-1)===8203||a<r.length-1&&r[a+1].charCodeAt(0)===8203?(i.push(r[a]),l=void 0):r[a]?(typeof l=="number"&&i.push(l),i.push(r[a]),l=0):(a===0||a===r.length-1)&&i.push(0);return i}function Rue(n){return[String(n.value)]}function Pue(n,e,t){const r=[];let i=0,s;for(;i<n.length;){K3.lastIndex=i;const a=K3.exec(n);s=a?a.index:n.length,!i&&!s&&a&&!e&&r.push(""),i!==s&&r.push(n.slice(i,s)),i=a?s+a[0].length:s}return i!==s&&!t&&r.push(""),r.join(" ")}function W6(n,e){if(n.type==="element"){const t=n.properties||{};switch(n.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.wrap?"pre-wrap":"pre";case"td":case"th":return t.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function Bue(n){return!!(n.properties||{}).hidden}function Due(n){return n.tagName==="td"||n.tagName==="th"}function kue(n){return n.tagName==="dialog"&&!(n.properties||{}).open}function Oue(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:e.optional(i)+n.IDENT_RE,relevance:0},y=e.optional(i)+n.IDENT_RE+"\\s*\\(",_=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],S=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],E=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:S,keyword:_,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},P={className:"function.dispatch",relevance:0,keywords:{_hint:E},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},M=[P,p,l,t,n.C_BLOCK_COMMENT_MODE,d,h],I={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:M.concat([{begin:/\(/,end:/\)/,keywords:A,contains:M.concat(["self"]),relevance:0}]),relevance:0},V={className:"function",begin:"("+a+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:A,relevance:0},{begin:y,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,d,l,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,d,l]}]},l,t,n.C_BLOCK_COMMENT_MODE,p]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(I,V,P,M,[p,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",l]},{begin:n.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function Iue(n){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},t=Oue(n),r=t.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,t.name="Arduino",t.aliases=["ino"],t.supersetOf="cpp",t}function Nue(n){const e=n.regex,t={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[t]}]};Object.assign(t,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},s=n.inherit(n.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,t,i]};i.contains.push(l);const c={match:/\\"/},h={className:"string",begin:/'/,end:/'/},d={match:/\\'/},p={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,t]},g=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],y=n.SHEBANG({binary:`(${g.join("|")})`,relevance:10}),_={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},S=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],x=["true","false"],E={match:/(\/[a-z._-]+)+/},w=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],C=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],A=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],P=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:S,literal:x,built_in:[...w,...C,"set","shopt",...A,...P]},contains:[y,n.SHEBANG(),_,p,s,a,E,l,c,h,d,t]}}function Lue(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:e.optional(i)+n.IDENT_RE,relevance:0},y=e.optional(i)+n.IDENT_RE+"\\s*\\(",x={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},E=[p,l,t,n.C_BLOCK_COMMENT_MODE,d,h],w={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:x,contains:E.concat([{begin:/\(/,end:/\)/,keywords:x,contains:E.concat(["self"]),relevance:0}]),relevance:0},C={begin:"("+a+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:x,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:x,relevance:0},{begin:y,returnBegin:!0,contains:[n.inherit(g,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,d,l,{begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,d,l]}]},l,t,n.C_BLOCK_COMMENT_MODE,p]};return{name:"C",aliases:["h"],keywords:x,disableAutodetect:!0,illegal:"</",contains:[].concat(w,C,E,[p,{begin:n.IDENT_RE+"::",keywords:x},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},n.TITLE_MODE]}]),exports:{preprocessor:p,strings:h,keywords:x}}}function Fue(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:e.optional(i)+n.IDENT_RE,relevance:0},y=e.optional(i)+n.IDENT_RE+"\\s*\\(",_=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],S=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],E=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:S,keyword:_,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},P={className:"function.dispatch",relevance:0,keywords:{_hint:E},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},M=[P,p,l,t,n.C_BLOCK_COMMENT_MODE,d,h],I={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:M.concat([{begin:/\(/,end:/\)/,keywords:A,contains:M.concat(["self"]),relevance:0}]),relevance:0},V={className:"function",begin:"("+a+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:A,relevance:0},{begin:y,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,d,l,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,d,l]}]},l,t,n.C_BLOCK_COMMENT_MODE,p]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(I,V,P,M,[p,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",l]},{begin:n.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function Uue(n){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],t=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:i.concat(s),built_in:e,literal:r},l=n.inherit(n.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},p=n.inherit(d,{illegal:/\n/}),g={className:"subst",begin:/\{/,end:/\}/,keywords:a},y=n.inherit(g,{illegal:/\n/}),_={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},n.BACKSLASH_ESCAPE,y]},S={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]},x=n.inherit(S,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},y]});g.contains=[S,_,d,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,c,n.C_BLOCK_COMMENT_MODE],y.contains=[x,_,p,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,c,n.inherit(n.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const E={variants:[h,S,_,d,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},w={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},C=n.IDENT_RE+"(<"+n.IDENT_RE+"(\\s*,\\s*"+n.IDENT_RE+")*>)?(\\[\\])?",A={begin:"@"+n.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[n.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},E,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,w,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,w,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:t.join(" "),relevance:0},{begin:n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[n.TITLE_MODE,w],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[E,c,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},A]}}const Gue=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),zue=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Vue=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Hue=[...zue,...Vue],jue=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Xue=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Wue=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),$ue=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function que(n){const e=n.regex,t=Gue(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",l=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Xue.join("|")+")"},{begin:":(:)?("+Wue.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+$ue.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:jue.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Hue.join("|")+")\\b"}]}}function Yue(n){const e=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function Kue(n){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function Zue(n){const e=n.regex,t=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[n.HASH_COMMENT_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(t,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function Que(n){const e=n.regex,t={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:n.NUMBER_RE}]},r=n.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[r,s,i,a,t,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,d=/'[^']*'/,p=e.either(c,h,d),g=e.concat(p,"(\\s*\\.\\s*",p,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:g,className:"attr",starts:{end:/$/,contains:[r,l,s,i,a,t]}}]}}var Nu="[0-9](_*[0-9])*",Tm=`\\.(${Nu})`,Am="[0-9a-fA-F](_*[0-9a-fA-F])*",J3={className:"number",variants:[{begin:`(\\b(${Nu})((${Tm})|\\.)?|(${Tm}))[eE][+-]?(${Nu})[fFdD]?\\b`},{begin:`\\b(${Nu})((${Tm})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Tm})[fFdD]?\\b`},{begin:`\\b(${Nu})[fFdD]\\b`},{begin:`\\b0[xX]((${Am})\\.?|(${Am})?\\.(${Am}))[pP][+-]?(${Nu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Am})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function $6(n,e,t){return t===-1?"":n.replace(e,r=>$6(n,e,t-1))}function Jue(n){const e=n.regex,t="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=t+$6("(?:<"+t+"~~~(?:\\s*,\\s*"+t+"~~~)*>)?",/~~~/g,2),c={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+t,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[n.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:c,illegal:/<\/|#/,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[n.BACKSLASH_ESCAPE]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,t],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,t),/\s+/,t,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,t],className:{1:"keyword",3:"title.class"},contains:[d,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",n.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:c,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[h,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,J3,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},J3,h]}}const ek="[A-Za-z$_][0-9A-Za-z$_]*",ece=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],tce=["true","false","null","undefined","NaN","Infinity"],q6=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Y6=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],K6=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],nce=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],rce=[].concat(K6,q6,Y6);function ice(n){const e=n.regex,t=(K,{after:J})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,J)!==-1},r=ek,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,J)=>{const U=K[0].length+K.index,G=K.input[U];if(G==="<"||G===","){J.ignoreMatch();return}G===">"&&(t(K,{after:U})||J.ignoreMatch());let Q;const L=K.input.substring(U);if(Q=L.match(/^\s*=/)){J.ignoreMatch();return}if((Q=L.match(/^\s+extends\s+/))&&Q.index===0){J.ignoreMatch();return}}},l={$pattern:ek,keyword:ece,literal:tce,built_in:rce,"variable.language":nce},c="[0-9](_?[0-9])*",h=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${d})((${h})|\\.)?|(${h}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},y={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},_={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,g]},w={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},C=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,_,S,x,{match:/\$\d+/},p];g.contains=C.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(C)});const A=[].concat(w,g.contains),P=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(A)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:P},I={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},V={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...q6,...Y6]}},O={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},D={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},H={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function $(K){return e.concat("(?!",K.join("|"),")")}const ne={match:e.concat(/\b/,$([...K6,"super","import"].map(K=>`${K}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},Z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},te={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:P,CLASS_REFERENCE:V},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),O,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,_,S,x,w,{match:/\$\d+/},p,V,{scope:"attr",match:r+e.lookahead(":"),relevance:0},X,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:P}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},D,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},ne,H,I,te,{match:/\$[(.]/}]}}function sce(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,t,n.QUOTE_STRING_MODE,i,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Lu="[0-9](_*[0-9])*",Mm=`\\.(${Lu})`,Rm="[0-9a-fA-F](_*[0-9a-fA-F])*",ace={className:"number",variants:[{begin:`(\\b(${Lu})((${Mm})|\\.)?|(${Mm}))[eE][+-]?(${Lu})[fFdD]?\\b`},{begin:`\\b(${Lu})((${Mm})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Mm})[fFdD]?\\b`},{begin:`\\b(${Lu})[fFdD]\\b`},{begin:`\\b0[xX]((${Rm})\\.?|(${Rm})?\\.(${Rm}))[pP][+-]?(${Lu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Rm})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function oce(n){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},t={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[n.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+n.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(a);const l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+n.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+n.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[n.inherit(a,{className:"string"}),"self"]}]},h=ace,d=n.COMMENT("/\\*","\\*/",{contains:[n.C_BLOCK_COMMENT_MODE]}),p={variants:[{className:"type",begin:n.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},g=p;return g.variants[1].contains=[p],p.variants[1].contains=[g],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),n.C_LINE_COMMENT_MODE,d,t,r,l,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:n.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[n.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[p,n.C_LINE_COMMENT_MODE,d],relevance:0},n.C_LINE_COMMENT_MODE,d,l,c,a,n.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,n.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},n.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,c]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const lce=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),uce=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],cce=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],hce=[...uce,...cce],dce=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Z6=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Q6=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),fce=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),pce=Z6.concat(Q6).sort().reverse();function mce(n){const e=lce(n),t=pce,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",a=[],l=[],c=function(C){return{className:"string",begin:"~?"+C+".*?"+C}},h=function(C,A,P){return{className:C,begin:A,relevance:P}},d={$pattern:/[a-z-]+/,keyword:r,attribute:dce.join(" ")},p={begin:"\\(",end:"\\)",contains:l,keywords:d,relevance:0};l.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,c("'"),c('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,p,h("variable","@@?"+i,10),h("variable","@\\{"+i+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const g=l.concat({begin:/\{/,end:/\}/,contains:a}),y={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(l)},_={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+fce.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:l}}]},S={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:l,relevance:0}},x={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:g}},E={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,y,h("keyword","all\\b"),h("variable","@\\{"+i+"\\}"),{begin:"\\b("+hce.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,h("selector-tag",s,0),h("selector-id","#"+s),h("selector-class","\\."+s,0),h("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Z6.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Q6.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:g},{begin:"!important"},e.FUNCTION_DISPATCH]},w={begin:i+`:(:)?(${t.join("|")})`,returnBegin:!0,contains:[E]};return a.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,S,x,w,_,E,y,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:a}}function gce(n){const e="\\[=*\\[",t="\\]=*\\]",r={begin:e,end:t,contains:["self"]},i=[n.COMMENT("--(?!"+e+")","$"),n.COMMENT("--"+e,t,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:n.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[n.inherit(n.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},n.C_NUMBER_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{className:"string",begin:e,end:t,contains:[r],relevance:5}])}}function yce(n){const e={className:"variable",variants:[{begin:"\\$\\("+n.UNDERSCORE_IDENT_RE+"\\)",contains:[n.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},t={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,t]},i={begin:"^"+n.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},a={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[n.HASH_COMMENT_MODE,e,t,r,i,s,a]}}function _ce(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},p=n.inherit(h,{contains:[]}),g=n.inherit(d,{contains:[]});h.contains.push(g),d.contains.push(p);let y=[t,c];return[h,d,p,g].forEach(E=>{E.contains=E.contains.concat(y)}),y=y.concat(h,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:y},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:y}]}]},t,s,h,d,{className:"quote",begin:"^>\\s+",contains:y,end:"$"},i,r,c,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function bce(n){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},t=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[e,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.C_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[n.UNDERSCORE_TITLE_MODE]},{begin:"\\."+n.UNDERSCORE_IDENT_RE,relevance:0}]}}function xce(n){const e=n.regex,t=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:t.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},a={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[n.BACKSLASH_ESCAPE,s,c],p=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],g=(S,x,E="\\1")=>{const w=E==="\\1"?E:e.concat(E,x);return e.concat(e.concat("(?:",S,")"),x,/(?:\\.|[^\\\/])*?/,w,/(?:\\.|[^\\\/])*?/,E,r)},y=(S,x,E)=>e.concat(e.concat("(?:",S,")"),x,/(?:\\.|[^\\\/])*?/,E,r),_=[c,n.HASH_COMMENT_MODE,n.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:g("s|tr|y",e.either(...p,{capture:!0}))},{begin:g("s|tr|y","\\(","\\)")},{begin:g("s|tr|y","\\[","\\]")},{begin:g("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:y("(?:m|qr)?",/\//,/\//)},{begin:y("m|qr",e.either(...p,{capture:!0}),/\1/)},{begin:y("m|qr",/\(/,/\)/)},{begin:y("m|qr",/\[/,/\]/)},{begin:y("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,l,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=_,a.contains=_,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:_}}function vce(n){const e=n.regex,t=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,t),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,t),s=e.concat(/[A-Z]+/,t),a={scope:"variable",match:"\\$+"+r},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},c={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=n.inherit(n.APOS_STRING_MODE,{illegal:null}),d=n.inherit(n.QUOTE_STRING_MODE,{illegal:null,contains:n.QUOTE_STRING_MODE.contains.concat(c)}),p={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:n.QUOTE_STRING_MODE.contains.concat(c),"on:begin":(Z,te)=>{te.data._beginMatch=Z[1]||Z[2]},"on:end":(Z,te)=>{te.data._beginMatch!==Z[1]&&te.ignoreMatch()}},g=n.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),y=`[ 	
]`,_={scope:"string",variants:[d,h,p,g]},S={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},x=["false","null","true"],E=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],w=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],A={keyword:E,literal:(Z=>{const te=[];return Z.forEach(z=>{te.push(z),z.toLowerCase()===z?te.push(z.toUpperCase()):te.push(z.toLowerCase())}),te})(x),built_in:w},P=Z=>Z.map(te=>te.replace(/\|\d+$/,"")),M={variants:[{match:[/new/,e.concat(y,"+"),e.concat("(?!",P(w).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},I=e.concat(r,"\\b(?!\\()"),V={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),I],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),I],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},O={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},D={relevance:0,begin:/\(/,end:/\)/,keywords:A,contains:[O,a,V,n.C_BLOCK_COMMENT_MODE,_,S,M]},H={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",P(E).join("\\b|"),"|",P(w).join("\\b|"),"\\b)"),r,e.concat(y,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[D]};D.contains.push(H);const $=[O,V,n.C_BLOCK_COMMENT_MODE,_,S,M],ne={begin:e.concat(/#\[\s*\\?/,e.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:x,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:x,keyword:["new","array"]},contains:["self",...$]},...$,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:A,contains:[ne,n.HASH_COMMENT_MODE,n.COMMENT("//","$"),n.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:n.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},a,H,V,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},M,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},n.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:A,contains:["self",ne,a,V,n.C_BLOCK_COMMENT_MODE,_,S]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[n.inherit(n.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},n.UNDERSCORE_TITLE_MODE]},_,S]}}function Sce(n){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function Ece(n){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function wce(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},d={begin:/\{\{/,relevance:0},p={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,c,d,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,c,d,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,d,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,d,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},g="[0-9](_?[0-9])*",y=`(\\b(${g}))?\\.(${g})|\\b(${g})\\.`,_=`\\b|${r.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${g})|(${y}))[eE][+-]?(${g})[jJ]?(?=${_})`},{begin:`(${y})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${_})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${_})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${_})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${_})`},{begin:`\\b(${g})[jJ](?=${_})`}]},x={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},E={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,S,p,n.HASH_COMMENT_MODE]}]};return h.contains=[p,S,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},p,x,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[E]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,E,p]}]}}function Cce(n){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function Tce(n){const e=n.regex,t=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:t,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[n.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:t},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),n.HASH_COMMENT_MODE,{scope:"string",contains:[n.BACKSLASH_ESCAPE],variants:[n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[t,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function Ace(n){const e=n.regex,t="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},h=[n.COMMENT("#","$",{contains:[l]}),n.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),n.COMMENT("^__END__",n.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:a},p={className:"string",contains:[n.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[n.BACKSLASH_ESCAPE,d]})]}]},g="[1-9](_?[0-9])*|0",y="[0-9](_?[0-9])*",_={className:"number",relevance:0,variants:[{begin:`\\b(${g})(\\.(${y}))?([eE][+-]?(${y})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},S={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},M=[p,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:a},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[S]},{begin:n.IDENT_RE+"::"},{className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[p,{begin:t}],relevance:0},_,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+n.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[n.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,h),relevance:0}].concat(c,h);d.contains=M,S.contains=M;const D=[{begin:/^\s*=>/,starts:{end:"$",contains:M}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:a,contains:M}}];return h.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[n.SHEBANG({binary:"ruby"})].concat(D).concat(h).concat(M)}}function Mce(n){const e=n.regex,t=/(r#)?/,r=e.concat(t,n.UNDERSCORE_IDENT_RE),i=e.concat(t,n.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:n.IDENT_RE+"!?",type:d,keyword:l,literal:c,built_in:h},illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*","\\*/",{contains:["self"]}),n.inherit(n.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:n.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:d}},{className:"punctuation",begin:"->"},s]}}const Rce=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Pce=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Bce=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Dce=[...Pce,...Bce],kce=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Oce=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Ice=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Nce=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Lce(n){const e=Rce(n),t=Ice,r=Oce,i="@[a-z-]+",s="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+Dce.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Nce.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:kce.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function Fce(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Uce(n){const e=n.regex,t=n.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],a=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],p=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],g=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],y=d,_=[...h,...c].filter(P=>!d.includes(P)),S={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},x={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},E={match:e.concat(/\b/,e.either(...y),/\s*\(/),relevance:0,keywords:{built_in:y}};function w(P){return e.concat(/\b/,e.either(...P.map(M=>M.replace(/\s+/,"\\s+"))),/\b/)}const C={scope:"keyword",match:w(g),relevance:0};function A(P,{exceptions:M,when:I}={}){const V=I;return M=M||[],P.map(O=>O.match(/\|\d+$/)||M.includes(O)?O:V(O)?`${O}|0`:O)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:A(_,{when:P=>P.length<3}),literal:s,type:l,built_in:p},contains:[{scope:"type",match:w(a)},C,E,S,r,i,n.C_NUMBER_MODE,n.C_BLOCK_COMMENT_MODE,t,x]}}function J6(n){return n?typeof n=="string"?n:n.source:null}function nd(n){return tn("(?=",n,")")}function tn(...n){return n.map(t=>J6(t)).join("")}function Gce(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function Nr(...n){return"("+(Gce(n).capture?"":"?:")+n.map(r=>J6(r)).join("|")+")"}const tC=n=>tn(/\b/,n,/\w$/.test(n)?/\b/:/\B/),zce=["Protocol","Type"].map(tC),tk=["init","self"].map(tC),Vce=["Any","Self"],Wx=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],nk=["false","nil","true"],Hce=["assignment","associativity","higherThan","left","lowerThan","none","right"],jce=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],rk=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],ez=Nr(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),tz=Nr(ez,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),$x=tn(ez,tz,"*"),nz=Nr(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),Vg=Nr(nz,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Is=tn(nz,Vg,"*"),Pm=tn(/[A-Z]/,Vg,"*"),Xce=["attached","autoclosure",tn(/convention\(/,Nr("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",tn(/objc\(/,Is,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],Wce=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function $ce(n){const e={match:/\s+/,relevance:0},t=n.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[n.C_LINE_COMMENT_MODE,t],i={match:[/\./,Nr(...zce,...tk)],className:{2:"keyword"}},s={match:tn(/\./,Nr(...Wx)),relevance:0},a=Wx.filter(De=>typeof De=="string").concat(["_|0"]),l=Wx.filter(De=>typeof De!="string").concat(Vce).map(tC),c={variants:[{className:"keyword",match:Nr(...l,...tk)}]},h={$pattern:Nr(/\b\w+/,/#\w+/),keyword:a.concat(jce),literal:nk},d=[i,s,c],p={match:tn(/\./,Nr(...rk)),relevance:0},g={className:"built_in",match:tn(/\b/,Nr(...rk),/(?=\()/)},y=[p,g],_={match:/->/,relevance:0},S={className:"operator",relevance:0,variants:[{match:$x},{match:`\\.(\\.|${tz})+`}]},x=[_,S],E="([0-9]_*)+",w="([0-9a-fA-F]_*)+",C={className:"number",relevance:0,variants:[{match:`\\b(${E})(\\.(${E}))?([eE][+-]?(${E}))?\\b`},{match:`\\b0x(${w})(\\.(${w}))?([pP][+-]?(${E}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},A=(De="")=>({className:"subst",variants:[{match:tn(/\\/,De,/[0\\tnr"']/)},{match:tn(/\\/,De,/u\{[0-9a-fA-F]{1,8}\}/)}]}),P=(De="")=>({className:"subst",match:tn(/\\/,De,/[\t ]*(?:[\r\n]|\r\n)/)}),M=(De="")=>({className:"subst",label:"interpol",begin:tn(/\\/,De,/\(/),end:/\)/}),I=(De="")=>({begin:tn(De,/"""/),end:tn(/"""/,De),contains:[A(De),P(De),M(De)]}),V=(De="")=>({begin:tn(De,/"/),end:tn(/"/,De),contains:[A(De),M(De)]}),O={className:"string",variants:[I(),I("#"),I("##"),I("###"),V(),V("#"),V("##"),V("###")]},D=[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}],H={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:D},$=De=>{const ln=tn(De,/\//),vn=tn(/\//,De);return{begin:ln,end:vn,contains:[...D,{scope:"comment",begin:`#(?!.*${vn})`,end:/$/}]}},ne={scope:"regexp",variants:[$("###"),$("##"),$("#"),H]},Z={match:tn(/`/,Is,/`/)},te={className:"variable",match:/\$\d+/},z={className:"variable",match:`\\$${Vg}+`},X=[Z,te,z],K={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:Wce,contains:[...x,C,O]}]}},J={scope:"keyword",match:tn(/@/,Nr(...Xce),nd(Nr(/\(/,/\s+/)))},U={scope:"meta",match:tn(/@/,Is)},G=[K,J,U],Q={match:nd(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:tn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,Vg,"+")},{className:"type",match:Pm,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:tn(/\s+&\s+/,nd(Pm)),relevance:0}]},L={begin:/</,end:/>/,keywords:h,contains:[...r,...d,...G,_,Q]};Q.contains.push(L);const he={match:tn(Is,/\s*:/),keywords:"_|0",relevance:0},fe={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",he,...r,ne,...d,...y,...x,C,O,...X,...G,Q]},ve={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,Q]},Be={begin:Nr(nd(tn(Is,/\s*:/)),nd(tn(Is,/\s+/,Is,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Is}]},ke={begin:/\(/,end:/\)/,keywords:h,contains:[Be,...r,...d,...x,C,O,...G,Q,fe],endsParent:!0,illegal:/["']/},Ne={match:[/(func|macro)/,/\s+/,Nr(Z.match,Is,$x)],className:{1:"keyword",3:"title.function"},contains:[ve,ke,e],illegal:[/\[/,/%/]},rt={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ve,ke,e],illegal:/\[|%/},st={match:[/operator/,/\s+/,$x],className:{1:"keyword",3:"title"}},at={begin:[/precedencegroup/,/\s+/,Pm],className:{1:"keyword",3:"title"},contains:[Q],keywords:[...Hce,...nk],end:/}/},nn={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ut={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Vt={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Is,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[ve,...d,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:Pm},...d],relevance:0}]};for(const De of O.variants){const ln=De.contains.find(Sn=>Sn.label==="interpol");ln.keywords=h;const vn=[...d,...y,...x,C,O,...X];ln.contains=[...vn,{begin:/\(/,end:/\)/,contains:["self",...vn]}]}return{name:"Swift",keywords:h,contains:[...r,Ne,rt,nn,ut,Vt,st,at,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},ne,...d,...y,...x,C,O,...X,...G,Q,fe]}}const Hg="[A-Za-z$_][0-9A-Za-z$_]*",rz=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],iz=["true","false","null","undefined","NaN","Infinity"],sz=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],az=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],oz=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],lz=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],uz=[].concat(oz,sz,az);function qce(n){const e=n.regex,t=(K,{after:J})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,J)!==-1},r=Hg,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,J)=>{const U=K[0].length+K.index,G=K.input[U];if(G==="<"||G===","){J.ignoreMatch();return}G===">"&&(t(K,{after:U})||J.ignoreMatch());let Q;const L=K.input.substring(U);if(Q=L.match(/^\s*=/)){J.ignoreMatch();return}if((Q=L.match(/^\s+extends\s+/))&&Q.index===0){J.ignoreMatch();return}}},l={$pattern:Hg,keyword:rz,literal:iz,built_in:uz,"variable.language":lz},c="[0-9](_?[0-9])*",h=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${d})((${h})|\\.)?|(${h}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},y={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},_={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,g],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,g]},w={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},C=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,_,S,x,{match:/\$\d+/},p];g.contains=C.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(C)});const A=[].concat(w,g.contains),P=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(A)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:P},I={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},V={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...sz,...az]}},O={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},D={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},H={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function $(K){return e.concat("(?!",K.join("|"),")")}const ne={match:e.concat(/\b/,$([...oz,"super","import"].map(K=>`${K}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},Z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},te={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:P,CLASS_REFERENCE:V},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),O,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,_,S,x,w,{match:/\$\d+/},p,V,{scope:"attr",match:r+e.lookahead(":"),relevance:0},X,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:P}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},D,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},ne,H,I,te,{match:/\$[(.]/}]}}function Yce(n){const e=n.regex,t=qce(n),r=Hg,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[t.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:Hg,keyword:rz.concat(c),literal:iz,built_in:uz.concat(i),"variable.language":lz},d={className:"meta",begin:"@"+r},p=(S,x,E)=>{const w=S.contains.findIndex(C=>C.label===x);if(w===-1)throw new Error("can not find mode to replace");S.contains.splice(w,1,E)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(d);const g=t.contains.find(S=>S.scope==="attr"),y=Object.assign({},g,{match:e.concat(r,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,g,y]),t.contains=t.contains.concat([d,s,a,y]),p(t,"shebang",n.SHEBANG()),p(t,"use_strict",l);const _=t.contains.find(S=>S.label==="func.def");return _.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function Kce(n){const e=n.regex,t={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,a=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,i),/ *#/)},{begin:e.concat(/# */,l,/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,e.either(s,i),/ +/,e.either(a,l),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},p=n.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),g=n.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[t,r,c,h,d,p,g,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[g]}]}}function Zce(n){n.regex;const e=n.COMMENT(/\(;/,/;\)/);e.contains.push("self");const t=n.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},a={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[t,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,a,i,n.QUOTE_STRING_MODE,c,h,l]}}function Qce(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=n.inherit(s,{begin:/\(/,end:/\)/}),l=n.inherit(n.APOS_STRING_MODE,{className:"string"}),c=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,l,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,a,c,l]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function Jce(n){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,i]},l=n.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),g={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},y={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},_={begin:/\{/,end:/\}/,contains:[y],illegal:"\\n",relevance:0},S={begin:"\\[",end:"\\]",contains:[y],illegal:"\\n",relevance:0},x=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},g,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},_,S,s,a],E=[...x];return E.pop(),E.push(l),y.contains=E,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:x}}const ehe={arduino:Iue,bash:Nue,c:Lue,cpp:Fue,csharp:Uue,css:que,diff:Yue,go:Kue,graphql:Zue,ini:Que,java:Jue,javascript:ice,json:sce,kotlin:oce,less:mce,lua:gce,makefile:yce,markdown:_ce,objectivec:bce,perl:xce,php:vce,"php-template":Sce,plaintext:Ece,python:wce,"python-repl":Cce,r:Tce,ruby:Ace,rust:Mce,scss:Lce,shell:Fce,sql:Uce,swift:$ce,typescript:Yce,vbnet:Kce,wasm:Zce,xml:Qce,yaml:Jce};var qx,ik;function the(){if(ik)return qx;ik=1;function n(R){return R instanceof Map?R.clear=R.delete=R.set=function(){throw new Error("map is read-only")}:R instanceof Set&&(R.add=R.clear=R.delete=function(){throw new Error("set is read-only")}),Object.freeze(R),Object.getOwnPropertyNames(R).forEach(j=>{const ie=R[j],ye=typeof ie;(ye==="object"||ye==="function")&&!Object.isFrozen(ie)&&n(ie)}),R}class e{constructor(j){j.data===void 0&&(j.data={}),this.data=j.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(R){return R.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(R,...j){const ie=Object.create(null);for(const ye in R)ie[ye]=R[ye];return j.forEach(function(ye){for(const $e in ye)ie[$e]=ye[$e]}),ie}const i="</span>",s=R=>!!R.scope,a=(R,{prefix:j})=>{if(R.startsWith("language:"))return R.replace("language:","language-");if(R.includes(".")){const ie=R.split(".");return[`${j}${ie.shift()}`,...ie.map((ye,$e)=>`${ye}${"_".repeat($e+1)}`)].join(" ")}return`${j}${R}`};class l{constructor(j,ie){this.buffer="",this.classPrefix=ie.classPrefix,j.walk(this)}addText(j){this.buffer+=t(j)}openNode(j){if(!s(j))return;const ie=a(j.scope,{prefix:this.classPrefix});this.span(ie)}closeNode(j){s(j)&&(this.buffer+=i)}value(){return this.buffer}span(j){this.buffer+=`<span class="${j}">`}}const c=(R={})=>{const j={children:[]};return Object.assign(j,R),j};class h{constructor(){this.rootNode=c(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(j){this.top.children.push(j)}openNode(j){const ie=c({scope:j});this.add(ie),this.stack.push(ie)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(j){return this.constructor._walk(j,this.rootNode)}static _walk(j,ie){return typeof ie=="string"?j.addText(ie):ie.children&&(j.openNode(ie),ie.children.forEach(ye=>this._walk(j,ye)),j.closeNode(ie)),j}static _collapse(j){typeof j!="string"&&j.children&&(j.children.every(ie=>typeof ie=="string")?j.children=[j.children.join("")]:j.children.forEach(ie=>{h._collapse(ie)}))}}class d extends h{constructor(j){super(),this.options=j}addText(j){j!==""&&this.add(j)}startScope(j){this.openNode(j)}endScope(){this.closeNode()}__addSublanguage(j,ie){const ye=j.root;ie&&(ye.scope=`language:${ie}`),this.add(ye)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function p(R){return R?typeof R=="string"?R:R.source:null}function g(R){return S("(?=",R,")")}function y(R){return S("(?:",R,")*")}function _(R){return S("(?:",R,")?")}function S(...R){return R.map(ie=>p(ie)).join("")}function x(R){const j=R[R.length-1];return typeof j=="object"&&j.constructor===Object?(R.splice(R.length-1,1),j):{}}function E(...R){return"("+(x(R).capture?"":"?:")+R.map(ye=>p(ye)).join("|")+")"}function w(R){return new RegExp(R.toString()+"|").exec("").length-1}function C(R,j){const ie=R&&R.exec(j);return ie&&ie.index===0}const A=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function P(R,{joinWith:j}){let ie=0;return R.map(ye=>{ie+=1;const $e=ie;let ct=p(ye),Me="";for(;ct.length>0;){const Te=A.exec(ct);if(!Te){Me+=ct;break}Me+=ct.substring(0,Te.index),ct=ct.substring(Te.index+Te[0].length),Te[0][0]==="\\"&&Te[1]?Me+="\\"+String(Number(Te[1])+$e):(Me+=Te[0],Te[0]==="("&&ie++)}return Me}).map(ye=>`(${ye})`).join(j)}const M=/\b\B/,I="[a-zA-Z]\\w*",V="[a-zA-Z_]\\w*",O="\\b\\d+(\\.\\d+)?",D="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",H="\\b(0b[01]+)",$="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ne=(R={})=>{const j=/^#![ ]*\//;return R.binary&&(R.begin=S(j,/.*\b/,R.binary,/\b.*/)),r({scope:"meta",begin:j,end:/$/,relevance:0,"on:begin":(ie,ye)=>{ie.index!==0&&ye.ignoreMatch()}},R)},Z={begin:"\\\\[\\s\\S]",relevance:0},te={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Z]},z={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Z]},X={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},K=function(R,j,ie={}){const ye=r({scope:"comment",begin:R,end:j,contains:[]},ie);ye.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const $e=E("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return ye.contains.push({begin:S(/[ ]+/,"(",$e,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),ye},J=K("//","$"),U=K("/\\*","\\*/"),G=K("#","$"),Q={scope:"number",begin:O,relevance:0},L={scope:"number",begin:D,relevance:0},he={scope:"number",begin:H,relevance:0},fe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Z,{begin:/\[/,end:/\]/,relevance:0,contains:[Z]}]},ve={scope:"title",begin:I,relevance:0},Be={scope:"title",begin:V,relevance:0},ke={begin:"\\.\\s*"+V,relevance:0};var rt=Object.freeze({__proto__:null,APOS_STRING_MODE:te,BACKSLASH_ESCAPE:Z,BINARY_NUMBER_MODE:he,BINARY_NUMBER_RE:H,COMMENT:K,C_BLOCK_COMMENT_MODE:U,C_LINE_COMMENT_MODE:J,C_NUMBER_MODE:L,C_NUMBER_RE:D,END_SAME_AS_BEGIN:function(R){return Object.assign(R,{"on:begin":(j,ie)=>{ie.data._beginMatch=j[1]},"on:end":(j,ie)=>{ie.data._beginMatch!==j[1]&&ie.ignoreMatch()}})},HASH_COMMENT_MODE:G,IDENT_RE:I,MATCH_NOTHING_RE:M,METHOD_GUARD:ke,NUMBER_MODE:Q,NUMBER_RE:O,PHRASAL_WORDS_MODE:X,QUOTE_STRING_MODE:z,REGEXP_MODE:fe,RE_STARTERS_RE:$,SHEBANG:ne,TITLE_MODE:ve,UNDERSCORE_IDENT_RE:V,UNDERSCORE_TITLE_MODE:Be});function st(R,j){R.input[R.index-1]==="."&&j.ignoreMatch()}function at(R,j){R.className!==void 0&&(R.scope=R.className,delete R.className)}function nn(R,j){j&&R.beginKeywords&&(R.begin="\\b("+R.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",R.__beforeBegin=st,R.keywords=R.keywords||R.beginKeywords,delete R.beginKeywords,R.relevance===void 0&&(R.relevance=0))}function ut(R,j){Array.isArray(R.illegal)&&(R.illegal=E(...R.illegal))}function Vt(R,j){if(R.match){if(R.begin||R.end)throw new Error("begin & end are not supported with match");R.begin=R.match,delete R.match}}function De(R,j){R.relevance===void 0&&(R.relevance=1)}const ln=(R,j)=>{if(!R.beforeMatch)return;if(R.starts)throw new Error("beforeMatch cannot be used with starts");const ie=Object.assign({},R);Object.keys(R).forEach(ye=>{delete R[ye]}),R.keywords=ie.keywords,R.begin=S(ie.beforeMatch,g(ie.begin)),R.starts={relevance:0,contains:[Object.assign(ie,{endsParent:!0})]},R.relevance=0,delete ie.beforeMatch},vn=["of","and","for","in","not","or","if","then","parent","list","value"],Sn="keyword";function In(R,j,ie=Sn){const ye=Object.create(null);return typeof R=="string"?$e(ie,R.split(" ")):Array.isArray(R)?$e(ie,R):Object.keys(R).forEach(function(ct){Object.assign(ye,In(R[ct],j,ct))}),ye;function $e(ct,Me){j&&(Me=Me.map(Te=>Te.toLowerCase())),Me.forEach(function(Te){const Le=Te.split("|");ye[Le[0]]=[ct,Pt(Le[0],Le[1])]})}}function Pt(R,j){return j?Number(j):Ht(R)?0:1}function Ht(R){return vn.includes(R.toLowerCase())}const vr={},Nt=R=>{console.error(R)},yi=(R,...j)=>{console.log(`WARN: ${R}`,...j)},de=(R,j)=>{vr[`${R}/${j}`]||(console.log(`Deprecated as of ${R}. ${j}`),vr[`${R}/${j}`]=!0)},be=new Error;function Fe(R,j,{key:ie}){let ye=0;const $e=R[ie],ct={},Me={};for(let Te=1;Te<=j.length;Te++)Me[Te+ye]=$e[Te],ct[Te+ye]=!0,ye+=w(j[Te-1]);R[ie]=Me,R[ie]._emit=ct,R[ie]._multi=!0}function et(R){if(Array.isArray(R.begin)){if(R.skip||R.excludeBegin||R.returnBegin)throw Nt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),be;if(typeof R.beginScope!="object"||R.beginScope===null)throw Nt("beginScope must be object"),be;Fe(R,R.begin,{key:"beginScope"}),R.begin=P(R.begin,{joinWith:""})}}function mt(R){if(Array.isArray(R.end)){if(R.skip||R.excludeEnd||R.returnEnd)throw Nt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),be;if(typeof R.endScope!="object"||R.endScope===null)throw Nt("endScope must be object"),be;Fe(R,R.end,{key:"endScope"}),R.end=P(R.end,{joinWith:""})}}function Jn(R){R.scope&&typeof R.scope=="object"&&R.scope!==null&&(R.beginScope=R.scope,delete R.scope)}function Sr(R){Jn(R),typeof R.beginScope=="string"&&(R.beginScope={_wrap:R.beginScope}),typeof R.endScope=="string"&&(R.endScope={_wrap:R.endScope}),et(R),mt(R)}function Nn(R){function j(Me,Te){return new RegExp(p(Me),"m"+(R.case_insensitive?"i":"")+(R.unicodeRegex?"u":"")+(Te?"g":""))}class ie{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Te,Le){Le.position=this.position++,this.matchIndexes[this.matchAt]=Le,this.regexes.push([Le,Te]),this.matchAt+=w(Te)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Te=this.regexes.map(Le=>Le[1]);this.matcherRe=j(P(Te,{joinWith:"|"}),!0),this.lastIndex=0}exec(Te){this.matcherRe.lastIndex=this.lastIndex;const Le=this.matcherRe.exec(Te);if(!Le)return null;const jt=Le.findIndex((dr,fr)=>fr>0&&dr!==void 0),Ft=this.matchIndexes[jt];return Le.splice(0,jt),Object.assign(Le,Ft)}}class ye{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Te){if(this.multiRegexes[Te])return this.multiRegexes[Te];const Le=new ie;return this.rules.slice(Te).forEach(([jt,Ft])=>Le.addRule(jt,Ft)),Le.compile(),this.multiRegexes[Te]=Le,Le}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Te,Le){this.rules.push([Te,Le]),Le.type==="begin"&&this.count++}exec(Te){const Le=this.getMatcher(this.regexIndex);Le.lastIndex=this.lastIndex;let jt=Le.exec(Te);if(this.resumingScanAtSamePosition()&&!(jt&&jt.index===this.lastIndex)){const Ft=this.getMatcher(0);Ft.lastIndex=this.lastIndex+1,jt=Ft.exec(Te)}return jt&&(this.regexIndex+=jt.position+1,this.regexIndex===this.count&&this.considerAll()),jt}}function $e(Me){const Te=new ye;return Me.contains.forEach(Le=>Te.addRule(Le.begin,{rule:Le,type:"begin"})),Me.terminatorEnd&&Te.addRule(Me.terminatorEnd,{type:"end"}),Me.illegal&&Te.addRule(Me.illegal,{type:"illegal"}),Te}function ct(Me,Te){const Le=Me;if(Me.isCompiled)return Le;[at,Vt,Sr,ln].forEach(Ft=>Ft(Me,Te)),R.compilerExtensions.forEach(Ft=>Ft(Me,Te)),Me.__beforeBegin=null,[nn,ut,De].forEach(Ft=>Ft(Me,Te)),Me.isCompiled=!0;let jt=null;return typeof Me.keywords=="object"&&Me.keywords.$pattern&&(Me.keywords=Object.assign({},Me.keywords),jt=Me.keywords.$pattern,delete Me.keywords.$pattern),jt=jt||/\w+/,Me.keywords&&(Me.keywords=In(Me.keywords,R.case_insensitive)),Le.keywordPatternRe=j(jt,!0),Te&&(Me.begin||(Me.begin=/\B|\b/),Le.beginRe=j(Le.begin),!Me.end&&!Me.endsWithParent&&(Me.end=/\B|\b/),Me.end&&(Le.endRe=j(Le.end)),Le.terminatorEnd=p(Le.end)||"",Me.endsWithParent&&Te.terminatorEnd&&(Le.terminatorEnd+=(Me.end?"|":"")+Te.terminatorEnd)),Me.illegal&&(Le.illegalRe=j(Me.illegal)),Me.contains||(Me.contains=[]),Me.contains=[].concat(...Me.contains.map(function(Ft){return er(Ft==="self"?Me:Ft)})),Me.contains.forEach(function(Ft){ct(Ft,Le)}),Me.starts&&ct(Me.starts,Te),Le.matcher=$e(Le),Le}if(R.compilerExtensions||(R.compilerExtensions=[]),R.contains&&R.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return R.classNameAliases=r(R.classNameAliases||{}),ct(R)}function dn(R){return R?R.endsWithParent||dn(R.starts):!1}function er(R){return R.variants&&!R.cachedVariants&&(R.cachedVariants=R.variants.map(function(j){return r(R,{variants:null},j)})),R.cachedVariants?R.cachedVariants:dn(R)?r(R,{starts:R.starts?r(R.starts):null}):Object.isFrozen(R)?r(R):R}var Lt="11.11.1";class Xr extends Error{constructor(j,ie){super(j),this.name="HTMLInjectionError",this.html=ie}}const An=t,ko=r,ss=Symbol("nomatch"),Zs=7,k=function(R){const j=Object.create(null),ie=Object.create(null),ye=[];let $e=!0;const ct="Could not find the language '{}', did you forget to load/include a language module?",Me={disableAutodetect:!0,name:"Plain text",contains:[]};let Te={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function Le(_e){return Te.noHighlightRe.test(_e)}function jt(_e){let Ge=_e.className+" ";Ge+=_e.parentNode?_e.parentNode.className:"";const bt=Te.languageDetectRe.exec(Ge);if(bt){const Xt=Or(bt[1]);return Xt||(yi(ct.replace("{}",bt[1])),yi("Falling back to no-highlight mode for this block.",_e)),Xt?bt[1]:"no-highlight"}return Ge.split(/\s+/).find(Xt=>Le(Xt)||Or(Xt))}function Ft(_e,Ge,bt){let Xt="",Ln="";typeof Ge=="object"?(Xt=_e,bt=Ge.ignoreIllegals,Ln=Ge.language):(de("10.7.0","highlight(lang, code, ...args) has been deprecated."),de("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Ln=_e,Xt=Ge),bt===void 0&&(bt=!0);const wr={code:Xt,language:Ln};Io("before:highlight",wr);const _i=wr.result?wr.result:dr(wr.language,wr.code,bt);return _i.code=wr.code,Io("after:highlight",_i),_i}function dr(_e,Ge,bt,Xt){const Ln=Object.create(null);function wr(Ee,Oe){return Ee.keywords[Oe]}function _i(){if(!Ye.keywords){jn.addText(Wt);return}let Ee=0;Ye.keywordPatternRe.lastIndex=0;let Oe=Ye.keywordPatternRe.exec(Wt),ot="";for(;Oe;){ot+=Wt.substring(Ee,Oe.index);const Et=pr.case_insensitive?Oe[0].toLowerCase():Oe[0],En=wr(Ye,Et);if(En){const[Li,zc]=En;if(jn.addText(ot),ot="",Ln[Et]=(Ln[Et]||0)+1,Ln[Et]<=Zs&&(La+=zc),Li.startsWith("_"))ot+=Oe[0];else{const Rf=pr.classNameAliases[Li]||Li;bi(Oe[0],Rf)}}else ot+=Oe[0];Ee=Ye.keywordPatternRe.lastIndex,Oe=Ye.keywordPatternRe.exec(Wt)}ot+=Wt.substring(Ee),jn.addText(ot)}function $r(){if(Wt==="")return;let Ee=null;if(typeof Ye.subLanguage=="string"){if(!j[Ye.subLanguage]){jn.addText(Wt);return}Ee=dr(Ye.subLanguage,Wt,!0,Mf[Ye.subLanguage]),Mf[Ye.subLanguage]=Ee._top}else Ee=Wr(Wt,Ye.subLanguage.length?Ye.subLanguage:null);Ye.relevance>0&&(La+=Ee.relevance),jn.__addSublanguage(Ee._emitter,Ee.language)}function un(){Ye.subLanguage!=null?$r():_i(),Wt=""}function bi(Ee,Oe){Ee!==""&&(jn.startScope(Oe),jn.addText(Ee),jn.endScope())}function Tf(Ee,Oe){let ot=1;const Et=Oe.length-1;for(;ot<=Et;){if(!Ee._emit[ot]){ot++;continue}const En=pr.classNameAliases[Ee[ot]]||Ee[ot],Li=Oe[ot];En?bi(Li,En):(Wt=Li,_i(),Wt=""),ot++}}function Vl(Ee,Oe){return Ee.scope&&typeof Ee.scope=="string"&&jn.openNode(pr.classNameAliases[Ee.scope]||Ee.scope),Ee.beginScope&&(Ee.beginScope._wrap?(bi(Wt,pr.classNameAliases[Ee.beginScope._wrap]||Ee.beginScope._wrap),Wt=""):Ee.beginScope._multi&&(Tf(Ee.beginScope,Oe),Wt="")),Ye=Object.create(Ee,{parent:{value:Ye}}),Ye}function Fc(Ee,Oe,ot){let Et=C(Ee.endRe,ot);if(Et){if(Ee["on:end"]){const En=new e(Ee);Ee["on:end"](Oe,En),En.isMatchIgnored&&(Et=!1)}if(Et){for(;Ee.endsParent&&Ee.parent;)Ee=Ee.parent;return Ee}}if(Ee.endsWithParent)return Fc(Ee.parent,Oe,ot)}function Hl(Ee){return Ye.matcher.regexIndex===0?(Wt+=Ee[0],1):(Fa=!0,0)}function x_(Ee){const Oe=Ee[0],ot=Ee.rule,Et=new e(ot),En=[ot.__beforeBegin,ot["on:begin"]];for(const Li of En)if(Li&&(Li(Ee,Et),Et.isMatchIgnored))return Hl(Oe);return ot.skip?Wt+=Oe:(ot.excludeBegin&&(Wt+=Oe),un(),!ot.returnBegin&&!ot.excludeBegin&&(Wt=Oe)),Vl(ot,Ee),ot.returnBegin?0:Oe.length}function qr(Ee){const Oe=Ee[0],ot=Ge.substring(Ee.index),Et=Fc(Ye,Ee,ot);if(!Et)return ss;const En=Ye;Ye.endScope&&Ye.endScope._wrap?(un(),bi(Oe,Ye.endScope._wrap)):Ye.endScope&&Ye.endScope._multi?(un(),Tf(Ye.endScope,Ee)):En.skip?Wt+=Oe:(En.returnEnd||En.excludeEnd||(Wt+=Oe),un(),En.excludeEnd&&(Wt=Oe));do Ye.scope&&jn.closeNode(),!Ye.skip&&!Ye.subLanguage&&(La+=Ye.relevance),Ye=Ye.parent;while(Ye!==Et.parent);return Et.starts&&Vl(Et.starts,Ee),En.returnEnd?0:Oe.length}function Uc(){const Ee=[];for(let Oe=Ye;Oe!==pr;Oe=Oe.parent)Oe.scope&&Ee.unshift(Oe.scope);Ee.forEach(Oe=>jn.openNode(Oe))}let No={};function jl(Ee,Oe){const ot=Oe&&Oe[0];if(Wt+=Ee,ot==null)return un(),0;if(No.type==="begin"&&Oe.type==="end"&&No.index===Oe.index&&ot===""){if(Wt+=Ge.slice(Oe.index,Oe.index+1),!$e){const Et=new Error(`0 width match regex (${_e})`);throw Et.languageName=_e,Et.badRule=No.rule,Et}return 1}if(No=Oe,Oe.type==="begin")return x_(Oe);if(Oe.type==="illegal"&&!bt){const Et=new Error('Illegal lexeme "'+ot+'" for mode "'+(Ye.scope||"<unnamed>")+'"');throw Et.mode=Ye,Et}else if(Oe.type==="end"){const Et=qr(Oe);if(Et!==ss)return Et}if(Oe.type==="illegal"&&ot==="")return Wt+=`
`,1;if(Gc>1e5&&Gc>Oe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Wt+=ot,ot.length}const pr=Or(_e);if(!pr)throw Nt(ct.replace("{}",_e)),new Error('Unknown language: "'+_e+'"');const Af=Nn(pr);let Xl="",Ye=Xt||Af;const Mf={},jn=new Te.__emitter(Te);Uc();let Wt="",La=0,ea=0,Gc=0,Fa=!1;try{if(pr.__emitTokens)pr.__emitTokens(Ge,jn);else{for(Ye.matcher.considerAll();;){Gc++,Fa?Fa=!1:Ye.matcher.considerAll(),Ye.matcher.lastIndex=ea;const Ee=Ye.matcher.exec(Ge);if(!Ee)break;const Oe=Ge.substring(ea,Ee.index),ot=jl(Oe,Ee);ea=Ee.index+ot}jl(Ge.substring(ea))}return jn.finalize(),Xl=jn.toHTML(),{language:_e,value:Xl,relevance:La,illegal:!1,_emitter:jn,_top:Ye}}catch(Ee){if(Ee.message&&Ee.message.includes("Illegal"))return{language:_e,value:An(Ge),illegal:!0,relevance:0,_illegalBy:{message:Ee.message,index:ea,context:Ge.slice(ea-100,ea+100),mode:Ee.mode,resultSoFar:Xl},_emitter:jn};if($e)return{language:_e,value:An(Ge),illegal:!1,relevance:0,errorRaised:Ee,_emitter:jn,_top:Ye};throw Ee}}function fr(_e){const Ge={value:An(_e),illegal:!1,relevance:0,_top:Me,_emitter:new Te.__emitter(Te)};return Ge._emitter.addText(_e),Ge}function Wr(_e,Ge){Ge=Ge||Te.languages||Object.keys(j);const bt=fr(_e),Xt=Ge.filter(Or).filter(Ia).map(un=>dr(un,_e,!1));Xt.unshift(bt);const Ln=Xt.sort((un,bi)=>{if(un.relevance!==bi.relevance)return bi.relevance-un.relevance;if(un.language&&bi.language){if(Or(un.language).supersetOf===bi.language)return 1;if(Or(bi.language).supersetOf===un.language)return-1}return 0}),[wr,_i]=Ln,$r=wr;return $r.secondBest=_i,$r}function Er(_e,Ge,bt){const Xt=Ge&&ie[Ge]||bt;_e.classList.add("hljs"),_e.classList.add(`language-${Xt}`)}function _t(_e){let Ge=null;const bt=jt(_e);if(Le(bt))return;if(Io("before:highlightElement",{el:_e,language:bt}),_e.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",_e);return}if(_e.children.length>0&&(Te.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(_e)),Te.throwUnescapedHTML))throw new Xr("One of your code blocks includes unescaped HTML.",_e.innerHTML);Ge=_e;const Xt=Ge.textContent,Ln=bt?Ft(Xt,{language:bt,ignoreIllegals:!0}):Wr(Xt);_e.innerHTML=Ln.value,_e.dataset.highlighted="yes",Er(_e,bt,Ln.language),_e.result={language:Ln.language,re:Ln.relevance,relevance:Ln.relevance},Ln.secondBest&&(_e.secondBest={language:Ln.secondBest.language,relevance:Ln.secondBest.relevance}),Io("after:highlightElement",{el:_e,result:Ln,text:Xt})}function tr(_e){Te=ko(Te,_e)}const kr=()=>{zl(),de("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Oa(){zl(),de("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ef=!1;function zl(){function _e(){zl()}if(document.readyState==="loading"){Ef||window.addEventListener("DOMContentLoaded",_e,!1),Ef=!0;return}document.querySelectorAll(Te.cssSelector).forEach(_t)}function wf(_e,Ge){let bt=null;try{bt=Ge(R)}catch(Xt){if(Nt("Language definition for '{}' could not be registered.".replace("{}",_e)),$e)Nt(Xt);else throw Xt;bt=Me}bt.name||(bt.name=_e),j[_e]=bt,bt.rawDefinition=Ge.bind(null,R),bt.aliases&&Qs(bt.aliases,{languageName:_e})}function Oo(_e){delete j[_e];for(const Ge of Object.keys(ie))ie[Ge]===_e&&delete ie[Ge]}function Lc(){return Object.keys(j)}function Or(_e){return _e=(_e||"").toLowerCase(),j[_e]||j[ie[_e]]}function Qs(_e,{languageName:Ge}){typeof _e=="string"&&(_e=[_e]),_e.forEach(bt=>{ie[bt.toLowerCase()]=Ge})}function Ia(_e){const Ge=Or(_e);return Ge&&!Ge.disableAutodetect}function Na(_e){_e["before:highlightBlock"]&&!_e["before:highlightElement"]&&(_e["before:highlightElement"]=Ge=>{_e["before:highlightBlock"](Object.assign({block:Ge.el},Ge))}),_e["after:highlightBlock"]&&!_e["after:highlightElement"]&&(_e["after:highlightElement"]=Ge=>{_e["after:highlightBlock"](Object.assign({block:Ge.el},Ge))})}function Hn(_e){Na(_e),ye.push(_e)}function Cf(_e){const Ge=ye.indexOf(_e);Ge!==-1&&ye.splice(Ge,1)}function Io(_e,Ge){const bt=_e;ye.forEach(function(Xt){Xt[bt]&&Xt[bt](Ge)})}function Js(_e){return de("10.7.0","highlightBlock will be removed entirely in v12.0"),de("10.7.0","Please use highlightElement now."),_t(_e)}Object.assign(R,{highlight:Ft,highlightAuto:Wr,highlightAll:zl,highlightElement:_t,highlightBlock:Js,configure:tr,initHighlighting:kr,initHighlightingOnLoad:Oa,registerLanguage:wf,unregisterLanguage:Oo,listLanguages:Lc,getLanguage:Or,registerAliases:Qs,autoDetection:Ia,inherit:ko,addPlugin:Hn,removePlugin:Cf}),R.debugMode=function(){$e=!1},R.safeMode=function(){$e=!0},R.versionString=Lt,R.regex={concat:S,lookahead:g,either:E,optional:_,anyNumberOfTimes:y};for(const _e in rt)typeof rt[_e]=="object"&&n(rt[_e]);return Object.assign(R,rt),R},F=k({});return F.newInstance=()=>k({}),qx=F,F.HighlightJS=F,F.default=F,qx}var nhe=the();const rhe=Ol(nhe),sk={},ihe="hljs-";function she(n){const e=rhe.newInstance();return n&&s(n),{highlight:t,highlightAuto:r,listLanguages:i,register:s,registerAlias:a,registered:l};function t(c,h,d){const p=d||sk,g=typeof p.prefix=="string"?p.prefix:ihe;if(!e.getLanguage(c))throw new Error("Unknown language: `"+c+"` is not registered");e.configure({__emitter:ahe,classPrefix:g});const y=e.highlight(h,{ignoreIllegals:!0,language:c});if(y.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:y.errorRaised});const _=y._emitter.root,S=_.data;return S.language=y.language,S.relevance=y.relevance,_}function r(c,h){const p=(h||sk).subset||i();let g=-1,y=0,_;for(;++g<p.length;){const S=p[g];if(!e.getLanguage(S))continue;const x=t(S,c,h);x.data&&x.data.relevance!==void 0&&x.data.relevance>y&&(y=x.data.relevance,_=x)}return _||{type:"root",children:[],data:{language:void 0,relevance:y}}}function i(){return e.listLanguages()}function s(c,h){if(typeof c=="string")e.registerLanguage(c,h);else{let d;for(d in c)Object.hasOwn(c,d)&&e.registerLanguage(d,c[d])}}function a(c,h){if(typeof c=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:c});else{let d;for(d in c)if(Object.hasOwn(c,d)){const p=c[d];e.registerAliases(typeof p=="string"?p:[...p],{languageName:d})}}}function l(c){return!!e.getLanguage(c)}}class ahe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],r=t.children[t.children.length-1];r&&r.type==="text"?r.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const r=this.stack[this.stack.length-1],i=e.root.children;t?r.children.push({type:"element",tagName:"span",properties:{className:[t]},children:i}):r.children.push(...i)}openNode(e){const t=this,r=e.split(".").map(function(a,l){return l?a+"_".repeat(l):t.options.classPrefix+a}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const ohe={};function lhe(n){const e=n||ohe,t=e.aliases,r=e.detect||!1,i=e.languages||ehe,s=e.plainText,a=e.prefix,l=e.subset;let c="hljs";const h=she(i);if(t&&h.registerAlias(t),a){const d=a.indexOf("-");c=d===-1?a:a.slice(0,d)}return function(d,p){m_(d,"element",function(g,y,_){if(g.tagName!=="code"||!_||_.type!=="element"||_.tagName!=="pre")return;const S=uhe(g);if(S===!1||!S&&!r||S&&s&&s.includes(S))return;Array.isArray(g.properties.className)||(g.properties.className=[]),g.properties.className.includes(c)||g.properties.className.unshift(c);const x=Aue(g,{whitespace:"pre"});let E;try{E=S?h.highlight(S,x,{prefix:a}):h.highlightAuto(x,{prefix:a,subset:l})}catch(w){const C=w;if(S&&/Unknown language/.test(C.message)){p.message("Cannot highlight as `"+S+"`, its not registered",{ancestors:[_,g],cause:C,place:g.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw C}!S&&E.data&&E.data.language&&g.properties.className.push("language-"+E.data.language),E.children.length>0&&(g.children=E.children)})}}function uhe(n){const e=n.properties.className;let t=-1;if(!Array.isArray(e))return;let r;for(;++t<e.length;){const i=String(e[t]);if(i==="no-highlight"||i==="nohighlight")return!1;!r&&i.slice(0,5)==="lang-"&&(r=i.slice(5)),!r&&i.slice(0,9)==="language-"&&(r=i.slice(9))}return r}const che=({src:n,alt:e,onClose:t})=>B.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200 cursor-zoom-out",onClick:t,children:[B.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/70 hover:text-white bg-black/50 rounded-full p-2 transition-colors",children:B.jsx(o_,{size:20})}),B.jsx("img",{src:n,alt:e,className:"max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:r=>r.stopPropagation()})]}),hhe=({attachment:n})=>{const[e,t]=W.useState(!1);return n.dataUrl?B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>t(!0),children:[B.jsx("img",{src:n.dataUrl,alt:n.name,className:"max-w-full max-h-72 rounded-lg object-contain border border-white/10 shadow-md hover:shadow-lg transition-shadow"}),B.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors rounded-lg flex items-center justify-center",children:B.jsx(Kee,{size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-lg"})}),B.jsx("span",{className:"absolute bottom-1 right-1 text-[10px] text-white/60 bg-black/40 px-1.5 py-0.5 rounded",children:n.name})]}),e&&B.jsx(che,{src:n.dataUrl,alt:n.name,onClose:()=>t(!1)})]}):null},dhe=({attachment:n})=>{const[e,t]=W.useState(!1),r=n.textContent?.substring(0,200)||"",i=n.textContent||"",s=i.split(`
`).length;return B.jsxs("div",{className:"rounded-lg border border-neutral-700/60 bg-neutral-900/80 overflow-hidden",children:[B.jsxs("button",{onClick:()=>t(!e),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-white/5 transition-colors",children:[e?B.jsx(Bee,{size:14,className:"text-cyan-400"}):B.jsx(kw,{size:14,className:"text-cyan-400"}),B.jsx("span",{className:"text-xs font-mono text-cyan-300 truncate flex-1",children:n.name}),B.jsxs("span",{className:"text-[10px] text-neutral-500",children:[s," lines"]})]}),e?B.jsx("pre",{className:"px-3 pb-3 overflow-x-auto text-xs text-neutral-300 font-mono max-h-80 overflow-y-auto leading-relaxed scrollbar-thin scrollbar-thumb-neutral-700",children:B.jsx("code",{children:i})}):B.jsx("div",{className:"px-3 pb-2",children:B.jsxs("pre",{className:"text-xs text-neutral-500 font-mono truncate leading-relaxed",children:[r,r.length<i.length?"...":""]})})]})},fhe=({attachments:n})=>!n||n.length===0?null:B.jsx("div",{className:"space-y-2 mb-2",children:n.map(e=>e.type==="image"?B.jsx(hhe,{attachment:e},e.id):B.jsx(dhe,{attachment:e},e.id))}),phe=({message:n})=>{const e=n.role==="user";return n.role==="system"?B.jsx("div",{className:"flex justify-center my-4",children:B.jsx("span",{className:"text-xs text-red-500 bg-red-950/30 px-2 py-1 rounded border border-red-900/50",children:n.content})}):B.jsx("div",{className:Yt("flex w-full mb-6 animate-in fade-in slide-in-from-bottom-2",e?"justify-end":"justify-start"),children:B.jsxs("div",{className:Yt("flex max-w-[85%] md:max-w-[75%] gap-2",e?"flex-row-reverse":"flex-row"),children:[B.jsx("div",{className:Yt("flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center shadow-lg",e?"bg-gradient-to-br from-cyan-500 to-blue-600":"bg-gradient-to-br from-purple-600 to-pink-600"),children:e?B.jsx(_te,{size:16,className:"text-white"}):B.jsx(Cee,{size:16,className:"text-white"})}),B.jsxs("div",{className:Yt("px-4 py-3 rounded-2xl shadow-md text-sm md:text-base leading-relaxed overflow-hidden",e?"bg-gradient-to-br from-cyan-500 to-blue-600 text-white rounded-tr-sm":"bg-neutral-800/90 border border-neutral-700/50 text-neutral-100 rounded-tl-sm backdrop-blur-sm"),children:[n.attachments&&n.attachments.length>0&&B.jsx(fhe,{attachments:n.attachments}),e?B.jsx("div",{className:"whitespace-pre-wrap break-words",children:n.content}):B.jsx("div",{className:"markdown-content",children:B.jsx(ooe,{remarkPlugins:[xue],rehypePlugins:[lhe],components:{p:({children:r})=>B.jsx("p",{className:"mb-3 last:mb-0",children:r}),code:({inline:r,className:i,children:s,...a})=>r?B.jsx("code",{className:"bg-neutral-900/60 text-cyan-400 px-1.5 py-0.5 rounded text-sm font-mono",...a,children:s}):B.jsx("code",{className:Yt("block bg-neutral-950 rounded-lg p-4 overflow-x-auto text-sm my-3",i),...a,children:s}),pre:({children:r})=>B.jsx("pre",{className:"my-3 overflow-hidden rounded-lg",children:r}),ul:({children:r})=>B.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:r}),ol:({children:r})=>B.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:r}),li:({children:r})=>B.jsx("li",{className:"ml-2",children:r}),blockquote:({children:r})=>B.jsx("blockquote",{className:"border-l-4 border-cyan-500/50 pl-4 italic text-neutral-300 my-3",children:r}),a:({href:r,children:i})=>B.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 underline",children:i}),h1:({children:r})=>B.jsx("h1",{className:"text-2xl font-bold mb-3 mt-4",children:r}),h2:({children:r})=>B.jsx("h2",{className:"text-xl font-bold mb-2 mt-3",children:r}),h3:({children:r})=>B.jsx("h3",{className:"text-lg font-semibold mb-2 mt-3",children:r}),strong:({children:r})=>B.jsx("strong",{className:"font-bold text-white",children:r}),em:({children:r})=>B.jsx("em",{className:"italic text-neutral-200",children:r})},children:n.content})})]})]})})},mhe=({externalFiles:n,onExternalFilesConsumed:e}={})=>{const[t,r]=W.useState(""),[i,s]=W.useState([]),[a,l]=W.useState(!1),c=W.useRef(null),h=W.useRef(null),{sendMessage:d,sendMessageWithAttachments:p,isLoading:g}=c_();W.useEffect(()=>{n&&n.length>0&&(s(O=>[...O,...n].slice(0,10)),e?.())},[n,e]),W.useEffect(()=>{c.current&&(c.current.style.height="inherit",c.current.style.height=`${c.current.scrollHeight}px`)},[t]);const y=async O=>{if(g||!t.trim()&&i.length===0)return;const D=t.trim(),H=[...i];r(""),s([]),c.current&&(c.current.style.height="auto"),H.length>0?await p(D,H):await d(D)},_=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),y())},S=W.useCallback(O=>{const D=Array.from(O);s(H=>[...H,...D].slice(0,10))},[]),x=O=>{s(D=>D.filter((H,$)=>$!==O))},E=()=>{h.current?.click()},w=O=>{O.target.files&&(S(O.target.files),O.target.value="")},C=W.useCallback(O=>{O.preventDefault(),O.stopPropagation(),l(!0)},[]),A=W.useCallback(O=>{O.preventDefault(),O.stopPropagation(),l(!1)},[]),P=W.useCallback(O=>{O.preventDefault(),O.stopPropagation(),l(!1),O.dataTransfer.files.length>0&&S(O.dataTransfer.files)},[S]),M=O=>O.type.startsWith("image/"),I=O=>M(O)?B.jsx(zee,{size:14,className:"text-purple-400"}):B.jsx(Uee,{size:14,className:"text-cyan-400"}),V=O=>O<1024?`${O}B`:O<1024*1024?`${(O/1024).toFixed(0)}KB`:`${(O/(1024*1024)).toFixed(1)}MB`;return B.jsxs("div",{className:`relative transition-all duration-200 ${a?"ring-2 ring-cyan-400/60 shadow-[0_0_20px_rgba(34,211,238,0.15)] rounded-xl":""}`,onDragOver:C,onDragLeave:A,onDrop:P,children:[a&&B.jsx("div",{className:"absolute inset-0 z-20 bg-cyan-500/10 border-2 border-dashed border-cyan-400/50 rounded-xl flex items-center justify-center pointer-events-none backdrop-blur-sm",children:B.jsxs("div",{className:"flex flex-col items-center gap-2 text-cyan-300",children:[B.jsx($D,{size:28,className:"animate-bounce"}),B.jsx("span",{className:"text-sm font-medium",children:"Drop files here"})]})}),B.jsx("input",{ref:h,type:"file",multiple:!0,className:"hidden",onChange:w,accept:"image/*,.txt,.md,.json,.csv,.xml,.html,.css,.js,.jsx,.ts,.tsx,.py,.log,.yaml,.yml,.toml,.ini,.cfg,.env,.sh,.bat,.sql,.java,.cpp,.c,.h,.rb,.go,.rs,.php,.swift,.kt"}),i.length>0&&B.jsx("div",{className:"flex flex-wrap gap-2 px-3 pt-3 pb-1",children:i.map((O,D)=>B.jsxs("div",{className:"flex items-center gap-1.5 bg-neutral-800/80 border border-neutral-700/50 rounded-lg px-2.5 py-1.5 text-xs group hover:border-neutral-600 transition-colors",children:[M(O)?B.jsx("img",{src:URL.createObjectURL(O),alt:O.name,className:"w-6 h-6 rounded object-cover"}):I(O),B.jsx("span",{className:"text-neutral-300 max-w-[120px] truncate",children:O.name}),B.jsx("span",{className:"text-neutral-500",children:V(O.size)}),B.jsx("button",{onClick:()=>x(D),className:"text-neutral-500 hover:text-red-400 transition-colors ml-0.5",children:B.jsx(o_,{size:12})})]},`${O.name}-${D}`))}),B.jsxs("div",{className:"relative flex items-end bg-neutral-950 border border-neutral-800 rounded-xl shadow-lg ring-1 ring-white/5 focus-within:ring-blue-500/50 transition-all",children:[B.jsx("button",{onClick:E,disabled:g,className:"p-2 m-1.5 rounded-lg text-neutral-500 hover:text-neutral-300 hover:bg-white/5 disabled:opacity-50 transition-colors",title:"Attach files",children:B.jsx($D,{size:18})}),B.jsx("textarea",{ref:c,value:t,onChange:O=>r(O.target.value),onKeyDown:_,placeholder:i.length>0?"Add a message about your files...":"Message Vanta...",rows:1,className:"w-full bg-transparent text-neutral-100 py-3 pr-2 max-h-48 resize-none focus:outline-none placeholder:text-neutral-500",disabled:g}),B.jsx("button",{onClick:()=>y(),disabled:!t.trim()&&i.length===0||g,className:"p-2 m-1.5 rounded-lg text-neutral-400 hover:text-white hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?B.jsx(RG,{className:"animate-spin",size:20}):B.jsx(cte,{size:20})})]})]})},nC=W.createContext({});function rC(n){const e=W.useRef(null);return e.current===null&&(e.current=n()),e.current}const cz=typeof window<"u",hz=cz?W.useLayoutEffect:W.useEffect,g_=W.createContext(null);function iC(n,e){n.indexOf(e)===-1&&n.push(e)}function jg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $s=(n,e,t)=>t>e?e:t<n?n:t;let sC=()=>{};const Pa={},dz=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function fz(n){return typeof n=="object"&&n!==null}const pz=n=>/^0[^.\s]+$/u.test(n);function aC(n){let e;return()=>(e===void 0&&(e=n()),e)}const ts=n=>n,ghe=(n,e)=>t=>e(n(t)),bf=(...n)=>n.reduce(ghe),Xd=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class oC{constructor(){this.subscriptions=[]}add(e){return iC(this.subscriptions,e),()=>jg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bs=n=>n*1e3,es=n=>n/1e3;function mz(n,e){return e?n*(1e3/e):0}const gz=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,yhe=1e-7,_he=12;function bhe(n,e,t,r,i){let s,a,l=0;do a=e+(t-e)/2,s=gz(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>yhe&&++l<_he);return a}function xf(n,e,t,r){if(n===e&&t===r)return ts;const i=s=>bhe(s,0,1,n,t);return s=>s===0||s===1?s:gz(i(s),e,r)}const yz=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,_z=n=>e=>1-n(1-e),bz=xf(.33,1.53,.69,.99),lC=_z(bz),xz=yz(lC),vz=n=>(n*=2)<1?.5*lC(n):.5*(2-Math.pow(2,-10*(n-1))),uC=n=>1-Math.sin(Math.acos(n)),Sz=_z(uC),Ez=yz(uC),xhe=xf(.42,0,1,1),vhe=xf(0,0,.58,1),wz=xf(.42,0,.58,1),She=n=>Array.isArray(n)&&typeof n[0]!="number",Cz=n=>Array.isArray(n)&&typeof n[0]=="number",Ehe={linear:ts,easeIn:xhe,easeInOut:wz,easeOut:vhe,circIn:uC,circInOut:Ez,circOut:Sz,backIn:lC,backInOut:xz,backOut:bz,anticipate:vz},whe=n=>typeof n=="string",ak=n=>{if(Cz(n)){sC(n.length===4);const[e,t,r,i]=n;return xf(e,t,r,i)}else if(whe(n))return Ehe[n];return n},Bm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Che(n,e){let t=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(h.schedule(d),n()),d(l)}const h={schedule:(d,p=!1,g=!1)=>{const _=g&&i?t:r;return p&&a.add(d),_.has(d)||_.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(l=d,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(c),t.clear(),i=!1,s&&(s=!1,h.process(d))}};return h}const The=40;function Tz(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=Bm.reduce((C,A)=>(C[A]=Che(s),C),{}),{setup:l,read:c,resolveKeyframes:h,preUpdate:d,update:p,preRender:g,render:y,postRender:_}=a,S=()=>{const C=Pa.useManualTiming?i.timestamp:performance.now();t=!1,Pa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,The),1)),i.timestamp=C,i.isProcessing=!0,l.process(i),c.process(i),h.process(i),d.process(i),p.process(i),g.process(i),y.process(i),_.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},x=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:Bm.reduce((C,A)=>{const P=a[A];return C[A]=(M,I=!1,V=!1)=>(t||x(),P.schedule(M,I,V)),C},{}),cancel:C=>{for(let A=0;A<Bm.length;A++)a[Bm[A]].cancel(C)},state:i,steps:a}}const{schedule:hn,cancel:Co,state:br,steps:Yx}=Tz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0);let sg;function Ahe(){sg=void 0}const Ur={now:()=>(sg===void 0&&Ur.set(br.isProcessing||Pa.useManualTiming?br.timestamp:performance.now()),sg),set:n=>{sg=n,queueMicrotask(Ahe)}},Az=n=>e=>typeof e=="string"&&e.startsWith(n),Mz=Az("--"),Mhe=Az("var(--"),cC=n=>Mhe(n)?Rhe.test(n.split("/*")[0].trim()):!1,Rhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ok(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Oc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Wd={...Oc,transform:n=>$s(0,1,n)},Dm={...Oc,default:1},vd=n=>Math.round(n*1e5)/1e5,hC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Phe(n){return n==null}const Bhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dC=(n,e)=>t=>!!(typeof t=="string"&&Bhe.test(t)&&t.startsWith(n)||e&&!Phe(t)&&Object.prototype.hasOwnProperty.call(t,e)),Rz=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,l]=r.match(hC);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Dhe=n=>$s(0,255,n),Kx={...Oc,transform:n=>Math.round(Dhe(n))},Sl={test:dC("rgb","red"),parse:Rz("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Kx.transform(n)+", "+Kx.transform(e)+", "+Kx.transform(t)+", "+vd(Wd.transform(r))+")"};function khe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ZS={test:dC("#"),parse:khe,transform:Sl.transform},vf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ho=vf("deg"),Xs=vf("%"),Pe=vf("px"),Ohe=vf("vh"),Ihe=vf("vw"),lk={...Xs,parse:n=>Xs.parse(n)/100,transform:n=>Xs.transform(n*100)},zu={test:dC("hsl","hue"),parse:Rz("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Xs.transform(vd(e))+", "+Xs.transform(vd(t))+", "+vd(Wd.transform(r))+")"},Kn={test:n=>Sl.test(n)||ZS.test(n)||zu.test(n),parse:n=>Sl.test(n)?Sl.parse(n):zu.test(n)?zu.parse(n):ZS.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Sl.transform(n):zu.transform(n),getAnimatableNone:n=>{const e=Kn.parse(n);return e.alpha=0,Kn.transform(e)}},Nhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lhe(n){return isNaN(n)&&typeof n=="string"&&(n.match(hC)?.length||0)+(n.match(Nhe)?.length||0)>0}const Pz="number",Bz="color",Fhe="var",Uhe="var(",uk="${}",Ghe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $d(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(Ghe,c=>(Kn.test(c)?(r.color.push(s),i.push(Bz),t.push(Kn.parse(c))):c.startsWith(Uhe)?(r.var.push(s),i.push(Fhe),t.push(c)):(r.number.push(s),i.push(Pz),t.push(parseFloat(c))),++s,uk)).split(uk);return{values:t,split:l,indexes:r,types:i}}function Dz(n){return $d(n).values}function kz(n){const{split:e,types:t}=$d(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const l=t[a];l===Pz?s+=vd(i[a]):l===Bz?s+=Kn.transform(i[a]):s+=i[a]}return s}}const zhe=n=>typeof n=="number"?0:Kn.test(n)?Kn.getAnimatableNone(n):n;function Vhe(n){const e=Dz(n);return kz(n)(e.map(zhe))}const To={test:Lhe,parse:Dz,createTransformer:kz,getAnimatableNone:Vhe};function Zx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Hhe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;i=Zx(c,l,n+1/3),s=Zx(c,l,n),a=Zx(c,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Xg(n,e){return t=>t>0?e:n}const Tn=(n,e,t)=>n+(e-n)*t,Qx=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jhe=[ZS,Sl,zu],Xhe=n=>jhe.find(e=>e.test(n));function ck(n){const e=Xhe(n);if(!e)return!1;let t=e.parse(n);return e===zu&&(t=Hhe(t)),t}const hk=(n,e)=>{const t=ck(n),r=ck(e);if(!t||!r)return Xg(n,e);const i={...t};return s=>(i.red=Qx(t.red,r.red,s),i.green=Qx(t.green,r.green,s),i.blue=Qx(t.blue,r.blue,s),i.alpha=Tn(t.alpha,r.alpha,s),Sl.transform(i))},QS=new Set(["none","hidden"]);function Whe(n,e){return QS.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function $he(n,e){return t=>Tn(n,e,t)}function fC(n){return typeof n=="number"?$he:typeof n=="string"?cC(n)?Xg:Kn.test(n)?hk:Khe:Array.isArray(n)?Oz:typeof n=="object"?Kn.test(n)?hk:qhe:Xg}function Oz(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>fC(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function qhe(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=fC(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Yhe(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=n.indexes[s][r[s]],l=n.values[a]??0;t[i]=l,r[s]++}return t}const Khe=(n,e)=>{const t=To.createTransformer(e),r=$d(n),i=$d(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?QS.has(n)&&!i.values.length||QS.has(e)&&!r.values.length?Whe(n,e):bf(Oz(Yhe(r,i),i.values),t):Xg(n,e)};function Iz(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Tn(n,e,t):fC(n)(n,e)}const Zhe=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>hn.update(e,t),stop:()=>Co(e),now:()=>br.isProcessing?br.timestamp:Ur.now()}},Nz=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wg=2e4;function pC(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Wg;)e+=t,r=n.next(e);return e>=Wg?1/0:e}function Qhe(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(pC(r),Wg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:es(i)}}const Jhe=5;function Lz(n,e,t){const r=Math.max(e-Jhe,0);return mz(t-n(r),e-r)}const Bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jx=.001;function ede({duration:n=Bn.duration,bounce:e=Bn.bounce,velocity:t=Bn.velocity,mass:r=Bn.mass}){let i,s,a=1-e;a=$s(Bn.minDamping,Bn.maxDamping,a),n=$s(Bn.minDuration,Bn.maxDuration,es(n)),a<1?(i=h=>{const d=h*a,p=d*n,g=d-t,y=JS(h,a),_=Math.exp(-p);return Jx-g/y*_},s=h=>{const p=h*a*n,g=p*t+t,y=Math.pow(a,2)*Math.pow(h,2)*n,_=Math.exp(-p),S=JS(Math.pow(h,2),a);return(-i(h)+Jx>0?-1:1)*((g-y)*_)/S}):(i=h=>{const d=Math.exp(-h*n),p=(h-t)*n+1;return-Jx+d*p},s=h=>{const d=Math.exp(-h*n),p=(t-h)*(n*n);return d*p});const l=5/n,c=nde(i,s,l);if(n=bs(n),isNaN(c))return{stiffness:Bn.stiffness,damping:Bn.damping,duration:n};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const tde=12;function nde(n,e,t){let r=t;for(let i=1;i<tde;i++)r=r-n(r)/e(r);return r}function JS(n,e){return n*Math.sqrt(1-e*e)}const rde=["duration","bounce"],ide=["stiffness","damping","mass"];function dk(n,e){return e.some(t=>n[t]!==void 0)}function sde(n){let e={velocity:Bn.velocity,stiffness:Bn.stiffness,damping:Bn.damping,mass:Bn.mass,isResolvedFromDuration:!1,...n};if(!dk(n,ide)&&dk(n,rde))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*$s(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Bn.mass,stiffness:i,damping:s}}else{const t=ede(n);e={...e,...t,mass:Bn.mass},e.isResolvedFromDuration=!0}return e}function $g(n=Bn.visualDuration,e=Bn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:h,mass:d,duration:p,velocity:g,isResolvedFromDuration:y}=sde({...t,velocity:-es(t.velocity||0)}),_=g||0,S=h/(2*Math.sqrt(c*d)),x=a-s,E=es(Math.sqrt(c/d)),w=Math.abs(x)<5;r||(r=w?Bn.restSpeed.granular:Bn.restSpeed.default),i||(i=w?Bn.restDelta.granular:Bn.restDelta.default);let C;if(S<1){const P=JS(E,S);C=M=>{const I=Math.exp(-S*E*M);return a-I*((_+S*E*x)/P*Math.sin(P*M)+x*Math.cos(P*M))}}else if(S===1)C=P=>a-Math.exp(-E*P)*(x+(_+E*x)*P);else{const P=E*Math.sqrt(S*S-1);C=M=>{const I=Math.exp(-S*E*M),V=Math.min(P*M,300);return a-I*((_+S*E*x)*Math.sinh(V)+P*x*Math.cosh(V))/P}}const A={calculatedDuration:y&&p||null,next:P=>{const M=C(P);if(y)l.done=P>=p;else{let I=P===0?_:0;S<1&&(I=P===0?bs(_):Lz(C,P,M));const V=Math.abs(I)<=r,O=Math.abs(a-M)<=i;l.done=V&&O}return l.value=l.done?a:M,l},toString:()=>{const P=Math.min(pC(A),Wg),M=Nz(I=>A.next(P*I).value,P,30);return P+"ms "+M},toTransition:()=>{}};return A}$g.applyToOptions=n=>{const e=Qhe(n,100,$g);return n.ease=e.ease,n.duration=bs(e.duration),n.type="keyframes",n};function e1({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:h=.5,restSpeed:d}){const p=n[0],g={done:!1,value:p},y=V=>l!==void 0&&V<l||c!==void 0&&V>c,_=V=>l===void 0?c:c===void 0||Math.abs(l-V)<Math.abs(c-V)?l:c;let S=t*e;const x=p+S,E=a===void 0?x:a(x);E!==x&&(S=E-p);const w=V=>-S*Math.exp(-V/r),C=V=>E+w(V),A=V=>{const O=w(V),D=C(V);g.done=Math.abs(O)<=h,g.value=g.done?E:D};let P,M;const I=V=>{y(g.value)&&(P=V,M=$g({keyframes:[g.value,_(g.value)],velocity:Lz(C,V,g.value),damping:i,stiffness:s,restDelta:h,restSpeed:d}))};return I(0),{calculatedDuration:null,next:V=>{let O=!1;return!M&&P===void 0&&(O=!0,A(V),I(V)),P!==void 0&&V>=P?M.next(V-P):(!O&&A(V),g)}}}function ade(n,e,t){const r=[],i=t||Pa.mix||Iz,s=n.length-1;for(let a=0;a<s;a++){let l=i(n[a],n[a+1]);if(e){const c=Array.isArray(e)?e[a]||ts:e;l=bf(c,l)}r.push(l)}return r}function ode(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(sC(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=ade(e,r,i),c=l.length,h=d=>{if(a&&d<n[0])return e[0];let p=0;if(c>1)for(;p<n.length-2&&!(d<n[p+1]);p++);const g=Xd(n[p],n[p+1],d);return l[p](g)};return t?d=>h($s(n[0],n[s-1],d)):h}function lde(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Xd(0,e,r);n.push(Tn(t,1,i))}}function ude(n){const e=[0];return lde(e,n.length-1),e}function cde(n,e){return n.map(t=>t*e)}function hde(n,e){return n.map(()=>e||wz).splice(0,n.length-1)}function Sd({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=She(r)?r.map(ak):ak(r),s={done:!1,value:e[0]},a=cde(t&&t.length===e.length?t:ude(e),n),l=ode(a,e,{ease:Array.isArray(i)?i:hde(e,i)});return{calculatedDuration:n,next:c=>(s.value=l(c),s.done=c>=n,s)}}const dde=n=>n!==null;function mC(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(dde),l=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const fde={decay:e1,inertia:e1,tween:Sd,keyframes:Sd,spring:$g};function Fz(n){typeof n.type=="string"&&(n.type=fde[n.type])}class gC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const pde=n=>n/100;class yC extends gC{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ur.now()&&this.tick(Ur.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Fz(e);const{type:t=Sd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const c=t||Sd;c!==Sd&&typeof l[0]!="number"&&(this.mixKeyframes=bf(pde,Iz(l[0],l[1])),l=[0,100]);const h=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=pC(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:p,repeatType:g,repeatDelay:y,type:_,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,A=r;if(p){const V=Math.min(this.currentTime,i)/l;let O=Math.floor(V),D=V%1;!D&&V>=1&&(D=1),D===1&&O--,O=Math.min(O,p+1),O%2&&(g==="reverse"?(D=1-D,y&&(D-=y/l)):g==="mirror"&&(A=a)),C=$s(0,1,D)*l}const P=w?{done:!1,value:d[0]}:A.next(C);s&&(P.value=s(P.value));let{done:M}=P;!w&&c!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return I&&_!==e1&&(P.value=mC(d,this.options,x,this.speed)),S&&S(P.value),I&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return es(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+es(e)}get time(){return es(this.currentTime)}set time(e){e=bs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ur.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=es(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Zhe,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ur.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function mde(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const El=n=>n*180/Math.PI,t1=n=>{const e=El(Math.atan2(n[1],n[0]));return n1(e)},gde={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:t1,rotateZ:t1,skewX:n=>El(Math.atan(n[1])),skewY:n=>El(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},n1=n=>(n=n%360,n<0&&(n+=360),n),fk=t1,pk=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),mk=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),yde={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pk,scaleY:mk,scale:n=>(pk(n)+mk(n))/2,rotateX:n=>n1(El(Math.atan2(n[6],n[5]))),rotateY:n=>n1(El(Math.atan2(-n[2],n[0]))),rotateZ:fk,rotate:fk,skewX:n=>El(Math.atan(n[4])),skewY:n=>El(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function r1(n){return n.includes("scale")?1:0}function i1(n,e){if(!n||n==="none")return r1(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=yde,i=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gde,i=l}if(!i)return r1(e);const s=r[e],a=i[1].split(",").map(bde);return typeof s=="function"?s(a):a[s]}const _de=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return i1(t,e)};function bde(n){return parseFloat(n.trim())}const Ic=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nc=new Set(Ic),gk=n=>n===Oc||n===Pe,xde=new Set(["x","y","z"]),vde=Ic.filter(n=>!xde.has(n));function Sde(n){const e=[];return vde.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const xo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>i1(e,"x"),y:(n,{transform:e})=>i1(e,"y")};xo.translateX=xo.x;xo.translateY=xo.y;const Al=new Set;let s1=!1,a1=!1,o1=!1;function Uz(){if(a1){const n=Array.from(Al).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Sde(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{r.getValue(s)?.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}a1=!1,s1=!1,Al.forEach(n=>n.complete(o1)),Al.clear()}function Gz(){Al.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(a1=!0)})}function Ede(){o1=!0,Gz(),Uz(),o1=!1}class _C{constructor(e,t,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Al.add(this),s1||(s1=!0,hn.read(Gz),hn.resolveKeyframes(Uz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}mde(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Al.delete(this)}cancel(){this.state==="scheduled"&&(Al.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wde=n=>n.startsWith("--");function Cde(n,e,t){wde(e)?n.style.setProperty(e,t):n.style[e]=t}const Tde=aC(()=>window.ScrollTimeline!==void 0),Ade={};function Mde(n,e){const t=aC(n);return()=>Ade[e]??t()}const zz=Mde(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ld=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,yk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ld([0,.65,.55,1]),circOut:ld([.55,0,1,.45]),backIn:ld([.31,.01,.66,-.59]),backOut:ld([.33,1.53,.69,.99])};function Vz(n,e){if(n)return typeof n=="function"?zz()?Nz(n,e):"ease-out":Cz(n)?ld(n):Array.isArray(n)?n.map(t=>Vz(t,e)||yk.easeOut):yk[n]}function Rde(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:c}={},h=void 0){const d={[e]:t};c&&(d.offset=c);const p=Vz(l,i);Array.isArray(p)&&(d.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),n.animate(d,g)}function Hz(n){return typeof n=="function"&&"applyToOptions"in n}function Pde({type:n,...e}){return Hz(n)&&zz()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jz extends gC{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,sC(typeof e.type!="string");const h=Pde(e);this.animation=Rde(t,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=mC(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):Cde(t,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return es(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+es(e)}get time(){return es(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=bs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Tde()?(this.animation.timeline=e,ts):t(this)}}const Xz={anticipate:vz,backInOut:xz,circInOut:Ez};function Bde(n){return n in Xz}function Dde(n){typeof n.ease=="string"&&Bde(n.ease)&&(n.ease=Xz[n.ease])}const ev=10;class kde extends jz{constructor(e){Dde(e),Fz(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new yC({...a,autoplay:!1}),c=Math.max(ev,Ur.now()-this.startTime),h=$s(0,ev,c-ev);t.setWithVelocity(l.sample(Math.max(0,c-h)).value,l.sample(c).value,h),l.stop()}}const _k=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(To.test(n)||n==="0")&&!n.startsWith("url("));function Ode(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Ide(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=_k(i,e),l=_k(s,e);return!a||!l?!1:Ode(n)||(t==="spring"||Hz(t))&&r}function l1(n){n.duration=0,n.type="keyframes"}const Nde=new Set(["opacity","clipPath","filter","transform"]),Lde=aC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Fde(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=e.owner.getProps();return Lde()&&t&&Nde.has(t)&&(t!=="transform"||!h)&&!c&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const Ude=40;class Gde extends gC{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:c,motionValue:h,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ur.now();const g={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,name:c,motionValue:h,element:d,...p},y=d?.KeyframeResolver||_C;this.keyframeResolver=new y(l,(_,S,x)=>this.onKeyframesResolved(_,S,g,!x),c,h,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:c,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Ur.now(),Ide(e,s,a,l)||((Pa.instantAnimations||!c)&&d?.(mC(e,r,t)),e[0]=e[e.length-1],l1(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Ude?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},y=!h&&Fde(g),_=g.motionValue?.owner?.current,S=y?new kde({...g,element:_}):new yC(g);S.finished.then(()=>{this.notifyFinished()}).catch(ts),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ede()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function Wz(n,e,t,r=0,i=1){const s=Array.from(n).sort((h,d)=>h.sortNodePosition(d)).indexOf(e),a=n.size,l=(a-1)*r;return typeof t=="function"?t(s,a):i===1?s*r:l-s*r}const zde=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Vde(n){const e=zde.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function $z(n,e,t=1){const[r,i]=Vde(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return dz(a)?parseFloat(a):a}return cC(i)?$z(i,e,t+1):i}const Hde={type:"spring",stiffness:500,damping:25,restSpeed:10},jde=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Xde={type:"keyframes",duration:.8},Wde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$de=(n,{keyframes:e})=>e.length>2?Xde:Nc.has(n)?n.startsWith("scale")?jde(e[1]):Hde:Wde,qde=n=>n!==null;function Yde(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(qde),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}function qz(n,e){if(n?.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function bC(n,e){const t=n?.[e]??n?.default??n;return t!==n?qz(t,n):t}function Kde({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:h,...d}){return!!Object.keys(d).length}const xC=(n,e,t,r={},i,s)=>a=>{const l=bC(r,n)||{},c=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-bs(c);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:i};Kde(l)||Object.assign(d,$de(n,d)),d.duration&&(d.duration=bs(d.duration)),d.repeatDelay&&(d.repeatDelay=bs(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(l1(d),d.delay===0&&(p=!0)),(Pa.instantAnimations||Pa.skipAnimations||i?.shouldSkipAnimations)&&(p=!0,l1(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const g=Yde(d.keyframes,l);if(g!==void 0){hn.update(()=>{d.onUpdate(g),d.onComplete()});return}}return l.isSync?new yC(d):new Gde(d)};function bk(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function vC(n,e,t,r){if(typeof e=="function"){const[i,s]=bk(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=bk(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function sc(n,e,t){const r=n.getProps();return vC(r,e,t!==void 0?t:r.custom,n)}const Yz=new Set(["width","height","top","left","right","bottom",...Ic]),xk=30,Zde=n=>!isNaN(parseFloat(n));class Qde{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Ur.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ur.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Zde(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new oC);const r=this.events[e].add(t);return e==="change"?()=>{r(),hn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ur.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xk)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,xk);return mz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(n,e){return new Qde(n,e)}const u1=n=>Array.isArray(n);function Jde(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,_c(t))}function efe(n){return u1(n)?n[n.length-1]||0:n}function tfe(n,e){const t=sc(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const l=efe(s[a]);Jde(n,a,l)}}const Pr=n=>!!(n&&n.getVelocity);function nfe(n){return!!(Pr(n)&&n.add)}function c1(n,e){const t=n.getValue("willChange");if(nfe(t))return t.add(e);if(!t&&Pa.WillChange){const r=new Pa.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function SC(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const rfe="framerAppearId",Kz="data-"+SC(rfe);function Zz(n){return n.props[Kz]}function ife({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Qz(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:a,...l}=e;const c=n.getDefaultTransition();s=s?qz(s,c):c;const h=s?.reduceMotion;r&&(s=r);const d=[],p=i&&n.animationState&&n.animationState.getState()[i];for(const g in l){const y=n.getValue(g,n.latestValues[g]??null),_=l[g];if(_===void 0||p&&ife(p,g))continue;const S={delay:t,...bC(s||{},g)},x=y.get();if(x!==void 0&&!y.isAnimating&&!Array.isArray(_)&&_===x&&!S.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const A=Zz(n);if(A){const P=window.MotionHandoffAnimation(A,g,hn);P!==null&&(S.startTime=P,E=!0)}}c1(n,g);const w=h??n.shouldReduceMotion;y.start(xC(g,y,_,w&&Yz.has(g)?{type:!1}:S,n,E));const C=y.animation;C&&d.push(C)}if(a){const g=()=>hn.update(()=>{a&&tfe(n,a)});d.length?Promise.all(d).then(g):g()}return d}function h1(n,e,t={}){const r=sc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(Qz(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=i;return sfe(n,e,c,h,d,p,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,h]=l==="beforeChildren"?[s,a]:[a,s];return c().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function sfe(n,e,t=0,r=0,i=0,s=1,a){const l=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),l.push(h1(c,e,{...a,delay:t+(typeof r=="function"?0:r)+Wz(n.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function afe(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>h1(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=h1(n,e,t);else{const i=typeof e=="function"?sc(n,e,t.custom):e;r=Promise.all(Qz(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const ofe={test:n=>n==="auto",parse:n=>n},Jz=n=>e=>e.test(n),eV=[Oc,Pe,Xs,ho,Ihe,Ohe,ofe],vk=n=>eV.find(Jz(n));function lfe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||pz(n):!0}const ufe=new Set(["brightness","contrast","saturate","opacity"]);function cfe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(hC)||[];if(!r)return n;const i=t.replace(r,"");let s=ufe.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const hfe=/\b([a-z-]*)\(.*?\)/gu,d1={...To,getAnimatableNone:n=>{const e=n.match(hfe);return e?e.map(cfe).join(" "):n}},Sk={...Oc,transform:Math.round},dfe={rotate:ho,rotateX:ho,rotateY:ho,rotateZ:ho,scale:Dm,scaleX:Dm,scaleY:Dm,scaleZ:Dm,skew:ho,skewX:ho,skewY:ho,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Wd,originX:lk,originY:lk,originZ:Pe},EC={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,inset:Pe,insetBlock:Pe,insetBlockStart:Pe,insetBlockEnd:Pe,insetInline:Pe,insetInlineStart:Pe,insetInlineEnd:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,paddingBlock:Pe,paddingBlockStart:Pe,paddingBlockEnd:Pe,paddingInline:Pe,paddingInlineStart:Pe,paddingInlineEnd:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,marginBlock:Pe,marginBlockStart:Pe,marginBlockEnd:Pe,marginInline:Pe,marginInlineStart:Pe,marginInlineEnd:Pe,fontSize:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...dfe,zIndex:Sk,fillOpacity:Wd,strokeOpacity:Wd,numOctaves:Sk},ffe={...EC,color:Kn,backgroundColor:Kn,outlineColor:Kn,fill:Kn,stroke:Kn,borderColor:Kn,borderTopColor:Kn,borderRightColor:Kn,borderBottomColor:Kn,borderLeftColor:Kn,filter:d1,WebkitFilter:d1},tV=n=>ffe[n];function nV(n,e){let t=tV(n);return t!==d1&&(t=To),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const pfe=new Set(["auto","none","0"]);function mfe(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!pfe.has(s)&&$d(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=nV(t,i)}class gfe extends _C{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),cC(p))){const g=$z(p,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Yz.has(r)||e.length!==2)return;const[i,s]=e,a=vk(i),l=vk(s),c=ok(i),h=ok(s);if(c!==h&&xo[r]){this.needsMeasurement=!0;return}if(a!==l)if(gk(a)&&gk(l))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else xo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||lfe(e[i]))&&r.push(i);r.length&&mfe(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=xo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const yfe=new Set(["opacity","clipPath","filter","transform"]);function rV(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(r=>r!=null)}const iV=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function f1(n){return fz(n)&&"offsetHeight"in n}const{schedule:wC}=Tz(queueMicrotask,!1),fs={x:!1,y:!1};function sV(){return fs.x||fs.y}function _fe(n){return n==="x"||n==="y"?fs[n]?null:(fs[n]=!0,()=>{fs[n]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function aV(n,e){const t=rV(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function bfe(n){return!(n.pointerType==="touch"||sV())}function xfe(n,e,t={}){const[r,i,s]=aV(n,t);return r.forEach(a=>{let l=!1,c=!1,h;const d=()=>{a.removeEventListener("pointerleave",_)},p=x=>{h&&(h(x),h=void 0),d()},g=x=>{l=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c&&(c=!1,p(x))},y=()=>{l=!0,window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",g,i)},_=x=>{if(x.pointerType!=="touch"){if(l){c=!0;return}p(x)}},S=x=>{if(!bfe(x))return;c=!1;const E=e(a,x);typeof E=="function"&&(h=E,a.addEventListener("pointerleave",_,i))};a.addEventListener("pointerenter",S,i),a.addEventListener("pointerdown",y,i)}),s}const oV=(n,e)=>e?n===e?!0:oV(n,e.parentElement):!1,CC=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,vfe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sfe(n){return vfe.has(n.tagName)||n.isContentEditable===!0}const Efe=new Set(["INPUT","SELECT","TEXTAREA"]);function wfe(n){return Efe.has(n.tagName)||n.isContentEditable===!0}const ag=new WeakSet;function Ek(n){return e=>{e.key==="Enter"&&n(e)}}function tv(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cfe=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Ek(()=>{if(ag.has(t))return;tv(t,"down");const i=Ek(()=>{tv(t,"up")}),s=()=>tv(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function wk(n){return CC(n)&&!sV()}const Ck=new WeakSet;function Tfe(n,e,t={}){const[r,i,s]=aV(n,t),a=l=>{const c=l.currentTarget;if(!wk(l)||Ck.has(l))return;ag.add(c),t.stopPropagation&&Ck.add(l);const h=e(c,l),d=(y,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),ag.has(c)&&ag.delete(c),wk(y)&&typeof h=="function"&&h(y,{success:_})},p=y=>{d(y,c===window||c===document||t.useGlobalTarget||oV(c,y.target))},g=y=>{d(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),f1(l)&&(l.addEventListener("focus",h=>Cfe(h,i)),!Sfe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function TC(n){return fz(n)&&"ownerSVGElement"in n}const og=new WeakMap;let lg;const lV=(n,e,t)=>(r,i)=>i&&i[0]?i[0][n+"Size"]:TC(r)&&"getBBox"in r?r.getBBox()[e]:r[t],Afe=lV("inline","width","offsetWidth"),Mfe=lV("block","height","offsetHeight");function Rfe({target:n,borderBoxSize:e}){og.get(n)?.forEach(t=>{t(n,{get width(){return Afe(n,e)},get height(){return Mfe(n,e)}})})}function Pfe(n){n.forEach(Rfe)}function Bfe(){typeof ResizeObserver>"u"||(lg=new ResizeObserver(Pfe))}function Dfe(n,e){lg||Bfe();const t=rV(n);return t.forEach(r=>{let i=og.get(r);i||(i=new Set,og.set(r,i)),i.add(e),lg?.observe(r)}),()=>{t.forEach(r=>{const i=og.get(r);i?.delete(e),i?.size||lg?.unobserve(r)})}}const ug=new Set;let Vu;function kfe(){Vu=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};ug.forEach(e=>e(n))},window.addEventListener("resize",Vu)}function Ofe(n){return ug.add(n),Vu||kfe(),()=>{ug.delete(n),!ug.size&&typeof Vu=="function"&&(window.removeEventListener("resize",Vu),Vu=void 0)}}function Tk(n,e){return typeof n=="function"?Ofe(n):Dfe(n,e)}function Ife(n){return TC(n)&&n.tagName==="svg"}const Nfe=[...eV,Kn,To],Lfe=n=>Nfe.find(Jz(n)),Ak=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hu=()=>({x:Ak(),y:Ak()}),Mk=()=>({min:0,max:0}),rr=()=>({x:Mk(),y:Mk()}),Ffe=new WeakMap;function y_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function qd(n){return typeof n=="string"||Array.isArray(n)}const AC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MC=["initial",...AC];function __(n){return y_(n.animate)||MC.some(e=>qd(n[e]))}function uV(n){return!!(__(n)||n.variants)}function Ufe(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Pr(i))n.addValue(r,i);else if(Pr(s))n.addValue(r,_c(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,_c(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const p1={current:null},cV={current:!1},Gfe=typeof window<"u";function zfe(){if(cV.current=!0,!!Gfe)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>p1.current=n.matches;n.addEventListener("change",e),e()}else p1.current=!1}const Rk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let qg={};function hV(n){qg=n}function Vfe(){return qg}class Hfe{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=_C,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Ur.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,hn.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=__(t),this.isVariantNode=uV(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const _=g[y];h[y]!==void 0&&Pr(_)&&_.set(h[y])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,Ffe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(cV.current||zfe(),this.shouldReduceMotion=p1.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),Co(this.notifyUpdate),Co(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&yfe.has(e)&&this.current instanceof HTMLElement){const{factory:a,keyframes:l,times:c,ease:h,duration:d}=t.accelerate,p=new jz({element:this.current,name:e,keyframes:l,times:c,ease:h,duration:bs(d)}),g=a(p);this.valueSubscriptions.set(e,()=>{g(),p.cancel()});return}const r=Nc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&hn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qg){const t=qg[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Rk.length;r++){const i=Rk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Ufe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=_c(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(dz(r)||pz(r))?r=parseFloat(r):!Lfe(r)&&To.test(t)&&(r=nV(e,t)),this.setBaseTarget(e,Pr(r)?r.get():r)),Pr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const s=vC(this.props,t,this.presenceContext?.custom);s&&(r=s[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Pr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new oC),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){wC.render(this.render)}}class dV extends Hfe{constructor(){super(...arguments),this.KeyframeResolver=gfe}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Do{constructor(e){this.isMounted=!1,this.node=e}update(){}}function fV({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function jfe({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Xfe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function nv(n){return n===void 0||n===1}function m1({scale:n,scaleX:e,scaleY:t}){return!nv(n)||!nv(e)||!nv(t)}function fl(n){return m1(n)||pV(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function pV(n){return Pk(n.x)||Pk(n.y)}function Pk(n){return n&&n!=="0%"}function Yg(n,e,t){const r=n-t,i=e*r;return t+i}function Bk(n,e,t,r,i){return i!==void 0&&(n=Yg(n,i,r)),Yg(n,t,r)+e}function g1(n,e=0,t=1,r,i){n.min=Bk(n.min,e,t,r,i),n.max=Bk(n.max,e,t,r,i)}function mV(n,{x:e,y:t}){g1(n.x,e.translate,e.scale,e.originPoint),g1(n.y,t.translate,t.scale,t.originPoint)}const Dk=.999999999999,kk=1.0000000000001;function Wfe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=t[l],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,mV(n,a)),r&&fl(s.latestValues)&&Xu(n,s.latestValues))}e.x<kk&&e.x>Dk&&(e.x=1),e.y<kk&&e.y>Dk&&(e.y=1)}function ju(n,e){n.min=n.min+e,n.max=n.max+e}function Ok(n,e,t,r,i=.5){const s=Tn(n.min,n.max,i);g1(n,e,t,s,r)}function Xu(n,e){Ok(n.x,e.x,e.scaleX,e.scale,e.originX),Ok(n.y,e.y,e.scaleY,e.scale,e.originY)}function gV(n,e){return fV(Xfe(n.getBoundingClientRect(),e))}function $fe(n,e,t){const r=gV(n,t),{scroll:i}=e;return i&&(ju(r.x,i.offset.x),ju(r.y,i.offset.y)),r}const qfe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yfe=Ic.length;function Kfe(n,e,t){let r="",i=!0;for(let s=0;s<Yfe;s++){const a=Ic[s],l=n[a];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(a.startsWith("scale")?1:0);else{const h=parseFloat(l);c=a.startsWith("scale")?h===1:h===0}if(!c||t){const h=iV(l,EC[a]);if(!c){i=!1;const d=qfe[a]||a;r+=`${d}(${h}) `}t&&(e[a]=h)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function RC(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,l=!1;for(const c in e){const h=e[c];if(Nc.has(c)){a=!0;continue}else if(Mz(c)){i[c]=h;continue}else{const d=iV(h,EC[c]);c.startsWith("origin")?(l=!0,s[c]=d):r[c]=d}}if(e.transform||(a||t?r.transform=Kfe(e,n.transform,t):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:h="50%",originZ:d=0}=s;r.transformOrigin=`${c} ${h} ${d}`}}function yV(n,{style:e,vars:t},r,i){const s=n.style;let a;for(a in e)s[a]=e[a];i?.applyProjectionStyles(s,r);for(a in t)s.setProperty(a,t[a])}function Ik(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const rd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Pe.test(n))n=parseFloat(n);else return n;const t=Ik(n,e.target.x),r=Ik(n,e.target.y);return`${t}% ${r}%`}},Zfe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=To.parse(n);if(i.length>5)return r;const s=To.createTransformer(n),a=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;i[0+a]/=l,i[1+a]/=c;const h=Tn(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}},y1={borderRadius:{...rd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rd,borderTopRightRadius:rd,borderBottomLeftRadius:rd,borderBottomRightRadius:rd,boxShadow:Zfe};function _V(n,{layout:e,layoutId:t}){return Nc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!y1[n]||n==="opacity")}function PC(n,e,t){const r=n.style,i=e?.style,s={};if(!r)return s;for(const a in r)(Pr(r[a])||i&&Pr(i[a])||_V(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}function Qfe(n){return window.getComputedStyle(n)}class Jfe extends dV{constructor(){super(...arguments),this.type="html",this.renderInstance=yV}readValueFromInstance(e,t){if(Nc.has(t))return this.projection?.isProjecting?r1(t):_de(e,t);{const r=Qfe(e),i=(Mz(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return gV(e,t)}build(e,t,r){RC(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return PC(e,t,r)}}const epe={offset:"stroke-dashoffset",array:"stroke-dasharray"},tpe={offset:"strokeDashoffset",array:"strokeDasharray"};function npe(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?epe:tpe;n[s.offset]=`${-r}`,n[s.array]=`${e} ${t}`}const rpe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function bV(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...l},c,h,d){if(RC(n,l,h),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:g}=n;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete p.transformBox);for(const y of rpe)p[y]!==void 0&&(g[y]=p[y],delete p[y]);e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&npe(p,i,s,a,!1)}const xV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),vV=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ipe(n,e,t,r){yV(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(xV.has(i)?i:SC(i),e.attrs[i])}function SV(n,e,t){const r=PC(n,e,t);for(const i in n)if(Pr(n[i])||Pr(e[i])){const s=Ic.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}class spe extends dV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nc.has(t)){const r=tV(t);return r&&r.default||0}return t=xV.has(t)?t:SC(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return SV(e,t,r)}build(e,t,r){bV(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){ipe(e,t,r,i)}mount(e){this.isSVGTag=vV(e.tagName),super.mount(e)}}const ape=MC.length;function EV(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?EV(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<ape;t++){const r=MC[t],i=n.props[r];(qd(i)||i===!1)&&(e[r]=i)}return e}function wV(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const ope=[...AC].reverse(),lpe=AC.length;function upe(n){return e=>Promise.all(e.map(({animation:t,options:r})=>afe(n,t,r)))}function cpe(n){let e=upe(n),t=Nk(),r=!0;const i=c=>(h,d)=>{const p=sc(n,d,c==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,..._}=p;h={...h,..._,...y}}return h};function s(c){e=c(n)}function a(c){const{props:h}=n,d=EV(n.parent)||{},p=[],g=new Set;let y={},_=1/0;for(let x=0;x<lpe;x++){const E=ope[x],w=t[E],C=h[E]!==void 0?h[E]:d[E],A=qd(C),P=E===c?w.isActive:null;P===!1&&(_=x);let M=C===d[E]&&C!==h[E]&&A;if(M&&r&&n.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...y},!w.isActive&&P===null||!C&&!w.prevProp||y_(C)||typeof C=="boolean")continue;if(E==="exit"&&w.isActive&&P!==!0){w.prevResolvedValues&&(y={...y,...w.prevResolvedValues});continue}const I=hpe(w.prevProp,C);let V=I||E===c&&w.isActive&&!M&&A||x>_&&A,O=!1;const D=Array.isArray(C)?C:[C];let H=D.reduce(i(E),{});P===!1&&(H={});const{prevResolvedValues:$={}}=w,ne={...$,...H},Z=X=>{V=!0,g.has(X)&&(O=!0,g.delete(X)),w.needsAnimating[X]=!0;const K=n.getValue(X);K&&(K.liveStyle=!1)};for(const X in ne){const K=H[X],J=$[X];if(y.hasOwnProperty(X))continue;let U=!1;u1(K)&&u1(J)?U=!wV(K,J):U=K!==J,U?K!=null?Z(X):g.add(X):K!==void 0&&g.has(X)?Z(X):w.protectedKeys[X]=!0}w.prevProp=C,w.prevResolvedValues=H,w.isActive&&(y={...y,...H}),r&&n.blockInitialAnimation&&(V=!1);const te=M&&I;V&&(!te||O)&&p.push(...D.map(X=>{const K={type:E};if(typeof X=="string"&&r&&!te&&n.manuallyAnimateOnMount&&n.parent){const{parent:J}=n,U=sc(J,X);if(J.enteringChildren&&U){const{delayChildren:G}=U.transition||{};K.delay=Wz(J.enteringChildren,n,G)}}return{animation:X,options:K}}))}if(g.size){const x={};if(typeof h.initial!="boolean"){const E=sc(n,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(x.transition=E.transition)}g.forEach(E=>{const w=n.getBaseTarget(E),C=n.getValue(E);C&&(C.liveStyle=!0),x[E]=w??null}),p.push({animation:x})}let S=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(p):Promise.resolve()}function l(c,h){if(t[c].isActive===h)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(c,h)),t[c].isActive=h;const d=a(c);for(const p in t)t[p].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=Nk()}}}function hpe(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!wV(e,n):!1}function al(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nk(){return{animate:al(!0),whileInView:al(),whileHover:al(),whileTap:al(),whileDrag:al(),whileFocus:al(),exit:al()}}function Lk(n,e){n.min=e.min,n.max=e.max}function hs(n,e){Lk(n.x,e.x),Lk(n.y,e.y)}function Fk(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const CV=1e-4,dpe=1-CV,fpe=1+CV,TV=.01,ppe=0-TV,mpe=0+TV;function Gr(n){return n.max-n.min}function gpe(n,e,t){return Math.abs(n-e)<=t}function Uk(n,e,t,r=.5){n.origin=r,n.originPoint=Tn(e.min,e.max,n.origin),n.scale=Gr(t)/Gr(e),n.translate=Tn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=dpe&&n.scale<=fpe||isNaN(n.scale))&&(n.scale=1),(n.translate>=ppe&&n.translate<=mpe||isNaN(n.translate))&&(n.translate=0)}function Ed(n,e,t,r){Uk(n.x,e.x,t.x,r?r.originX:void 0),Uk(n.y,e.y,t.y,r?r.originY:void 0)}function Gk(n,e,t){n.min=t.min+e.min,n.max=n.min+Gr(e)}function ype(n,e,t){Gk(n.x,e.x,t.x),Gk(n.y,e.y,t.y)}function zk(n,e,t){n.min=e.min-t.min,n.max=n.min+Gr(e)}function Kg(n,e,t){zk(n.x,e.x,t.x),zk(n.y,e.y,t.y)}function Vk(n,e,t,r,i){return n-=e,n=Yg(n,1/t,r),i!==void 0&&(n=Yg(n,1/i,r)),n}function _pe(n,e=0,t=1,r=.5,i,s=n,a=n){if(Xs.test(e)&&(e=parseFloat(e),e=Tn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Tn(s.min,s.max,r);n===s&&(l-=e),n.min=Vk(n.min,e,t,l,i),n.max=Vk(n.max,e,t,l,i)}function Hk(n,e,[t,r,i],s,a){_pe(n,e[t],e[r],e[i],e.scale,s,a)}const bpe=["x","scaleX","originX"],xpe=["y","scaleY","originY"];function jk(n,e,t,r){Hk(n.x,e,bpe,t?t.x:void 0,r?r.x:void 0),Hk(n.y,e,xpe,t?t.y:void 0,r?r.y:void 0)}function Xk(n){return n.translate===0&&n.scale===1}function AV(n){return Xk(n.x)&&Xk(n.y)}function Wk(n,e){return n.min===e.min&&n.max===e.max}function vpe(n,e){return Wk(n.x,e.x)&&Wk(n.y,e.y)}function $k(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function MV(n,e){return $k(n.x,e.x)&&$k(n.y,e.y)}function qk(n){return Gr(n.x)/Gr(n.y)}function Yk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Ls(n){return[n("x"),n("y")]}function Spe(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:d,rotateX:p,rotateY:g,skewX:y,skewY:_}=t;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),_&&(r+=`skewY(${_}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const RV=["TopLeft","TopRight","BottomLeft","BottomRight"],Epe=RV.length,Kk=n=>typeof n=="string"?parseFloat(n):n,Zk=n=>typeof n=="number"||Pe.test(n);function wpe(n,e,t,r,i,s){i?(n.opacity=Tn(0,t.opacity??1,Cpe(r)),n.opacityExit=Tn(e.opacity??1,0,Tpe(r))):s&&(n.opacity=Tn(e.opacity??1,t.opacity??1,r));for(let a=0;a<Epe;a++){const l=`border${RV[a]}Radius`;let c=Qk(e,l),h=Qk(t,l);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Zk(c)===Zk(h)?(n[l]=Math.max(Tn(Kk(c),Kk(h),r),0),(Xs.test(h)||Xs.test(c))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=Tn(e.rotate||0,t.rotate||0,r))}function Qk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Cpe=PV(0,.5,Sz),Tpe=PV(.5,.95,ts);function PV(n,e,t){return r=>r<n?0:r>e?1:t(Xd(n,e,r))}function Ape(n,e,t){const r=Pr(n)?n:_c(n);return r.start(xC("",r,e,t)),r.animation}function Yd(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Mpe=(n,e)=>n.depth-e.depth;class Rpe{constructor(){this.children=[],this.isDirty=!1}add(e){iC(this.children,e),this.isDirty=!0}remove(e){jg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Mpe),this.isDirty=!1,this.children.forEach(e)}}function Ppe(n,e){const t=Ur.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Co(r),n(s-e))};return hn.setup(r,!0),()=>Co(r)}function cg(n){return Pr(n)?n.get():n}class Bpe{constructor(){this.members=[]}add(e){iC(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&jg(this.members,r)}e.scheduleRender()}remove(e){if(jg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i],a=s.instance;if(s.isPresent!==!1&&(!a||a.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const hg={hasAnimatedSinceResize:!0,hasEverUpdated:!1},rv=["","X","Y","Z"],Dpe=1e3;let kpe=0;function iv(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function BV(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Zz(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",hn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&BV(r)}function DV({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e?.()){this.id=kpe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Npe),this.nodes.forEach(Gpe),this.nodes.forEach(zpe),this.nodes.forEach(Lpe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rpe)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oC),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=TC(a)&&!Ife(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let d,p=0;const g=()=>this.root.updateBlockedByResize=!1;hn.read(()=>{p=window.innerWidth}),n(a,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,d&&d(),d=Ppe(g,250),hg.hasAnimatedSinceResize&&(hg.hasAnimatedSinceResize=!1,this.nodes.forEach(tO)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||Wpe,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=h.getProps(),E=!this.targetLayout||!MV(this.targetLayout,y),w=!p&&g;if(this.options.layoutRoot||this.resumeFrom||w||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...bC(_,"layout"),onPlay:S,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(d,w)}else p||tO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Co(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vpe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eO);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Upe),this.nodes.forEach(Ope),this.nodes.forEach(Ipe)):this.nodes.forEach(eO),this.clearAllSnapshots();const l=Ur.now();br.delta=$s(0,1e3/60,l-br.timestamp),br.timestamp=l,br.isProcessing=!0,Yx.update.process(br),Yx.preRender.process(br),Yx.render.process(br),br.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fpe),this.sharedNodes.forEach(Hpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gr(this.snapshot.measuredBox.x)&&!Gr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=rr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!AV(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;a&&this.instance&&(l||fl(this.latestValues)||d)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),$pe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return rr();const l=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(qpe))){const{scroll:h}=this.root;h&&(ju(l.x,h.offset.x),ju(l.y,h.offset.y))}return l}removeElementScroll(a){const l=rr();if(hs(l,a),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&hs(l,a),ju(l.x,d.offset.x),ju(l.y,d.offset.y))}return l}applyTransform(a,l=!1){const c=rr();hs(c,a);for(let h=0;h<this.path.length;h++){const d=this.path[h];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xu(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),fl(d.latestValues)&&Xu(c,d.latestValues)}return fl(this.latestValues)&&Xu(c,this.latestValues),c}removeTransform(a){const l=rr();hs(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!fl(h.latestValues))continue;m1(h.latestValues)&&h.updateSnapshot();const d=rr(),p=h.measurePageBox();hs(d,p),jk(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return fl(this.latestValues)&&jk(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==br.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!this.layout||!(d||p))return;this.resolvedRelativeTargetAt=br.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rr(),this.targetWithTransforms=rr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ype(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),mV(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||m1(this.parent.latestValues)||pV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),Kg(this.relativeTargetOrigin,l,c),hs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===br.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;hs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;Wfe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=rr());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fk(this.prevProjectionDelta.x,this.projectionDelta.x),Fk(this.prevProjectionDelta.y,this.projectionDelta.y)),Ed(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!Yk(this.projectionDelta.x,this.prevProjectionDelta.x)||!Yk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hu(),this.projectionDelta=Hu(),this.projectionDeltaWithTransform=Hu()}setAnimationOrigin(a,l=!1){const c=this.snapshot,h=c?c.latestValues:{},d={...this.latestValues},p=Hu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=rr(),y=c?c.source:void 0,_=this.layout?this.layout.source:void 0,S=y!==_,x=this.getStack(),E=!x||x.members.length<=1,w=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(Xpe));this.animationProgress=0;let C;this.mixTargetDelta=A=>{const P=A/1e3;nO(p.x,a.x,P),nO(p.y,a.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kg(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jpe(this.relativeTarget,this.relativeTargetOrigin,g,P),C&&vpe(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=rr()),hs(C,this.relativeTarget)),S&&(this.animationValues=d,wpe(d,h,this.latestValues,P,w,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Co(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hn.update(()=>{hg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_c(0)),this.currentAnimation=Ape(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Dpe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:h,latestValues:d}=a;if(!(!l||!c||!h)){if(this!==a&&this.layout&&h&&kV(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||rr();const p=Gr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const g=Gr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+g}hs(l,c),Xu(l,d),Ed(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Bpe),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const h={};c.z&&iv("z",a,h,this.animationValues);for(let d=0;d<rv.length;d++)iv(`rotate${rv[d]}`,a,h,this.animationValues),iv(`skew${rv[d]}`,a,h,this.animationValues);a.render();for(const d in h)a.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=cg(l?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=cg(l?.pointerEvents)||""),this.hasProjected&&!fl(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=Spe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(p=c(d,p)),a.transform=p;const{x:g,y}=this.projectionDelta;a.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,h.animationValues?a.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in y1){if(d[_]===void 0)continue;const{correct:S,applyTo:x,isCSSVariable:E}=y1[_],w=p==="none"?d[_]:S(d[_],h);if(x){const C=x.length;for(let A=0;A<C;A++)a[x[A]]=w}else E?this.options.visualElement.renderState.vars[_]=w:a[_]=w}this.options.layoutId&&(a.pointerEvents=h===this?cg(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(Jk),this.root.sharedNodes.clear()}}}function Ope(n){n.updateLayout()}function Ipe(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,s=e.source!==n.layout.source;i==="size"?Ls(d=>{const p=s?e.measuredBox[d]:e.layoutBox[d],g=Gr(p);p.min=t[d].min,p.max=p.min+g}):kV(i,e.layoutBox,t)&&Ls(d=>{const p=s?e.measuredBox[d]:e.layoutBox[d],g=Gr(t[d]);p.max=p.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+g)});const a=Hu();Ed(a,t,e.layoutBox);const l=Hu();s?Ed(l,n.applyTransform(r,!0),e.measuredBox):Ed(l,t,e.layoutBox);const c=!AV(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const y=rr();Kg(y,e.layoutBox,p.layoutBox);const _=rr();Kg(_,t,g.layoutBox),MV(y,_)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function Npe(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Lpe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Fpe(n){n.clearSnapshot()}function Jk(n){n.clearMeasurements()}function eO(n){n.isLayoutDirty=!1}function Upe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function tO(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Gpe(n){n.resolveTargetDelta()}function zpe(n){n.calcProjection()}function Vpe(n){n.resetSkewAndRotation()}function Hpe(n){n.removeLeadSnapshot()}function nO(n,e,t){n.translate=Tn(e.translate,0,t),n.scale=Tn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function rO(n,e,t,r){n.min=Tn(e.min,t.min,r),n.max=Tn(e.max,t.max,r)}function jpe(n,e,t,r){rO(n.x,e.x,t.x,r),rO(n.y,e.y,t.y,r)}function Xpe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Wpe={duration:.45,ease:[.4,0,.1,1]},iO=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),sO=iO("applewebkit/")&&!iO("chrome/")?Math.round:ts;function aO(n){n.min=sO(n.min),n.max=sO(n.max)}function $pe(n){aO(n.x),aO(n.y)}function kV(n,e,t){return n==="position"||n==="preserve-aspect"&&!gpe(qk(e),qk(t),.2)}function qpe(n){return n!==n.root&&n.scroll?.wasRoot}const Ype=DV({attachResizeListener:(n,e)=>Yd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),sv={current:void 0},OV=DV({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!sv.current){const n=new Ype({});n.mount(window),n.setOptions({layoutScroll:!0}),sv.current=n}return sv.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),BC=W.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function oO(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Kpe(...n){return e=>{let t=!1;const r=n.map(i=>{const s=oO(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oO(n[i],null)}}}}function Zpe(...n){return W.useCallback(Kpe(...n),n)}class Qpe extends W.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,i=f1(r)&&r.offsetWidth||0,s=f1(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Jpe({children:n,isPresent:e,anchorX:t,anchorY:r,root:i,pop:s}){const a=W.useId(),l=W.useRef(null),c=W.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=W.useContext(BC),d=n.props?.ref??n?.ref,p=Zpe(l,d);return W.useInsertionEffect(()=>{const{width:g,height:y,top:_,left:S,right:x,bottom:E}=c.current;if(e||s===!1||!l.current||!g||!y)return;const w=t==="left"?`left: ${S}`:`right: ${x}`,C=r==="bottom"?`bottom: ${E}`:`top: ${_}`;l.current.dataset.motionPopId=a;const A=document.createElement("style");h&&(A.nonce=h);const P=i??document.head;return P.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${w}px !important;
            ${C}px !important;
          }
        `),()=>{P.contains(A)&&P.removeChild(A)}},[e]),B.jsx(Qpe,{isPresent:e,childRef:l,sizeRef:c,pop:s,children:s===!1?n:W.cloneElement(n,{ref:p})})}const eme=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:l,anchorY:c,root:h})=>{const d=rC(tme),p=W.useId();let g=!0,y=W.useMemo(()=>(g=!1,{id:p,initial:e,isPresent:t,custom:i,onExitComplete:_=>{d.set(_,!0);for(const S of d.values())if(!S)return;r&&r()},register:_=>(d.set(_,!1),()=>d.delete(_))}),[t,d,r]);return s&&g&&(y={...y}),W.useMemo(()=>{d.forEach((_,S)=>d.set(S,!1))},[t]),W.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),n=B.jsx(Jpe,{pop:a==="popLayout",isPresent:t,anchorX:l,anchorY:c,root:h,children:n}),B.jsx(g_.Provider,{value:y,children:n})};function tme(){return new Map}function IV(n=!0){const e=W.useContext(g_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=W.useId();W.useEffect(()=>{if(n)return i(s)},[n]);const a=W.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const km=n=>n.key||"";function lO(n){const e=[];return W.Children.forEach(n,t=>{W.isValidElement(t)&&e.push(t)}),e}const nme=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:l="left",anchorY:c="top",root:h})=>{const[d,p]=IV(a),g=W.useMemo(()=>lO(n),[n]),y=a&&!d?[]:g.map(km),_=W.useRef(!0),S=W.useRef(g),x=rC(()=>new Map),E=W.useRef(new Set),[w,C]=W.useState(g),[A,P]=W.useState(g);hz(()=>{_.current=!1,S.current=g;for(let V=0;V<A.length;V++){const O=km(A[V]);y.includes(O)?(x.delete(O),E.current.delete(O)):x.get(O)!==!0&&x.set(O,!1)}},[A,y.length,y.join("-")]);const M=[];if(g!==w){let V=[...g];for(let O=0;O<A.length;O++){const D=A[O],H=km(D);y.includes(H)||(V.splice(O,0,D),M.push(D))}return s==="wait"&&M.length&&(V=M),P(lO(V)),C(g),null}const{forceRender:I}=W.useContext(nC);return B.jsx(B.Fragment,{children:A.map(V=>{const O=km(V),D=a&&!d?!1:g===A||y.includes(O),H=()=>{if(E.current.has(O))return;if(E.current.add(O),x.has(O))x.set(O,!0);else return;let $=!0;x.forEach(ne=>{ne||($=!1)}),$&&(I?.(),P(S.current),a&&p?.(),r&&r())};return B.jsx(eme,{isPresent:D,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:h,onExitComplete:D?void 0:H,anchorX:l,anchorY:c,children:V},O)})})},NV=W.createContext({strict:!1}),uO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let cO=!1;function rme(){if(cO)return;const n={};for(const e in uO)n[e]={isEnabled:t=>uO[e].some(r=>!!t[r])};hV(n),cO=!0}function LV(){return rme(),Vfe()}function ime(n){const e=LV();for(const t in n)e[t]={...e[t],...n[t]};hV(e)}const sme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Zg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||sme.has(n)}let FV=n=>!Zg(n);function ame(n){typeof n=="function"&&(FV=e=>e.startsWith("on")?!Zg(e):n(e))}try{ame(require("@emotion/is-prop-valid").default)}catch{}function ome(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(FV(i)||t===!0&&Zg(i)||!e&&!Zg(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const b_=W.createContext({});function lme(n,e){if(__(n)){const{initial:t,animate:r}=n;return{initial:t===!1||qd(t)?t:void 0,animate:qd(r)?r:void 0}}return n.inherit!==!1?e:{}}function ume(n){const{initial:e,animate:t}=lme(n,W.useContext(b_));return W.useMemo(()=>({initial:e,animate:t}),[hO(e),hO(t)])}function hO(n){return Array.isArray(n)?n.join(" "):n}const DC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UV(n,e,t){for(const r in e)!Pr(e[r])&&!_V(r,t)&&(n[r]=e[r])}function cme({transformTemplate:n},e){return W.useMemo(()=>{const t=DC();return RC(t,e,n),Object.assign({},t.vars,t.style)},[e])}function hme(n,e){const t=n.style||{},r={};return UV(r,t,n),Object.assign(r,cme(n,e)),r}function dme(n,e){const t={},r=hme(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const GV=()=>({...DC(),attrs:{}});function fme(n,e,t,r){const i=W.useMemo(()=>{const s=GV();return bV(s,e,vV(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};UV(s,n.style,n),i.style={...s,...i.style}}return i}const pme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kC(n){return typeof n!="string"||n.includes("-")?!1:!!(pme.indexOf(n)>-1||/[A-Z]/u.test(n))}function mme(n,e,t,{latestValues:r},i,s=!1,a){const c=(a??kC(n)?fme:dme)(e,r,i,n),h=ome(e,typeof n=="string",s),d=n!==W.Fragment?{...h,...c,ref:t}:{},{children:p}=e,g=W.useMemo(()=>Pr(p)?p.get():p,[p]);return W.createElement(n,{...d,children:g})}function gme({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:yme(t,r,i,n),renderState:e()}}function yme(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=cg(s[g]);let{initial:a,animate:l}=n;const c=__(n),h=uV(n);e&&h&&!c&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const p=d?l:a;if(p&&typeof p!="boolean"&&!y_(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const _=vC(n,g[y]);if(_){const{transitionEnd:S,transition:x,...E}=_;for(const w in E){let C=E[w];if(Array.isArray(C)){const A=d?C.length-1:0;C=C[A]}C!==null&&(i[w]=C)}for(const w in S)i[w]=S[w]}}}return i}const zV=n=>(e,t)=>{const r=W.useContext(b_),i=W.useContext(g_),s=()=>gme(n,e,r,i);return t?s():rC(s)},_me=zV({scrapeMotionValuesFromProps:PC,createRenderState:DC}),bme=zV({scrapeMotionValuesFromProps:SV,createRenderState:GV}),xme=Symbol.for("motionComponentSymbol");function vme(n,e,t){const r=W.useRef(t);W.useInsertionEffect(()=>{r.current=t});const i=W.useRef(null);return W.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const a=r.current;if(typeof a=="function")if(s){const l=a(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):a(s);else a&&(a.current=s)},[e])}const VV=W.createContext({});function Fu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Sme(n,e,t,r,i,s){const{visualElement:a}=W.useContext(b_),l=W.useContext(NV),c=W.useContext(g_),h=W.useContext(BC),d=h.reducedMotion,p=h.skipAnimations,g=W.useRef(null),y=W.useRef(!1);r=r||l.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:p,isSVG:s}),y.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const _=g.current,S=W.useContext(VV);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&Eme(g.current,t,i,S);const x=W.useRef(!1);W.useInsertionEffect(()=>{_&&x.current&&_.update(t,c)});const E=t[Kz],w=W.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return hz(()=>{y.current=!0,_&&(x.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),w.current&&_.animationState&&_.animationState.animateChanges())}),W.useEffect(()=>{_&&(!w.current&&_.animationState&&_.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),w.current=!1),_.enteringChildren=void 0)}),_}function Eme(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:h,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:HV(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||l&&Fu(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:h})}function HV(n){if(n)return n.options.allowProjection!==!1?n.projection:HV(n.parent)}function av(n,{forwardMotionProps:e=!1,type:t}={},r,i){r&&ime(r);const s=t?t==="svg":kC(n),a=s?bme:_me;function l(h,d){let p;const g={...W.useContext(BC),...h,layoutId:wme(h)},{isStatic:y}=g,_=ume(h),S=a(h,y);if(!y&&cz){Cme();const x=Tme(g);p=x.MeasureLayout,_.visualElement=Sme(n,S,g,i,x.ProjectionNode,s)}return B.jsxs(b_.Provider,{value:_,children:[p&&_.visualElement?B.jsx(p,{visualElement:_.visualElement,...g}):null,mme(n,h,vme(S,_.visualElement,d),S,y,e,s)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=W.forwardRef(l);return c[xme]=n,c}function wme({layoutId:n}){const e=W.useContext(nC).id;return e&&n!==void 0?e+"-"+n:n}function Cme(n,e){W.useContext(NV).strict}function Tme(n){const e=LV(),{drag:t,layout:r}=e;if(!t&&!r)return{};const i={...t,...r};return{MeasureLayout:t?.isEnabled(n)||r?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Ame(n,e){if(typeof Proxy>"u")return av;const t=new Map,r=(s,a)=>av(s,a,n,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(t.has(a)||t.set(a,av(a,void 0,n,e)),t.get(a))})}const Mme=(n,e)=>e.isSVG??kC(n)?new spe(e):new Jfe(e,{allowProjection:n!==W.Fragment});class Rme extends Do{constructor(e){super(e),e.animationState||(e.animationState=cpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();y_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Pme=0;class Bme extends Do{constructor(){super(...arguments),this.id=Pme++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Dme={animation:{Feature:Rme},exit:{Feature:Bme}};function Sf(n){return{point:{x:n.pageX,y:n.pageY}}}const kme=n=>e=>CC(e)&&n(e,Sf(e));function wd(n,e,t,r){return Yd(n,e,kme(t),r)}const jV=({current:n})=>n?n.ownerDocument.defaultView:null,dO=(n,e)=>Math.abs(n-e);function Ome(n,e){const t=dO(n.x,e.x),r=dO(n.y,e.y);return Math.sqrt(t**2+r**2)}const fO=new Set(["auto","scroll"]);class XV{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=lv(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,S=Ome(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!S)return;const{point:x}=y,{timestamp:E}=br;this.history.push({...x,timestamp:E});const{onStart:w,onMove:C}=this.handlers;_||(w&&w(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=ov(_,this.transformPagePoint),hn.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:S,onSessionEnd:x,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=lv(y.type==="pointercancel"?this.lastMoveEventInfo:ov(_,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,w),x&&x(y,w)},!CC(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const c=Sf(e),h=ov(c,this.transformPagePoint),{point:d}=h,{timestamp:p}=br;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=t;g&&g(e,lv(h,this.history)),this.removeListeners=bf(wd(this.contextWindow,"pointermove",this.handlePointerMove),wd(this.contextWindow,"pointerup",this.handlePointerUp),wd(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(fO.has(r.overflowX)||fO.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-t.x,y:i.y-t.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),hn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Co(this.updatePoint)}}function ov(n,e){return e?{point:e(n.point)}:n}function pO(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lv({point:n},e){return{point:n,delta:pO(n,WV(e)),offset:pO(n,Ime(e)),velocity:Nme(e,.1)}}function Ime(n){return n[0]}function WV(n){return n[n.length-1]}function Nme(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=WV(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>bs(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&i.timestamp-r.timestamp>bs(e)*2&&(r=n[1]);const s=es(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Lme(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Tn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Tn(t,n,r.max):Math.min(n,t)),n}function mO(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Fme(n,{top:e,left:t,bottom:r,right:i}){return{x:mO(n.x,t,i),y:mO(n.y,e,r)}}function gO(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Ume(n,e){return{x:gO(n.x,e.x),y:gO(n.y,e.y)}}function Gme(n,e){let t=.5;const r=Gr(n),i=Gr(e);return i>r?t=Xd(e.min,e.max-r,n.min):r>i&&(t=Xd(n.min,n.max-i,e.min)),$s(0,1,t)}function zme(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const _1=.35;function Vme(n=_1){return n===!1?n=0:n===!0&&(n=_1),{x:yO(n,"left","right"),y:yO(n,"top","bottom")}}function yO(n,e,t){return{min:_O(n,e),max:_O(n,t)}}function _O(n,e){return typeof n=="number"?n:n[e]||0}const Hme=new WeakMap;class jme{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{t&&this.snapToCursor(Sf(p).point),this.stopAnimation()},a=(p,g)=>{const{drag:y,dragPropagation:_,onDragStart:S}=this.getProps();if(y&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_fe(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(E=>{let w=this.getAxisMotionValue(E).get()||0;if(Xs.test(w)){const{projection:C}=this.visualElement;if(C&&C.layout){const A=C.layout.layoutBox[E];A&&(w=Gr(A)*(parseFloat(w)/100))}}this.originPoint[E]=w}),S&&hn.update(()=>S(p,g),!1,!0),c1(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:_,onDirectionLock:S,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=g;if(_&&this.currentDirection===null){this.currentDirection=Wme(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),x&&hn.update(()=>x(p,g),!1,!0)},c=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>{const{dragSnapToOrigin:p}=this.getProps();(p||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new XV(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:jV(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&hn.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Om(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Lme(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Fu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Fme(r.layoutBox,e):this.constraints=!1,this.elastic=Vme(t),i!==this.constraints&&!Fu(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Ls(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=zme(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Fu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$fe(r,i.root,this.visualElement.getTransformPagePoint());let a=Ume(i.layout.layoutBox,s);if(t){const l=t(jfe(a));this.hasMutatedConstraints=!!l,l&&(a=fV(l))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},h=Ls(d=>{if(!Om(d,t,this.currentDirection))return;let p=c&&c[d]||{};a&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,_)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return c1(this.visualElement,e),r.start(xC(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ls(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ls(t=>{const{drag:r}=this.getProps();if(!Om(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[t],c=s.get()||0;s.set(e[t]-Tn(a,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Fu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ls(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=Gme({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Ls(a=>{if(!Om(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:h}=this.constraints[a];l.set(Tn(c,h,i[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Hme.set(this.visualElement,this);const e=this.visualElement.current,t=wd(e,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps(),g=h.target,y=g!==e&&wfe(g);d&&p&&!y&&this.start(h)});let r;const i=()=>{const{dragConstraints:h}=this.getProps();Fu(h)&&h.current&&(this.constraints=this.resolveRefConstraints(),r||(r=Xme(e,h.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,a=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),hn.read(i);const l=Yd(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ls(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=_1,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function bO(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function Xme(n,e,t){const r=Tk(n,bO(t)),i=Tk(e,bO(t));return()=>{r(),i()}}function Om(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Wme(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class $me extends Do{constructor(e){super(e),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new jme(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const uv=n=>(e,t)=>{n&&hn.update(()=>n(e,t),!1,!0)};class qme extends Do{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(e){this.session=new XV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uv(e),onStart:uv(t),onMove:uv(r),onEnd:(s,a)=>{delete this.session,i&&hn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=wd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let cv=!1;class Yme extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),cv&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),hg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,e.layoutDependency!==t&&a.setOptions({...a.options,layoutDependency:t}),cv=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||hn.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;cv=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $V(n){const[e,t]=IV(),r=W.useContext(nC);return B.jsx(Yme,{...n,layoutGroup:r,switchLayoutGroup:W.useContext(VV),isPresent:e,safeToRemove:t})}const Kme={pan:{Feature:qme},drag:{Feature:$me,ProjectionNode:OV,MeasureLayout:$V}};function xO(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&hn.postRender(()=>s(e,Sf(e)))}class Zme extends Do{mount(){const{current:e}=this.node;e&&(this.unmount=xfe(e,(t,r)=>(xO(this.node,r,"Start"),i=>xO(this.node,i,"End"))))}unmount(){}}class Qme extends Do{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bf(Yd(this.node.current,"focus",()=>this.onFocus()),Yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vO(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&hn.postRender(()=>s(e,Sf(e)))}class Jme extends Do{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=Tfe(e,(i,s)=>(vO(this.node,s,"Start"),(a,{success:l})=>vO(this.node,a,l?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:r?.tap===!1})}unmount(){}}const b1=new WeakMap,hv=new WeakMap,ege=n=>{const e=b1.get(n.target);e&&e(n)},tge=n=>{n.forEach(ege)};function nge({root:n,...e}){const t=n||document;hv.has(t)||hv.set(t,{});const r=hv.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(tge,{root:n,...e})),r[i]}function rge(n,e,t){const r=nge(e);return b1.set(n,t),r.observe(n),()=>{b1.delete(n),r.unobserve(n)}}const ige={some:0,all:1};class sge extends Do{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ige[i]},l=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=h?d:p;g&&g(c)};return rge(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(age(e,t))&&this.startObserver()}unmount(){}}function age({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const oge={inView:{Feature:sge},tap:{Feature:Jme},focus:{Feature:Qme},hover:{Feature:Zme}},lge={layout:{ProjectionNode:OV,MeasureLayout:$V}},uge={...Dme,...oge,...Kme,...lge},ud=Ame(uge,Mme),cge=()=>B.jsx("div",{className:"flex items-center gap-1 px-4 py-3 bg-neutral-800/90 border border-neutral-700/50 rounded-2xl rounded-tl-sm w-fit backdrop-blur-sm",children:[0,1,2].map(n=>B.jsx(ud.div,{animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:1.5,repeat:1/0,delay:n*.2,ease:"easeInOut"},className:"w-2 h-2 rounded-full bg-gradient-to-br from-purple-500 to-pink-500"},n))}),SO=()=>{const{threadId:n}=HZ(),e=of(),{messages:t,isLoading:r,isConnected:i,checkConnection:s,loadThreadMessages:a,setCurrentThread:l,currentThreadId:c}=c_(),{selectThread:h}=Lg(),d=W.useRef(null),[p,g]=W.useState(!1),[y,_]=W.useState([]),S=W.useRef(0);W.useEffect(()=>{s();const P=setInterval(s,3e4);return()=>clearInterval(P)},[s]),W.useEffect(()=>{n?c!==n&&(console.log(`[ChatPage] Loading thread from URL: ${n}`),a(n),h(n)):c!==null&&(console.log("[ChatPage] Clearing thread state (root path)"),l(null))},[n,a,h,l]),W.useEffect(()=>{c&&!n&&(console.log(`[ChatPage] Navigating to new thread URL: ${c}`),e(`/c/${c}`,{replace:!0}))},[c,n,e]),W.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[t,r]);const x=W.useCallback(P=>{P.preventDefault(),P.stopPropagation(),S.current++,P.dataTransfer.items&&P.dataTransfer.items.length>0&&g(!0)},[]),E=W.useCallback(P=>{P.preventDefault(),P.stopPropagation(),S.current--,S.current===0&&g(!1)},[]),w=W.useCallback(P=>{P.preventDefault(),P.stopPropagation()},[]),C=W.useCallback(P=>{P.preventDefault(),P.stopPropagation(),g(!1),S.current=0,P.dataTransfer.files.length>0&&_(Array.from(P.dataTransfer.files))},[]),A=W.useCallback(()=>{_([])},[]);return B.jsxs("div",{className:"flex flex-col h-full relative",onDragEnter:x,onDragLeave:E,onDragOver:w,onDrop:C,children:[p&&B.jsx("div",{className:"absolute inset-0 z-40 bg-neutral-950/80 backdrop-blur-sm flex items-center justify-center pointer-events-none animate-in fade-in duration-150",children:B.jsxs("div",{className:"flex flex-col items-center gap-4 text-cyan-300",children:[B.jsx("div",{className:"w-20 h-20 rounded-2xl bg-cyan-500/10 border-2 border-dashed border-cyan-400/50 flex items-center justify-center animate-pulse",children:B.jsx(gte,{size:32,className:"text-cyan-400"})}),B.jsxs("div",{className:"text-center",children:[B.jsx("p",{className:"text-lg font-semibold text-white",children:"Drop files to share with Vanta"}),B.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"Images, code, text files  she'll take a look"})]})]})}),B.jsx("header",{className:"absolute top-0 left-0 right-0 z-10 px-6 py-4 bg-gradient-to-b from-neutral-950 to-transparent",children:B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]":"bg-red-500"}`}),B.jsx("span",{className:"text-xs text-neutral-500 font-medium tracking-wide uppercase",children:i?"System Online":"Disconnected"})]})}),B.jsx("div",{className:"flex-1 overflow-y-auto px-4 pt-16 pb-32 scroll-smooth scrollbar-thin scrollbar-thumb-neutral-800 scrollbar-track-transparent",children:B.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[t.length===0&&B.jsxs("div",{className:"flex flex-col items-center justify-center h-[75vh] text-center gap-1 animate-in fade-in zoom-in duration-500",children:[B.jsx("img",{src:"/logo.png",alt:"Vanta AI",className:"w-48 h-48 -mb-12 drop-shadow-2xl hover:scale-105 transition-transform duration-300 pointer-events-none"}),B.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"Vanta AI"}),B.jsx("p",{className:"text-neutral-400 max-w-sm text-lg leading-relaxed",children:"Connect your mind."}),B.jsx("p",{className:"text-neutral-600 text-sm mt-4",children:"Drop an image or file anywhere to share it"})]}),t.map(P=>B.jsx(phe,{message:P},P.id)),r&&B.jsx("div",{className:"flex justify-start animate-in fade-in slide-in-from-bottom-2 ml-10",children:B.jsx(cge,{})}),!i&&t.length>0&&B.jsx("div",{className:"flex justify-center",children:B.jsxs("div",{className:"flex items-center gap-2 text-amber-500 bg-amber-950/30 px-3 py-1.5 rounded-lg border border-amber-900/50 text-sm",children:[B.jsx(Iee,{size:16}),B.jsx("span",{children:"Connection lost. Reconnecting..."})]})}),B.jsx("div",{ref:d})]})}),B.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-neutral-950 via-neutral-950 to-transparent pb-6 pt-10 px-4",children:B.jsxs("div",{className:"max-w-3xl mx-auto",children:[B.jsx(mhe,{externalFiles:y.length>0?y:void 0,onExternalFilesConsumed:A}),B.jsx("p",{className:"text-center text-xs text-neutral-600 mt-2",children:"Vanta AI can make mistakes. Check important info."})]})})]})},qV=l_((n,e)=>({memories:[],isLoading:!1,error:null,filter:null,searchQuery:"",fetchMemories:async()=>{n({isLoading:!0,error:null});try{const{filter:t,searchQuery:r}=e(),i={};t&&(i.memory_type=t),r&&(i.search=r);const s=await cr.get("/api/memories",{params:i});n({memories:s.data.memories,isLoading:!1})}catch(t){console.error("Failed to fetch memories:",t),n({isLoading:!1,error:t.message})}},deleteMemory:async t=>{try{await cr.delete(`/api/memories/${t}`),n(r=>({memories:r.memories.filter(i=>i.id!==t)}))}catch(r){console.error("Failed to delete memory:",r)}},updateMemory:async(t,r)=>{try{await cr.patch(`/api/memories/${t}`,r),n(i=>({memories:i.memories.map(s=>s.id===t?{...s,...r}:s)}))}catch(i){console.error("Failed to update memory:",i)}},setFilter:t=>{n({filter:t}),e().fetchMemories()},setSearchQuery:t=>{n({searchQuery:t}),e().fetchMemories()},deleteAllMemories:async(t=[])=>{try{await cr.post("/api/memories/delete_all",{protected_tags:t}),e().fetchMemories()}catch(r){console.error("Failed to delete all memories:",r)}}})),hge=({memory:n,onClose:e})=>{const{updateMemory:t,deleteMemory:r}=qV(),[i,s]=W.useState(""),[a,l]=W.useState(""),[c,h]=W.useState("semantic"),[d,p]=W.useState(50),[g,y]=W.useState(!1);W.useEffect(()=>{const x=n.metadata||{};s(x.title||""),l(n.content||""),h(n.memory_type||"semantic");let E=x.importance||.5;E<=1&&(E=E*100),p(Math.round(E))},[n]);const _=async()=>{y(!0);try{await t(n.id,{content:a,memory_type:c,metadata:{...n.metadata,title:i,importance:d/100}})}finally{y(!1)}},S=async()=>{confirm("Are you sure you want to delete this memory node?")&&(await r(n.id),e())};return B.jsxs("div",{className:"h-full bg-neutral-900/90 backdrop-blur-md border-l border-neutral-800 p-6 flex flex-col overflow-y-auto",children:[B.jsxs("div",{className:"flex items-center justify-between mb-8",children:[B.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 font-bold tracking-wider text-sm",children:[B.jsx(DS,{size:16}),"NODE DETAILS"]}),B.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-white transition-colors",children:B.jsx(o_,{size:20})})]}),B.jsxs("div",{className:"space-y-6 flex-1",children:[B.jsxs("div",{className:"space-y-2",children:[B.jsx("label",{className:"text-xs font-semibold text-neutral-400 uppercase",children:"Title"}),B.jsx("input",{type:"text",value:i,onChange:x=>s(x.target.value),placeholder:"Node title...",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2 text-white focus:border-cyan-500/50 focus:outline-none transition-colors font-mono text-sm"})]}),B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsxs("div",{className:"space-y-2",children:[B.jsx("label",{className:"text-xs font-semibold text-neutral-400 uppercase",children:"Type"}),B.jsxs("select",{value:c,onChange:x=>h(x.target.value),className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-3 py-2 text-white focus:border-cyan-500/50 focus:outline-none transition-colors font-mono text-sm appearance-none",children:[B.jsx("option",{value:"semantic",children:"Semantic"}),B.jsx("option",{value:"episodic",children:"Episodic"}),B.jsx("option",{value:"short_term",children:"Short Term"}),B.jsx("option",{value:"procedural",children:"Procedural"})]})]}),B.jsxs("div",{className:"space-y-2",children:[B.jsxs("label",{className:"text-xs font-semibold text-neutral-400 uppercase flex justify-between",children:["Importance",B.jsxs("span",{className:"text-cyan-400",children:[d,"%"]})]}),B.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:x=>p(parseInt(x.target.value)),className:"w-full h-2 bg-neutral-800 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]})]}),B.jsxs("div",{className:"space-y-2 flex-1",children:[B.jsx("label",{className:"text-xs font-semibold text-neutral-400 uppercase",children:"Content"}),B.jsx("textarea",{value:a,onChange:x=>l(x.target.value),placeholder:"Node content...",className:"w-full h-40 bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-3 text-neutral-300 focus:border-cyan-500/50 focus:outline-none transition-colors resize-none font-mono text-sm leading-relaxed"})]}),B.jsxs("div",{className:"p-4 bg-neutral-800/30 rounded-lg border border-neutral-800/50 space-y-2 text-xs text-neutral-500 font-mono",children:[B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx(AG,{size:12}),"Created: ",Nw(new Date(n.created_at),{addSuffix:!0})]}),n.tags&&n.tags.length>0&&B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx(DG,{size:12}),"Tags: ",n.tags.join(", ")]}),B.jsxs("div",{children:["ID: ",n.id]})]})]}),B.jsxs("div",{className:"mt-8 flex gap-3 pt-6 border-t border-neutral-800",children:[B.jsxs("button",{onClick:_,disabled:g,className:"flex-1 bg-cyan-600/20 hover:bg-cyan-600/30 text-cyan-400 border border-cyan-600/50 rounded-lg py-2 font-medium transition-all flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50",children:[B.jsx(ate,{size:16}),g?"Saving...":"Save Changes"]}),B.jsx("button",{onClick:S,className:"px-4 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 rounded-lg py-2 transition-all flex items-center justify-center",title:"Delete Memory",children:B.jsx(kG,{size:16})})]})]})},dge=()=>{const{memories:n,isLoading:e,fetchMemories:t,deleteAllMemories:r,setFilter:i,setSearchQuery:s,filter:a}=qV(),[l,c]=W.useState(""),[h,d]=W.useState(null);W.useEffect(()=>{t()},[t]),W.useEffect(()=>{const _=setTimeout(()=>{s(l)},500);return()=>clearTimeout(_)},[l,s]);const p=async()=>{confirm(`WARNING: This will delete ALL memories except core profile data. This action cannot be undone.

Are you sure you want to proceed?`)&&await r(["personal","name","preference","goal","goals","relationship","relationships"])},g=_=>{switch(_){case"episodic":return"text-blue-400 bg-blue-400/10 border-blue-400/20";case"semantic":return"text-purple-400 bg-purple-400/10 border-purple-400/20";case"procedural":return"text-green-400 bg-green-400/10 border-green-400/20";default:return"text-neutral-400 bg-neutral-400/10 border-neutral-400/20"}},y=n.find(_=>_.id===h);return B.jsxs("div",{className:"flex bg-neutral-950 h-screen overflow-hidden",children:[B.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[B.jsxs("div",{className:"px-8 py-6 border-b border-neutral-800 bg-neutral-900/50 backdrop-blur-sm z-10",children:[B.jsxs("div",{className:"flex items-center justify-between mb-6",children:[B.jsxs("div",{children:[B.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[B.jsx(DS,{className:"text-cyan-500",size:32}),"Memory Systems"]}),B.jsx("p",{className:"text-neutral-400 mt-1",children:"View and manage Vanta's long-term recurring memories."})]}),B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsxs("div",{className:"text-neutral-500 text-sm",children:[n.length," nodes"]}),B.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/30 rounded-lg hover:bg-red-500/20 transition-colors text-sm font-medium",children:[B.jsx(OG,{size:14}),"PURGE ALL"]})]})]}),B.jsxs("div",{className:"flex gap-4",children:[B.jsxs("div",{className:"relative flex-1 max-w-xl",children:[B.jsx(lte,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500",size:18}),B.jsx("input",{type:"text",value:l,onChange:_=>c(_.target.value),placeholder:"Search memories...",className:"w-full bg-neutral-900 border border-neutral-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500/50"})]}),B.jsx("div",{className:"flex items-center gap-2 bg-neutral-900 border border-neutral-700 rounded-lg p-1",children:["all","episodic","semantic","procedural"].map(_=>B.jsx("button",{onClick:()=>i(_==="all"?null:_),className:Yt("px-4 py-1.5 rounded-md text-sm font-medium transition-all capitalize",_==="all"&&!a||a===_?"bg-neutral-700 text-white shadow-sm":"text-neutral-400 hover:text-white hover:bg-neutral-800"),children:_},_))})]})]}),B.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e?B.jsx("div",{className:"flex justify-center py-20",children:B.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cyan-500"})}):n.length===0?B.jsxs("div",{className:"text-center py-20 text-neutral-500",children:[B.jsx(DS,{size:48,className:"mx-auto mb-4 opacity-20"}),B.jsx("p",{children:"No memories found matching your criteria."})]}):B.jsx("div",{className:Yt("grid gap-4 transition-all",y?"grid-cols-1 md:grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"),children:n.map(_=>B.jsxs("div",{onClick:()=>d(_.id),className:Yt("group bg-neutral-900/50 border rounded-xl p-5 cursor-pointer transition-all hover:shadow-lg relative",h===_.id?"border-cyan-500/50 bg-cyan-900/10 shadow-[0_0_15px_rgba(6,182,212,0.15)]":"border-neutral-800 hover:border-neutral-700 hover:bg-neutral-900"),children:[B.jsx("div",{className:"flex justify-between items-start mb-3",children:B.jsx("span",{className:Yt("text-xs px-2 py-1 rounded-full border font-medium capitalize",g(_.memory_type)),children:_.memory_type})}),B.jsx("p",{className:"text-neutral-200 mb-4 line-clamp-4 leading-relaxed text-sm",children:_.content}),B.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500 mt-auto pt-4 border-t border-neutral-800/50",children:[B.jsxs("div",{className:"flex items-center gap-1.5",children:[B.jsx(AG,{size:12}),Nw(new Date(_.created_at),{addSuffix:!0})]}),_.tags&&_.tags.length>0&&B.jsxs("div",{className:"flex items-center gap-1.5",children:[B.jsx(DG,{size:12}),B.jsxs("span",{className:"truncate max-w-[100px]",children:[_.tags.slice(0,2).join(", "),_.tags.length>2&&` +${_.tags.length-2}`]})]})]})]},_.id))})})]}),y&&B.jsx("div",{className:"w-[400px] border-l border-neutral-800 flex-shrink-0 animate-in slide-in-from-right duration-300",children:B.jsx(hge,{memory:y,onClose:()=>d(null)})})]})},OC=l_((n,e)=>({settings:{voice_enabled:!0,voice_volume:.8,personality_verbosity:.7,personality_energy:.6,theme:"cyberpunk",avatar_scale:.3,avatar_x:0,avatar_y:100,empathy_level:.9,humor_level:.6,creativity_level:.7,assertiveness_level:.5,curiosity_level:.8,patience_level:.8,response_style:"balanced",emotional_memory:!0},isLoading:!1,isSaving:!1,fetchSettings:async()=>{n({isLoading:!0});try{const t=await cr.get("/api/settings");n({settings:t.data})}catch(t){console.error("Failed to fetch settings:",t)}finally{n({isLoading:!1})}},updateSettings:async t=>{n({isSaving:!0});try{const r=e().settings;n({settings:{...r,...t}}),await cr.patch("/api/settings",t)}catch(r){console.error("Failed to update settings:",r)}finally{n({isSaving:!1})}}})),EO=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:OC},Symbol.toStringTag,{value:"Module"})),Du=({label:n,value:e,onChange:t,min:r=0,max:i=1,step:s=.05,description:a})=>{const[l,c]=xl.useState(e);xl.useEffect(()=>{c(e)},[e]);const h=()=>{l!==e&&t(l)};return B.jsxs("div",{className:"space-y-2",children:[B.jsxs("div",{className:"flex justify-between items-center",children:[B.jsx("label",{className:"text-sm font-medium text-cyan-300",children:n}),B.jsxs("span",{className:"text-xs text-cyan-500 font-mono",children:[(l*100).toFixed(0),"%"]})]}),B.jsx("input",{type:"range",min:r,max:i,step:s,value:l,onChange:d=>c(parseFloat(d.target.value)),onMouseUp:h,onTouchEnd:h,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 hover:accent-cyan-400 transition-all"}),a&&B.jsx("p",{className:"text-xs text-gray-500",children:a})]})},fge=({label:n,checked:e,onChange:t,description:r})=>B.jsxs("div",{className:"flex items-start justify-between space-x-4 p-3 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[B.jsxs("div",{className:"space-y-1",children:[B.jsx("span",{className:"text-sm font-medium text-cyan-300 block",children:n}),r&&B.jsx("p",{className:"text-xs text-gray-500",children:r})]}),B.jsx("button",{onClick:()=>t(!e),className:`
                relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900
                ${e?"bg-cyan-600":"bg-gray-700"}
            `,children:B.jsx("span",{className:`
                    inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                    ${e?"translate-x-6":"translate-x-1"}
                `})})]}),pge=({label:n,value:e,onChange:t,options:r,description:i})=>B.jsxs("div",{className:"space-y-2",children:[B.jsx("label",{className:"text-sm font-medium text-cyan-300 block",children:n}),B.jsx("select",{value:e,onChange:s=>t(s.target.value),className:"w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block p-2.5",children:r.map(s=>B.jsx("option",{value:s.value,children:s.label},s.value))}),i&&B.jsx("p",{className:"text-xs text-gray-500",children:i})]}),wO={balanced:{empathy_level:.7,humor_level:.6,creativity_level:.6,assertiveness_level:.5,curiosity_level:.7,patience_level:.7,response_style:"balanced"},empathetic:{empathy_level:.95,humor_level:.4,creativity_level:.6,assertiveness_level:.3,curiosity_level:.8,patience_level:.9,response_style:"empathetic"},professional:{empathy_level:.5,humor_level:.2,creativity_level:.4,assertiveness_level:.7,curiosity_level:.6,patience_level:.8,response_style:"professional"},creative:{empathy_level:.8,humor_level:.8,creativity_level:.95,assertiveness_level:.6,curiosity_level:.9,patience_level:.6,response_style:"creative"},chaotic:{empathy_level:.4,humor_level:.9,creativity_level:.9,assertiveness_level:.8,curiosity_level:.9,patience_level:.3,response_style:"chaotic"}},mge=()=>{const{settings:n,updateSettings:e}=OC(),t=r=>{const i=wO[r];i&&e(i)};return B.jsxs("div",{className:"space-y-8 p-1",children:[B.jsxs("div",{className:"bg-cyan-900/20 border border-cyan-800/50 rounded-lg p-4",children:[B.jsx("h3",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Vanta Personality Engine"}),B.jsx("p",{className:"text-sm text-gray-300",children:"Fine-tune Vanta's emotional intelligence and behavioral traits. Changes are applied in real-time to the next interaction."})]}),B.jsxs("div",{className:"space-y-3",children:[B.jsx("label",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Quick Presets"}),B.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:Object.keys(wO).map(r=>B.jsx("button",{onClick:()=>t(r),className:`
                                px-3 py-2 text-xs font-medium rounded-md capitalize transition-all border
                                ${n.response_style===r?"bg-cyan-600 text-white border-cyan-500 shadow-lg shadow-cyan-900/50":"bg-gray-800 text-gray-400 border-gray-700 hover:bg-gray-700 hover:text-gray-200"}
                            `,children:r},r))})]}),B.jsxs("div",{className:"space-y-4",children:[B.jsx("label",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider border-b border-gray-800 pb-2 block",children:"Core Configuation"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsx(Du,{label:"Empathy",value:n.empathy_level??.7,onChange:r=>e({empathy_level:r}),description:"Ability to understand and share feelings."}),B.jsx(Du,{label:"Humor",value:n.humor_level??.6,onChange:r=>e({humor_level:r}),description:"Frequency and style of jokes/wit."}),B.jsx(Du,{label:"Creativity",value:n.creativity_level??.6,onChange:r=>e({creativity_level:r}),description:"Imaginative and abstract thinking."}),B.jsx(Du,{label:"Assertiveness",value:n.assertiveness_level??.5,onChange:r=>e({assertiveness_level:r}),description:"Directness and confidence in opinions."}),B.jsx(Du,{label:"Curiosity",value:n.curiosity_level??.7,onChange:r=>e({curiosity_level:r}),description:"Tendency to ask questions and explore topics."}),B.jsx(Du,{label:"Patience",value:n.patience_level??.7,onChange:r=>e({patience_level:r}),description:"Tolerance for repetition and slow progress."})]})]}),B.jsxs("div",{className:"space-y-4",children:[B.jsx("label",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider border-b border-gray-800 pb-2 block",children:"Behavioral Style"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsx(pge,{label:"Response Style",value:n.response_style??"balanced",onChange:r=>e({response_style:r}),options:[{value:"balanced",label:"Balanced (Default)"},{value:"empathetic",label:"Empathetic & Supportive"},{value:"professional",label:"Professional & Objective"},{value:"creative",label:"Creative & Abstract"},{value:"direct",label:"Direct & Concise"},{value:"chaotic",label:"Chaotic & Unpredictable"}],description:"Defines the overall tone and structure of responses."}),B.jsx(fge,{label:"Emotional Memory",checked:n.emotional_memory??!0,onChange:r=>e({emotional_memory:r}),description:"Allow Vanta to remember emotional context across sessions."})]})]})]})},gge=()=>{const{settings:n,fetchSettings:e,updateSettings:t}=OC(),[r,i]=W.useState(n),[s,a]=W.useState("general");W.useEffect(()=>{e()},[e]),W.useEffect(()=>{i(n)},[n]);const l=(h,d)=>{i(p=>({...p,[h]:d}))},c=h=>{t({[h]:r[h]})};return B.jsxs("div",{className:"flex flex-col h-full bg-neutral-950 text-white overflow-hidden",children:[B.jsxs("div",{className:"px-8 py-6 border-b border-neutral-800 bg-neutral-900/50 backdrop-blur-sm sticky top-0 z-10 shrink-0",children:[B.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[B.jsx(WD,{className:"text-cyan-500",size:32}),"Cortex Tuner"]}),B.jsx("p",{className:"text-neutral-400 mt-1",children:"Calibrate Vanta's system behavior and personality matrix."}),B.jsxs("div",{className:"flex space-x-6 mt-6 border-b border-neutral-800",children:[B.jsxs("button",{onClick:()=>a("general"),className:`pb-3 px-1 text-sm font-medium transition-colors relative flex items-center gap-2 ${s==="general"?"text-cyan-400":"text-gray-400 hover:text-gray-300"}`,children:[B.jsx(BG,{size:16}),"General",s==="general"&&B.jsx(ud.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)]"})]}),B.jsxs("button",{onClick:()=>a("personality"),className:`pb-3 px-1 text-sm font-medium transition-colors relative flex items-center gap-2 ${s==="personality"?"text-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[B.jsx(Aee,{size:16}),"Personality Matrix",s==="personality"&&B.jsx(ud.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-400 shadow-[0_0_10px_rgba(192,132,252,0.5)]"})]})]})]}),B.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:B.jsx("div",{className:"max-w-3xl mx-auto w-full",children:B.jsx(nme,{mode:"wait",children:s==="general"?B.jsxs(ud.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"space-y-12",children:[B.jsxs("section",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 font-bold tracking-wider text-sm border-b border-neutral-800 pb-2",children:[B.jsx(Jee,{size:18}),"BIO-DIGITAL VOICE"]}),B.jsxs("div",{className:"bg-neutral-900/50 border border-neutral-800 rounded-xl p-6 space-y-8",children:[B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-medium text-lg",children:"Voice Synthesis"}),B.jsx("p",{className:"text-neutral-400 text-sm",children:"Enable AI text-to-speech output"})]}),B.jsx("button",{onClick:()=>t({voice_enabled:!n.voice_enabled}),className:Yt("relative w-14 h-7 rounded-full transition-colors duration-200 ease-in-out",n.voice_enabled?"bg-cyan-600":"bg-neutral-700"),children:B.jsx("span",{className:Yt("absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform duration-200",n.voice_enabled?"translate-x-7":"translate-x-0")})})]}),B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[B.jsx("span",{children:"Output Volume"}),B.jsxs("span",{className:"text-cyan-400",children:[Math.round((n.voice_volume||.8)*100),"%"]})]}),B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx(Ste,{size:18,className:"text-neutral-500"}),B.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:r.voice_volume||.8,onChange:h=>l("voice_volume",parseFloat(h.target.value)),onMouseUp:()=>c("voice_volume"),onTouchEnd:()=>c("voice_volume"),className:"flex-1 h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),B.jsx(xte,{size:18,className:"text-neutral-500"})]})]})]})]}),B.jsxs("section",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-bold tracking-wider text-sm border-b border-neutral-800 pb-2",children:[B.jsx(WD,{size:18}),"COMMUNICATION STYLE"]}),B.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[B.jsxs("div",{className:"bg-neutral-900/50 border border-neutral-800 rounded-xl p-6 space-y-4",children:[B.jsxs("div",{className:"flex justify-between items-start",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-medium",children:"Verbosity"}),B.jsx("p",{className:"text-neutral-400 text-xs mt-1",children:"Response length & detail"})]}),B.jsx("span",{className:"text-xs font-mono bg-neutral-800 px-2 py-1 rounded text-cyan-400",children:(n.personality_verbosity||.7).toFixed(1)})]}),B.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:r.personality_verbosity||.7,onChange:h=>l("personality_verbosity",parseFloat(h.target.value)),onMouseUp:()=>c("personality_verbosity"),onTouchEnd:()=>c("personality_verbosity"),className:"w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"}),B.jsxs("div",{className:"flex justify-between text-xs text-neutral-500",children:[B.jsx("span",{children:"Concise"}),B.jsx("span",{children:"Detailed"})]})]}),B.jsxs("div",{className:"bg-neutral-900/50 border border-neutral-800 rounded-xl p-6 space-y-4",children:[B.jsxs("div",{className:"flex justify-between items-start",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"font-medium",children:"Energy"}),B.jsx("p",{className:"text-neutral-400 text-xs mt-1",children:"Emotional expressiveness"})]}),B.jsx("span",{className:"text-xs font-mono bg-neutral-800 px-2 py-1 rounded text-cyan-400",children:(n.personality_energy||.6).toFixed(1)})]}),B.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:r.personality_energy||.6,onChange:h=>l("personality_energy",parseFloat(h.target.value)),onMouseUp:()=>c("personality_energy"),onTouchEnd:()=>c("personality_energy"),className:"w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-purple-500"}),B.jsxs("div",{className:"flex justify-between text-xs text-neutral-500",children:[B.jsx("span",{children:"Reserved"}),B.jsx("span",{children:"Excited"})]})]})]})]}),B.jsxs("section",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-bold tracking-wider text-sm border-b border-neutral-800 pb-2",children:[B.jsx(tte,{size:18}),"VISUAL INTERFACE"]}),B.jsxs("div",{className:"bg-neutral-900/50 border border-neutral-800 rounded-xl p-6",children:[B.jsx("div",{className:"flex gap-4 mb-6",children:["cyberpunk","minimal","classic"].map(h=>B.jsx("button",{onClick:()=>t({theme:h}),className:Yt("flex-1 py-4 border rounded-lg transition-all capitalize font-medium",n.theme===h?"bg-cyan-900/20 border-cyan-500 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.15)]":"bg-neutral-800/50 border-neutral-700 text-neutral-400 hover:bg-neutral-800 hover:text-white"),children:h},h))}),B.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-800",children:[B.jsx("h3",{className:"font-medium",children:"Avatar Customization"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[B.jsxs("div",{children:[B.jsxs("label",{className:"text-xs text-neutral-500 block mb-1",children:["Scale: ",(r.avatar_scale||.3).toFixed(2)]}),B.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.01",value:r.avatar_scale||.3,onChange:h=>l("avatar_scale",parseFloat(h.target.value)),onMouseUp:()=>c("avatar_scale"),onTouchEnd:()=>c("avatar_scale"),className:"w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),B.jsxs("div",{children:[B.jsxs("label",{className:"text-xs text-neutral-500 block mb-1",children:["X Offset: ",r.avatar_x||0]}),B.jsx("input",{type:"range",min:"-500",max:"500",step:"10",value:r.avatar_x||0,onChange:h=>l("avatar_x",parseFloat(h.target.value)),onMouseUp:()=>c("avatar_x"),onTouchEnd:()=>c("avatar_x"),className:"w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),B.jsxs("div",{children:[B.jsxs("label",{className:"text-xs text-neutral-500 block mb-1",children:["Y Offset: ",r.avatar_y||100]}),B.jsx("input",{type:"range",min:"-500",max:"500",step:"10",value:r.avatar_y||100,onChange:h=>l("avatar_y",parseFloat(h.target.value)),onMouseUp:()=>c("avatar_y"),onTouchEnd:()=>c("avatar_y"),className:"w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-green-500"})]})]})]})]})]})]},"general"):B.jsx(ud.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:B.jsx(mge,{})},"personality")})})})]})};function yge(){return B.jsx(gee,{children:B.jsxs(sQ,{children:[B.jsx(co,{path:"/login",element:B.jsx(Kne,{})}),B.jsxs(co,{element:B.jsx(yee,{children:B.jsx(Yne,{})}),children:[B.jsx(co,{path:"/",element:B.jsx(SO,{})}),B.jsx(co,{path:"/c/:threadId",element:B.jsx(SO,{})}),B.jsx(co,{path:"/memory",element:B.jsx(dge,{})}),B.jsx(co,{path:"/settings",element:B.jsx(gge,{})})]}),B.jsx(co,{path:"*",element:B.jsx(Cw,{to:"/",replace:!0})})]})})}iZ.createRoot(document.getElementById("root")).render(B.jsx(xl.StrictMode,{children:B.jsx(RQ,{children:B.jsx(yge,{})})}));export{Fj as A,bn as C,YL as E,PW as F,Uj as a,gF as b,mF as c,ze as e};
